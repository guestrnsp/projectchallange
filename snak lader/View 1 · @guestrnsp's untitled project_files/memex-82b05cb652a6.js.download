"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["memex","ui_packages_soft-nav_soft-nav_ts"],{58755:(e,t,r)=>{let a,n,l,i,s;var o,d,c,u,m,p,f,h,g,x,y,b,v,w,j,C,k,S,I,N,_,T,R,E,D,P,A,M,L,F,Z,O,B,V,$,z,U,W,H,G,q,K,Q,Y,X,J,ee,et,er,ea,en,el,ei,es,eo,ed,ec,eu,em,ep,ef,eh,eg,ex,ey,eb,ev,ew,ej,eC,ek,eS,eI,eN,e_,eT,eR,eE,eD,eP,eA,eM,eL,eF,eZ,eO,eB,eV,e$,ez,eU,eW,eH,eG,eq,eK,eQ,eY,eX,eJ,e0,e1,e2,e5,e3,e4,e6,e7,e8,e9,te,tt,tr,ta,tn,tl,ti,ts,to,td,tc,tu,tm,tp,tf,th,tg,tx,ty,tb,tv,tw,tj,tC,tk,tS,tI,tN,t_,tT,tR,tE,tD,tP,tA,tM,tL,tF,tZ,tO,tB,tV,t$,tz,tU,tW,tH,tG,tq,tK,tQ,tY,tX,tJ,t0,t1,t2,t5,t3,t4,t6,t7,t8,t9,re,rt,rr,ra,rn,rl,ri,rs,ro,rd,rc,ru,rm,rp,rf,rh,rg,rx,ry,rb,rv,rw,rj,rC,rk,rS,rI,rN,r_,rT,rR,rE,rD,rP,rA,rM,rL,rF,rZ,rO,rB,rV,r$,rz,rU,rW,rH,rG,rq,rK,rQ,rY,rX,rJ,r0,r1,r2,r5,r3,r4,r6,r7,r8,r9,ae,at,ar,aa,an,al,ai,as,ao,ad,ac,au,am,ap,af,ah,ag,ax,ay,ab,av,aw,aj,aC,ak,aS,aI,aN,a_,aT,aR,aE,aD,aP,aA,aM,aL,aF,aZ,aO,aB,aV,a$,az,aU,aW,aH,aG,aq,aK,aQ,aY,aX,aJ,a0,a1,a2,a5,a3,a4,a6,a7,a8,a9,ne,nt,nr,na,nn,nl,ni,ns,no,nd,nc,nu,nm,np,nf,nh,ng,nx,ny,nb,nv,nw,nj,nC,nk,nS,nI,nN,n_,nT,nR,nE,nD,nP,nA,nM,nL,nF,nZ,nO,nB,nV,n$,nz,nU,nW,nH,nG,nq,nK,nQ,nY,nX,nJ,n0,n1,n2,n5,n3,n4,n6,n7,n8,n9,le,lt,lr,la,ln,ll,li,ls,lo,ld,lc,lu,lm,lp,lf,lh,lg,lx,ly,lb,lv,lw,lj,lC,lk,lS,lI,lN,l_,lT,lR,lE,lD,lP,lA,lM,lL,lF,lZ,lO,lB,lV,l$,lz,lU,lW,lH,lG,lq,lK,lQ,lY,lX,lJ,l0,l1,l2,l5,l3,l4,l6,l7,l8,l9,ie,it,ir,ia,il,ii,is,io,id,ic,iu,im,ip,ih,ig,ix,iy,ib,iv,iw,ij,iC,ik,iS,iI,iN,i_,iT,iR,iE,iD,iP,iA,iM,iL,iF,iZ,iO,iB,iV,i$,iz,iU,iW,iH,iG,iq,iK,iQ,iY,iX,iJ,i0,i1,i2,i5,i3,i4,i6,i7,i8,i9,se,st,sr,sa,sn,sl,si,ss,so,sd,sc,su,sm,sp,sf,sh,sg,sx,sy,sb,sv,sw,sj,sC,sk,sS,sI,sN,s_,sT,sR,sE,sD,sP,sA,sM,sL,sF,sZ,sO,sB,sV,s$,sz,sU,sW,sH,sG,sq,sK,sQ,sY,sX,sJ,s0,s1,s2,s5,s3,s4,s6,s7,s8,s9,oe,ot,or,oa,on,ol,oi,os,oo,od,oc,ou,om,op,of,oh,og,ox,oy,ob,ov,ow,oj,oC,ok,oS,oI,oN,o_,oT,oR,oE,oD,oP,oA,oM,oL,oF,oZ,oO,oB,oV,o$,oz,oU,oW,oH,oG,oq,oK,oQ,oY,oX,oJ,o0,o1,o2,o5,o3,o4,o6,o7,o8,o9,de,dt,dr,da,dn,dl,di,ds,dd,dc,du,dm,dp,df,dh,dg,dx,dy,db,dv,dw,dj,dC,dk,dS,dI,dN,d_,dT,dR,dE,dD,dP,dA,dM,dL,dF,dZ,dO,dB,dV,d$,dz,dU,dW,dH,dG,dq,dK,dQ,dY,dX,dJ,d0,d1,d2,d5,d3,d4,d6,d7,d8,d9,ce,ct,cr,ca,cn,cl,ci,cs,co,cd,cc,cu,cm,cp,cf,ch,cg,cx,cy,cb,cv,cw,cj,cC,ck,cS,cI,cN,c_,cT,cR,cE,cD,cP,cA,cM,cL,cF,cZ,cO,cB,cV,c$,cz,cU,cW,cH,cG,cq,cK,cQ,cY,cX,cJ,c0,c1,c2,c5,c3,c4,c6,c7,c8,c9,ue,ut,ur,ua,un,ul,ui,us,uo,ud,uc,uu,um,up,uf,uh,ug,ux,uy,ub,uv,uw,uj,uC,uk,uS,uI,uN,u_,uT,uR,uE,uD,uP,uA,uM,uL,uF,uZ,uO=r(85893),uB=r(51145),uV=r(20745),u$=r(11334),uz=r(8386),uU=r(27233),uW=r(85945),uH=r(90041),uG=r(42379),uq=r(67294),uK=r.t(uq,2),uQ=r(7838),uY=r(84384),uX=r(12599),uJ=r(15388),u0=r(38776);function u1(e,t){return Array.from(mi(e,t).values.entries())}function u2(e,t=[]){let r=t.reduce((e,t)=>(me(t)?e.set(t[0],u5(t[1],t[2],t[3])):e.set(t[0],u2(t[1],t[2])),e),new Map);return{description:e,values:r}}function u5(e,t,r){return{description:e,type:t,effect:r}}function u3(e,t,r=[]){if(0===t.length)return e;let a=t[0];if((0,u0.Z)(null!=a,"Path must have at least one item"),1===t.length)return mr(e,a);let n=mi(e,a,r);return u3(n,t.slice(1),[...r,a])}function*u4(e,t=[]){for(let[r,a]of e.values.entries())t=[...t,r],yield[t,a],u9(a)&&(yield*u4(a,t)),t=t.slice(0,-1)}function u6(e,t){if(me(t)){let r=u5(t[1],t[2],t[3]);return ma(e,t[0],r)}let[r,a,n]=t,l=u2(a,n);return ma(e,r,l)}function u7(e,[t]){return mn(e,t)}function u8(e){return!u9(e)}function u9(e){return"values"in e}function me(e){return!mt(e)}function mt(e){return Array.isArray(e[2])}function mr(e,t){return e.values.get(t)??null}function ma(e,t,r){let a=new Map(e.values);return a.set(t,r),{...e,values:a}}function mn(e,t){let r=new Map(e.values);return r.delete(t),{...e,values:r}}function ml(e,t,r=[]){let a="string"==typeof t?[t]:t,n=u3(e,a);if(!n)return null;if(u8(n))throw Error(`Command at path where command tree expected: ${[...r,...a].join(",")}`);return n}function mi(e,t,r=[]){let a="string"==typeof t?[t]:t,n=ml(e,a,r);if(!n)throw Error(`Command tree does not exist at path: ${[...r,...a].join(",")}`);return n}let ms=(0,uq.createContext)(null);try{(o=ms).displayName||(o.displayName="StatelessContext")}catch{}var mo=r(93345);function md(e,t){let r=mc(e[0]),a=mc(t[0]);return r&&a?Number(e[0])-Number(t[0]):r&&!a?1:!r&&a?-1:e[0].localeCompare(t[0])}function mc(e){return/^\d+$/.test(e)}let MemexCommandItem=class MemexCommandItem extends mo.ck{activate(e){u9(this.memexItem)?e.pushPage(this.staticItemsPage()):(this.memexItem.effect(),e.dismiss())}copy(e){}select(e){u9(this.memexItem)?e.pushPage(this.staticItemsPage()):e.autocomplete(this)}get path(){}buildCommandItems(){if(!u9(this.memexItem))return;let e=u1(this.memexItem,[]).sort(md);for(let[t,r]of e)this.commandItems.push(new MemexCommandItem(r.description,t,r))}staticItemsPage(){return new mo.Z4(this.title,`memex-items-page-${this.memexKey}`,this.commandItems)}constructor(e,t,r){super({title:e,priority:1,group:"commands",hint:"Run command"}),this.commandItems=[],this.memexKey=t,this.memexItem=r,this.buildCommandItems()}};let MemexProvider=class MemexProvider extends mo.BX{clearCache(){}enabledFor(e){let t=">"===e.mode||""===e.mode,r="memex_project"===e.scope.type;return t&&r}async fetch(e,t){let r=[...this.commandItems];if(0!==e.text.trim().length){let t=[];for(let[e,r]of u4(this.commandTree))u8(r)&&t.push([e,r]);for(let[e,a]of t)r.push(new MemexCommandItem(a.description,e.join("-"),a));r=this.fuzzyFilter(r,e)}return{results:r}}buildCommandItems(){let e=u1(this.commandTree,[]).sort(md);for(let[t,r]of e)this.commandItems.push(new MemexCommandItem(r.description,t,r));for(let[e,t]of this.commandItems.entries())t.priority=this.commandItems.length-e}constructor(e){super(),this.id="memex-provider",this.hasCommands=!0,this.debounce=0,this.commandItems=[],this.commandTree=e,this.buildCommandItems()}};let mu=(0,uq.memo)(function({children:e}){let[t,r]=(0,uq.useState)(u2("root")),[a,n]=(0,uq.useState)([]),[l,i]=(0,uq.useState)([]);(0,uq.useEffect)(()=>{if(0===l.length&&0===a.length)return;let e=t;e=a.reduce(u7,e),r(e=l.reduce(u6,e));let s=l.length,o=a.length;i(e=>e.slice(s)),n(e=>e.slice(o))},[a,l,t]);let s=(0,uq.useMemo)(()=>({registerCommands:e=>{i(t=>[...t,e])},deregisterCommands:e=>{n(t=>[...t,e])}}),[]);return(0,uq.useEffect)(()=>{function e(){window.commandPalette?.registerProvider("memex-provider",new MemexProvider(t))}return window.commandPalette?e():document.addEventListener("command-palette-ready",e),()=>{document.removeEventListener("command-palette-ready",e)}},[t]),(0,uO.jsx)(ms.Provider,{value:s,children:e})});try{(d=mu).displayName||(d.displayName="CommandProvider")}catch{}function mm(e,t){let r=(0,uq.useContext)(ms);if(!r)throw Error("useCommands must be used within a <CommandProvider>");let{registerCommands:a,deregisterCommands:n}=r,l=(0,uq.useMemo)(e,t);(0,uq.useEffect)(()=>{if(l)return a(l),()=>n(l)},[l,n,a])}var mp=r(75809);let mf=()=>`${window.location.origin}/404`;function mh(){return(0,uq.useEffect)(()=>{window.location.href=mf()},[]),null}function mg(e){return{baseRoute:function t(r){let a=`${e}${r}`,n=`${r}/*`,l=`${a}/*`;return{path:r,pathWithChildPaths:n,fullPath:a,fullPathWithChildPaths:l,generatePath:e=>(0,uX.Gn)(r,e),generateFullPath:e=>(0,uX.Gn)(a,e),matchPath:e=>(0,uX.LX)(r,e),matchFullPath:e=>(0,uX.LX)(a,e),matchPathOrChildPaths:e=>(0,uX.LX)(n,e),matchFullPathOrChildPaths:e=>(0,uX.LX)(l,e),childRoute:e=>t(`${r}${e}`)}}("")}}let{baseRoute:mx}=mg("/:ownerType/:ownerIdentifier/projects/:projectNumber"),my=mx.childRoute("/views/:viewNumber"),mb=mx.childRoute("/workflows"),mv=mb.childRoute("/:workflowClientId"),mw=mx.childRoute("/settings"),mj=mw.childRoute("/fields/:fieldId"),mC=mw.childRoute("/access"),mk=mx.childRoute("/insights"),mS=mk.childRoute("/:insightNumber"),mI=mx.childRoute("/archive"),mN={PROJECT_ROUTE:mx,PROJECT_VIEW_ROUTE:my,PROJECT_WORKFLOWS_ROUTE:mb,PROJECT_WORKFLOW_CLIENT_ID_ROUTE:mv,PROJECT_SETTINGS_ROUTE:mw,PROJECT_SETTINGS_FIELD_ROUTE:mj,PROJECT_INSIGHTS_ROUTE:mk,PROJECT_INSIGHTS_NUMBER_ROUTE:mS,PROJECT_SETTINGS_ACCESS_ROUTE:mC,PROJECT_ARCHIVE_ROUTE:mI},m_=e=>Object.values(mN).find(t=>t.matchPath(e))??null;try{(c=mf).displayName||(c.displayName="ORIGIN_404")}catch{}try{(u=mh).displayName||(u.displayName="Origin404Redirect")}catch{}try{(m=my).displayName||(m.displayName="PROJECT_VIEW_ROUTE")}catch{}try{(p=mb).displayName||(p.displayName="PROJECT_WORKFLOWS_ROUTE")}catch{}try{(f=mv).displayName||(f.displayName="PROJECT_WORKFLOW_CLIENT_ID_ROUTE")}catch{}try{(h=mw).displayName||(h.displayName="PROJECT_SETTINGS_ROUTE")}catch{}try{(g=mj).displayName||(g.displayName="PROJECT_SETTINGS_FIELD_ROUTE")}catch{}try{(x=mC).displayName||(x.displayName="PROJECT_SETTINGS_ACCESS_ROUTE")}catch{}try{(y=mk).displayName||(y.displayName="PROJECT_INSIGHTS_ROUTE")}catch{}try{(b=mS).displayName||(b.displayName="PROJECT_INSIGHTS_NUMBER_ROUTE")}catch{}try{(v=mI).displayName||(v.displayName="PROJECT_ARCHIVE_ROUTE")}catch{}function mT(e){let t=document.getElementById(e);if(t&&t.textContent)try{return JSON.parse(t.textContent)}catch{return}}var mR=r(81996),mE=r(77914);let mD={Assignees:"assignees",Labels:"labels",LinkedPullRequests:"linkedPullRequests",Milestone:"milestone",Repository:"repository",Reviewers:"reviewers",Title:"title",Tracks:"tracks",TrackedBy:"trackedBy",Text:"text",Number:"number",Date:"date",SingleSelect:"singleSelect",Iteration:"iteration"},mP={Assignees:"Assignees",Labels:"Labels",LinkedPullRequests:"Linked pull requests",Milestone:"Milestone",Repository:"Repository",Reviewers:"Reviewers",Status:"Status",Title:"Title",Tracks:"Tracks",TrackedBy:"Tracked by"},mA={DraftIssue:"DraftIssue",Issue:"Issue",PullRequest:"PullRequest",RedactedItem:"RedactedItem"};var mM=r(85529),mL=r(71067),mF=r(42483),mZ=r(15173),mO=r(97011);let mB={success:"success",default:"default",warning:"warning",error:"error"},mV=uJ.ZP.button`
  padding: 8px;
  margin: 8px 10px 8px 0px;
  border-radius: 3px;
  color: ${(0,uG.U2)("colors.fg.onEmphasis")};
  border: 0;
  background: transparent;
  outline: none;
  cursor: pointer;

  /* can be removed if using Primer IconButton component */
  &:focus {
    box-shadow: 0 0 0 2px ${(0,uG.U2)("colors.accent.fg")};
  }
`,m$=e=>(0,uO.jsx)(mV,{"aria-label":"Close",...e,children:(0,uO.jsx)(mL.Z,{icon:mM.b0D})}),mz={[mB.default]:"accent.emphasis",[mB.success]:"success.emphasis",[mB.warning]:"attention.emphasis",[mB.error]:"danger.emphasis"},mU=(0,uO.jsx)(mL.Z,{icon:mM.szr,sx:{color:"fg.onEmphasis"}}),mW=(0,uO.jsx)(mL.Z,{icon:mM.rE2,sx:{color:"fg.onEmphasis"}}),mH=(0,uO.jsx)(mL.Z,{icon:mM.zMQ,sx:{color:"fg.onEmphasis"}}),mG=(0,uO.jsx)(mL.Z,{icon:mM.wNq,sx:{color:"fg.onEmphasis"}}),mq={[mB.default]:mU,[mB.success]:mW,[mB.warning]:mH,[mB.error]:mG},mK=uJ.F4`
  from {
    transform: translateX(-400px);
  }
  to {
    transform: translateX(0);
  }
`,mQ=uJ.F4`
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-460px);
  }

`,mY=(0,uJ.ZP)(mF.Z)`
  flex-shrink: 0;
  padding: ${(0,uG.U2)("space.3")};
`,mX=uJ.ZP.div`
  position: fixed;
  display: flex;
  gap: ${(0,uG.U2)("space.2")};
  box-shadow: ${(0,uG.U2)("shadows.shadow.large")};
  background-color: ${(0,uG.U2)("colors.neutral.emphasisPlus")};
  border-radius: ${(0,uG.U2)("radii.2")};
  align-items: stretch;
  box-sizing: border-box;
  overflow: hidden;
  max-width: 400px;
  bottom: 66px;
  left: 12px;
  z-index: 99;

  animation: ${mK} ${300}ms cubic-bezier(0.25, 1, 0.5, 1);

  &.toast-leave {
    animation: ${mQ} ${300}ms cubic-bezier(0.5, 0, 0.75, 0) forwards;
  }
`,mJ=uJ.ZP.button`
  background-color: transparent;
  border: none;
  font-weight: ${(0,uG.U2)("fontWeights.bold")};
  margin-left: ${(0,uG.U2)("space.2")};

  margin-top: ${(0,uG.U2)("space.3")};
  margin-bottom: ${(0,uG.U2)("space.3")};
  color: ${(0,uG.U2)("colors.fg.onEmphasis")};
  font-size: ${(0,uG.U2)("fontSizes.1")};
  font-family: inherit;
  outline: none;
  padding: 0;
  white-space: nowrap;

  &:hover {
    text-decoration: underline;
  }

  &:focus {
    border-color: transparent;
    box-shadow: 0 0 0 3px ${(0,uG.U2)("colors.border.default")};
  }
  ${mZ.Z}
`,m0=e=>{let{toast:t,startRemovingToast:r}=e,a=(0,uq.useRef)(null);(0,uq.useEffect)(()=>{let e=e=>{a.current&&e.ctrlKey&&"t"===e.key&&(a.current.focus(),t.timeout?.cancel())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]);let n=t.icon?(0,uO.jsx)(mL.Z,{icon:t.icon,sx:{color:"fg.onEmphasis",m:"auto"}}):mq[t.type],l=(0,uq.useCallback)(()=>{t.action?.handleClick(),r(t.id)},[t,r]);return(0,uO.jsxs)(mX,{role:"status",className:t.className,...(0,mp.f)("toast"),children:[(0,uO.jsx)(mY,{sx:{bg:mz[t.type],display:"flex",alignItems:"center"},children:n}),(0,uO.jsx)(mO.Z,{sx:{fontSize:1,mx:2,my:3,color:"fg.onEmphasis"},children:t.message}),t.action&&(0,uO.jsx)(mJ,{ref:a,onClick:l,...(0,mp.f)("toast-action"),children:t.action.text}),(0,uO.jsx)(m$,{onClick:()=>r(t.id)})]})};try{(w=m$).displayName||(w.displayName="ToastCloseButton")}catch{}try{(j=mY).displayName||(j.displayName="IconContainer")}catch{}try{(C=m0).displayName||(C.displayName="Toast")}catch{}function m1(e){let t=(0,uq.useRef)(e);return(0,uq.useLayoutEffect)(()=>{t.current=e},[e]),t}let m2=(e,t)=>{let r=m5(e);return(0,uq.useMemo)(()=>r(t),[r,t])},m5=e=>{let t=(0,uq.useRef)([]);(0,uq.useEffect)(()=>()=>{for(let e of t.current)e.cancel()},[]);let r=m1(e);return(0,uq.useCallback)(e=>(...a)=>{let n=setTimeout(()=>r.current(...a),e),l={cancel:()=>clearTimeout(n)};return t.current.push(l),l},[r])},m3=({autoDismiss:e=!0,timeout:t=5e3}={})=>{let[r,a]=(0,uq.useState)([]),n=t??5e3,l=(0,uq.useRef)(0),i=()=>l.current++,s=(0,uq.useCallback)(e=>r.find(t=>t.id===e),[r]),o=m2(a,300),d=(0,uq.useCallback)(e=>{let t=s(e);t&&(t.timeout?.cancel(),a(e=>e.filter(e=>e.id!==t.id)),t.onDismiss&&t.onDismiss())},[s,a]),c=m2(d,300),u=(0,uq.useCallback)(e=>{a(t=>t.map(t=>t.id===e?{...t,className:"toast-leave"}:t)),c(e)},[c,a]),m=m2(u,n),p=(0,uq.useCallback)(t=>{let n;let l=i();e&&!t.keepAlive&&(n=m(l));let s={id:l,timeout:n,...t},d=r[0];return d?(u(d.id),o([s])):a([s]),l},[e,m,o,u,r]);return{addToast:p,toasts:r,removeToast:d,startRemovingToast:u}},m4=(0,uq.createContext)(null),m6=(0,uq.memo)(function(e){let{autoDismiss:t,timeout:r,children:a}=e,{addToast:n,removeToast:l,toasts:i,...s}=m3({autoDismiss:t,timeout:r}),o=(0,uq.useMemo)(()=>({addToast:n,removeToast:l}),[n,l]);return(0,uO.jsxs)(m4.Provider,{value:o,children:[a,i&&i.map(e=>(0,uO.jsx)(m0,{toast:e,removeToast:l,...s},e.id))]})});try{(k=m4).displayName||(k.displayName="ToastContext")}catch{}try{(S=m6).displayName||(S.displayName="ToastContainer")}catch{}function m7(){let e=(0,uq.useContext)(m4);if(!e)throw Error("useToasts must be used within a ToastContext.Provider");return e}var m8=r(17920);let m9=["GRAY","BLUE","GREEN","YELLOW","ORANGE","RED","PINK","PURPLE"],pe={BLUE:"accent",GREEN:"success",YELLOW:"attention",ORANGE:"severe",RED:"danger",PINK:"sponsors",PURPLE:"done"},pt=(e="GRAY")=>{let{theme:t,resolvedColorScheme:r="light"}=(0,uz.Fg)(),a=pa(r),n=t?.colorSchemes?.[a]?.colors;if("GRAY"===e)return{bg:n?.canvas?.subtle,fg:n?.fg?.muted,border:n?.border?.default,accent:n?.fg?.subtle};{let t=n?.[pe[e]];return{bg:t?.subtle,fg:t?.fg,border:t?.muted,accent:t?.emphasis}}},pr=e=>m9.includes(e),pa=e=>"light_colorblind"===e||"light_tritanopia"===e?"light":"dark_colorblind"===e||"dark_tritanopia"===e?"dark":e;var pn=r(28366),pl=r(77349),pi=r(31952),ps=r(19843),po=r(27856);let pd="@today",pc=/^([1-9][0-9]*)days?$/,pu=/^<@today-([1-9][0-9]*)(d|w|m)$/,pm=/^\s+/,pp=/^,/,pf=/^>/,ph=/^</,pg=/^>=/,px=/^<=/,py=/^\.\./,pb=/^-/,pv=/^\+/,pw=/^:/,pj=/^'/,pC=/^[^']*/,pk=/^"/,pS=/^[^"]*/,pI=/^-?[A-Za-z0-9_][A-Za-z0-9_-]*/,pN=/^([A-Za-z0-9_=!@#$%^*]+)([A-Za-z0-9_\-=!@#$%^*+]*)/,p_=/^@(today|next|previous|current)/,pT=/^(0|[1-9][0-9]*)/,pR=/^[^ ]+/,pE=(e,t,r,a)=>{let n=a>0?r.substring(a):r,l=n.match(e);if(null===l)throw Error(`Tried to emit a '${t}' token, but the pattern (${e.toString()}) did not match. Did you check if the pattern has a token before trying to emit it?

Text: ${n}`);let i={start:a,end:l[0].length-1+a},s={kind:t,text:l[0],location:i},o=n.replace(e,"");return{token:s,remainder:o,length:s.text.length}};function pD(e){let t=[],r=0,a=e=>{"location"in e?(t.push(e),r=e.location.end+1):(t.push({...e,location:{start:r,end:r+e.text.length-1}}),r+=e.text.length)},n=(t,n)=>{let{token:l}=pE(t,n,e,r);return a(l),l},l=(t,a)=>t.test(a??e.substring(r));for(;r<e.length;)if(l(pm))n(pm,"source.whitespace");else if(l(pb))n(pb,"keyword.operator.minus");else if(l(pI)){let{token:t,remainder:i}=pE(pI,"unknown",e,r);if(l(pw,i)?a({...t,kind:"variable"}):a({...t,kind:"string"}),l(pw))for(n(pw,"keyword.operator.separator"),l(pg)?n(pg,"keyword.operator.comparison"):l(pf)?n(pf,"keyword.operator.comparison"):l(px)?n(px,"keyword.operator.comparison"):l(ph)&&n(ph,"keyword.operator.comparison");(l(pN)||l(p_))&&!l(pm);){if(l(p_)){let t=n(p_,"string");if(l(pv))n(pv,"keyword.operator.plus"),l(pT)&&n(pT,"string");else if(l(pb))n(pb,"keyword.operator.minus"),l(pT)&&n(pT,"string");else if(l(pN)){let{token:a}=pE(pN,"string",e,r);t.location.end+=a.text.length,t.text+=a.text,r+=a.text.length}}else l(pN)&&n(pN,"string");l(py)?n(py,"keyword.operator.range"):l(pp)&&n(pp,"punctuation.separator")}}else if(l(pj)||l(pk)){let[t,a]=l(pj)?[pj,pC]:[pk,pS];for(n(t,"punctuation.definition.string.begin");!l(t)&&r<e.length;)l(a)&&n(a,"string");l(t)&&n(t,"punctuation.definition.string.end")}else if(l(pw))n(pw,"keyword.operator.separator");else if(l(pp))n(pp,"punctuation.separator");else if(l(py))n(py,"keyword.operator.range");else if(l(pv))n(pv,"keyword.operator.plus");else if(l(p_)){let t=n(p_,"string");if(l(pv))n(pv,"keyword.operator.plus"),l(pT)&&n(pT,"string");else if(l(pb))n(pb,"keyword.operator.minus"),l(pT)&&n(pT,"string");else if(l(pN)){let{token:a}=pE(pN,"string",e,r);t.location.end+=a.text.length,t.text+=a.text,r+=a.text.length}}else l(pN)?n(pN,"string"):l(pR)&&n(pR,"unknown");return t}let pP=(e,t)=>e.filter(e=>e.location.end<=t),pA=(e,t)=>e.filter(e=>e.location.start>=t),pM=(e,t)=>{let{kind:r,start:a,end:n}=t,l="number"==typeof a?pP(e,a):pP(e,a.location.start),i=Array.isArray(r)?r:[r];for(let e=l.length-1;e>=0;e--){let t=l[e];if((0,u0.Z)(null!=t,"Token must exist"),i.some(e=>t.kind.startsWith(e)))return t;if(n){if("number"==typeof n){if(t.location.end>=n)break}else if(Array.isArray(n)||"string"==typeof n){let e=Array.isArray(n)?n:[n];if(e.includes(t.kind))break}else if(t.location.end>=n.location.start)break}}return null},pL=(e,t)=>{let{kind:r,start:a,end:n}=t,l="number"==typeof a?pA(e,a):pA(e,a.location.start),i=Array.isArray(r)?r:[r];for(let e of l){if(i.some(t=>e.kind.startsWith(t)))return e;if(n){if("number"==typeof n){if(e.location.start>=n)break}else if(Array.isArray(n)||"string"==typeof n){let t=Array.isArray(n)?n:[n];if(t.includes(e.kind))break}else if(e.location.start>=n.location.start)break}}return null};function pF(e,t){let{kinds:r,start:a=0}=t,n=[],l="number"==typeof a?a:a.location.end;for(let t of r){let r=n[n.length-1],a=pA(e,r?r.location.end+1:l),i=a[0];if(!i?.kind.startsWith(t))return null;n.push(i)}return n}function pZ(e){return"object"==typeof e&&!!e&&pz(e,"status")&&pz(e,"message")&&"string"==typeof e.message}function pO(e){return!!pZ(e)&&403===e.status}function pB(e){if(e)switch(e){case mP.Assignees:case mP.Labels:case mP.LinkedPullRequests:case mP.Milestone:case mP.Repository:case mP.Reviewers:case mP.Tracks:case mP.TrackedBy:case mP.Title:case mP.Status:return e;default:{let t=parseInt(e,10);if(isNaN(t))return;return t}}}function pV(e){return Number(e.replace(/,/g,""))}function p$(e,t="yyyy-MM-dd"){let r=pD(e),a=pL(r,{kind:"string",start:0});if(!a)return null;if(a.text===pd){let e=(0,pn.Z)(),t=pF(r,{kinds:["keyword.operator","string"],start:a});if(!t&&r.length>1)return null;if(t){let[r,a]=t;(0,u0.Z)(null!=a,"offset tokens must define offsetValue"),(0,u0.Z)(null!=r,"offset tokens must define offsetOperator");let n=pV(a.text)*("+"===r.text?1:-1);return isNaN(n)?null:(0,pl.Z)(e,n)}return e}let n=(0,pi.Z)(a.text,t,new Date);return(0,ps.Z)(n)?n:null}function pz(e,t){return t in e}function pU(e){if("object"!=typeof e||!e)return null;if(pz(e,"raw")&&"string"==typeof e.raw&&pz(e,"html")&&"string"==typeof e.html){let{raw:t,html:r}=e;return{raw:t,html:r}}return null}function pW(e){return"object"==typeof e&&e&&pz(e,"value")&&"number"==typeof e.value?{value:e.value}:null}function pH(e){return"object"==typeof e&&e&&pz(e,"id")&&"string"==typeof e.id?{id:e.id}:null}function pG(e){return"number"==typeof e}function pq(e){return"object"==typeof e.value}let pK=/(\d{4}-[01]\d-[0-3]\d)/;function pQ(e){return"object"==typeof e&&e?pX(e):null}function pY(e){let t=pQ(e);if(t&&t.value)return p1(t.value,{timeZone:"UTC"})}function pX(e){if(pq(e))return e;let t=pJ(e.value);return t?{value:t}:null}function pJ(e){return(e=e.slice(0,10)).match(pK)?new Date(`${e}T00:00:00Z`):null}let p0={year:"numeric",month:"short",day:"numeric",timeZone:"UTC"};function p1(e,t={}){return e.toLocaleDateString("en-us",{...p0,...t})}function p2(e){return e.toISOString().slice(0,10)}function p5(e){if(!e)return"";let{title:t}=e.value;return"string"==typeof t?t:t.raw}function p3(e){if(!e)return"";let{title:t}=e.value;return"string"==typeof t?t:t.html}function p4(e){return e&&(e.contentType===mA.Issue||e.contentType===mA.PullRequest)?e.value.number:void 0}function p6(e){if(!e)return;if(e?.percent)return e.percent/100;let{total:t,completed:r}=e;if(0!==t)return r/t}function p7(e){if(e?.percent!==void 0)return e.percent;let t=p6(e);return t?Math.round(100*t):0}function p8(e){return e?(0,po.sanitize)(e,{ALLOWED_TAGS:[]}):e}function p9(e){return"object"==typeof e&&"raw"in e}function fe(e){return"object"==typeof e&&"value"in e&&"number"==typeof e.value}function ft(e){return"object"==typeof e&&"value"in e&&"string"==typeof e.value}function fr(e){return"object"==typeof e&&"id"in e}function fa(e){return e.toLowerCase().replace(/^(.)/,e=>e.toUpperCase())}function fn(e,t="and"){if(e.length<=2)return e.join(` ${t} `);{let r=e.pop();return e.push(`${t} ${r}`),e.join(", ")}}function fl(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(let a of r)if(!Object.prototype.hasOwnProperty.call(t,a)||e[a]!==t[a])return!1;return!0}let fi="single-select-option",fs=e=>!!e&&!!e.match(fi),fo=(e,t,r)=>{if("GRAY"===t.color&&r.some(e=>"GRAY"!==e.color)){let e=m9.slice(1),r=e[Math.floor(Math.random()*e.length)]||"PURPLE";t={...t,color:r}}return{...t,id:`${fi}-${e}`}},fd=e=>p2(new Date)===e;function fc(e){return Boolean(e)}function fu(e){return e.filter(fc)}function fm(e){return void 0!==e}let fp=RegExp('<img.+class=".*\\bemoji\\b.*".+title="(?<emoji>:[^:]+:)".+>\\s+(?<text>.*)|<g-emoji.+>(?<gemoji>.+)<\\/g-emoji>\\s+(?<gtext>.+)',"i"),ff=e=>{let t=e.match(fp),{emoji:r,text:a,gemoji:n,gtext:l}=t?.groups??{};return r&&a?`${r} ${a}`:n&&l?`${n} ${l}`:e};function fh(e){return(0,m8.eE)()?e.metaKey:e.ctrlKey}function fg(e,t){let r=-1;for(;!0===e.test(t);)r=e.lastIndex;return r}function fx(e,t){let r,a;for(;null!==(r=e.exec(t));)a=r;return a}function fy(e,t){let r=RegExp(`^[\\s${t}\\s]*|[\\s${t}\\s]*`);return e.replace(r,"")}function fb(e,t,r){let a=r.findIndex(t=>t.id===e.id),n=r.findIndex(e=>e.id===t.id);return -1===a&&-1===n?e.name.localeCompare(t.name):-1===a&&n>-1?1:-1===n&&a>-1?-1:a-n}function fv(e,t){return void 0!==e.position||void 0!==t.position?(e.position??-1)-(t.position??-1):e.databaseId-t.databaseId}function fw(e,t,r){let a=t>0?r[t-1]:void 0,n=t<r.length-1?r[t+1]:void 0;return[a,e,n]}function fj(e,t){let{x:r,y:a}=t,{left:n,top:l,right:i,bottom:s}=e.getBoundingClientRect();return r>=n&&r<=i&&a>=l&&a<=s}function fC(e,t){let r=new Set(e);for(let e of t)r.delete(e)||r.add(e);return r}function fk(e,t){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}var fS=r(23855);let fI=(e,t="EEE, MMM d")=>{let r=e.toISOString().slice(0,-1),a=(0,fS.Z)(r);return(0,mE.Z)(a,t)},fN=e=>{let t=new Date(new Date(e).setHours(0,0,0,0)),r=new Date(t.getTime()-6e4*t.getTimezoneOffset());return r},f_=(e,t,r="EEE, MMM d")=>{let a=e.getUTCFullYear()!==t.getUTCFullYear(),n=fI(e,r),l=fI(t,a?`${r} yyyy`:r);return n===l?n:`${n} - ${l}`};function fT([e,t]){return e?t?e<=t?[e,t]:[t,e]:[e,e]:[t,t]}let fR=(e,t,r)=>1===e?t:r,fE={addColumnNameValue:e=>`Add ${e.toLowerCase()}\u{2026}`,addItem:"Add item",updateTitleLabel:"Update project title",archiveBoardColumnConfirmationMessage:e=>`Are you sure you want to archive ${fR(e.itemsCount,"1 item",`all ${e.itemsCount} items`)} from the ${e.columnName} column?`,removeBoardColumnConfirmationMessage:e=>`Are you sure you want to delete ${fR(e.itemsCount,"1 item",`all ${e.itemsCount} items`)} from the ${e.columnName} column?`,archiveBoardColumnConfirmationTitle:"Archive all items?",removeBoardColumnConfirmationTitle:"Delete all items?",cannotAddItemsWhenGroupByMilestone:"Cannot add items when grouped by milestone",cannotAddItemsWhenGroupByRepository:"Cannot add items when grouped by repository",cannotEditTitle:"Update permissions",cannotEditItemContent:"You can't edit this item because it belongs to a repository that you don't have write-access to.",cannotAddAssigneesToDraftContent:"Convert this draft to an issue to add an assignee",confirmDialog:"Got it!",iterationLabel:{current:"Current",planned:"Planned",completed:"Completed",break:"Break"},cannotReorderForSortMessage:"Cannot reorder items between sorted values",cannotReorderForSortAction:"Remove sorting",createNewItemOrAddExistingIssueAriaLabel:"Create new item or add existing item",dateEditor:"Date editor",defaultArchiveConfirmationMessage:(e,t)=>`Are you sure you want to archive ${e?`these ${t} items`:"this item"}?`,defaultArchiveConfirmationTitle:e=>`Archive item${e?"s":""}?`,deleteFieldDialogTitle:"Delete field?",deleteField:e=>`This will delete the field \u{201C}${e}\u{201D}`,draftConvertPromptDescription:"Convert to issue to edit this cell",draftConvertPromptTitle:"Convert to issue",duplicateView:({isDirty:e})=>e?"Save changes to new view":"Duplicate view",edit:"Edit",editField:"Edit values\u2026",editTitle:"Edit title",emptyColumnNameValue:{number:"Enter a number\u2026",text:"Enter text\u2026",date:"Enter a date\u2026",iteration:"Choose an iteration\u2026",singleSelect:"Choose an option\u2026",linkedPullRequest:"No linked pull requests"},excludeSuggestion:"Exclude",fieldMustBeAnInteger:"This field must be an integer",fieldMustBeANumber:"This field must be a number",fieldMustBeBetween:"This value must be between",fieldMustBePositiveOrZero:"This field must be positive or 0.",fieldMustBeDate:"This field must be a date",fieldValueTooLong:"This value is too long",filterByKeyboardOrByField:"Filter by keyword or by field",floatingPointValueTooPrecise:"This floating point value is too precise",genericErrorMessage:"Sorry, something went wrong",invalidFieldValues:({name:e,value:t,fields:r})=>`Invalid \`${e}\`: ${t}. ${r} are acceptable values for \`${e}\``,issue:"issue",sidePanelRegionNameLabel:"Side panel",sidePanelProjectInfoLabel:"Project information",sidePanelBulkAddLabel:"Add items to project",sidePanelItemNotSupported:"Pull requests are not currently supported in the side panel.",sidePanelItemNotFound:"The item is not in the project, or you don't have access to view it.",sidePanelCloseConfirmation:{title:"Discard changes?",content:"You have unsaved changes. Are you sure you want to discard them?",cancelButtonContent:"Keep editing",confirmButtonContent:"Close and discard"},sidePanelPinLabel:"Display panel in split-screen",sidePanelUnpinLabel:"Display panel as overlay",sidePanelToolbarLabel:"Side panel controls",issueButtonLabel:{closeIssue:"Close issue",reopenIssue:"Reopen",closeWithComment:"Close with comment",reopenWithComment:"Reopen and comment",reopenIssueLong:"Reopen issue",closeAsCompleted:"Close as completed",closeAsCompletedDescription:"Done, closed, fixed, resolved",closeAsNotPlanned:"Close as not planned",closeAsNotPlannedDescription:"Won\u2019t fix, can\u2019t repro, duplicate, stale"},issueSideButtonMoreOptionsLabel:"More options",iterationCustomModelError:"Iteration editor requires a custom model",iterationDurationQtyLow:e=>`Iteration length must be ${e} or more`,iterationDurationQtyHigh:e=>`Iteration length must be ${e} or less`,iterationDurationLabel:"Duration",iterationNotFound:"Iteration not found",iterationStartDateLabel:"Starts on",jumpToBottom:"Jump to bottom",newField:"New Field",newItemFilterWarning:"The new item is hidden by this view's filters.",viewItem:"Open item",newItemFindIssuePlaceholder:e=>e?"Search issues and pull requests, create a new issue, or add multiple items":"Search issues and pull requests, or add multiple items",newItemPlaceholder:"Start typing to create a draft, or type # to select a repository",newItemPlaceholderAriaLabel:"Start typing to create a draft, or type hashtag to select a repository",newIterationField:e=>`Iteration${e}`,newOptionsCount:"New options count",noPermissionEmptyColumnValue:e=>`No ${e}`,noDescriptionProvided:"No description provided",noProjectLimitBanner:"This project is currently enrolled in an alpha experience that removes the project item limit within the table view. As we build out this experience, project functionality will be limited.",noneYet:"None yet",noSuggestion:"No",numberEditor:"Number editor",projectNameRequired:"Project name is required.",pullRequest:"pull request",repoArchivedErrorMessage:"You can't edit this field because this repository is archived",repoIsEmpty:"This repository is either empty or all items were already added to this project.",repoListInstructions:"Pick a repository to add issues and pull requests from",repoListTitle:"Select a repository",repoPickerFilterPlaceholder:"Search repositories",requiredFieldErrorMessage:"Field name is required.",requiresCustomColumn:"requires a custom column",reviewersCount:e=>`${e} reviewer${e>1?"s":""}`,progressCount:({percent:e,total:t})=>`${e}% of ${t}`,progressScalarCount:({completed:e,total:t})=>`${e} of ${t} completed`,progressPercentCount:e=>`${e}% completed`,noItemsInSearchResult:"We couldn't find any items matching that search query.",singleSelectCustomModelError:"Single select editor requires a custom model",singleSelectOptionLimitWarning:e=>`Maximum of ${e} options reached`,clearFilter:"Clear filter",discardChanges:"Discard",saveChanges:"Save",saveToNewChart:"Save to new chart",saveFilter:"Save filter",selectRepo:"Select repository",set:"Set",reset:"Reset",selectionMaximumExceeded:e=>`More than ${e} cells are selected. Deselect some cells to perform bulk edits.`,sortBy:"Sort by",statusFieldEmptyError:"Error: At least one valid option is required for the status field",sortDatesAscending:"oldest...newest",sortDatesDescending:"newest...oldest",sortNumbersAscending:"123...",sortNumbersDescending:"...321",sortSingleSelectAscending:"first...last",sortSingleSelectDescending:"last...first",sortStringsAscending:"A...Z",sortStringsDescending:"Z...A",textEditor:"Text editor",titleCannotBeBlank:"Title cannot be blank",titleContainsReservedColonCharacter:"Field name can't contain colons",titleHasAlreadyBeenTaken:"This field name has already been taken",titleIsReserved:"This field name is a reserved word",unableToAssignUsersToConvertedIssue:e=>`Unable to assign the following users to the converted issue: ${e.join(", ")}`,unableToPasteLabelsBetweensRepos:"Labels can only be copied within the same repository",unableToPasteAssigneesBetweensRepos:"Assignees can only be copied within the same repository",unableToPasteMilestonesBetweensRepos:"Milestones can only be copied within the same repository",unableToPasteLabelsOnDraftIssue:"Labels cannot be applied to draft issues",unableToPasteMilestonesOnDraftIssue:"Milestones cannot be applied to draft issues",unableToPasteMismatchedDataTypes:"Cannot paste data of different types",forbiddenErrorMessage:"You don't have permission to edit this field.",undefined:"undefined",unsortBy:"Unsort by",untitledProject:"Untitled project",untitledUserProject:e=>`@${e}'s untitled project`,removeTitle:"Remove",resultCount:e=>`${e} result${1===e?"":"s"}.`,itemType:e=>{switch(e){case mA.Issue:return"Issue";case mA.PullRequest:return"Pull request";case mA.DraftIssue:return"Draft issue";case mA.RedactedItem:return"Unknown item"}}},fD={updateItem:"update item",updateItems:"update items",delete:"delete",paste:"paste",fillCells:"fill cells"},fP={item:(e,t)=>`${t} \xb7 ${e}`,view:(e,t)=>t?`${t} \xb7 ${e}`:e,archive:e=>`Archive \xb7 ${e}`,settings:e=>`Settings \xb7 ${e}`,workflows:e=>`Workflows \xb7 ${e}`,insights:e=>`Insights \xb7 ${e}`},fA={insightsButton:"Navigate to insights",projectDescriptionButton:"Open project description panel",viewMoreOptions:"View more options"},fM={closed:"Closed",noDueDate:"No due date",pastDueBy:e=>`Past due by ${(0,mR.Z)(e)}`,dueOn:e=>`Due by ${(0,mE.Z)(e,"MMMM d, yyyy")}`},fL={invalidFilterQuotes:"Invalid filter: Unmatched quotation mark",updatedValueErrorMessage:"Supported format is <@today-X, where X is a number and unit. Unit can be one of d,w or m ex: 7d",lastUpdatedValueErrorMessage:"Supported format is XXdays (except 0days)",unknownFieldFilter:e=>`Invalid filter: Unknown field name "${e}"`,noIterationMatch:(e,t)=>`Invalid value: "${e}" doesn't match any iterations in the "${t}" field`,noOptionsMatch:(e,t)=>`Invalid value: "${e}" doesn't match options for the "${t}" field`,invalidNumberValue:e=>`Invalid value: "${e}" is not a number`,invalidDateValue:e=>`Invalid value: "${e}" is not a valid date (must be formatted YYYY-MM-DD)'`,invalidQualifier:(e,t)=>`Invalid value: "${e.join(", ")}" does not match the supported values "${fn(Object.values(t),"or")}"`},fF=e=>e===mD.SingleSelect?["option","options"]:e===mD.Iteration?["iteration","iterations"]:["value","values"],fZ={deleteProjectWarning:"Unexpected bad things will happen if you don\u2019t read this!",deleteProjectTitle:"Are you absolutely sure?",deleteProjectConfirmation:"I understand the consequences, delete this project",deleteProjectInputLabel:"Type in the name of the project to confirm that you want to delete this project.",noIterationsTitle:"You're out of iterations.",noIterationsDescription:'Create an iteration using the "+ Add iteration" button above.',noCompletedIterationsTitle:"No completed iterations.",noCompletedIterationsDescription:"Iterations will automatically move here over time.",organizationOwnedProjectVisibilityRestriction:"Only organization owners can change project visibility.",projectIsPublic:"This project is currently public.",projectIsPrivate:"This project is currently private.",unselectCollaborator:e=>`Unselect ${e}`,selectCollaborator:e=>`Select ${e}`,userOwnedProjectVisibilityRestriction:"Only admins can change project visibility.",willPushActiveIterations:e=>`${e} active ${1===e?"iteration":"iterations"} will also be pushed forward.`,deleteValuesTitle:(e,t)=>`Delete ${fR(t,fF(e)[0],`${t} ${fF(e)[1]}`)}?`,deleteValuesIntro:(e,t,r)=>`This will permanently delete ${fR(r,`this ${fF(e)[0]}`,`these ${fF(e)[1]}`)} from the "${t}" field.`,deleteValuesAffectedItemsWarning:(e,t,r)=>`The ${fR(t,...fF(e))} will be permanently deleted from ${r} ${fR(r,"item","items")} in this project.`,cannotBeUndone:"This cannot be undone."},fO={Repository:{Alerts:{NeedsConversion:{title:fE.draftConvertPromptTitle,content:"Convert this draft to an issue to add it to this repository",confirmButtonContent:fE.confirmDialog},CannotTransferPulls:{title:"Unable to transfer pull request",content:"Pull requests cannot be moved between repositories.",confirmButtonContent:fE.confirmDialog},IssueNeedsTransfer:{title:"Transfer issue",confirmButtonContent:fE.confirmDialog}}},Milestone:{Alerts:{NeedsConversion:{title:fE.draftConvertPromptTitle,content:"Drafts can\u2019t be added to milestones. Convert this draft to an issue to add it to a milestone.",confirmButtonContent:fE.confirmDialog},NeedsTransfer:{title:"New milestone required",confirmButtonContent:fE.confirmDialog}}}},fB={editWorkflow:"Edit",saveWorkflow:"Save and turn on workflow",discardWorkflow:"Discard",deleteWorkflow:"Delete",readOnlyLabel:"Viewing mode. Click edit to make changes to this workflow.",duplicateWorkflowName:"A workflow with this name already exists",emptyFilterDefault:"Filter cannot be empty",emptyFilterAutoAdd:"An empty filter will match all newly created and updated Issues and Pull Requests",emptyWorkflowName:"Workflow name cannot be empty",invalidActionField:"A valid field is required",invalidActionFieldValue:"A valid value is required",invalidNoAction:"An action is required",invalidNoContentType:"A type is required",invalidNoQuery:"A query is required",invalidNoQueryOrFieldId:"A query or a field id is required",invalidNoRepository:"A repository is required",invalidNoValue:"A value is required",workflowNameTooLong:"Workflow name cannot be longer than 250 characters",invalidQuery:"Filter contains invalid syntax",isClosed:"is:closed",isMerged:"is:merged",isNewlyAdded:"is added",isReopened:"is:reopened",addItemBlockLabel:"Add the item to the project",closeItemBlockLabel:"Close the issue",getItemsBlockLabel:"When the filter matches a new or updated item",itemAddedToProjectLabel:"When an item is added to the project",itemReopenedLabel:"When an item is reopened",itemClosedLabel:"When an item is closed",codeChangesRequestedLabel:"When a pull request has a review requesting changes",codeReviewApprovedLabel:"When a pull request is approved",pullRequestMergedLabel:"When a pull request is merged",autoArchiveItemsLabel:"Filter items",projectItemColumnUpdateLabel:"When the status is updated",setValueLabel:"Set value",selectContentType:"Select a content type",archiveItemLabel:"Archive item",autoAddManualTip:"Going forward, all new or updated items that match your filter will be auto added. You can also manually add items that currently match your filter",manualRunConfirmationButton:e=>"update"===e?"Update workflow":"disable"===e?"Disable workflow?":"Save and enable",manualRunConfirmationMessage:(e,t)=>"disable"===e?"You have to disable this workflow to be able to edit this field.":`${"update"===e?"Updating":"Enabling"} this workflow will archive <strong>${t}</strong> item${t&&t>1?"s":""} that currently meet the filter conditions.
      <br><br>As future items match filter conditions, they will be automatically archived.`,manualRunConfirmationTitle:e=>"update"===e?"Update workflow?":"disable"===e?"Disable workflow?":"Enable workflow?",reviewApproved:"review:approved",deleteValuesAffectedWorkflowsWarning:(e,t,r)=>`${fR(t,`This ${fF(e)[0]} is`,`These ${fF(e)[1]} are`)} used in ${r} ${1===r?"workflow":"workflows"}. Deleting ${fR(t,"it","them")} will disable the ${fR(r,"workflow","workflows")} and invalidate any actions referencing ${fR(t,"it","them")}.`,reviewChangesRequested:"review:changes_requested",deleteWorkflowError:"Could not delete workflow, please try again",deleteWorkflowSuccess:"Workflow deleted",deleteWorkflowCallToAction:"Delete workflow",deleteWorkflowConfirmationTitle:"Delete workflow",deleteWorkflowConfirmationContent:"Are you sure you want to delete this workflow? This action cannot be undone.",deleteWorkflowConfirmationButton:"Delete"},fV={defaultWorkflowName:"New auto-add workflow",duplicateWorkflowLabel:"Duplicate workflow",newWorkflowLabel:"New workflow",workflowNameInputLabel:"Workflow name",duplicateButton:"Duplicate",userAddedWorkflowLimitReached:"Maximum number of auto-add workflows reached. Delete a workflow or upgrade your plan to continue.",newWorkflowName:e=>`Duplicate of ${e}`},f$={privacySettingsAdmin:"Everyone in the organization is an admin of this project.",collaboratorDropDownAdmin:"Can see, make changes to, and add new collaborators to this project.",collaboratorDropDownWrite:"Can see and make changes to this project.",collaboratorDropDownRead:"Can see this project.",collaboratorDropDownNone:"Organization members will only be able to see this project if it\u2019s public. To give an organization member additional access, they can be added as part of a team or as a collaborator.",addCollaboratorPlaceholderUserProject:"Search by username",addCollaboratorPlaceholderOrgProject:"Search by username or team",collaboratorFilterPlaceholderUserProject:"Find a collaborator",collaboratorFilterPlaceholderOrgProject:"Find a collaborator or a team"},fz={saveButton:"Save",cancelButton:"Cancel",shortDescriptionTitle:"Short description",shortDescriptionPlaceholder:"A short description about this project.",readmeTitle:"README",readmePlaceholder:"Let everyone know what this project is about, how to use it and link to important resources.",errorMessage:"An error occurred while saving."},fU={addInsightsChartNamePlaceholder:"Add a name for this chart",defaultBurnupChartName:"Burn up / CFD",defaultBurnupChartDescription:"Burn up shows the progress being made towards completion of the project, development flow, and scope changes over time.       Use this chart to identify bottlenecks and issues blocking the team from making progress.",defaultStatusChartName:"Status chart",defaultStatusChartDescription:"This chart shows the current status for the total number of items in your project.",invalidFieldLabel:"Missing field",invalidFieldErrorMessage:"The selected field no longer exists",operationLabel:{count:"Count of",sum:"Sum of",avg:"Average of",min:"Minimum of",max:"Maximum of"},sideNavNewChartButton:"New chart",sideNavDefaultCharts:"Default charts",sideNavCustomCharts:"Custom charts",sideNavPreviewFeatureText:"Historical charts are currently in limited feature preview.",sideNavPreviewFeatureTooltip:"This is a preview feature",upsellDialogTitle:"Get unlimited charts",upsellDialogSubtitle:"Upgrade your plan to get:",upsellDialogBullet1:"Unlimited custom charts for private projects",upsellDialogBullet2:"Historical insights (Team or Enterprise plans only)",upsellDialogBullet3:"All the additional perks of a premium GitHub plan",upsellDialogCancelButton:"Cancel",upsellDialogUpgradePlanButton:"Upgrade plan",planUpgradeText:e=>`Private projects are limited to ${e} custom charts.  Make your project public or upgrade your plan to add more charts.`},fW={addItemToToday:"Add item to today",dragSashAriaLabel:"Drag to resize the table column",noDateFieldsConfiguredTooltip:"Create a date or iteration field to specify dates",noIterationConfiguredTooltip:e=>`Create an iteration containing ${e} to add items here`,iterationSuffix:e=>"start"===e?"start":"end",startDate:"Start date",endDate:"Target date",noStartDate:"No start date",noEndDate:"No target date",noDateSet:"No date set",gettingStarted:{popoverTitle:"Welcome to Roadmap!",popoverDismissButton:"Got it!",projectNeedsField:"Your project needs at least one date or iteration field to get started.",fieldsSelectedByDefault:e=>`We've selected an existing ${e} field in your project to get started. You can change the fields used here.`},toolbarDateFields:"Date fields",toolbarDateFieldsAriaLabel:"Select date fields",toolbarToday:"Today",toolbarZoomAriaLabel:e=>`Zoom level: ${e}.`,zoomMenuDialogAriaLabel:e=>`Select zoom level. The current zoom level is ${e}.`,zoomLevel:"Zoom level",zoomLevelOptions:{month:"Month",quarter:"Quarter",year:"Year"},scrollToDateText:e=>`Scroll to: ${fI(e)}`,scrollToPreviousPage:"Scroll to previous date range",scrollToNextPage:"Scroll to next date range"},fH={statuses:{pending:"Starting migration\u2026",in_progress_project_details:"Setting up the project\u2026",in_progress_status_fields:"Creating project columns\u2026",in_progress_default_view:"Creating an initial view\u2026",in_progress_permissions:"Migrating permissions\u2026",in_progress_items:"Migrating issues, pull requests, and drafts\u2026",in_progress_workflows:"Migrating workflows\u2026",error:"Your project could not be migrated."},yourClassicProject:"Your classic project",completedAndClosed1:"has been closed and is read-only.",completedAndClosed2:"Users visiting the classic project will be linked to this one.",completedAndStillOpen:"is still open, but future changes won't be synchronized.",migrationCompleteMessage:"Migration complete",somethingWentWrongMessage:"Something went wrong"},fG={tasks:(e,t)=>{let r=t>1,a=`task${r?"s":""}`;return e?t===e?`${e} ${a} done`:`${e} of ${t} ${a}`:`${t} ${a}`}},fq={trackedBy:"Tracked by",addedUnsupportedItemToast:"PRs and Drafts can\u2019t be added to a tracking issue. Item was added to No Tracked by group",addAllItemsText:e=>`Add all ${e} items`,itemsNotInProjectText:e=>`${e} ${e>1?"items":"item"} not in this project`,moveMultipleTrackedByNoTrackedWarning:{title:"Are you sure?",content:"Moving this issue to No tracked by will remove it from multiple task lists. This cannot be undone.",confirmButtonContent:"Move",confirmButtonType:"danger"},Toasts:{DraftAndPullsNotSupported:{type:mB.error,message:"PRs and draft issues are not supported by tracked-by"}}},fK={migratingTitle:e=>`Migrating ${e}`},fQ={allSelectedMatchingItems:e=>`All ${e.value.toLocaleString()}${e.isApproximate?"+":""} items matching query selected`,selectAllMatchingItems:e=>`Select all ${e.value.toLocaleString()}${e.isApproximate?"+":""} items matching this query`,selectedItems:e=>`${e.toLocaleString()} ${fR(e,"item","items")} selected`,itemCount:(e,t,r)=>`${e.toLocaleString()}-${t.toLocaleString()} of ${r.value.toLocaleString()}${r.isApproximate?"+":""} ${fR(r.value,"item","items")}`,noArchivedItems:"No archived items",deleteAllMatchingItemsConfirmation:"Are you sure you want to delete all items matching this query?",noLimitsBannerMessage:'This project is currently enrolled in an alpha experience that removes the archived item limit. As we build out this experience, the filtering support for this page will be limited. Currently the "is:", "Assignee:", and "Status:" filters are supported, as well as filtering on custom single select fields.',noLimitsBannerFeedback:" For feedback or questions, please visit",noLimitsBannerFeedbackLinkText:" this discussion."},fY={openInNewTab:"Open in new tab",copyLinkInProject:"Copy link in project",archiveInProject:"Archive in project",deleteFromProject:"Delete from project"},fX=(0,uq.createContext)(null),fJ=(0,uq.createContext)(null),f0=(0,uq.createContext)(null),f1=(0,uq.createContext)(null),f2=(0,uq.memo)(function({children:e}){let[t,r]=(0,uq.useState)(""),[a]=(0,uq.useState)(()=>{let e=mT("memex-creator");return f5(e)}),[n,l]=(0,uq.useState)(()=>{let e=mT("memex-data");return e?{...e}:{id:-1,number:-1,title:a,titleHtml:a,public:!1,closedAt:null,isTemplate:!1}}),i=(0,uq.useCallback)(e=>{l(t=>({...t,...e}))},[]),s=n.number,o=!0===n.public,d=null!=n.closedAt,c=!0===n.isTemplate,u=(0,uq.useMemo)(()=>n.title||a,[a,n.title]),m=(0,uq.useMemo)(()=>n.titleHtml||u,[n.titleHtml,u]),p=n.shortDescription||"",f=n.shortDescriptionHtml||p,h=n.description||"",g=(0,uq.useMemo)(()=>({setProject:i}),[i]),x=(0,uq.useMemo)(()=>({projectNumber:s}),[s]),y=(0,uq.useMemo)(()=>({isPublicProject:o,isClosed:d,isTemplate:c}),[d,o,c]),b=(0,uq.useMemo)(()=>({title:u,titleHtml:m,description:h,shortDescription:p,shortDescriptionHtml:f,descriptionHtml:t,setDescriptionHtml:r}),[h,t,p,f,u,m]);return(0,uO.jsx)(f1.Provider,{value:g,children:(0,uO.jsx)(fJ.Provider,{value:x,children:(0,uO.jsx)(f0.Provider,{value:y,children:(0,uO.jsx)(fX.Provider,{value:b,children:e})})})})});function f5(e){return e?.login?fE.untitledUserProject(e.login):fE.untitledProject}try{(I=fX).displayName||(I.displayName="ProjectDetailsContext")}catch{}try{(N=fJ).displayName||(N.displayName="ProjectNumberContext")}catch{}try{(_=f0).displayName||(_.displayName="ProjectStateContext")}catch{}try{(T=f1).displayName||(T.displayName="SetProjectContext")}catch{}try{(R=f2).displayName||(R.displayName="MemexStateProvider")}catch{}let f3=()=>{let e=(0,uq.useContext)(fX);if(!e)throw Error("useProjectDetails must be used within a ProjectDetailsContext.Provider");return e};var f4=r(9058),f6=r(37990);let f7={};function f8(e){let t=f7[e];if(!t){if(t=mT(e))f7[e]=t;else throw Error(`Missing API metadata for ${e}`)}return t}function f9(e){let t=f8(e),{url:r}=t;return{url:r}}var he=r(89445);function ht(e,t){let r={},a=new Set(t);for(let t in e)a.has(t)||(r[t]=e[t]);return r}let hr=["memex_beta_with_dummy_feature","memex_insights","memex_insights_chart_view","memex_charts_basic_allow","memex_find_in_project","memex_historical_charts_on_assignees_milestones","memex_tracked_by_items","tasklist_block","memex_group_by_multi_value_changes","memex_tracked_by_add_missing_items","memex_delay","memex_insights_forecasting","memex_insights_forecasting_backend","memex_tracked_by_drag_drop","memex_sidepanel_tracking_fields","memex_paginated_archive","memex_resync_index","memex_automation_enabled","memex_header_redesign","memex_skip_json_parsing_if_invalid_response_and_content_found","memex_table_without_limits","memex_autoclose_issue_on_status_change_workflow","issues_react_templates","memex_project_field_issue_forms","memex_templates_workflows_and_drafts","memex_pivot_panel","memex_sort_multiple","memex_pinned_side_panel","memex_new_issue_viewer","memex_disable_draft_issue_file_upload","memex_fetch_json_with_errors","memex_table_filter_before_rank","hyperlist_issue_live_updates","graphql_subscriptions","memex_swimlanes","memex_custom_field_reordering"],ha=[],hn=["memex_charts_basic_public","memex_charts_basic_private","memex_insights_limited_public","memex_insights_limited_private","memex_insights_basic_public","memex_insights_basic_private"],hl=[...ha,...hr,...hn],hi=hl.reduce((e,t)=>(e[t]=!1,e),{}),hs=hi;function ho(){if(!a){let e=mT("memex-enabled-features");for(let t of(a=e&&new Set(e),hl))hs[t]=hd(t)}return hs}function hd(e){return!!a&&a.has(e)}let api_error_ApiError=class api_error_ApiError extends Error{constructor(e,t={}){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=hc(t),this.status=t.status,this.code=t.code,t.sourceStack&&(this.stack?this.stack+=`
${t.sourceStack.substring(t.sourceStack.indexOf("\n")+1)}`:this.stack=t.sourceStack)}};let WrappedSyntaxError=class WrappedSyntaxError extends Error{constructor(e,t={}){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=hc(t),this.status=t.status,this.code=t.code,t.sourceStack&&(this.stack?this.stack+=`
${t.sourceStack.substring(t.sourceStack.indexOf("\n")+1)}`:this.stack=t.sourceStack)}};function hc(e){let t={};e.status&&(t.status=e.status),e.code&&(t.code=e.code),e.name&&(t.name=e.name),e.contentType&&(t.contentType=e.contentType),void 0!==e.newJsonBehavior&&(t.newJsonBehavior=e.newJsonBehavior);let r="ApiError";return Object.keys(t).length>0?`${r} (${JSON.stringify(t)})`:r}let hu={JSON:"application/json",FormData:"application/x-www-form-urlencoded",CSV:"text/csv",HTML:"text/html",Text:"text/plain"};function hm(e,t,r="",a=!1){let n=Array.isArray(e);for(let l in e){let i=e[l];if(void 0===i)continue;let s=Array.isArray(i),o="object"==typeof i,d=r||"";a&&(d+="[]"),r?n||(d+=`[${l}]`):d+=l,s&&0===i.length?t.push(`${d}[]`):o?hm(i,t,d,s):t.push(`${d}=${encodeURIComponent(e[l])}`)}}function hp(e){let t=[];return hm(e,t),t.join("&")}function hf(e,t=fE.genericErrorMessage){if("object"==typeof e&&null!==e){if("error"in e&&"string"==typeof e.error)return e.error;if("errors"in e&&"string"==typeof e.errors)return e.errors;if("message"in e&&"string"==typeof e.message)return e.message;if("errors"in e&&Array.isArray(e.errors)&&e.errors.length>0&&"string"==typeof e.errors[0])return e.errors[0]}return t}let ErrorUsedToCatchStackTraceBeforeAsyncAction=class ErrorUsedToCatchStackTraceBeforeAsyncAction extends Error{constructor(...e){super(...e),Object.setPrototypeOf(this,new.target.prototype),this.name="ErrorUsedToCatchStackTraceBeforeAsyncAction"}};async function hh(e,{token:t,contentType:r=hu.JSON,...a}={}){let n;e=e.toString();let l=hj(e,t,hw(a,r));l.headers.set("Accept","application/json"),a.body&&l.headers.set("Content-Type",r),l.headers.set("X-Requested-With","XMLHttpRequest");let i=Error(),s=!1,o=0,d=new Headers;try{let e=await fetch(l);s=e.ok,o=e.status,d=e.headers;let t=await e.text();n=t&&JSON.parse(t)}catch(e){if(e instanceof Error)throw new api_error_ApiError(e.message,{name:e.name,status:o,sourceStack:i.stack});throw new api_error_ApiError(fE.genericErrorMessage,{status:o,sourceStack:i.stack})}if(s&&n)return{headers:d,ok:s,data:n};if(s)return{headers:d,ok:s,data:{}};if(401===o)return window.location.reload(),{headers:d,ok:s,data:{}};if(n){let e=(Array.isArray(n.errors)?n.errors[0]:n.errors)??fE.genericErrorMessage;throw new api_error_ApiError(e,{status:o,code:n.code,sourceStack:i.stack})}throw new api_error_ApiError(fE.genericErrorMessage,{status:o,sourceStack:i.stack})}async function hg(e,{token:t,contentType:r=hu.JSON,...a}={}){let n;let{memex_fetch_json_with_errors:l}=ho();if(!l){if(void 0===a.method||"GET"===a.method){let n={...ht(a,["body"]),method:"GET",token:t,contentType:r},l=await hh(e,n);return{headers:l.headers,ok:!0,data:l.data}}if(void 0===a.body){let n={...a,method:a.method,body:void 0,token:t,contentType:r},l=await hh(e,n);return{headers:l.headers,ok:!0,data:l.data}}{let n={...a,method:a.method,body:a.body,token:t,contentType:r},l=await hh(e,n);return{headers:l.headers,ok:!0,data:l.data}}}e=e.toString();let i=hj(e,t,hw(a,r));i.headers.set("Accept","application/json"),a.body&&i.headers.set("Content-Type",r),i.headers.set("X-Requested-With","XMLHttpRequest");let s=Error(),o=!1,d=0,c=new Headers;try{let e=await fetch(i);o=e.ok,d=e.status,c=e.headers;let t=await e.text();n=t&&JSON.parse(t)}catch(e){if(e instanceof Error)throw new api_error_ApiError(e.message,{name:e.name,status:d,sourceStack:s.stack});throw new api_error_ApiError(fE.genericErrorMessage,{status:d,sourceStack:s.stack})}if(o&&n)return{headers:c,ok:o,data:n};if(o)return{headers:c,ok:o,data:{}};if(401===d){window.location.reload();let e=hf(n,"Unauthorized");return{headers:c,ok:o,error:{code:401,message:e}}}if(404===d){let e=hf(n,"Not Found");return{headers:c,ok:o,error:{code:404,message:e}}}if(n){let e=hf(n);throw new api_error_ApiError(e,{status:d,code:n.code,sourceStack:s.stack})}throw new api_error_ApiError(fE.genericErrorMessage,{status:d,sourceStack:s.stack})}async function hx(e,t,r=!1){let a;let n=Error(),l=!1,i=0,s=new Headers,o="unknown";try{let n=await (0,he.v)(e,t);if(l=n.ok,i=n.status,s=n.headers,o=n.headers.get("content-type")||"unknown",r)-1!==o.indexOf("application/json")&&(a=await n.json());else{let e=await n.text();a=e&&JSON.parse(e)}}catch(e){if(r&&e instanceof SyntaxError)throw new WrappedSyntaxError(e.message,{name:e.name,status:i,contentType:o,newJsonBehavior:r,sourceStack:n.stack});if(e instanceof Error)throw new api_error_ApiError(e.message,{name:e.name,status:i,contentType:o,newJsonBehavior:r,sourceStack:n.stack});throw new api_error_ApiError(fE.genericErrorMessage,{status:i,newJsonBehavior:r,sourceStack:n.stack})}if(l&&a)return{headers:s,ok:l,data:a};if(l)return{headers:s,ok:l,data:{}};if(401===i)return window.location.reload(),{headers:s,ok:l,data:{}};if(a){let e=(Array.isArray(a.errors)?a.errors[0]:a.errors)??fE.genericErrorMessage;throw new api_error_ApiError(e,{status:i,code:a.code,newJsonBehavior:r,sourceStack:n.stack})}throw new api_error_ApiError(fE.genericErrorMessage,{status:i,newJsonBehavior:r,sourceStack:n.stack})}async function hy(e,t,r=1e3){return async function r(a){let n=new Request(e,t);n.headers.append("X-Requested-With","XMLHttpRequest");let l=new ErrorUsedToCatchStackTraceBeforeAsyncAction,i=await self.fetch(n),{status:s}=i;if(s<200||s>=300)throw new api_error_ApiError(fE.genericErrorMessage,{status:s,sourceStack:l.stack});if(200===s)return i;if(202===s)return await new Promise(e=>setTimeout(e,a)),r(a);throw new api_error_ApiError(fE.genericErrorMessage,{status:s,sourceStack:l.stack})}(r)}async function hb(e,t){let r=new Request(e,t),a=new ErrorUsedToCatchStackTraceBeforeAsyncAction,n=await fetch(r),{status:l}=n;if(n.ok)return n;throw new api_error_ApiError(fE.genericErrorMessage,{status:l,sourceStack:a.stack})}async function hv(e,t){let r=new ErrorUsedToCatchStackTraceBeforeAsyncAction,a=await (0,he.Q)(e,t),{status:n}=a;if(a.ok)return a;throw new api_error_ApiError(fE.genericErrorMessage,{status:n,sourceStack:r.stack})}function hw({body:e,...t},r){let a={...t};return e&&r===hu.JSON?a.body=JSON.stringify(e):e&&(a.body=hp(e)),a}function hj(e,t,r={}){let a=new Request(e,{...r,mode:"same-origin"});return t&&a.headers.append("Scoped-CSRF-Token",t),a}async function hC({memexProjectItemId:e}){let t=f9("memex-item-get-api-data"),r=new URL(t.url,window.location.origin);return r.searchParams.set("memexProjectItemId",`${e}`),hg(r)}let hk={INFO:"info",BULK_ADD:"bulk-add",ISSUE:"issue"},hS="side-panel",hI="row-dragger-menu",hN="draft_convert",h_="draft_open",hT="view options toolbar",hR="view options menu",hE="memex_project_field_group_by",hD="roadmap_date_fields_popover",hP="roadmap_date_fields_popover_dismissed",hA="field_sort_asc",hM="field_sort_desc",hL="table header menu",hF="field_hide",hZ="command palette",hO="search bar",hB="layout_switch",hV="item_rename",h$={SUCCESS:"success",FAILURE:"failure"},hz="tab navigation",hU="settings_open",hW="settings_field",hH="settings sidebar nav",hG="settings_field_save",hq="settings",hK="table header menu",hQ="item_value_edit",hY="item_value_add",hX="table row action menu",hJ="table row keyboard shortcut",h0="board card action menu",h1="board card keyboard shortcut",h2="board column action menu",h5="roadmap row action menu",h3="description_add",h4="description_update",h6="side-panel",h7="top_menu",h8="readme_add",h9="readme_add",ge="settings",gt="insights_chart_create",gr="insights_chart_update",ga="side_panel_navigate_to_item",gn="templates_create",gl="copy",gi="copy_as_template",gs="bulk_add_side_panel_open",go="card_move",gd={KeyboardShortcut:"keyboard_shortcut",MouseMove:"mouse_move",ContextMenu:"context_menu"};function gc(e){return e}var gu=r(42699),gm=r(7069),gp=r(313),gf=r(60792),gh=r(78343),gg=r(67803);function gx(e,t){let r={};for(let a of e){let e=t(a),n=r[e]??(r[e]=[]);n.push(a)}return r}function gy(e,t){let{0:r=[],1:a=[]}=gx(e,e=>t(e)?0:1);return[r,a]}function gb(e){return gv(e.startDate,e.duration)}function gv(e,t){return(0,pl.Z)((0,fS.Z)(e),t-1)}function gw(e){return(0,pl.Z)(gb(e),1)}function gj(e,t){let r=(0,fS.Z)(t.startDate),a=new Date(e.getFullYear(),e.getMonth(),e.getDate());return(0,gu.Z)(a,(0,gm.Z)(r,1))&&(0,gp.Z)(a,gw(t))}function gC(e){let t=(0,gf.Z)(e,new Date)?"MMM dd":"MMM dd, yyyy";return(0,mE.Z)(e,t)}function gk(e,t){return e.toString().padStart(t,"0")}function gS(e){let t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate();return`${t.toString()}-${gk(r,2)}-${gk(a,2)}`}function gI(e){return{startDate:(0,fS.Z)(e.startDate),endDate:gv(e.startDate,e.duration)}}function gN(e){let t=`${e.startDate}T00:00:00Z`,r=pJ(t);if(!r)throw Error("invalid date configuration");let a=(0,gh.Z)((0,fS.Z)(t),(e.duration-1)*24);return{startDate:r,endDate:a}}function g_(e){if(!e||!e.startDate)return"";let{startDate:t,endDate:r}=gI(e);return`${gC(t)} - ${gC(r)}`}function gT(e){return e?gJ(gQ(e.duration)):""}function gR(e){return gE(e.settings.configuration)}function gE(e){let t=[],{iterations:r,completedIterations:a}=e;return r.length&&t.push(...r),a.length&&t.push(...a),t}function gD({startDate:e,duration:t}){return(0,gp.Z)((0,pl.Z)((0,fS.Z)(e),t),new Date)}function gP(e){let t=[...e].sort(gM),[r,a]=gy(t,gD);return{completedIterations:r.reverse(),iterations:a}}function gA(e,t){return-gM(e,t)}function gM(e,t){return e.startDate<t.startDate?-1:e.startDate>t.startDate?1:0}function gL(e){let t=gE(e);return 0===t.length?null:t.sort(gA)[0]??null}function gF(e){let t=gL(e),r=t?(0,fS.Z)(t.startDate):new Date;return(0,pl.Z)(r,t?.duration??0)}function gZ(e){return Object.values(g$).includes(e)?e:null}function gO(e){return e.dataType!==mD.Iteration?null:e.settings.configuration.iterations.find(e=>gj(new Date,e))??null}function gB(e,t){if(e.dataType!==mD.Iteration)return null;if(t===g$.Current)return gO(e);let r=gR(e),{completedIterations:a,iterations:n}=gP(r);switch(t){case g$.Previous:return a.length>0?a[0]??null:null;case g$.Next:return n.length>1?n[1]??null:null;default:return null}}function gV(e,t){let r=gZ(e);return r?gB(t,r):null}let g$={Current:"@current",Next:"@next",Previous:"@previous"};function gz(e,t){return t??gD(e)?"completed":gj(new Date,e)?"current":"planned"}function gU(e){let{startDate:t,endDate:r}=gI(e);return{from:t,to:r}}function gW(e){let t=(0,gg.Z)(e.to,e.from)+1;return{startDate:gS(e.from),duration:t}}function gH(e,t){if(e&&t&&gG(e,t))return{startDate:gS(gw(e)),duration:(0,gg.Z)((0,fS.Z)(t.startDate),gw(e))}}function gG(e,t){return(0,gg.Z)((0,fS.Z)(t.startDate),(0,fS.Z)(e.startDate))>e.duration}function gq(e,t){return{...e,startDate:0===t?e.startDate:gS((0,pl.Z)((0,fS.Z)(e.startDate),t))}}let gK={weeks:"week",days:"day"};function gQ(e){let t=e%7==0?"weeks":"days";return{quantity:"weeks"===t?e/7:e,units:t}}function gY({units:e,quantity:t}){return t*("weeks"===e?7:1)}function gX(e,t){return 1===e?gK[t]:t}function gJ({quantity:e,units:t}){return`${e} ${gX(e,t)}`}let g0={quantity:2,units:"weeks"};function g1(e){return e?.dataType===mD.Iteration}function g2(e){return e?.dataType===mD.SingleSelect}function g5(e){return e?.dataType===mD.Date}let g3="no_vertical_group",g4=(e,t)=>[{id:g3,name:`No ${t}`,nameHtml:`No ${t}`},...e],g6=(e,t,r,{includeAllCompletedIterations:a=!1}={})=>{let n=r.slice().sort(gA),l=[...a?n:n.slice(0,3),...t],i=l.sort(gM).map(e=>({id:e.id,name:e.title,nameHtml:e.titleHtml}));return[{id:g3,name:`No ${e}`,nameHtml:`No ${e}`},...i]};function g7(e,t={}){if(!e)return[];if(g2(e))return g4(e.settings.options||[],e.name);if(g1(e)){let{configuration:r}=e.settings,{iterations:a,completedIterations:n}=r;return g6(e.name,a,n,t)}throw Error(`Unable to obtain vertical groups for field type: ${e.dataType}`)}function g8(e){return g2(e)||g1(e)}let g9=()=>ho(),xe={NAVIGATE:"NAVIGATE",SET_FOCUS:"SET_FOCUS",INIT:"INIT"},xt=e=>({type:xe.NAVIGATE,navigation:e}),xr=e=>({type:xe.SET_FOCUS,focus:e}),xa=(e,t)=>{let r=(0,uq.createContext)({navigationDispatch:()=>void 0,state:{focus:null,previousFocus:null}}),a=(0,uq.createContext)({stateRef:(0,uq.createRef)(),navigationDispatch:()=>void 0}),n=()=>{let e=(0,uq.useContext)(r);return e},l=()=>{let e=(0,uq.useContext)(a);return e},i=(0,uq.memo)(function({metaRef:n,initialState:l,children:i}){let[s,o]=xn(e,t,n,l),d=m1(s),c=(0,uq.useMemo)(()=>({state:s,navigationDispatch:o}),[o,s]),u=(0,uq.useMemo)(()=>({navigationDispatch:o,stateRef:d}),[d,o]);return(0,uq.useLayoutEffect)(function(){o({type:xe.INIT,state:l})},[o,l]),(0,uO.jsx)(r.Provider,{value:c,children:(0,uO.jsx)(a.Provider,{value:u,children:i})})});return{context:r,NavigationProvider:i,useNavigation:n,useStableNavigation:l}},xn=(e,t,r,a)=>{let n=g9(),l=(0,uq.useCallback)((a,l)=>{switch(l.type){case xe.NAVIGATE:return e(a,r.current,l,n);case xe.SET_FOCUS:return t(a,r.current,l,n);case xe.INIT:return l.state;default:return a}},[r,e,t,n]);return(0,uq.useReducer)(l,a)};try{(E=MyComponent).displayName||(E.displayName="MyComponent")}catch{}try{(D=NavigationProvider).displayName||(D.displayName="NavigationProvider")}catch{}let xl={Focus:"Focus",Edit:"Edit",Suspended:"Suspended",Same:"Same"},xi={First:"First",Second:"Second",Previous:"Previous",Same:"Same",Next:"Next",Last:"Last"},{useNavigation:xs,useStableNavigation:xo,NavigationProvider:xd}=xa(xb,xv);function xc(e){return e?.type==="footer"}function xu(e){return e?.type==="search-input"}function xm(e,t,r=xl.Focus){return xr({type:"coordinate",focusType:r,details:{x:e,y:t,meta:{}}})}function xp(e,t,r){return xr({type:"coordinate",focusType:xl.Focus,details:{x:t,y:e,meta:{keyboardMovingCard:{sashSide:"after",cardIds:r,returnFocus:{columnIndex:t,cardId:e}}}}})}function xf(){return xt({focusType:xl.Focus,details:{type:"previousFocus"}})}function xh(e,t,r,a){return xt({focusType:xl.Focus,details:{type:"nearestCard",indexOfCardWithinColumn:e,columnIndex:t,cardId:r,findMemexItem:a}})}function xg(e,t){return xt({focusType:xl.Focus,details:{type:"footer",columnId:e,horizontalGroupId:t}})}function xx(){return xt({focusType:xl.Focus,details:{type:"search-input"}})}function xy(){return xr(null)}function xb(e,t,r){let{focus:a}=e;if(r.navigation.details?.type==="previousFocus")return{...e,focus:e.previousFocus,previousFocus:null};if(r.navigation.details?.type==="footer"){let n=r.navigation.details.columnId;return null==n&&(n=a?.type==="coordinate"?t.cardGrid[a.details.x]?.id:t.cardGrid[0]?.id),{...e,focus:{type:"footer",focusType:xl.Focus,details:{columnId:gc(n),horizontalGroupId:r.navigation.details.horizontalGroupId}},previousFocus:e.focus}}if(r.navigation.details?.type==="search-input")return{...e,focus:{type:"search-input",focusType:xl.Focus,details:{}},previousFocus:e.focus??e.previousFocus};if(r.navigation.details?.type==="nearestCard"){let{indexOfCardWithinColumn:a,columnIndex:n,cardId:l,findMemexItem:i}=r.navigation.details;return{...e,focus:xC(a,n,l,t.cardGrid,i),previousFocus:e.focus}}if(!a)return e;if("coordinate"===a.type){let n=xk(a,r,t.cardGrid);return{...e,focus:n,previousFocus:e.focus}}{let n=xS(a,r,t.cardGrid);return{...e,focus:n,previousFocus:e.focus}}}function xv(e,t,r){return{...e,focus:r.focus,previousFocus:xj(e)}}function xw(e,t,r){if(!e?.focus?.details||"coordinate"!==e.focus.type)return!1;let a=e.focus.details;return a.y===t&&a.x===r}function xj({focus:e,previousFocus:t}){return e?xc(e)||xu(e)?t:e:null}function xC(e,t,r,a,n){let l=n?gc(a[t]).items.filter(e=>n(e.id)):gc(a[t]).items,i=l.findIndex(e=>e.id===r),s=l.length>1,o=l.length>0,d=l.length-1,c=-1,u=t;if(o&&-1===i)c=l[e>d?d:e]?.id??0;else if(s)c=i===d?gc(l[i-1]).id:gc(l[i+1]).id;else{let e=1;for(;-1===c&&(t-e>=0||t+e<a.length);)t-e>=0&&!xR(a[t-e])?(c=gc(gc(a[t-e]).items[0]).id,u=t-e):t+e<a.length&&!xR(a[t+e])&&(c=gc(gc(a[t+e]).items[0]).id,u=t+e),e++;if(-1===c)return{type:"footer",focusType:xl.Focus,details:{columnId:gc(a[t]).id}}}return{type:"coordinate",focusType:xl.Focus,details:{x:u,y:c,meta:{}}}}function xk(e,t,r){let a=e.details.meta.keyboardMovingCard;if(t.navigation.y===xi.Next&&xN(r,e.details.x,e.details.y))return a?{...e,details:{...e.details,meta:{...e.details.meta,keyboardMovingCard:{...a,sashSide:"after"}}}}:{type:"footer",focusType:xl.Focus,details:{columnId:gc(r[e.details.x]).id}};if(t.navigation.y===xi.Previous&&x_(r,e.details.x,e.details.y))return a?{...e,details:{...e.details,meta:{...e.details.meta,keyboardMovingCard:{...a,sashSide:"before"}}}}:{type:"search-input",focusType:xl.Focus,details:{}};let n=xT(r,e.details.x,t.navigation.x||xi.Same,!!a);if(a&&xR(r[n]))return{type:"coordinate",focusType:xl.Focus,details:{x:n,y:-1,meta:{keyboardMovingCard:{...a,sashSide:"before"}}}};if(!r[n]||xR(r[n]))return e;let l=gc(r[e.details.x]).items.findIndex(t=>t.id===e.details.y),i=-1===e.details.y?0:xI(gc(r[n]).items,l,t.navigation.y||xi.Same),s=gc(gc(r[n]).items[i]).id,o={...e.details.meta};return o?.keyboardMovingCard&&(t.navigation.y===xi.First?o.keyboardMovingCard.sashSide="before":t.navigation.y===xi.Last&&(o.keyboardMovingCard.sashSide="after")),{type:"coordinate",focusType:xl.Focus,details:{x:n,y:s,meta:o}}}function xS(e,t,r){let a=t.navigation;if(a.y){let n=r.findIndex(t=>t.id===e.details?.columnId);if(-1===n)return e;let l=xT(r,n,t.navigation.x||xi.Same);if(l<0||l>=r.length)return e;let i=null;if(a.y!==xi.Previous&&a.y!==xi.Last||xR(r[l])?a.y!==xi.First||xR(r[l])||(i=0):i=gc(r[l]).items.length-1,null!=i){let e=gc(gc(r[l]).items[i]).id;return{type:"coordinate",focusType:xl.Focus,details:{x:l,y:e,meta:{}}}}return{type:"search-input",focusType:xl.Focus,details:{}}}return e}function xI(e,t,r){if(r===xi.Same)return Math.min(t,e.length-1);if(r===xi.First)return 0;if(r===xi.Last)return e.length-1;if(r===xi.Next){let r=Math.min(t+1,e.length-1);return r}return Math.max(0,t-1)}function xN(e,t,r){let a=e[t];if(xR(a))return!1;let n=a?a.items:[],l=n.length-1,i=gc(n[l]).id;return r===i}function x_(e,t,r){let a=e[t];if(xR(a))return!1;let n=gc(a?.items[0]).id;return r===n}function xT(e,t,r,a){let n=xI(e,t,r);if(a)xR(e[n])&&e[n]?.id===g3&&e[n+1]&&n++;else if(r!==xi.Same&&xR(e[n]))for(;n>=0&&n<e.length&&xR(e[n]);)n=r===xi.First||r===xi.Next?n+1:n-1;return n}function xR(e){return!e||0===e.items.length}function xE(e){throw Error(`${e} has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?`)}function xD(e){return`${e.userName}/${e.repoName}#${e.number}`}function xP(e){return`${e.userName}/${e.repoName}`}function xA(e,t){return t&&e.userName.toLowerCase()===t.login.toLowerCase()?e.repoName:xP(e)}function xM(e,t){return t&&e.userName.toLowerCase()===t.login.toLowerCase()?`${e.repoName}#${e.number}`:xD(e)}function xL(e){return"empty"!==e.kind&&(e.dataType===mD.Milestone||e.dataType===mD.Repository)}function xF(e){let t=e.filter(e=>e.subRows.length>0);if(t&&t.length>0&&t.every(e=>xL(e.groupedSourceObject))){let r=e.find(e=>!xL(e.groupedSourceObject));r&&t.push(r)}return t}let xZ=e=>{if(!xL(e.groupedSourceObject))return fE.addItem;switch(e.groupedColumnId){case mP.Milestone:return fE.cannotAddItemsWhenGroupByMilestone;case mP.Repository:return fE.cannotAddItemsWhenGroupByRepository;default:return fE.addItem}};function xO(e){if("empty"===e.kind)return e.value.titleHtml;switch(e.dataType){case mD.Assignees:return fn(e.value.map(e=>e.login));case mD.Date:return p2(e.value.date.value);case mD.Iteration:return e.value.iteration.title;case mD.Milestone:return e.value.title;case mD.Number:return`${e.value.number.value}`;case mD.Repository:return e.value.nameWithOwner;case mD.SingleSelect:return e.value.option.name;case mD.Text:return e.value.text.raw;case mD.TrackedBy:return xD(e.value);case mD.Labels:return e.value.name;default:xE(e)}}function xB(e){if("empty"===e.kind)return e.value.titleHtml;switch(e.dataType){case mD.SingleSelect:return e.value.option.nameHtml;case mD.Milestone:return e.value.title;case mD.Number:return`${e.value.number.value}`;case mD.Text:return e.value.text.html;case mD.Labels:return e.value.nameHtml;default:xE(e)}}function xV(e){if("empty"===e.kind)return e.value.titleHtml;switch(e.dataType){case mD.Assignees:return e.value.map(e=>e.login).join("_");case mD.Date:return p1(e.value.date.value);case mD.Iteration:return e.value.iteration.title;case mD.Milestone:return e.value.title;case mD.Number:return`${e.value.number.value}`;case mD.Repository:return e.value.nameWithOwner;case mD.SingleSelect:return e.value.option.name;case mD.Text:return e.value.text.raw;case mD.TrackedBy:return e.value.title}}let x$={COORDINATE:"coordinate",FOOTER:"footer",SEARCH_INPUT:"search-input",GROUP_FOOTER:"group-footer",GLOBAL_OMNIBAR:"global-omnibar"};function xz(e){return e.type===x$.FOOTER}function xU(e){return e?.type===x$.SEARCH_INPUT}function xW(e){return e.type===x$.GROUP_FOOTER}function xH(e,t){return e.type===x$.GROUP_FOOTER&&e.details.groupId===t}function xG(e){return e.type===x$.COORDINATE}function xq(e){return e.details.meta.suspended}function xK(e,t,r){if(!e?.focus?.details||"coordinate"!==e.focus.type)return!1;let a=e.focus.details;return a.y===t&&a.x===r}function xQ(){return xr({focusType:xl.Focus,type:x$.FOOTER,details:null})}function xY(){return xr({focusType:xl.Focus,type:x$.SEARCH_INPUT,details:null})}function xX(e){return xr({focusType:xl.Focus,type:x$.GROUP_FOOTER,details:{groupId:e}})}function xJ(){return xr({focusType:xl.Focus,type:x$.GLOBAL_OMNIBAR,details:null})}function x0(e,t,r,a,n,l){return xr({focusType:xl.Focus,type:x$.COORDINATE,details:{y:e,x:t,meta:{editing:r,suspended:a,replaceContents:n,newContent:l}}})}function x1(){return xr(null)}function x2(e){return xt(e)}let{useNavigation:x5,useStableNavigation:x3,NavigationProvider:x4}=xa(x7,x8);function x6(){let{state:{focus:e}}=x5(),t=null!=e&&xG(e)&&e.details.meta.newContent;return t||""}function x7(e,t,r){let{focus:a,previousFocus:n}=e,{visibleColumns:l,flatRows:i,groupedRows:s,state:o}=t.instance,{collapsedGroups:d}=o,{getHeaderFocus:c,focusableRowFilter:u,focusableColumnFilter:m}=t;if(!a)return e;let{navigation:p}=r,f=null,h=i.filter(e=>!e.isGrouped),g=u?h.filter(e=>u(a,n,p,e)):h,x=u&&s?s.map(e=>({...e,subRows:e.subRows.filter(e=>u(a,n,p,e))})):s,y=l.filter(e=>!e.nonNavigable).map(e=>e.id),b=m?y.filter(e=>{let t=xG(a)?i.find(e=>e.id===a.details.y):void 0;return m(e,p,t)}):y;if(x){let e=x9(x,d);if(xG(a)){let t=yd(e,a);t&&(f=yn(t,p,e,b)),null===f&&(f=yo(a,p,g,b,c))}else xW(a)?f=yl(a,p,e,b,n):xU(a)&&(f=ys(p,g,b,n))}else xz(a)?f=yi(p,g,b,c,n):xU(a)?f=ys(p,g,b,n):xG(a)&&(f=yo(a,p,g,b,c));return f?{...e,focus:f,previousFocus:yr(e)}:e}function x8(e,t,r){let a=null;if(r.focus?.type===x$.GLOBAL_OMNIBAR){let{groupedRows:r,state:n}=t.instance,l=r?x9(r,n.collapsedGroups):void 0;a=yc(e,l)}return{...e,focus:a??r.focus,previousFocus:yr(e)}}function x9(e,t){return e.filter(e=>e.subRows.length>0&&!xL(e.groupedSourceObject)&&-1===t.indexOf(e.groupedValue))}let ye=(e,t,r,a)=>{if(a===xi.Same)return t;if(a===xi.First)return e[0];if(a===xi.Second)return e[1];if(a===xi.Last)return e[e.length-1];if(t&&-1!==r){if(a===xi.Next){let t=Math.min(r+1,e.length-1);return e[t]}if(a===xi.Previous){let t=Math.max(0,r-1);return e[t]}}};function yt(e,t){if(e&&xG(e)){let r=t.findIndex(t=>t===e?.details?.x);return r>-1?r:null}return null}function yr({focus:e,previousFocus:t}){return e?xz(e)||xW(e)||xU(e)?t:e:null}let ya=e=>{if(!e||0===e.length)return null;let t=0,r=0;for(let a=0;a<e.length;a++){let n=e[a];if(void 0!==n){let e=n.index;e>r&&(r=e,t=a)}}return e[t]},yn=(e,t,r,a)=>{let{firstRow:n,lastRow:l,group:i,colID:s}=e,o=a.findIndex(e=>e===s)??0,d=r.findIndex(e=>e.id===i.id),c=!!t.details?.wrap,u=c&&0===o&&t.x===xi.Previous,m=c&&o===a.length-1&&t.x===xi.Next,p=u||t.y===xi.Previous,f=m||t.y===xi.Next;if(p&&d>0&&n){let e=r[d-1];return e?xX(e.id).focus:null}return f&&l?xX(i.id).focus:null},yl=(e,t,r,a,n)=>{let l=e.details.groupId,i=r.findIndex(e=>e.id===l),s=r[i],o=!!t.details?.wrap,d=o&&t.x===xi.Previous,c=o&&t.x===xi.Next,u=d||t.y===xi.Previous,m=c||t.y===xi.Next,p=yt(n,a);if(m&&i<r.length-1){let e=r[i+1],t=o?0:p??0;if(e&&e.subRows.length>0){let r=e.subRows[0]?.id,n=a[t];return void 0===r||void 0===n?null:x0(r,n).focus}if(e)return xX(e.id).focus}if(u&&i>=0&&s&&s.subRows.length>0){let e=gc(s.subRows.at(-1)).id,t=o?a.length-1:p??0,r=a[t];return void 0===r?null:x0(e,r).focus}if(u&&i>0&&s&&0===s.subRows.length){let e=r[i-1];return e?xX(e.id).focus:null}if(t.y===xi.Last&&t.x===xi.Second){if(!s)return null;let e=ya(s.subRows);if(!e)return null;let t=a[1]?a[1]:a[0];return void 0===t?null:x0(e.id,t).focus}return null},yi=(e,t,r,a,n)=>{if(e.y===xi.Last&&e.x===xi.Second){let e=ya(t);if(!e)return null;let a=r[1]?r[1]:r[0];return void 0===a?null:x0(e.id,a).focus}let l=yt(n,r);if(e.y===xi.Previous){if(0===t.length)return a();let e=r[l??0];return void 0===e?null:x0(gc(t.at(-1)).id,e,!1).focus}if(e.y){let a=ye(t.map(e=>e.id),void 0,-1,e.y),n=ye(r,void 0,-1,e.x||xi.First)??r[0];return a&&n?x0(a,n,!1).focus:null}return e.x&&e.details?.wrap?0===t.length?a():x0(gc(t.at(-1)).id,gc(r.at(-1)),!1).focus:e.details?.previousFocus?n:null},ys=(e,t,r,a)=>{if(e.y){let a=ye(t.map(e=>e.id),void 0,-1,e.y),n=ye(r,void 0,-1,e.x||xi.First)??r[0];return a&&n?x0(a,n,!1).focus:xQ().focus}return e.details?.previousFocus?a:xQ().focus},yo=(e,t,r,a,n)=>{if(e.details.y===r.at(-1)?.id&&t.y===xi.Next)return xQ().focus;if(e.details.y===r.at(0)?.id&&t.y===xi.Previous)return n();let l=r.findIndex(t=>t.id===e.details.y)??0,i=a.findIndex(t=>t===e.details.x)??0,s=ye(r.map(e=>e.id),e?.details.y,l,t.y||xi.Same),o=ye(a,e?.details.x,i,t.x||xi.Same);if(t?.details?.wrap){if(t.x===xi.Next&&a.findIndex(t=>t===e?.details.x)+1>=a.length){if(!(l+1<=r.length-1))return xQ().focus;o=a[0],s=r[l+1]?.id}else if(t.x===xi.Previous&&a.findIndex(t=>t===e?.details.x)-1<0){if(!(l-1>=0))return n();o=a[a.length-1],s=r[l-1]?.id}}let d=e?.details.meta.editing??!1,c=e?.details.meta.suspended??!1;return(t.focusType===xl.Edit?d=!0:t.focusType===xl.Focus&&(d=!1),t.focusType===xl.Suspended?c=!0:t.focusType!==xl.Same&&(c=!1),s&&o)?x0(s,o,d,c).focus:null};function yd(e,t){let{x:r,y:a}=t.details;for(let t of e){let e=t.subRows.findIndex(e=>e.id===a);if(e>=0){let a=0===e,n=e===t.subRows.length-1;return{group:t,subRowIndex:e,colID:r,firstRow:a,lastRow:n}}}return null}function yc(e,t){let{focus:r}=e;if(t){if(!t.length)return e.focus;if(r&&xG(r)){let e=yd(t,r);if(e)return xX(e.group.id).focus}let a=t[0];if(a)return xX(a.id).focus}return xQ().focus}let yu={Open:"open",Closed:"closed"},ym={Open:"open",Closed:"closed",Merged:"merged",Draft:"draft"},yp={NotPlanned:"not_planned",Completed:"completed",Reopened:"reopened"},yf={Open:"open",Closed:"closed",Merged:"merged"},yh={Open:"open",Closed:"closed"},yg={NotPlanned:"not_planned",Completed:"completed",Reopened:"reopened"},yx={Read:"read",Write:"write",Admin:"admin",None:"no access"},yy={Admin:"project_admin",Writer:"project_writer",Reader:"project_reader",None:"none"},yb={User:"user",Team:"team",None:"none"},yv={role:yx.Read,canChangeProjectVisibility:!1,canCopyAsTemplate:!1},yw=new Map([[yx.Read,yy.Reader],[yx.Write,yy.Writer],[yx.Admin,yy.Admin],[yx.None,yy.None]]),yj=new Map([...yw.entries()].map(([e,t])=>[t,e])),yC={mode:void 0,light:void 0,dark:void 0,markdown_fixed_width_font:!1};function yk(){if(!n){let e=mT("memex-owner"),t=mT("memex-data"),r=mT("github-runtime")??"dotcom",a=mT("memex-feedback");n={themePreferences:mT("theme-preferences")??yC,mediaUrls:mT("media-urls"),loggedInUser:mT("logged-in-user"),projectData:t,projectOwner:e,projectCreator:mT("memex-creator"),projectLimits:{projectItemLimit:1200,projectItemArchiveLimit:1e4,limitedChartsLimit:2,singleSelectColumnOptionsLimit:25,autoAddCreationLimit:4,...mT("memex-limits")},relayIds:mT("memex-relay-ids"),viewerPrivileges:mT("memex-viewer-privileges")??yv,feedbackLink:a?.url??"https://github.com/github/feedback/discussions/categories/issues-feedback",issueViewerFeedbackLink:a?.issue_viewer_url??"https://github.com/github/feedback/discussions/categories/issues-feedback",archiveAlphaFeedbackLink:mT("archive-alpha-feedback")?.url,isOrganization:e?.type==="organization",githubRuntime:r,isDotcomRuntime:"dotcom"===r,isEnterpriseRuntime:"enterprise"===r,showTemplateDialog:!!mT("memex-templates"),partialFailures:mT("memex-columns-data")?.reduce((e,t)=>t.partialFailures?e.concat(t.partialFailures):e,[]),copyProjectPartialUrl:mT("copy-memex-project-partial-data")?.url??""}}return n}function yS(e){return!!e&&e.length>=yk().projectLimits.singleSelectColumnOptionsLimit}let yI=()=>{let{viewerPrivileges:e,loggedInUser:t}=yk();return{isLoggedIn:void 0!==t,isReadonly:e.role===yx.Read,hasWritePermissions:e.role!==yx.Read,hasAdminPermissions:e.role===yx.Admin,canChangeProjectVisibility:e.canChangeProjectVisibility,canCopyAsTemplate:e.canCopyAsTemplate}},yN="sortedBy[columnId]",y_="sortedBy[direction]",yT="filterQuery",yR="layout",yE="groupedBy[columnId]",yD="verticalGroupedBy[columnId]",yP="visibleFields",yA="hideItemsCount",yM="sumFields",yL="sliceBy[columnId]",yF="sliceBy[value]",yZ="period",yO="start_date",yB="end_date",yV="xAxis[groupBy]",y$="xAxis[dataSource][column]",yz="yAxis[aggregate][columns]",yU="yAxis[aggregate][operation]",yW="pane",yH="itemId";function yG(e){return{skipTurbo:!0,...e}}let yq=()=>{let e=(0,uQ.s0)();return(0,uq.useCallback)((t,r)=>e(t,{...r,state:yG(r?.state)}),[e])},yK=(0,uq.forwardRef)(function(e,t){return(0,uO.jsx)(uY.rU,{"data-turbo":"false",...e,state:yG(e.state),ref:t})}),yQ=(0,uq.forwardRef)(function(e,t){return(0,uO.jsx)(uY.OL,{"data-turbo":"false",...e,state:yG(e.state),ref:t})}),yY=()=>{let[e,t]=(0,uY.lr)(),r=(0,uq.useCallback)((e,r)=>{t(e,{...r,state:yG(r?.state)})},[t]);return[e,r]};function yX(e){return(0,uO.jsx)(uQ.Fg,{...e,state:yG(e.state)})}try{(P=yK).displayName||(P.displayName="Link")}catch{}try{(A=yQ).displayName||(A.displayName="NavLink")}catch{}try{(M=yX).displayName||(M.displayName="Navigate")}catch{}var yJ=r(86176);function y0(e){let t=RegExp(".*\\/(?<owner>[^/]+)\\/(?<repo>[^/]+)\\/issues\\/(?<number>\\d+)$"),r=e.match(t),a=r?.groups?.owner,n=r?.groups?.repo,l=r?.groups?.number;return a&&l&&n?{number:parseInt(l,10),repo:n,owner:a}:void 0}let y1=class MemexItemModelBase{getState(){throw Error("Method not implemented.")}getSuggestionsCacheKey(e){if(e===mP.Labels){let e=this.getExtendedRepository()?.id.toString();if(e)return`repository:${e}`}return`${this.contentType}:${this.itemId()}`}getItemIdentifier(){}isDraft(){return!1}hierarchyEntry(){return{ownerId:this.contentRepositoryId||0,itemId:this.content?.id||0}}memexItemId(){return this.id}itemId(){return this.content.id}ownerId(){return this.contentRepositoryId||0}getLabels(){return this.columns.Labels||[]}getUrl(){return""}getTitle(e=!1){return e?p5(this.columns.Title):p3(this.columns.Title)}getAssignees(){return this.columns.Assignees||[]}getReviewers(){return this.columns.Reviewers||[]}getRepositoryName(){return this.columns.Repository?.name||""}getItemNumber(){return 0}getMilestone(){return this.columns.Milestone}getLinkedPullRequests(){return this.columns["Linked pull requests"]||[]}getExtendedRepository(){return this.columns.Repository}getCompletion(){return this.columns.Tracks}getTrackedBy(){return this.columns["Tracked by"]}createdAt(){}login(){}getStatus(){return this.columnData[mP.Status]}getCustomField(e){return this.columnData[e]}get columns(){return this.columnData}setItemData(e){if(this.id=e.id,this.priority=e.priority,e.updatedAt&&(this.updatedAt=e.updatedAt),e.content&&(this.content={...this.content,...e.content}),this.contentType!==e.contentType&&(this.contentType=e.contentType),e.memexProjectColumnValues)for(let t of(this.columnData={},e.memexProjectColumnValues))this.setColumnValueForItemColumnType(t)}isTitleForIssue(e){return!!e&&"string"!=typeof e.title&&"raw"in e.title&&"html"in e.title}async whileSkippingLiveUpdates(e){try{this.skippingLiveUpdates=!0,await e(),this.skippingLiveUpdates=!1}catch(e){throw this.skippingLiveUpdates=!1,e}}setTitleValue(e){switch(this.contentType){case mA.DraftIssue:{let{title:t}=e;if("string"==typeof t)break;this.isTitleForIssue(e)&&(this.columnData[mP.Title]={contentType:mA.DraftIssue,value:{...e,title:t}});break}case mA.RedactedItem:{let{title:t}=e;"string"==typeof t&&(this.columnData.Title={contentType:mA.RedactedItem,value:{title:t}});break}case mA.Issue:if("isDraft"in e)return;"number"in e&&this.isTitleForIssue(e)&&(this.columnData.Title={contentType:mA.Issue,value:e});break;case mA.PullRequest:"isDraft"in e&&this.isTitleForIssue(e)&&(this.columnData[mP.Title]={contentType:mA.PullRequest,value:e})}}setColumnValueForItemColumnType(e){switch(e.memexProjectColumnId){case mP.Title:this.setTitleValue(e.value);break;case mP.Assignees:this.columnData[mP.Assignees]=e.value?.sort((e,t)=>e.login.localeCompare(t.login))??void 0;break;case mP.Labels:this.columnData[mP.Labels]=e.value?.sort((e,t)=>e.name.localeCompare(t.name))??void 0;break;case mP.LinkedPullRequests:this.columnData[mP.LinkedPullRequests]=e.value?.sort((e,t)=>e.number-t.number)??void 0;break;case mP.Milestone:this.columnData[mP.Milestone]=e.value??void 0;break;case mP.Repository:this.columnData[mP.Repository]=e.value??void 0;break;case mP.Reviewers:this.columnData[mP.Reviewers]=e.value?.sort((e,t)=>e.reviewer.name.localeCompare(t.reviewer.name))??void 0;break;case mP.Status:this.columnData[mP.Status]=e.value??void 0;break;case mP.Tracks:this.columnData[mP.Tracks]=e.value??void 0;break;case mP.TrackedBy:this.columnData[mP.TrackedBy]=e.value??void 0;break;default:this.columnData[e.memexProjectColumnId]=e.value??void 0}}constructor(e){this.columnData={},this.skippingLiveUpdates=!1,this.isHierarchy=!1,this.setItemData(e),this.archived=e.archived,this.memexProjectColumnValues=e.memexProjectColumnValues}};let DraftIssueModel=class DraftIssueModel extends y1{isDraft(){return!0}getState(){return ym.Draft}constructor(e){super(e),this.contentType=mA.DraftIssue,this.content=e.content}};let RedactedItemModel=class RedactedItemModel extends y1{getState(){return ym.Open}constructor(e){super(e),this.contentType=mA.RedactedItem,this.content=e.content}};let IssueModel=class IssueModel extends y1{getState(){return this.columnData[mP.Title]?.value.state}getUrl(){return this.content.url}getItemNumber(){return this.columnData[mP.Title]?.value.number}getItemIdentifier(){return y0(this.getUrl())}constructor(e){super(e),this.contentType=mA.Issue,this.content=e.content,this.contentRepositoryId=e.contentRepositoryId}};let PullRequestModel=class PullRequestModel extends y1{getState(){return this.columnData[mP.Title]?.value.state}isDraft(){return this.columnData[mP.Title]?.value.isDraft}getUrl(){return this.content.url}getItemNumber(){return this.columnData[mP.Title]?.value.number}constructor(e){super(e),this.contentType=mA.PullRequest,this.content=e.content,this.contentRepositoryId=e.contentRepositoryId}};function y2(e){switch(e.contentType){case mA.DraftIssue:return new DraftIssueModel(e);case mA.RedactedItem:return new RedactedItemModel(e);case mA.Issue:return new IssueModel(e);case mA.PullRequest:return new PullRequestModel(e)}}function y5(e,t){if(e||null!=t)return{columnValue:e,previousMemexProjectItemId:t}}function y3(e){return e.contentType===mA.PullRequest?`pull_request:${e.content.id}`:e.contentType===mA.Issue?`issue:${e.content.id}`:void 0}let y4={memexItems:[],memexColumnsByItemId:new Map};function y6(e,t=y4){return t.memexItems.length&&t.memexColumnsByItemId.size||(t.memexItems=e()??[],t.memexColumnsByItemId=y8(t.memexItems)),t}function y7(e=y4){return y6(()=>mT("memex-items-data"),e)}function y8(e){let t=new Map;return e.reduce((e,t)=>{let{contentType:r,id:a,memexProjectColumnValues:n}=t;return e.set(a,{contentType:r,columns:n})},t)}let y9="memexItems",be=(0,yJ.r)({primaryKey:y9,queryFn:()=>[],enabled:!1,initialData:()=>{let{memexItems:e}=y7();return e&&e.length?e.map(e=>y2(e)):[]},structuralSharing:!1}),bt=()=>({items:be().data||[]});function br(e){let t=e.columns.Title;if(!t)return null;switch(t.contentType){case mA.DraftIssue:case mA.Issue:case mA.PullRequest:case mA.RedactedItem:return{memexProjectColumnId:mP.Title,value:t.value};default:return null}}let ba=(e,t)=>Error(`Value of column with ID "${e}" does not match expected type "${t}"`);function bn(e,t){return bs(bi(e),e.dataType,t)}function bl(e){try{let t=e.column.columnModel;return void 0!==t?bs(t.id,t.dataType,e.row.original):null}catch(e){return null}}function bi(e){switch(e.dataType){case mD.Assignees:return mP.Assignees;case mD.Labels:return mP.Labels;case mD.Milestone:return mP.Milestone;case mD.Repository:return mP.Repository;case mD.TrackedBy:return mP.TrackedBy;case mD.Title:return mP.Title;case mD.Text:case mD.Number:case mD.Date:case mD.Iteration:case mD.SingleSelect:return e.memexProjectColumnId}}function bs(e,t,r){switch(t){case mD.Assignees:return{dataType:t,value:r.columns[mP.Assignees]??[]};case mD.Labels:return{dataType:t,value:r.columns[mP.Labels]??[]};case mD.Milestone:return{dataType:t,value:r.columns[mP.Milestone]};case mD.Repository:return{dataType:t,value:r.columns[mP.Repository]};case mD.TrackedBy:return{dataType:t,value:r.columns[mP.TrackedBy]??[],appendOnly:!1};case mD.Title:{let e=r.columns[mP.Title];if(!e||e.contentType===mA.RedactedItem)throw Error("Cannot update title of redacted item");return{dataType:t,value:e.value}}case mD.Text:if("number"==typeof e){let a=r.columns[e];if(void 0===a||p9(a))return{dataType:t,memexProjectColumnId:e,value:a?.raw}}throw ba(e,t);case mD.Number:if("number"==typeof e){let a=r.columns[e];if(void 0===a||fe(a))return{dataType:t,memexProjectColumnId:e,value:a}}throw ba(e,t);case mD.Date:if("number"==typeof e){let a=r.columns[e];if(ft(a)){let r=pX(a);if(r)return{dataType:t,memexProjectColumnId:e,value:r}}else if(void 0===a)return{dataType:t,memexProjectColumnId:e,value:a}}throw ba(e,t);case mD.Iteration:if("number"==typeof e){let a=r.columns[e];if(void 0===a||fr(a))return{dataType:t,memexProjectColumnId:e,value:a}}throw ba(e,t);case mD.SingleSelect:if("number"==typeof e||e===mP.Status){let a=r.columns[e];if(void 0===a||fr(a))return{dataType:t,memexProjectColumnId:e,value:a}}throw ba(e,t);case mD.LinkedPullRequests:case mD.Reviewers:case mD.Tracks:throw Error(`Columns of type "${t}" cannot be updated.`)}}function bo(e,t){switch(e){case mP.Assignees:return{memexProjectColumnId:mP.Assignees,value:t.columns[mP.Assignees]||null};case mP.Labels:return{memexProjectColumnId:mP.Labels,value:t.columns[mP.Labels]||null};case mP.LinkedPullRequests:return{memexProjectColumnId:mP.LinkedPullRequests,value:t.columns[mP.LinkedPullRequests]||null};case mP.Milestone:return{memexProjectColumnId:mP.Milestone,value:t.columns[mP.Milestone]||null};case mP.Repository:return{memexProjectColumnId:mP.Repository,value:t.columns[mP.Repository]||null};case mP.Reviewers:return{memexProjectColumnId:mP.Reviewers,value:t.columns[mP.Reviewers]||null};case mP.Status:return{memexProjectColumnId:mP.Status,value:t.columns[mP.Status]||null};case mP.Tracks:return{memexProjectColumnId:mP.Tracks,value:t.columns[mP.Tracks]||null};case mP.TrackedBy:return{memexProjectColumnId:mP.TrackedBy,value:t.columns[mP.TrackedBy]||null};case mP.Title:return br(t);default:{let r=t.columns[e]||null;return pG(e)?{memexProjectColumnId:e,value:r}:null}}}function bd(e){return pG(e)}function bc(e){return bd(e)||e===mP.Title||e===mP.Status||e===mP.Assignees}let bu=[mD.Tracks,mD.TrackedBy];function bm(e){return bu.some(t=>t===e.dataType)}function bp(e,t){switch(e){case mA.DraftIssue:return t.filter(e=>e.id!==mP.Title&&bc(e.id));case mA.Issue:return t.filter(e=>e.id!==mP.Title&&e.id!==mP.Reviewers);default:return[]}}function bf(e){return e&&"id"in e&&"url"in e}function bh(e,t,r){if(t&&e===mA.DraftIssue&&(t=t.filter(e=>bc(e.memexProjectColumnId))),t&&0!==t.length||null!=r)return{previousMemexProjectItemId:r,memexProjectColumnValues:t}}function bg(e){return Object.keys(e.columns).reduce((t,r)=>{let a=pB(r);if(!a)return t;let n=bo(a,e);return n?[...t,n]:t},[])}function bx(e,t,r){let a=t.get(e.id);switch(e.dataType){case mD.Assignees:{let e=a||r.getAssignees();return e}case mD.Labels:{let e=a||r.getLabels();return e}case mD.Iteration:{let t=a||r.getCustomField(e.id);if(!t)return;let n=e.settings.configuration?gE(e.settings.configuration):[],l=n.find(e=>e.id===t.id);return l}case mD.Tracks:{let e=a||r.getCompletion();return e}case mD.SingleSelect:{let t=a||(e.id===mP.Status?r.getStatus():r.getCustomField(e.id));if(!t)return;let n=e.settings?.options?.find(e=>e.id===t.id);return n}case mD.Text:{let t=a||r.getCustomField(e.id);return t}case mD.Milestone:{let e=a||r.getMilestone();return e}case mD.LinkedPullRequests:{let e=a||r.getLinkedPullRequests();return e}case mD.Date:{let t=a||r.getCustomField(e.id);return t}case mD.Number:{let t=a||r.getCustomField(e.id);return t}case mD.Repository:{let e=a||r.getExtendedRepository();return e}case mD.TrackedBy:{let e=a||r.getTrackedBy();return e}}}function by(e,t){let{content:r,contentType:a,id:n,memexProjectColumnValues:l,priority:i,updatedAt:s}=t,o=l??bg(e),d=e.contentRepositoryId??-1;"contentRepositoryId"in t&&(d=t.contentRepositoryId);let c=r??e.content,u=e.content;switch(a){case mA.Issue:case mA.PullRequest:if(!bf(c))return null;return{contentType:a,content:{...u,...c},contentRepositoryId:d,memexProjectColumnValues:o,id:n,priority:i,updatedAt:s};case mA.DraftIssue:return{contentType:a,content:{...u,...c},memexProjectColumnValues:o,id:n,priority:i,updatedAt:s};case mA.RedactedItem:return{contentType:a,content:c,memexProjectColumnValues:o,id:n,priority:i,updatedAt:s};default:xE(a)}}function bb(e,t,r){let a=bw(e,t.id);-1===a&&e.setQueryData([y9],e=>{let a=[...e||[]];return null!=r?a.splice(r,0,t):a.push(t),a})}function bv(e,t){let r=e.getQueryData([y9]);if(r)return r.find(e=>e.id===t)}function bw(e,t){let r=e.getQueryData([y9]);return r?r.findIndex(e=>e.id===t):-1}function bj(e){return e.getQueryData([y9])||[]}function bC(e,t){e.setQueryData([y9],(e=[])=>{let r=new Set(t);return e.filter(e=>!r.has(e.id))})}function bk(e,t){e.setQueryData([y9],[...t])}function bS(e){e.setQueryData([y9],e=>[...e||[]])}function bI(e,t){let r=bw(e,t.id);-1!==r&&e.setQueryData([y9],e=>{let a=[...e||[]],n=a[r];if(n){let e=by(n,t);if(e){let t=y2(e);return a[r]=t,a}}return e})}function bN(e,t,r){e.setQueryData([y9],e=>{let a=[],n=(e||[]).reduce((e,t)=>(e[t.id]=t,e),{});for(let e of t){let t=n[e.id];if(t){if(!t.skippingLiveUpdates&&t.id!==r){let r=by(t,e);t=r?y2(r):t}}else t=y2(e);a.push(t)}return a})}function b_(e,t,r){let a=bw(e,t),n=e.getQueryData([y9])||[],l=n[a];if(!l)return{previousItemId:-1};let i="";if(r>0){let e=a<r?n[r]:n[r-1];e&&(i=e.id)}let s=[...n];return s.splice(a,1),s.splice(r,0,l),e.setQueryData([y9],s),{previousItemId:i,previousMovingItemIndex:a}}function bT(e,t){let r={};if(t.memexProjectColumnValues)for(let e of t.memexProjectColumnValues)r[e.memexProjectItemId]={memexProjectColumnId:t.id,value:e.value};e.setQueryData([y9],e=>{let a=[...e||[]];for(let e of a){let a=r[e.id];a?.value||(a={memexProjectColumnId:t.id,value:null}),e.setColumnValueForItemColumnType(a)}return a})}let bR=()=>{let e=(0,uW.NL)(),t=(0,uq.useCallback)(t=>{bI(e,t)},[e]),r=(0,uq.useCallback)(()=>{bS(e)},[e]);return{setItemData:t,setItemsStateFromModels:r}};async function bE(e){let{memex_skip_json_parsing_if_invalid_response_and_content_found:t}=ho(),r=f9("stats-post-api-data"),{data:a}=await hx(r.url,{method:"POST",body:e},t);return a}let bD=(0,uq.createContext)(null),bP=()=>{let e=(0,uq.useContext)(bD);if(!e)throw Error("useViews must be used within a ViewProvider");return e},bA=()=>{let e=(0,uq.useContext)(bD);return e?.currentView?.number},bM=()=>{let e=bA(),{loggedInUser:t}=yk(),r=(0,uq.useCallback)(r=>{t?.id&&bE({payload:{memexProjectViewNumber:e,...r}})},[e,t]);return{postStats:r}},bL=new Set([mA.DraftIssue,mA.Issue]),bF="item",bZ={type:hk.INFO};function bO(e,t){let{addToast:r}=m7(),[,a]=yY(),n=m1(r);(0,uq.useEffect)(()=>{e&&(t?.contentType&&bL.has(t.contentType)||(n.current({type:mB.error,message:t?.contentType===mA.PullRequest?fE.sidePanelItemNotSupported:fE.sidePanelItemNotFound}),a(e=>(e.delete(yW),e.delete(yH),e),{replace:!0})))},[n,e,t?.contentType,a])}let bB=new Set,bV=(0,uq.createContext)(null),b$=(0,uq.createContext)(void 0),bz=(0,uq.createContext)([]);function bU(e){return!!e&&new Set(Object.values(hk)).has(e)}function bW(e,t){return bU(e)?t[e]:null}function bH(){let[e,t]=yY(),r=e.get(yW)===bF;(0,uq.useEffect)(()=>{r&&t(e=>(e.set(yW,hk.ISSUE),e),{replace:!0})},[r,t])}let bG=[],bq=({children:e})=>{let{memex_pinned_side_panel:t}=g9(),[r,a]=yY(),{items:n}=bt(),l=r.get(yW),i=l===hk.BULK_ADD,s=l===bF||l===hk.ISSUE,o=r.get(yH),d=o?n.find(e=>e.id===parseInt(o)):void 0;bH(),bO(o,d);let[c,u]=(0,uq.useState)(d?[d]:bG),m=0===c.length;d&&m&&u([d]);let p=(0,uq.useMemo)(()=>0===c.length?bG:c.reduce((e,t)=>{if(!t.memexItemId)return e.push(t),e;let r=t.memexItemId(),a=n.find(e=>e.id===r);return a&&e.push(a),e},[]),[c,n]),f=p.at(-1),h=(0,uq.useMemo)(()=>{if(!s||!f)return null;let e={type:hk.ISSUE,item:f};return e},[s,f]),{hasWritePermissions:g}=yI(),x=(0,uQ.TH)(),y=(0,uq.useMemo)(()=>{if(!g||!i)return null;let e={...bQ(x.state),type:hk.BULK_ADD};return e},[i,g,x.state]);(0,uq.useEffect)(()=>{i&&!g&&a(e=>(e.delete(yW),e),{replace:!0})},[g,i,a]);let b=bW(l,{[hk.ISSUE]:h,[hk.INFO]:bZ,[hk.BULK_ADD]:y});(0,uq.useEffect)(()=>{!b&&P.current&&(P.current?.(),P.current=void 0)},[b]);let v=!!b;(0,uq.useEffect)(()=>{b&&!G.current?.contains(document.activeElement)&&setTimeout(()=>H.current?.focus())},[b]);let{postStats:w}=bM(),[j,C]=(0,f4._)("projects.sidePanelPinned",!1),k=!!t&&j,S=(0,uq.useCallback)(e=>{C(e),setTimeout(()=>W.current?.focus()),w({name:"side_panel_pin",context:e?"pin":"unpin"})},[C,w]),[I,N]=(0,uq.useState)(bB),_=I.size>0,T=(0,uq.useCallback)(()=>N(bB),[]),{setItemData:R}=bR(),E=(0,uq.useCallback)(async e=>{let t=e.memexItemId?.();if(void 0===t)return;let r=await hC({memexProjectItemId:t});r.ok&&R(r.data.memexProjectItem)},[R]),D=(0,uq.useCallback)(async()=>{b?.type===hk.ISSUE&&E(b.item)},[E,b]),P=(0,uq.useRef)(),{memex_new_issue_viewer:A}=g9(),M=(0,uq.useCallback)((e,t)=>{bL.has(e.contentType)&&(A||(E(e),T()),a(t=>(t.set(yW,hk.ISSUE),t.set(yH,e.id.toString()),t)),P.current=t,u([e]),w({name:h_,memexProjectItemId:e.id}))},[A,a,w,E,T]),L=(0,uq.useCallback)(()=>{r.get(yW)!==hk.INFO&&a(e=>(e.set(yW,hk.INFO),e))},[r,a]),F=(0,uq.useCallback)((e,t,r,n)=>{T(),a(e=>(e.set(yW,hk.BULK_ADD),e),{state:{targetRepository:t,newItemAttributes:n,query:r}}),w({name:gs,ui:e})},[T,w,a]),Z=(0,f6.N)(),O=(0,uq.useCallback)(async()=>!_||await Z({...fE.sidePanelCloseConfirmation,confirmButtonType:"danger"}),[Z,_]),B=(0,uq.useCallback)(async e=>{if(_&&!(e&&e.force)){let e=await O();if(!e)return!1;T()}return a(e=>(e.delete(yW),e.delete(yH),e)),u(bG),!0},[_,T,a,O]),V=(0,uq.useCallback)(e=>{if(_)return e.preventDefault(),e.returnValue=""},[_]);(0,uY.yq)(V);let $=(0,uq.useCallback)(e=>{if(!e)return;let{historyIdx:t,item:r}=e;r&&(u(e=>{let a=e.slice();return void 0!==t&&(a=e.slice(0,t)),[...a,r]}),w({name:h_,memexProjectItemId:r.id}))},[w]),z=(0,uq.useCallback)(async e=>{if(b?.type!==hk.ISSUE||!e)return;let{item:t}=e;if(!t)return;let r=await O();r&&(E(t),T(),$(e))},[b?.type,E,T,$,O]),U=(0,uq.useCallback)(async e=>{if(!e||!e.item?.isHierarchy)return;let{item:t}=e;if(!t)return;let r=await O();r&&(E(t),T(),$(e))},[E,T,$,O]),W=(0,uq.useRef)(null),H=(0,uq.useRef)(null),G=(0,uq.useRef)(null),q=(0,uq.useMemo)(()=>({sidePanelState:b,openProjectItemInPane:M,reloadPaneItem:D,openPaneInfo:L,openPaneBulkAdd:F,closePane:B,hasUnsavedChanges:_,setDirtyItems:N,dirtyItems:I,isPaneOpened:v,supportedItemTypes:bL,openPaneHistoryItem:z,openPaneHierarchyHistoryItem:U,pinned:k,setPinned:S,pinButtonRef:W,closeButtonRef:H,containerRef:G}),[B,N,I,_,v,F,U,z,L,M,D,b,k,S]);return(0,uO.jsx)(bV.Provider,{value:q,children:(0,uO.jsx)(b$.Provider,{value:b&&"item"in b?b.item.id:void 0,children:(0,uO.jsx)(bz.Provider,{value:p,children:e})})})},bK=(0,uq.memo)(bq);function bQ(e){let t={targetRepository:void 0,query:void 0,newItemAttributes:void 0};return e&&("targetRepository"in e&&(t.targetRepository=e.targetRepository),"query"in e&&(t.query=e.query),"newItemAttributes"in e&&(t.newItemAttributes=e.newItemAttributes)),t}let bY=()=>(0,uq.useContext)(bz),bX=()=>{let e=(0,uq.useContext)(b$);return e},bJ=()=>{let e=(0,uq.useContext)(bV);if(null===e)throw Error("useSidePanel must be used within a SidePanelProvider");return e},b0=()=>{let{openProjectItemInPane:e,...t}=bJ(),{navigationDispatch:r}=x3(),{postStats:a}=bM(),n=(0,uq.useCallback)(t=>{e(t,()=>{r(x2({focusType:xl.Focus}))}),a({name:"side_panel_table_open",context:JSON.stringify({contentType:t.contentType})}),r(x2({focusType:xl.Suspended}))},[r,e,a]);return{openPane:n,...t}},b1=()=>{let{openProjectItemInPane:e,...t}=bJ(),{navigationDispatch:r}=xo(),{postStats:a}=bM(),n=(0,uq.useCallback)(t=>{e(t,()=>{r(xf())}),a({name:"side_panel_board_open",context:JSON.stringify({contentType:t.contentType})})},[r,e,a]);return{openPane:n,...t}};try{(L=bV).displayName||(L.displayName="SidePanelContext")}catch{}try{(F=b$).displayName||(F.displayName="SidePanelCurrentItemIdContext")}catch{}try{(Z=bz).displayName||(Z.displayName="SidePanelBreadcrumbHistoryContext")}catch{}try{(O=bq).displayName||(O.displayName="SidePanelProviderRenderFunction")}catch{}try{(B=bK).displayName||(B.displayName="SidePanelProvider")}catch{}let b2=()=>{let{pathname:e}=(0,uQ.TH)(),{currentView:t}=bP(),{title:r}=f3(),{sidePanelState:a}=bJ(),n=m_(e),l=(0,uq.useMemo)(()=>{if(a&&"item"in a)return fP.item(r,a.item.getTitle(!0));switch(n){case mN.PROJECT_ROUTE:case mN.PROJECT_VIEW_ROUTE:return fP.view(r,t?.name);case mN.PROJECT_ARCHIVE_ROUTE:return fP.archive(r);case mN.PROJECT_SETTINGS_ROUTE:case mN.PROJECT_SETTINGS_FIELD_ROUTE:case mN.PROJECT_SETTINGS_ACCESS_ROUTE:return fP.settings(r);case mN.PROJECT_WORKFLOWS_ROUTE:case mN.PROJECT_WORKFLOW_CLIENT_ID_ROUTE:return fP.workflows(r);case mN.PROJECT_INSIGHTS_ROUTE:case mN.PROJECT_INSIGHTS_NUMBER_ROUTE:return fP.insights(r)}return r},[n,t?.name,a,r]);(0,uq.useEffect)(()=>{document.title=l},[l]),(0,uq.useEffect)(()=>{document.dispatchEvent(new CustomEvent("context-region-label:update",{detail:{label:r}}))},[r])};function b5({children:e,...t}){return(0,uO.jsx)(mF.Z,{...t,sx:{position:"relative",backgroundSize:"1px 37px",backgroundPositionY:"15px",backgroundRepeat:"repeat-x, repeat",backgroundColor:e=>`${e.colors.canvas.default}`,color:e=>`${e.colors.fg.default}`,width:"100%",height:"100%",overflow:"auto",...t.sx},children:e})}try{(V=b5).displayName||(V.displayName="BaseSettingsPage")}catch{}async function b3(e,t,r){let{memex_skip_json_parsing_if_invalid_response_and_content_found:a}=ho(),n=t.map(t=>` ${e?.nameWithOwner}#${t.number}`).join(","),l={memexProjectItem:{contentType:mA.DraftIssue,content:{title:n},memexProjectColumnValues:r}},i=f9("memex-item-create-bulk-api-data"),{data:s}=await hx(i.url,{method:"POST",body:l},a),o=await hy(s.job.url,{headers:{accept:"application/json"}});return o.ok}async function b4(e,t){let{memex_skip_json_parsing_if_invalid_response_and_content_found:r}=ho(),a=e.map(e=>` ${e.userName}/${e.repoName}#${e.number}`).join(","),n={memexProjectItem:{contentType:mA.DraftIssue,content:{title:a},memexProjectColumnValues:t}},l=f9("memex-item-create-bulk-api-data"),{data:i}=await hx(l.url,{method:"POST",body:n},r),s=await hy(i.job.url,{headers:{accept:"application/json"}});return s.ok}let b6=({request:e,rollback:t,showErrorToast:r=!0})=>{let a=(0,uq.useRef)({status:"idle",data:void 0}),{addToast:n}=m7(),l=(0,uq.useCallback)(async(l,i)=>{try{a.current.status="loading";let t=await e(l);a.current.data=t,a.current.status="succeeded"}catch(e){if(e instanceof api_error_ApiError){a.current.status="failed",t&&t(i),r&&n({message:e.message,type:mB.error});return}throw e}},[n,e,t,r]);return(0,uq.useMemo)(()=>({perform:l,status:a}),[l,a])};var b7=r(42968);async function b8(e,t,r,a){let n=f9("search-issues-and-pulls-api-data"),l=new URL(n.url,window.location.origin);l.searchParams.set("repositoryId",`${e}`),l.searchParams.set("q",t),null!=r&&l.searchParams.set("memexNumber",`${r}`),null!=a&&l.searchParams.set("limit",`${a}`);let{data:i}=await hh(l);return i}let b9=()=>{let e=(0,uq.useContext)(fJ);if(!e)throw Error("useMemex must be used within a ProjectNumberContext.Provider");return e},ve=(e,t)=>{let[r,a]=(0,uq.useState)(null),[n,l]=(0,uq.useState)(!1),i=(0,uq.useRef)(),s=(0,uq.useRef)(),{projectNumber:o}=b9(),d=(0,uq.useCallback)(async({repositoryId:e,query:r,memexNumber:a})=>{let n=await b8(e,r,a,t?.limit);return n.issuesAndPulls},[t?.limit]),{perform:c,status:u}=b6({request:d}),m=(0,uq.useCallback)(async(t,r,n=!1)=>{let d;l(!1);let m=r.trim(),p=n||void 0===s.current||s.current!==m;return p&&(n||e(!0),i.current&&i.current.cancel(),i.current=(0,b7.Z)(async()=>{await c({repositoryId:t,memexNumber:o,query:m}),"succeeded"===u.current.status&&(a(u.current.data),l(!0)),n||e(!1)},200),d=i.current()),s.current=m,d||(d=Promise.resolve()),d},[c,o,u,e]),p=(0,uq.useCallback)(e=>{r&&a(r.filter(t=>t.id!==e.id))},[r,a]),f=(0,uq.useCallback)(e=>{a(t=>t&&t.filter(t=>!e.has(t.number)))},[a]);return{items:r,removeItem:p,removeItems:f,refresh:m,finishedFetchingRepoItems:n,setFinishedFetchingRepoItems:l}};function vt(e,t){let r;if(t){let e=p2(t);r={value:e}}return{memexProjectColumnId:e,value:r}}function vr(e){switch(e.dataType){case mD.Assignees:return{memexProjectColumnId:mP.Assignees,value:e.value};case mD.Labels:return{memexProjectColumnId:mP.Labels,value:e.value};case mD.Milestone:return{memexProjectColumnId:mP.Milestone,value:e.value};case mD.TrackedBy:return{memexProjectColumnId:mP.TrackedBy,value:e.value};case mD.Number:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value};case mD.Date:return vt(e.memexProjectColumnId,e.value?.value);case mD.Repository:return{memexProjectColumnId:mP.Repository,value:e.value||null};case mD.Title:return{memexProjectColumnId:mP.Title,value:e.value};case mD.Text:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value?{raw:e.value,html:e.value}:void 0};case mD.SingleSelect:case mD.Iteration:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value}}}function va(e,t){let r=t?t.toISOString():"";return{memexProjectColumnId:e,value:r}}function vn(e){return"string"==typeof e?{memexProjectColumnId:mP.Title,value:{title:e}}:{memexProjectColumnId:mP.Title,value:{title:e.raw}}}function vl(e){switch(e.dataType){case mD.Assignees:return{memexProjectColumnId:mP.Assignees,value:e.value.map(e=>e.id)};case mD.Labels:return{memexProjectColumnId:mP.Labels,value:e.value.map(e=>e.id)};case mD.Milestone:return{memexProjectColumnId:mP.Milestone,value:e.value?e.value.id:""};case mD.TrackedBy:return{memexProjectColumnId:mP.TrackedBy,value:e.value.map(xD),appendOnly:e.appendOnly};case mD.Number:{let t=e.value?e.value.value:"";return{memexProjectColumnId:e.memexProjectColumnId,value:t}}case mD.Date:return va(e.memexProjectColumnId,e.value?.value);case mD.Title:return vn(e.value.title);case mD.Text:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value||""};case mD.SingleSelect:case mD.Iteration:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value?.id||""};default:return null}}let vi=(0,uq.createContext)(null),vs=(0,uq.memo)(function({children:e,selectedRepository:t,query:r}){let[a,n]=(0,uq.useState)(!0),[l,i]=(0,uq.useState)(!1),[s,o]=(0,uq.useState)([]),[d,c]=(0,uq.useState)([]),[u,m]=(0,uq.useState)(!1),[p,f]=(0,uq.useState)(t),[h,g]=(0,uq.useState)(r??""),[x,y]=(0,uq.useState)(!1),[b,v]=(0,uq.useState)(!1),{refresh:w,items:j,removeItems:C}=ve(n,{limit:25}),k=(0,uq.useMemo)(()=>new Set(s.map(e=>e.number)),[s]),S=(0,uq.useCallback)(e=>{let t=s.some(t=>t.number===e.number);t?o(s.filter(t=>t.number!==e.number)):o(t=>[...t,e])},[s]),I=(0,uq.useMemo)(()=>s.length===j?.length,[j,s]),N=(0,uq.useCallback)(()=>{I?o([]):j&&o(j)},[I,j]),_=(0,uq.useCallback)(e=>k.has(e),[k]),T=(0,uq.useCallback)(()=>{o([])},[]),R=(0,uq.useCallback)(async e=>{v(!1),m(!1),p?(T(),await w(p.id,e,!0)):x&&null===p&&v(!0)},[T,x,w,p]);(0,uq.useEffect)(()=>{j&&v(!0)},[j]),(0,uq.useEffect)(()=>{R(h)},[R,h]),(0,uq.useEffect)(()=>{u&&R(h)},[u,R,h]),(0,uq.useEffect)(()=>{b&&x?n(!1):n(!0)},[b,x,a,n]);let E=(0,uq.useCallback)(async e=>{let t=[];for(let e of d){let r=vl(e);r&&t.push(r)}let r=new Set(e.map(e=>e.number));i(!0),(p?await b3(p,e,t):await b4(e,t))&&(C(r),o(e=>e.filter(e=>!r.has(e.number))),i(!1),25===e.length&&v(!1))},[p,d,C]),D=(0,uq.useCallback)(()=>{i(!1)},[]),P=b6({request:E,rollback:D});return(0,uO.jsx)(vi.Provider,{value:(0,uq.useMemo)(()=>({addSelectedItemsRequest:P,clearSelectedItems:T,isSelected:_,selectItem:S,selectedItems:s,selectedRepo:p,setSelectedRepo:f,updateColumnsAction:d,setUpdateColumnsAction:c,hasFetchedRepos:x,setHasFetchedRepos:y,items:j,loading:a,addingItems:l,finishedFetchingRepoItems:b,searchQuery:h,setSearchQuery:g,selectAllItems:N,areAllItemsSelected:I,areAllItemsAdded:u,setAreAllItemsAdded:m,MAX_ITEM_NUM:25}),[P,T,_,S,s,p,f,d,c,x,y,j,a,l,b,h,g,N,I,u,m,25]),children:e})}),vo=()=>{let e=(0,uq.useContext)(vi);if(null===e)throw Error("useBulkAddItems must be used within an BulkAddItemsContext");return e};try{($=vi).displayName||($.displayName="BulkAddItemsContext")}catch{}try{(z=vs).displayName||(z.displayName="BulkAddItemsProvider")}catch{}var vd=r(51461);async function vc(){let e=f9("memex-get-archive-status-api-data"),t=new URL(e.url,window.location.origin),{data:r}=await hh(t);return r}let vu=class DebounceAsyncCancellation extends Error{constructor(){super("this invocation was cancelled"),Object.setPrototypeOf(this,new.target.prototype),this.name="DebounceAsyncCancellation"}};function vm(e,t){let r=null,a=()=>{r&&(window.clearTimeout(r),r=null)},n=(...n)=>new Promise((l,i)=>{a();let s=window.setTimeout(async()=>{if(r===s)try{let t=await e(...n);if(r===s)return l(t)}catch(e){i(e)}else i(new vu)},t);r=s});return n.cancel=a,n}let vp=(0,uq.createContext)(null),vf=(0,uq.memo)(function({children:e}){let{items:t}=bt(),{loggedInUser:r}=yk(),[a,n]=(0,uq.useState)(!1),[l,i]=(0,uq.useState)(!1),s=(0,uq.useMemo)(()=>vm(async()=>{if(r)try{let{isArchiveFull:e}=await vc();n(e)}catch(e){n(!1)}},500),[r]);return(0,uq.useEffect)(()=>(s(),()=>{s.cancel()}),[s,t.length]),(0,uO.jsx)(vp.Provider,{value:(0,uq.useMemo)(()=>({isArchiveFull:a,setArchiveStatus:s,shouldDisableArchiveForActiveWorkflow:l,setShouldDisableArchiveForActiveWorkflow:i}),[a,s,l]),children:e})});try{(U=vp).displayName||(U.displayName="ArchiveStatusContext")}catch{}try{(W=vf).displayName||(W.displayName="ArchiveStatusProvider")}catch{}let vh=()=>{let e=(0,uq.useContext)(vp);if(!e)throw Error("useArchiveStatus must be used within an ArchiveStatusProvider");return e},vg=(0,uq.createContext)(null),vx=({children:e})=>{let[t,r]=(0,uq.useState)(!1),[a,n]=(0,uq.useState)(),[l,i]=(0,uq.useState)(fV.defaultWorkflowName),[s,o]=(0,uq.useState)(),d=(0,uq.useCallback)(e=>{void 0===e?(n(void 0),i(fV.defaultWorkflowName)):(n({...e}),o(e.clientId),i(fV.newWorkflowName(e.name)))},[]),c=(0,uq.useMemo)(()=>({isDialogOpen:t,workflowTemplate:a,workflowName:l,setWorkflowName:i,applyWorkflowTemplate:d,setIsDialogOpen:r,returnFocusClientId:s}),[d,t,s,l,a]);return(0,uO.jsx)(vg.Provider,{value:c,children:e})};try{(H=vg).displayName||(H.displayName="NewWorkflowDialogContext")}catch{}try{(G=vx).displayName||(G.displayName="NewWorkflowDialogProvider")}catch{}async function vy(e){let t=f8("memex-workflow-create-api-data"),{data:r}=await hh(t.url,{method:"POST",body:e,token:t.token});return r}async function vb(e){let t=f8("memex-workflow-update-api-data"),{data:r}=await hh(t.url,{method:"PUT",body:e,token:t.token});return r}var vv=r(97733);let vw={ItemAdded:"item_added",Reopened:"reopened",ReviewChangesRequested:"review_changes_requested",ReviewApproved:"review_approved",Closed:"closed",Merged:"merged",QueryMatched:"query_matched",ProjectItemColumnUpdate:"project_item_column_update"},vj={SetField:"set_field",GetItems:"get_items",GetProjectItems:"get_project_items",ArchiveProjectItem:"archive_project_item",AddProjectItem:"add_project_item",CloseItem:"close_item"},vC={get_project_items:0,get_items:0,add_project_item:1,archive_project_item:1,close_item:2,set_field:2},vk={Issue:"Issue",PullRequest:"PullRequest"},vS=(e,t)=>{let r={triggerType:t?.triggerType||vw.QueryMatched,contentTypes:t?.contentTypes||[vk.Issue,vk.PullRequest],actions:t?.actions.map(e=>{let t={...e};return delete t.id,t})||[{actionType:vj.GetItems,arguments:{query:"is:pr,issue is:open label:bug",repositoryId:void 0}},{actionType:vj.AddProjectItem,arguments:{}}]};return{id:void 0,clientId:(0,vv.randomUUID)(),isUserWorkflow:!0,name:e,enabled:!1,...r}};let MemexWorkflowConverter=class MemexWorkflowConverter{static toClient(e,t=!1,r){return{...e,clientId:r||(0,vv.randomUUID)(),isUserWorkflow:t}}static toServer(e){let{id:t,name:r,triggerType:a,contentTypes:n,enabled:l,actions:i}=e;return{id:t,name:r,triggerType:a,contentTypes:n,enabled:l,actions:i}}};function vI(e,t){let r=t.actions.map(e=>e.actionType);return 1===e.filter(e=>e.id&&e.triggerType===t.triggerType&&e.actions.every(e=>r.includes(e.actionType))).length}function vN(e){return"number"==typeof e.id}function v_(e){return e.actions.some(e=>e.actionType===vj.ArchiveProjectItem)}function vT(e){return e.actions.some(e=>e.actionType===vj.AddProjectItem)}function vR(e){return e.clientId}function vE(e,t){return(vC[e.actionType]??0)-(vC[t.actionType]??0)}function vD(e){let t=Array.from(e.actions).sort(vE),r=t[t.length-1]?.actionType??"";return`${e.triggerType}_${r}`}function vP(e,t,r){let a=r?vD:vR,n=r??a(t);return e.findIndex(e=>a(e)===n)}let vA=e=>{switch(e){case vw.ItemAdded:return mM.pOD;case vw.Reopened:return mM.eJg;case vw.ReviewChangesRequested:return mM.apn;case vw.ReviewApproved:return mM.kD1;case vw.Closed:return mM.C4D;case vw.Merged:return mM.Rvi;default:throw Error(`${e} does not have a default icon`)}},vM={update:"update",enable:"enable",disable:"disable",saveAndEnable:"saveAndEnable"},vL=(e,t)=>{let r=yq(),a=(0,uq.useMemo)(()=>e.find(e=>e.clientId===t)??vF(e),[t,e]),n=(0,uq.useMemo)(()=>{let t=new Set(e.map(e=>e.name.toLocaleLowerCase()));return a?.name&&t.delete(a?.name?.toLocaleLowerCase()),t},[a?.name,e]),l=(0,uq.useMemo)(()=>e.find(e=>v_(e)),[e]),i=(0,uq.useMemo)(()=>e.reduce((e,t)=>t.isUserWorkflow?e+1:e,0),[e]),s=(0,uq.useMemo)(()=>e.some(e=>e.isUserWorkflow&&!vN(e)),[e]),o=(0,uq.useCallback)(e=>{e?r(mv.generatePath({workflowClientId:encodeURIComponent(e)}),{replace:!0}):r(mb.generatePath(),{replace:!0})},[r]);return{activeWorkflow:a,workflowNames:n,autoArchiveWorkflow:l,numberOfUserAddedWorkflows:i,hasUnpersistedUserAddedWorkflow:s,navigateToWorkflow:o}};function vF(e){return e.find(e=>e.enabled)??e[0]}var vZ=r(22578);function vO({environment:e,input:{workflowNumber:t,projectId:a},optimisticUpdater:n,onCompleted:l,onError:i}){return(0,vZ.commitMutation)(e,{mutation:r(50022),variables:{workflowNumber:t,projectId:a},optimisticUpdater:n,onCompleted:l,onError:i})}var vB=r(37736);function vV(e){let[t]=e.split("T");return(0,u0.Z)(t,"A date string must have been passed"),t}let v$=/^["'`](.*)["'`]$/,vz=(e,t)=>(t=t.toLocaleLowerCase(),e.every(e=>t.includes(e.replace(v$,"$1"))));function vU(e,t){let r=RegExp(`^${t.trim().split("*").map(e=>(0,vB.Z)(e)).join(".*")}$`,"i");return r.test(e.trim())}let vW=(e,t)=>e.some(e=>vU(t,e)),vH=/>(.*)/,vG=/>=(.*)/,vq=/<(.*)/,vK=/<=(.*)/,vQ=/(.*)\.\.(.*)/,vY=/\*\.\.(.*)/,vX=/(.*)\.\.\*/,vJ=e=>{let t=e.match(vG);return t&&t[1]?{operator:"GREATER_THAN_OR_EQUAL",value:t[1]}:(t=e.match(vH))&&null!=t[1]?{operator:"GREATER_THAN",value:t[1]}:(t=e.match(vK))&&null!=t[1]?{operator:"LESS_THAN_OR_EQUAL",value:t[1]}:(t=e.match(vq))&&null!=t[1]?{operator:"LESS_THAN",value:t[1]}:(t=e.match(vY))&&null!=t[1]?{operator:"LESS_THAN_RANGE",end:t[1]}:(t=e.match(vX))&&null!=t[1]?{operator:"GREATER_THAN_RANGE",start:t[1]}:(t=e.match(vQ))&&null!=t[1]&&null!=t[2]?{operator:"RANGE",start:t[1],end:t[2]}:null},v0=(e,t)=>{if(!e)return null;switch(e.operator){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":return{...e,value:t(e.value)};case"GREATER_THAN_RANGE":return{...e,start:t(e.start)};case"LESS_THAN_RANGE":return{...e,end:t(e.end)};case"RANGE":return{...e,start:t(e.start),end:t(e.end)};default:xE(e)}},v1=(e,t)=>e.some(e=>{let r=vJ(e);if(r?.operator==="GREATER_THAN_OR_EQUAL")return t>=pV(r.value);if(r?.operator==="GREATER_THAN")return t>pV(r.value);if(r?.operator==="LESS_THAN_OR_EQUAL")return t<=pV(r.value);if(r?.operator==="LESS_THAN")return t<pV(r.value);if(r?.operator==="LESS_THAN_RANGE")return t<=pV(r.end);if(r?.operator==="GREATER_THAN_RANGE")return t>=pV(r.start);if(r?.operator==="RANGE")return t>=pV(r.start)&&t<=pV(r.end);else return pV(e)===t});function v2(e,t){if("GREATER_THAN_OR_EQUAL"===e.operator)return e.value&&t>=e.value;if("GREATER_THAN"===e.operator)return e.value&&t>e.value;if("LESS_THAN_OR_EQUAL"===e.operator)return e.value&&t<=e.value;if("LESS_THAN"===e.operator)return e.value&&t<e.value;if("LESS_THAN_RANGE"===e.operator)return e.end&&t<=e.end;if("GREATER_THAN_RANGE"===e.operator)return e.start&&t>=e.start;if("RANGE"===e.operator){if(e.start&&e.end)return t>=e.start&&t<=e.end;if(e.start)return t>=e.start;if(e.end)return t<=e.end}return!1}let v5=(e,t)=>{let r=p$(t);return!!r&&e.some(a=>{let n=vJ(a),l=!1,i=v0(n,e=>{let t=p$(e);return e&&!t&&(l=!0),t});if(l)return!1;if(i?.operator)return v2(i,r);{let n=p$(a);if(!n)return!1;let l=r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()&&r.getDate()===n.getDate();return vW(e,t)||l}})};function v3(e,t){let r=gV(e,t);if(r)return r;let a=gR(t).sort(gM),n=Object.values(g$).some(t=>e.includes(t));if(n){let r=pD(e),n=pL(r,{kind:"string",start:0}),l=n?gZ(n.text):null,i=l?gV(l,t):null;if(i&&n){let e=pF(r,{kinds:["keyword.operator","string"],start:n});if(!e)return null;let[t,l]=e,s=pV(gc(l).text)*("+"===gc(t).text?1:-1);if(!isNaN(s)){let e=a.findIndex(e=>e.id===i.id);if(e>-1)return a.at(e+s)??null}}}let l=a.find(t=>e.toLowerCase().trim()===t.title.toLowerCase().trim());return l??null}function v4(e,t){return v3(e,t)?.startDate}function v6(e,t,r,a){let n=gR(t),l=n.find(e=>e.id===a);if(!l)return r;let i=e=>{let r=v4(e,t);return r?p$(r):void 0};return e.some(e=>{let r=v0(vJ(e),i);if(r?.operator){let e=p$(l.startDate);return!!e&&v2(r,e)}{let r=v3(e,t);return r?.id===l.id}})}let v7=/(\d+)%/g,v8=(e,t)=>{let r=p7(t),a=e.filter(e=>v7.test(e)).map(e=>e.replace(v7,(e,t)=>t));return v1(a,r)},v9=(e,t)=>{let r=xD(t).toLocaleLowerCase();return e.some(e=>e.toLocaleLowerCase()===r)},we=(e,t,r)=>!r.length||!!t.find(t=>{switch(t.dataType){case mD.Title:{let t=p5(e.Title),a=p4(e.Title),n=pG(a)?`${t} #${a}`:t;return!!n&&(vz(r,t)||vz(r,n))}case mD.Assignees:return!!e[mP.Assignees]?.find(e=>vz(r,e.login)||e.name&&vz(r,e.name));case mD.SingleSelect:{let a=e[t.id]?.id,n=t.settings.options?.find(e=>e.id===a),l=n?.name;return l&&vz(r,l)}case mD.Labels:return!!e[mP.Labels]?.find(e=>vz(r,e.name));case mD.Repository:{let t=e[mP.Repository]?.nameWithOwner;return!!t&&vz(r,t)}case mD.Milestone:{let t=e[mP.Milestone]?.title;return!!t&&vz(r,t)}case mD.Text:{let a=e[t.id];return!!a&&vz(r,a.raw)}case mD.Number:{let a=e[t.id];return!!a&&vz(r,a.value.toString())}case mD.Date:{let a=e[t.id];return!!a&&vz(r,a.value.toString())}case mD.Iteration:{let a=e[t.id]?.id,n=gR(t),l=n.find(e=>e.id===a),i=l?.title;return i&&vz(r,i)}case mD.LinkedPullRequests:return!!e[mP.LinkedPullRequests]?.find(e=>vz(r,e.number.toString()));case mD.Reviewers:return!!e.Reviewers?.find(e=>vz(r,e.reviewer.name)||e.reviewer.name&&vz(r,e.reviewer.name));case mD.Tracks:{let t=e.Tracks;return!!t&&vz(r,t&&fE.progressCount({percent:p7(t),total:t.total}))}case mD.TrackedBy:return e[mP.TrackedBy]?.some(e=>vz(r,xD(e)));default:xE(t)}}),wt=({columnData:e,field:t,value:r,matchNegated:a=!1})=>{let n;let l=e.Title;if(!l)return!1;if("type"===t)switch(l.contentType){case mA.DraftIssue:return n="draft"===r||"issue"===r,a?!n:n;case mA.Issue:return n="issue"===r,a?!n:n;case mA.PullRequest:{let{state:e,isDraft:t}=l.value;return n="draft"===r?"open"===e&&t:"pr"===r,a?!n:n}default:return!1}if("state"===t)switch(l.contentType){case mA.Issue:{let e=l.value.state.toString();return n=e===r,a?!n:n}case mA.PullRequest:{let{isDraft:e,state:t}=l.value;return n=t===r||"merged"===t&&"closed"===r||e&&"open"===t&&"draft"===r,a?!n:n}case mA.DraftIssue:if("open"===r)return!a;if("closed"===r||"merged"===r)return a;return!1;default:return!1}if("reason"===t)switch(l.contentType){case mA.Issue:{let e=l.value.state.toString(),t=l.value.stateReason??("closed"===e?yg.Completed:void 0);return n="closed"===e&&t&&new Set([yg.Completed,yg.NotPlanned]).has(t)?t===wP(r):"open"===e&&t===yg.Reopened&&t===wP(r),a?!n:n}case mA.PullRequest,mA.DraftIssue:return a}return!1},wr=[],wa=({column:e,columnData:t,values:r=wr,matchEmpty:a=!1,matchNegated:n=!1})=>{let l;let{loggedInUser:i}=yk();switch(e.dataType){case mD.Title:{let e=p5(t.Title),i=p4(t.Title),s=pG(i)?`${e} #${i}`:e;return l=s?vW(r,e)||vW(r,s):a,n?!l:l}case mD.Assignees:return ws(t,"Assignees",r,a,n,i);case mD.SingleSelect:{let i=t[e.id]?.id,s=e.settings.options?.find(e=>e.id===i),o=s?.name;return l=o?vW(r,o):a,n?!l:l}case mD.Labels:if(a){let e=!t.Labels||!t.Labels?.length;return n?!e:e}return l=!!t.Labels?.find(e=>vW(r,e.name)),n?!l:l;case mD.Repository:{let e=t.Repository?.nameWithOwner;return l=e?vW(r,e):a,n?!l:l}case mD.Milestone:{let e=t.Milestone?.title;return l=e?vW(r,e):a,n?!l:l}case mD.Text:{let i=t[e.id];return l=i?vW(r,i.raw):a,n?!l:l}case mD.Number:{let i=t[e.id];return l=i?v1(r,i.value):a,n?!l:l}case mD.Date:{let i=t[e.id];return l=i?v5(r,vV(i.value)):a,n?!l:l}case mD.Iteration:{let i=t[e.id]?.id;return l=v6(r,e,a,i),n?!l:l}case mD.LinkedPullRequests:if(a){let e=!t[mP.LinkedPullRequests]||!t[mP.LinkedPullRequests]?.length;return n?!e:e}return l=!!t[mP.LinkedPullRequests]?.find(e=>vW(r,e.number.toString())),n?!l:l;case mD.Reviewers:return ws(t,"Reviewers",r,a,n,i);case mD.Tracks:{let e=t[mP.Tracks];return l=e&&e.total>0?v8(r,e):a,n?!l:l}case mD.TrackedBy:{l=!1;let e=t[mP.TrackedBy]??[];if(a){let t=0===e.length;return n?!t:t}for(let t of e)v9(r,t)&&(l=!0);return n?!l:l}default:xE(e)}},wn=({itemUpdateAtDate:e,value:t,matchNegated:r})=>{if(!e)return!1;let a=t.match(pc),n=a?a[1]:void 0;if(n){let t=p$(`@today-${n}`);return!!v2({operator:r?"GREATER_THAN_OR_EQUAL":"LESS_THAN",value:t},e)}return!1},wl={d:1,w:7,m:28},wi=({itemUpdateAtDate:e,value:t,matchNegated:r})=>{if(!e)return!1;let a=t.match(pu);if(a){let[t,n,l]=a;if(n&&l){let t=parseInt(n)*wl[l],a=p$(`@today-${t}`);return!!v2({operator:r?"GREATER_THAN_OR_EQUAL":"LESS_THAN",value:a},e)}}return!1};function ws(e,t,r,a,n,l){let i;if(a){let r=!e[t]||!e[t]?.length;return n?!r:r}let s=r.indexOf("@me");return s>-1&&l?.login&&r.splice(s,1,l.login.toLocaleLowerCase()),i="Assignees"===t?!!e[t]?.find(e=>vW(r,e.login)||e.name&&vW(r,e.name)):!!e[t]?.find(e=>vW(r,e.reviewer.name)||e.reviewer.name&&vW(r,e.reviewer.name)),n?!i:i}let wo=/(?:[\w-]+:)+(?:[^\s"']+|"(?:[^"]*)"*|'(?:[^']*)'*)*|(?:[^\s"']+|"(?:[^"]*)"*|'(?:[^']*)'*)/g;function wd(e){let t=e.split(wo);wo.lastIndex=0;let r=[],a=[],n=[],l=wo.exec(e);wo.lastIndex=0,l&&l.index>0&&n.push({type:"search",value:"",spaceAfter:" ".repeat(l.index)});let i=null,s=1;for(;null!==(i=wo.exec(e));){let l=i[0];if(!l)continue;if(wm(l))return{searchTokens:[],fieldFilters:[],orderedTokenizedFilters:[{type:"search",value:e,spaceAfter:""}],invalidQuery:!0};let o=t[s]||"";if(s+=1,wj(l)){let e=wg(l),t=l.substring(e.length+1);if(e&&a.push([e,wf(t)]),"no"===e)n.push({type:"no-field",field:t,spaceAfter:o});else if("-no"===e)n.push({type:"no-field",field:t,exclude:!0,spaceAfter:o});else if("is"===e)n.push({type:"is",value:t,spaceAfter:o});else if("-is"===e)n.push({type:"is",exclude:!0,value:t,spaceAfter:o});else if("reason"===e)n.push({type:"reason",value:t,spaceAfter:o});else if("-reason"===e)n.push({type:"reason",exclude:!0,value:t,spaceAfter:o});else if("last-updated"===e)n.push({type:"last-updated",value:t,spaceAfter:o});else if("-last-updated"===e)n.push({type:"last-updated",exclude:!0,value:t,spaceAfter:o});else if("updated"===e)n.push({type:"updated",value:t,spaceAfter:o});else if("-updated"===e)n.push({type:"updated",exclude:!0,value:t,spaceAfter:o});else{let r=e.startsWith("-");n.push({type:"field",field:r?e.slice(1):e,value:t,exclude:r,spaceAfter:o})}}else{n.push({type:"search",value:l,spaceAfter:o});let e=l.trim();e.length&&r.push(e.toLowerCase())}}return{searchTokens:r,fieldFilters:a,orderedTokenizedFilters:n,invalidQuery:!1}}function wc(e){return"no"===e}function wu(e){return 0===e.indexOf("-")}function wm(e){let t=[],r=[];for(let a of e){let e=r.length>0,n=t.length>0,l=t[t.length-1]||"",i=r[r.length-1]||"";"'"===a?(!e||i<l)&&(t.length>0&&l===a?t.pop():t.push(a)):'"'===a&&(!n||l<i)&&(r.length>0&&i===a?r.pop():r.push(a))}return t.length>0||r.length>0}let wp=/"/g;function wf(e){let t=[],r=0;for(let a=0;a<=e.length;a++){let n=e[a],l=e.substring(r,a),i=(l.match(wp)||[]).length;if(","===n&&i%2==0||a===e.length){let e=l.replace(v$,"$1").trim();r=a+1,e.length&&t.push(e)}}return t}let wh=/^[^:]*/;function wg(e){let t=e.match(wh),r=t&&t[0]?t[0]:"";return r}function wx(e){let t=new Map;for(let r of e){let e=wb(r.name);t.set(e,r)}return t}function wy(e){let t=wI(e.toLocaleLowerCase().trim());return["repo","assignee","label"].includes(t)&&("repo"===t&&(t="repository"),"assignee"===t&&(t="assignees"),"label"===t&&(t="labels")),t}function wb(e){let t=wk(e.toLocaleLowerCase().trim());return["repository","assignees","labels"].includes(t)&&("repository"===t&&(t="repo"),"assignees"===t&&(t="assignee"),"labels"===t&&(t="label")),t}function wv(e){return wI(wb(e))}let ww=/^(?:(?!["']|:).)+(?=:)/;function wj(e){return null!==e.match(ww)}let wC=/ /g;function wk(e){return e.replace(wC,"-")}let wS=/-/g;function wI(e){return e.replace(wS," ")}let wN=(e,t,r)=>{if(!e.length||!r.length||r.length>1)return null;let{dataType:a}=t;switch(a){case mD.SingleSelect:{let e=t.settings.options?.find(e=>vW(r,e.name));return e?{dataType:a,memexProjectColumnId:t.id,value:{id:e.id}}:null}case mD.Iteration:{let e;let{configuration:n}=t.settings;if(!n)return null;let l=r[0];if(null==l)return null;let i=gV(l,t);return(e=1===r.length&&i?i:gE(n).find(e=>vW(r,e.title))||null)?{dataType:a,memexProjectColumnId:t.id,value:{id:e.id}}:null}case mD.Text:for(let n of e){let e=n.columns,l=e[t.id];if(l&&vW(r,l.raw))return{dataType:a,memexProjectColumnId:t.id,value:l.raw}}return null;case mD.Date:{let e=r[0];if(null==e)return null;let n=pJ(e);if(!n)return null;return{dataType:a,memexProjectColumnId:t.id,value:{value:n}}}case mD.Number:for(let n of e){let e=n.columns,l=e[t.id];if(l&&vW(r,`${l.value}`))return{dataType:a,memexProjectColumnId:t.id,value:l}}return null;case mD.Assignees:case mD.Labels:return{dataType:a,value:[]};case mD.Milestone:return{dataType:a,value:void 0};case mD.Repository:default:return null}},w_=(e,t)=>{let{dataType:r}=t,a=e.columns;switch(r){case mD.SingleSelect:{let a=t.id===mP.Status?e.getStatus():e.getCustomField(t.id);if(!a)return null;let n=t.settings.options?.find(e=>e.id===a.id);return n?{dataType:r,memexProjectColumnId:t.id,value:{id:n.id}}:null}case mD.Iteration:{let e=a[t.id];return e?{dataType:r,memexProjectColumnId:t.id,value:{id:e.id}}:null}case mD.Text:{let e=a[t.id];return e?{dataType:r,memexProjectColumnId:t.id,value:e.raw}:null}case mD.Date:{let e=a[t.id];if(!e)return null;let n=pJ(e.value);if(!n)return null;return{dataType:r,memexProjectColumnId:t.id,value:{value:n}}}case mD.Number:{let e=a[t.id];return e?{dataType:r,memexProjectColumnId:t.id,value:e}:null}case mD.Assignees:{let e=a[mP.Assignees];return e?{dataType:r,value:e}:null}case mD.Labels:{let e=a[mP.Labels];return e?{dataType:r,value:e}:null}case mD.Milestone:{let e=a[mP.Milestone];return e?{dataType:r,value:e}:null}case mD.TrackedBy:{let e=a[mP.TrackedBy];return e?{dataType:r,value:e,appendOnly:!0}:null}case mD.Repository:default:return null}},wT=/^(@)*\w+(-\d+(d|w|m))?$/,wR=/\S+:["']*$/;function wE(e,t,{value:r,replace:a,filterForEmpty:n=!1,filterForNegative:l=!1}={}){let i=wb(t),s=e.trim();a&&(s.endsWith('"')||s.endsWith("'"))&&(s=s.slice(0,-1));let o=s.match(wR),d=`${i}:`,c=pD(s),u=pM(c,{kind:["keyword.operator.range","keyword.operator.comparison"],start:s.length-1,end:["keyword.operator.separator","source.whitespace"]}),m=pM(c,{kind:"keyword.operator.separator",start:s.length-1});if(u){let e=s.substring(m?m.location.start+1:0,u.location.start);d+=e+u.text}let p=()=>{let e=s.lastIndexOf(",");if(-1===e)return!1;if(e===s.length-1)return!0;let t=s.substring(e+1);return r?.includes(t)||!1},f=t=>{let r=e.lastIndexOf(" "),a=e.substring(0,r);return a.length?`${a} ${t}`:`${a}${t}`},h=t=>{let r=e.lastIndexOf(","),a=e.substring(0,r+1);return`${a}${t}`};if(n)return p()?h(i):f(`${l?"-":""}no:${i}`);if(l){let e="";return(r&&(e=r.toString().match(wT)?r:`"${r}"`),p())?h(e):f(`-${d}${e}`)}if(r){let e=r.match(wT)?r:`"${r}"`;if(p())return h(e);d=`${d}${e}`}if(o)return e.replace(wR,d);if(a){if(r){let t=e.lastIndexOf(`${i}:`),r=e.substring(0,t);return`${r}${d}`}return f(d)}return s.length?`${s} ${d}`:d}function wD(e){let t=e.toLocaleLowerCase(),r=wd(t);return{normalisedQuery:t,...r}}function wP(e){let t=e.replace(/[-_ ]/g,"").toLocaleLowerCase();return"notplanned"===t?yg.NotPlanned:"completed"===t?yg.Completed:"reopened"===t?yg.Reopened:null}let wA=(e,t,r)=>{let a=(0,vB.Z)(e),n=(0,vB.Z)(t),l=RegExp(`\\s*${a}:(.*,)?("?${n}"?)(,\\S)?`,"ig"),i=l.exec(r);if(!i)return r;let s=i[0],o=i[1],d=i[2]??"",c=i[3],u=o?`,${d}`:c?`${d},`:s,m=fy(r.replace(u,""),",");return m};function wM(e){let t="";for(let r of e){switch(r.type){case"search":t+=r.value;break;case"is":t+=`${r.exclude?"-":""}is:${r.value}`;break;case"reason":t+=`${r.exclude?"-":""}reason:${r.value}`;break;case"field":t+=`${r.exclude?"-":""}${r.field}:${r.value}`;break;case"no-field":t+=`${r.exclude?"-":""}no:${r.field}`}t+=r.spaceAfter}return t}function wL(e,t,r,a){let{orderedTokenizedFilters:n}=wd(e),l=wu(t),i=(l?t.slice(1):t).toLowerCase(),s=new Set,o=new Set,d=new Map(a?.columnOptions?.map(e=>[e.toLowerCase(),e])),{firstInclusiveFilterIndex:c,firstExclusiveFilterIndex:u,filters:m}=wB(n,i,(e,t)=>{e?wZ(o,t,{columnOptionMap:d}):wZ(s,t,{columnOptionMap:d})});l?o.add(wO(r)):s.add(wO(r));let p=[...s][0],f=[...o][0];if(l&&1===s.size&&1===o.size&&p===f)s.delete(gc(p));else for(let e of s)o.has(e)&&(s.delete(e),o.delete(e));let h=0;if(s.size>0){let e=Array.from(s).join(","),t=-1===c?m.length:c;m[t]={type:"field",field:i,value:e,exclude:!1,spaceAfter:m[t]?.spaceAfter||" "}}else c>-1&&(m.splice(c,1),c<u&&h--);if(o.size>0){let e=Array.from(o).join(","),t=-1===u?m.length:u+h;m[t]={type:"field",field:i,value:e,spaceAfter:m[t]?.spaceAfter||" ",exclude:!0}}else u>-1&&m.splice(u+h,1);return m[m.length-1]&&(gc(m[m.length-1]).spaceAfter=""),wM(m)}function wF(e){return e?.type!=="no-field"&&e?.value?e.value.split(",").map(e=>e.trim()):[]}function wZ(e,t,r={}){for(let a of wF(t))e.add(r.columnOptionMap?.get(a.toLowerCase())||a);return e}function wO(e){return!e.includes(" ")||e.startsWith('"')||e.endsWith('"')||e.startsWith("'")||e.endsWith("'")?e:`"${e}"`}function wB(e,t,r){let a=-1,n=-1,l=[];for(let i=0;i<e.length;i++){let s=gc(e[i]);if("search"!==s.type||""!==s.value){if("field"!==s.type||s?.field.toLocaleLowerCase()!==t.toLocaleLowerCase()){l.push({...s,spaceAfter:" "});continue}s.exclude?(r(!0,s),-1===n&&(n=i,l.push(s))):(r(!1,s),-1===a&&(a=i,l.push(s)))}}return{firstInclusiveFilterIndex:a,firstExclusiveFilterIndex:n,filters:l}}function wV(e){switch(e?.dataType){case mD.SingleSelect:return e.settings.options.map(e=>wO(e.name));case mD.Iteration:return e.settings.configuration.iterations.map(e=>wO(e.title));default:return}}let w$=(e,t)=>{let r=e.toLocaleLowerCase().trim();return 0===r.length?wH(fB.emptyWorkflowName):r.length>250?wH(fB.workflowNameTooLong):t.has(r)?wH(fB.duplicateWorkflowName):wH()},wz=(e,t)=>{if(!e.actions.length)return wH(fB.invalidNoAction);if(!e.contentTypes.length)return wH(fB.invalidNoContentType);if(t){let r=w$(e.name,t);if(!r.isValid)return r}for(let t of e.actions){let e=wU(t);if(!e.isValid)return e}return wH()},wU=e=>{switch(e.actionType){case vj.SetField:if(!e.arguments.fieldId)return wH(fB.invalidActionField);if(!e.arguments.fieldOptionId)return wH(fB.invalidActionFieldValue);break;case vj.GetProjectItems:{let{query:t,fieldId:r,fieldOptionId:a}=e.arguments;if(t)return wW(e);if(!r)return wH(fB.invalidNoQueryOrFieldId);if(!a)return wH(fB.invalidActionFieldValue);break}case vj.GetItems:if("string"!=typeof e.arguments.query)return wH(fB.invalidNoQuery);if(!e.arguments.repositoryId&&e.id)return wH(fB.invalidNoRepository);break;case vj.AddProjectItem:if(!e.arguments.repositoryId&&e.id)return wH(fB.invalidNoRepository)}return wH()},wW=e=>{let t=e.arguments.query&&wd(e.arguments.query);if(t){for(let r of t.orderedTokenizedFilters)if("search"!==r.type&&(e.actionType!==vj.GetProjectItems||"field"!==r.type||"last-updated"!==r.field&&"updated"!==r.field)&&"field"===r.type)return wH(fB.invalidQuery)}return wH()},wH=e=>({errorMessage:e,isValid:!e});function wG(e){let t=new Map;for(let r of e){let e=vD(r);t.has(e)||r.isUserWorkflow||t.set(e,r.clientId)}return t}function wq(e,t,r,a){let n=wG(e),l=t.map(e=>{let{defaultWorkflow:t}=e;return MemexWorkflowConverter.toClient(t,!1,n.get(vD(t)))}),i=new Map;for(let e of r){let t=vD(e),r=i.get(t)||0,a=r>0,n=MemexWorkflowConverter.toClient(e,a,e.id.toString()),s=vP(l,n,t);-1!==s?a?l.push(n):l.splice(s,1,n):l.push(n),i.set(t,r+1)}return a?l:l.filter(e=>e.triggerType!==vw.ProjectItemColumnUpdate)}let wK=(0,uq.createContext)(null),wQ=(0,uq.memo)(function({children:e}){let{memex_autoclose_issue_on_status_change_workflow:t}=g9(),{projectLimits:{autoAddCreationLimit:r}}=yk(),{isArchiveFull:a,setShouldDisableArchiveForActiveWorkflow:n}=vh(),l=uQ.bS(mv.path)?.params.workflowClientId,[i]=(0,uq.useState)(()=>mT("memex-workflow-configurations-data")||[]),[s]=(0,uq.useState)(()=>mT("memex-workflows-data")||[]),[o,d]=(0,uq.useState)(()=>wq([],i,s,t)),[c]=(0,uq.useState)(()=>wJ(i)),[u]=(0,uq.useState)(()=>w0(i)),m=o.map(e=>e.clientId).reduce((e,t)=>Object.assign(e,{[t]:!1}),{}),[p,f]=(0,uq.useState)(m),h=(0,uq.useRef)(new Map),{activeWorkflow:g,workflowNames:x,autoArchiveWorkflow:y,numberOfUserAddedWorkflows:b,hasUnpersistedUserAddedWorkflow:v,navigateToWorkflow:w}=vL(o,l),j=mT("memex-relay-ids")?.memexProject,{addToast:C}=m7(),k=(0,uq.useCallback)((e,t=!0)=>{t||(e.enabled=!1),d(t=>{let r=vP(t,e);return t.splice(r,1,e),[...t]})},[]),S=(0,uq.useCallback)((e,r)=>{v||d(a=>wq(a,e,r,t))},[v,t]),I=(0,uq.useCallback)((e,t,r)=>{let a;return!o.some(t=>t.name===e)&&"query_matched_add_project_item"===t&&(a=vS(e,r),d(e=>(a&&e.push(a),[...e])),w(a.clientId),!0)},[w,o]),N=(0,uq.useCallback)(async e=>{let t=h.current.get(e.clientId);if(!t)try{t=wY(MemexWorkflowConverter.toServer(e)),h.current.set(e.clientId,t);let r=await t,a=MemexWorkflowConverter.toClient(r.workflow,e.isUserWorkflow,r.workflow.id.toString());d(t=>{let r=vP(t,e);return t.splice(r,1,a),[...t]}),f(t=>{let r={...t};return delete r[e.clientId],{...r,[a.clientId]:!1}}),w(a.clientId)}finally{h.current.delete(e.clientId)}return t},[w]),_=(0,uq.useCallback)(async(e,t)=>{if(!j)return;let r=o.findIndex(t=>vN(t)&&t.number===e),a=w1(o,r),n=o[r];n&&vO({environment:t,input:{workflowNumber:e,projectId:j},optimisticUpdater:()=>{d(e=>(e.splice(r,1),[...e]))},onCompleted:()=>{C({message:fB.deleteWorkflowSuccess,type:"success"}),w(a?.clientId)},onError:()=>{d(e=>(e.splice(r,0,n),[...e])),C({message:fB.deleteWorkflowError,type:"error"})}})},[C,w,j,o]),T=(0,uq.useCallback)(e=>{let t=o.findIndex(t=>t.clientId===e),r=o[t],a=w1(o,t);r&&(d(e=>(e.splice(t,1),[...e])),l===r.clientId&&w(a?.clientId))},[l,w,o]),R=(0,uq.useCallback)(async e=>await wX(e),[]),E=(0,uq.useCallback)(async(e,t)=>{let r={...e,...t};if(!vN(e))return N(r);{let a=await R({workflowNumber:e.number,...t});return k(r),w(e.id.toString()),a}},[N,w,k,R]),D=(0,uq.useCallback)(async(e,t)=>E(e,{enabled:t}),[E]),P=(0,uq.useCallback)(async(e,t)=>{let r=t.reduce((e,t)=>e.map(e=>e.actionType===t.actionType?t:e),e.actions),a={...e,actions:r};if(wz(a,x).isValid)return E(a,{name:a.name,contentTypes:a.contentTypes,enabled:a.enabled,actions:r});k(a,!1)},[k,E,x]),A=(0,uq.useCallback)(e=>c[e],[c]),M=(0,uq.useCallback)(e=>u[e],[u]),L=(0,uq.useCallback)((e,t)=>o.filter(r=>vN(r)&&r.actions.find(r=>r.arguments.fieldId===e&&r.arguments.fieldOptionId===t)),[o]),F=(0,uq.useCallback)((e,t)=>{let r=new Set(t);return o.filter(t=>vN(t)&&t.actions.find(t=>t.arguments.fieldId===e&&t.arguments.fieldOptionId&&!r.has(t.arguments.fieldOptionId)))},[o]),Z=(0,uq.useCallback)(e=>{for(let t in p)p[t]=t===e&&!p[t];f({...p})},[p]),O=(0,uq.useCallback)(()=>{f({...m})},[m]),B=(0,uq.useCallback)(e=>p[e],[p]),V=(0,uq.useRef)(new Map),$=(0,uq.useCallback)(()=>V.current,[]),z=(0,uq.useCallback)(e=>{e&&requestAnimationFrame(()=>{let t=$(),r=t.get(e);r?.focus()})},[$]),U=(0,uq.useCallback)(async({workflow:e,enable:t})=>{await D(e,t)},[D]),W=b6({request:U});(0,uq.useEffect)(()=>{a&&y?.enabled&&W.perform({workflow:y,enable:!1})},[y,W,a]),(0,uq.useEffect)(()=>{g&&n(v_(g)&&a)},[g,a,n]);let H=(0,uq.useMemo)(()=>b>=r-1,[b,r]),G=(0,uq.useMemo)(()=>({activeWorkflow:g,workflows:o,workflowNames:x,handleEnabledChangeRequest:W,updateWorkflowAndAction:P,getValidContentTypesForTriggerType:A,setAllWorkflows:S,workflowWithTriggerTypeIsEnableable:M,workflowsUsingColumnOption:L,workflowsUsingMissingColumnOption:F,newWorkflow:I,setWorkflowMenuState:Z,resetWorkflowMenuStates:O,isWorkflowMenuOpen:B,handleReturnFocus:z,getWorkflowMenuItemsMap:$,itemsRef:V,customWorkflowLimitReached:H,deleteWorkflow:_,deleteNonPersistedWorkflow:T}),[g,o,x,W,P,A,S,M,L,F,I,Z,O,B,z,$,V,H,_,T]);return(0,uO.jsx)(wK.Provider,{value:G,children:(0,uO.jsx)(vx,{children:e})})});async function wY(e){let{id:t,...r}=e;return vy({workflow:r})}async function wX(e){return vb(e)}function wJ(e){return e.reduce((e,t)=>(e[t.triggerType]=t.constraints.contentTypes,e),{})}function w0(e){return e.reduce((e,t)=>(e[t.triggerType]=t.enableable,e),{})}function w1(e,t){return t>0?e[t-1]:e[1]}try{(q=wK).displayName||(q.displayName="WorkflowsContext")}catch{}try{(K=wQ).displayName||(K.displayName="WorkflowsStateProvider")}catch{}function w2(){let e=(0,uq.useContext)(wK);if(!e)throw Error("useWorkflows must be used within a WorkflowsStateProvider");return e}function w5(){let e=(0,uq.useContext)(vg);if(!e)throw Error("useNewWorkflowCreation must be used within a NewWorkflowCreationProvider");return e}var w3=r(73290),w4=r(74121),w6=r(99782);let w7=e=>(0,uO.jsx)(mF.Z,{sx:{...e.sx||{},display:"flex",flex:"1 1 auto",width:"100%",height:"100%",position:"relative",backgroundSize:"1px 37px",backgroundPositionY:"15px",backgroundRepeat:"repeat-x, repeat"},...e,children:(0,uO.jsx)(mF.Z,{sx:{m:"auto",textAlign:"center"},children:e.children})});try{(Q=w7).displayName||(Q.displayName="Blankslate")}catch{}var w8=r(73935);let w9=Symbol("UNSET");function je(e){let t=(0,uq.useRef)(w9);return t.current===w9&&(t.current=e()),t}let jt=(0,uq.createContext)({observer:null,elMapRef:{current:new Map},avgRef:{current:{count:0,avg:0}}}),jr=(0,uq.memo)(function(e){let[t,r]=(0,uq.useState)(null),a=je(()=>new Map),n=(0,uq.useRef)({count:0,avg:e.sizeEstimate}),l=m1(e),i=(0,uq.useCallback)(e=>{(0,w8.unstable_batchedUpdates)(()=>{for(let t of e){let e=t.target,r=a.current,n=r.get(e);if(n){if(l.current.disableHide&&!t.isIntersecting)continue;n.setIsVisible(t.isIntersecting)}}})},[l,a]);(0,uq.useLayoutEffect)(()=>{if(e.rootRef&&!e.rootRef.current)return;let t=new IntersectionObserver(i,{root:e.rootRef?.current??null,rootMargin:e.rootMargin??`${window.innerHeight/2}px ${window.innerWidth/2}px`});return r(t),()=>{t?.disconnect()}},[i,e.rootMargin,e.rootRef]);let s=(0,uq.useMemo)(()=>({observer:t,elMapRef:a,avgRef:n}),[t,a]);return(0,uO.jsx)(jt.Provider,{value:s,children:e.children})});function ja({ref:e,defaultHeight:t}){let[r,a]=(0,uq.useState)(!1),{observer:n,elMapRef:l,avgRef:i}=(0,uq.useContext)(jt),s=(0,uq.useRef)(t??i.current?.avg),o=(0,uq.useRef)(!1);return(0,uq.useLayoutEffect)(()=>{let t=e.current;if(!t)return;let r=t.getBoundingClientRect();r.top<window.pageYOffset+window.innerHeight&&r.left<window.pageXOffset+window.innerWidth&&r.top+r.height>window.pageYOffset&&r.left+r.width>window.pageXOffset&&a(!0)},[e]),(0,uq.useLayoutEffect)(()=>{let t=e.current;if(!t||!n)return;let r=l.current;return r.set(t,{setIsVisible:a}),n.observe(t),()=>{r.delete(t),n.unobserve(t)}},[l,n,e]),(0,uq.useEffect)(()=>{if(r){if(!e.current||!i.current)return;let r=e.current.getBoundingClientRect().height;t||o.current||(i.current={count:i.current.count+1,avg:(i.current.count*i.current.avg+r)/(i.current.count+1)}),o.current=!0,s.current=r}},[i,r,e,t]),{isVisible:r,size:s.current}}try{(Y=Parent).displayName||(Y.displayName="Parent")}catch{}try{(X=Child).displayName||(X.displayName="Child")}catch{}try{(J=jr).displayName||(J.displayName="ObserverProvider")}catch{}(0,po.addHook)("afterSanitizeAttributes",function(e){("target"in e||e instanceof HTMLAnchorElement)&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer")),!e.hasAttribute("target")&&(e.hasAttribute("xlink:href")||e.hasAttribute("href"))&&e.setAttribute("xlink:show","new")});let jn={FORBID_TAGS:["style"],ALLOW_DATA_ATTR:!1},jl={...jn,ALLOWED_TAGS:["a","#text","img","g-emoji","code"],ADD_ATTR:["alias","fallback-src"],FORBID_ATTR:["style"],KEEP_CONTENT:!0},ji={...jn,ADD_TAGS:["action-menu","anchored-position","auto-complete","focus-group","g-emoji","tracking-block","tracking-block-omnibar","tasklist-block-title","details-menu","math-renderer","task-lists","tool-tip","turbo-frame","modal-dialog","primer-text-field"],ADD_ATTR:["alias","anchor","anchor-offset","fallback-src","data-hovercard-type","data-hovercard-url","data-octo-click","data-octo-dimensions","data-identity","data-host","data-src","data-content","data-type","data-json","data-plain","data-id","data-issue","data-draft-issue","data-item-uuid","data-item-id","data-item-title","data-item-state","data-item-position","data-menu-type","data-repository-id","data-repository-name","data-show-dialog-id","data-close-dialog-id","data-modal-dialog-overlay","data-display-number","data-hydro-click-hmac","data-hydro-click-payload","data-tasklist-block-markdown-at-rest-enabled","data-tasklist-ui-to-markdown-enabled","data-tasklist-ui-to-markdown-memex-enabled","data-tracking-block-item-title","data-tracking-block-convert-button","data-tracking-block-remove-button","data-tracking-block-draft-title","data-form-tracking-block-update","data-completion-completed","data-completion-total","data-response-source-type","data-query-type","data-precache","sortable","data-view-component","data-catalyst","data-action","data-target","data-targets","data-canonical-src","data-static-url","mnemonics","popover","popovertarget","retain","side"],ADD_URI_SAFE_ATTR:["data-action","data-item-title","data-plain","data-host","data-content","data-json"]};function js(e){return(0,po.sanitize)(e,jl).toString()}function jo(e){return(0,po.sanitize)(e,ji).toString()}let jd=(0,uq.forwardRef)(({children:e,...t},r)=>(0,uO.jsx)(mO.Z,{ref:r,...t,dangerouslySetInnerHTML:{__html:js(e)}}));jd.displayName="SanitizedHtml";let jc=(0,uq.memo)(jd),ju={open:{"aria-label":"Open issue",icon:mM.hEv,color:"open.fg"},closed:{"aria-label":"Closed as completed issue",icon:mM.GFI,color:"done.fg"}},jm={not_planned:{"aria-label":"Closed as not planned issue",icon:mM.C4D,color:"fg.muted"},completed:ju.closed,reopened:ju.open},jp={open:{"aria-label":"Open pull request",icon:mM.UWO,color:"open.fg"},closed:{"aria-label":"Closed pull request",icon:mM.BRS,color:"closed.fg"},merged:{"aria-label":"Merged pull request",icon:mM.Rvi,color:"done.fg"},draft:{"aria-label":"Draft pull request",icon:mM.T5I,color:"fg.muted"}},jf=({type:e,state:t,stateReason:r,isDraft:a})=>{if(e===mA.PullRequest||t===yf.Merged){let e=t===yf.Open&&a?"draft":t;return jp[e]}return t===yh.Closed&&r?jm[r]:ju[t]},jh=({type:e,state:t,stateReason:r,isDraft:a,sx:n,...l})=>{let{icon:i,color:s,...o}=jf({type:e,state:t,stateReason:r,isDraft:a});return(0,uO.jsx)(mL.Z,{icon:i,...o,...l,sx:{color:s,...n}})},jg=({title:e,...t})=>{switch(e.contentType){case mA.Issue:{let r=e.value.stateReason;return(0,uO.jsx)(jh,{type:e.contentType,state:e.value.state,stateReason:r,isDraft:!1,...t})}case mA.PullRequest:{let r=e.value.isDraft;return(0,uO.jsx)(jh,{type:e.contentType,state:e.value.state,isDraft:r,...t})}default:xE(e)}};try{(ee=jh).displayName||(ee.displayName="ItemState")}catch{}try{(et=jg).displayName||(et.displayName="ItemStateForTitle")}catch{}let jx={borderBottom:"1px solid",borderColor:"border.default","&:last-child":{borderBottom:"none"},display:"flex",alignItems:"center"},jy={color:"fg.default",overflow:"hidden",textAlign:"left",whiteSpace:"nowrap",textDecoration:"none","&:hover":{color:"accent.fg"}},jb=(0,uq.memo)(function({item:e,keyName:t,url:r}){let a=(0,uq.useRef)(null),{isVisible:n}=ja({ref:a});return(0,uO.jsx)(mF.Z,{ref:a,as:"li",sx:jx,children:n?(0,uO.jsx)(jv,{keyName:t,item:e,url:r}):null},t)}),jv=(0,uq.memo)(function({item:e,url:t}){let{selectItem:r,isSelected:a}=vo(),n=(0,uq.useCallback)(()=>{r(e)},[r,e]),l=`item-title-${e.number}`;return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mF.Z,{as:"label",sx:{pl:1},...(0,mp.f)("repo-item"),children:(0,uO.jsx)(w6.Z,{sx:{alignSelf:"start"},"aria-labelledby":l,checked:a(e.number),onChange:n})}),(0,uO.jsx)(mF.Z,{sx:{pl:2},children:(0,uO.jsx)(jh,{type:e.type,state:e.state,stateReason:e?.stateReason,isDraft:!!e.isDraft})}),(0,uO.jsxs)(mF.Z,{sx:{p:2,display:"flex",flex:"1",justifyContent:"flex-start",width:"100%",minWidth:"0"},children:[(0,uO.jsx)(mF.Z,{as:"span",id:l,sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:(0,uO.jsx)(w3.Z,{sx:jy,target:"_blank",rel:"noreferrer",href:t,tabIndex:-1,children:(0,uO.jsx)(jc,{children:e.title})})}),(0,uO.jsx)(mO.Z,{sx:{ml:2,color:"fg.muted"},children:`#${e.number}`})]})]})});try{(er=jb).displayName||(er.displayName="SuggestedItem")}catch{}try{(ea=jv).displayName||(ea.displayName="SuggestedItemInner")}catch{}let jw={listStyleType:"none",display:"flex",flexDirection:"column",contentVisibility:"auto"},jj=(0,uq.memo)(function({hasSearchInput:e}){return(0,uO.jsxs)(w7,{...(0,mp.f)("side-panel-no-suggested-items"),sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:[(0,uO.jsx)(mL.Z,{icon:mM.H0r,size:30,sx:{color:"fg.muted"}}),(0,uO.jsx)(mO.Z,{as:"h2",children:"No items to add"}),(0,uO.jsx)(mO.Z,{as:"p",sx:{color:"fg.muted"},children:e?fE.noItemsInSearchResult:fE.repoIsEmpty})]})}),jC=(0,uq.memo)(function({isOrganization:e,owner:t}){return(0,uO.jsxs)(w7,{...(0,mp.f)("side-panel-no-suggested-repos"),sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:[(0,uO.jsx)(mL.Z,{icon:mM.H0r,size:30,sx:{color:"fg.muted"}}),(0,uO.jsx)(mO.Z,{as:"h2",children:"No repositories found"}),(0,uO.jsxs)(mO.Z,{as:"p",sx:{color:"fg.muted"},children:["Create a"," ",(0,uO.jsx)(w3.Z,{href:e?`/orgs/${t}/repositories`:`/${t}?tab=repositories`,children:"repository"})," to get started."]})]})}),jk=(0,uq.memo)(function(){return(0,uO.jsx)(w7,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:(0,uO.jsx)(w4.Z,{})})}),jS=()=>{let{selectedRepo:e,items:t,loading:r,finishedFetchingRepoItems:a,selectAllItems:n,areAllItemsSelected:l,searchQuery:i}=vo(),{projectOwner:s,isOrganization:o}=yk(),d=s?.name?.toLowerCase();return(0,uO.jsx)(mF.Z,{sx:jw,...(0,mp.f)("side-panel-suggested-items"),children:r?(0,uO.jsx)(jk,{}):t?.length===0&&a&&e?(0,uO.jsx)(jj,{hasSearchInput:!!i}):e?(0,uO.jsxs)(mF.Z,{children:[(0,uO.jsxs)(mF.Z,{...(0,mp.f)("side-panel-suggested-items-header"),sx:{display:"flex",borderBottom:"1px solid",borderColor:"border.default",paddingBottom:2,paddingTop:3},children:[(0,uO.jsx)(mF.Z,{as:"label",sx:{pl:1,pr:"10px"},...(0,mp.f)("selection-all-items"),children:(0,uO.jsx)(w6.Z,{sx:{alignSelf:"start"},"aria-label":l?"Deselect all items":"Select all items",checked:l,onChange:n})}),(0,uO.jsxs)(mO.Z,{children:[t?.length," most recent ",t?.length===1?"item":"items"]})]}),(0,uO.jsx)(mF.Z,{as:"ul",children:t?.map(t=>{let r=e.nameWithOwner;return(0,uO.jsx)(jb,{item:t,keyName:`${e.nameWithOwner}-${t.number}`,url:t.type===mA.PullRequest?`/${r}/pull/${t.number}`:`/${r}/issues/${t.number}`},`${e.nameWithOwner}-${t.number}`)})}),(0,uO.jsxs)(mO.Z,{...(0,mp.f)("side-panel-suggested-items-footer"),sx:{color:"fg.muted",display:"block",textAlign:"center",paddingTop:4,paddingBottom:4},children:["showing ",t?.length," most recent ",t?.length===1?"item":"items"," that"," ",t?.length===1?"has":"have"," not been added to this project",t&&t?.length>1&&". Use search to narrow down this list"]})]}):(0,uO.jsx)(jC,{owner:d,isOrganization:o})})};try{(en=jj).displayName||(en.displayName="NoSuggestedItems")}catch{}try{(el=jC).displayName||(el.displayName="NoSuggestedRepos")}catch{}try{(ei=jk).displayName||(ei.displayName="Loader")}catch{}try{(es=jS).displayName||(es.displayName="ItemSuggestionsList")}catch{}var jI=r(78912),jN=r(97714);let j_=/is:issues?,prs?|is:prs?,issues?/gi,jT=/is:issue/gi,jR=/is:pr/gi,jE=/\s*assignee:(.*,)?("?(@me)"?)(,\S)*/gi,jD=RegExp("\\s*assignee:(?<assignees>[^\\s+]*)\\s*","i"),jP=/[@|\s]/g,jA=/is:(\S+)/gi,jM=/issues?/,jL=/prs?/,jF="issue",jZ=[vk.Issue,vk.PullRequest],jO=e=>{let{loggedInUser:t}=yk();if(t?.login){let r=[...e.matchAll(jE)];if(r.length){let[a,n,l,i]=r[0],s=n?l:i?l:a;e=e.replace(s,t.login)}}let r=e.match(jD);if(r&&r.groups?.assignees){let t=r.groups.assignees,a=[...new Set(t.toLowerCase().replace(jP,"").split(","))].join(",");return e.replace(t,a)}return e},jB=e=>jH(jO(e)).trim(),jV=e=>{let t=jH(e);return t.match(jT)?[vk.Issue]:t.match(jR)?[vk.PullRequest]:jZ},j$=(e,t)=>{if(jz(t)&&!e.match(j_))return`is:issue,pr ${e}`;if(1===t.length){if(t[0]===vk.Issue&&!e.match(jM))return`is:issue ${e}`;if(t[0]===vk.PullRequest&&!e.match(jL))return`is:pr ${e}`}return e},jz=e=>!(!e||e?.length<jZ.length)&&jZ.every(t=>e.includes(t)),jU=e=>e.match(jM)?jF:e.match(jL)?"pr":e,jW=e=>{let t=new Set(e.split(",").map(e=>jU(e))),r="";return t.has(jF)&&(t.delete(jF),r="is:issue"),t.has("pr")&&(t.delete("pr"),r=0===r.length?"is:pr":""),t.size>0?`${r} is:${Array.from(t.values()).join(",")}`.trim():r},jH=e=>{let t=e,r=[...t.matchAll(jA)];for(let[e,a]of r)a&&(t=t.replace(e,jW(a)));return t},jG=(e,t)=>({title:fB.manualRunConfirmationTitle(e),content:(0,uO.jsx)(jc,{children:fB.manualRunConfirmationMessage(e,t)}),confirmButtonContent:fB.manualRunConfirmationButton(e),confirmButtonType:"primary"}),jq=()=>{let e=(0,f6.N)(),t=(0,uq.useCallback)(async({confirmationSource:t,onConfirm:r,count:a,onDismiss:n})=>{await e(jG(t,a))?await r():n?.()},[e]);return t};let BaseColumnModel=class BaseColumnModel{constructor(e){this.id=e.id,this.name=e.name,this.dataType=e.dataType,this.userDefined=e.userDefined,this.databaseId=e.databaseId,this.position=e.position||-1,this.defaultColumn=e.defaultColumn,this.settings={width:200,...e.settings}}};let DateColumnModel=class DateColumnModel extends BaseColumnModel{};let IterationColumnModel=class IterationColumnModel extends BaseColumnModel{constructor(e){super({...e,settings:{...e.settings,configuration:e.settings?.configuration??jK()}})}};function jK(){return{startDay:new Date().getDay()||7,duration:14,iterations:[],completedIterations:[]}}let NumberColumnModel=class NumberColumnModel extends BaseColumnModel{};let BaseSingleSelectColumnModel=class BaseSingleSelectColumnModel extends BaseColumnModel{constructor(e){super({...e,settings:{...e.settings,options:e.settings?.options??[]}})}};let SingleSelectColumnModel=class SingleSelectColumnModel extends BaseSingleSelectColumnModel{};let TextColumnModel=class TextColumnModel extends BaseColumnModel{};let AssigneesColumnModel=class AssigneesColumnModel extends BaseColumnModel{};let LabelsColumnModel=class LabelsColumnModel extends BaseColumnModel{};let LinkedPullRequestsColumnModel=class LinkedPullRequestsColumnModel extends BaseColumnModel{};let MilestoneColumnModel=class MilestoneColumnModel extends BaseColumnModel{};let RepositoryColumnModel=class RepositoryColumnModel extends BaseColumnModel{};let ReviewersColumnModel=class ReviewersColumnModel extends BaseColumnModel{};let StatusColumnModel=class StatusColumnModel extends BaseSingleSelectColumnModel{};let TitleColumnModel=class TitleColumnModel extends BaseColumnModel{constructor(e){super({...e,settings:{...e.settings,width:e.settings?.width??650}})}};let TrackedByColumnModel=class TrackedByColumnModel extends BaseColumnModel{};let TracksColumnModel=class TracksColumnModel extends BaseColumnModel{};function jQ(e){switch(e.dataType){case mD.Assignees:return new AssigneesColumnModel(e);case mD.Labels:return new LabelsColumnModel(e);case mD.LinkedPullRequests:return new LinkedPullRequestsColumnModel(e);case mD.Milestone:return new MilestoneColumnModel(e);case mD.Repository:return new RepositoryColumnModel(e);case mD.Reviewers:return new ReviewersColumnModel(e);case mD.Title:return new TitleColumnModel(e);case mD.Tracks:return new TracksColumnModel(e);case mD.TrackedBy:return new TrackedByColumnModel(e);case mD.Text:return new TextColumnModel(e);case mD.SingleSelect:if(e.id===mP.Status)return new StatusColumnModel(e);return new SingleSelectColumnModel(e);case mD.Number:return new NumberColumnModel(e);case mD.Date:return new DateColumnModel(e);case mD.Iteration:return new IterationColumnModel(e);default:xE(e.dataType)}}let jY=(0,uq.createContext)(null),jX=(0,uq.createContext)(null),jJ=(0,uq.memo)(function({children:e}){let{memex_tracked_by_items:t}=g9(),r=je(()=>mT("reserved-column-names")||[]),[a,n]=(0,uq.useState)(()=>{let e=mT("memex-columns-data")||[];return t||(e=e.filter(e=>e.id!==mP.TrackedBy)),j0(e)}),l=(0,uq.useRef)(a),i=je(()=>j1()),s=(0,uq.useCallback)(e=>{n(e),l.current=e},[]),o=(0,uq.useCallback)(e=>{i.current.add(e)},[i]),d=(0,uq.useMemo)(()=>({reservedColumnNames:r.current,setAllColumns:s,allColumns:a,allColumnsRef:l,addLoadedFieldId:o,loadedFieldIdsRef:i}),[r,i,s,a,o]),c=(0,uq.useMemo)(()=>({setAllColumns:s,allColumnsRef:l,addLoadedFieldId:o,loadedFieldIdsRef:i}),[i,o,s]);return(0,uO.jsx)(jY.Provider,{value:d,children:(0,uO.jsx)(jX.Provider,{value:c,children:e})})});function j0(e){return e.map(e=>jQ(e))}function j1(){let{memexItems:e}=y7(),t=new Set;if(e?.length){let r=e.sort((e,t)=>t.memexProjectColumnValues.length-e.memexProjectColumnValues.length)[0];if(r)for(let e of r.memexProjectColumnValues)t.add(e.memexProjectColumnId)}return t}try{(eo=jY).displayName||(eo.displayName="ColumnsContext")}catch{}try{(ed=jX).displayName||(ed.displayName="ColumnsStableContext")}catch{}try{(ec=jJ).displayName||(ec.displayName="ColumnsStateProvider")}catch{}let j2=()=>{let e=(0,uq.useContext)(jX);if(!e)throw Error("useColumnsStableContext must be used within a ColumnsStableContext.Provider");return e},j5=()=>{let{allColumnsRef:e}=j2(),t=(0,uq.useCallback)(t=>e.current.find(e=>e.databaseId===t),[e]);return{findColumnByDatabaseId:t}},j3=e=>{let{findColumnByDatabaseId:t}=j5(),{fieldOptionId:r,fieldId:a}=e.arguments,n=a?t(a):void 0,l=n&&"options"in n.settings?n.settings.options?.find(e=>e.id===r):void 0;return{column:n,selectedOption:l}},j4=()=>{let{hasWritePermissions:e}=yI();return{hasWorkflowWritePermission:e}},j6=(e,t)=>{let r=e.actions[0];(0,u0.Z)(r,"defaultAction must exist");let{selectedOption:a}=j3(r),{hasWorkflowWritePermission:n}=j4(),{shouldDisableArchiveForActiveWorkflow:l}=vh(),i=(0,uq.useMemo)(()=>{let i=r.actionType===vj.SetField,s=a?.nameHtml,o=i&&!s,d=0===t.length&&v_(e);return o||!n||l||d},[r.actionType,a?.nameHtml,t.length,e,n,l]);return i},j7=(e,t,r)=>{let{workflowNames:a}=w2(),[n,l]=(0,uq.useState)(e),[i,s]=(0,uq.useState)(e.name),[o,d]=(0,uq.useState)(wz(e,a).isValid),[c,u]=(0,uq.useState)(r),m=(0,uq.useMemo)(()=>{let t=e.actions.find(e=>"string"==typeof e.arguments.query)?.arguments.query;return"string"==typeof t?j$(t,e.contentTypes):""},[e.actions,e.contentTypes]),p=(0,uq.useMemo)(()=>e.actions.find(e=>e.arguments.repositoryId)?.arguments.repositoryId,[e]),[f,h]=(0,uq.useState)(n.contentTypes),[g,x]=(0,uq.useState)(m),[y,b]=(0,uq.useState)(p),v=(0,uq.useRef)(),{updateWorkflowAndAction:w}=w2(),j=j6(n,g),C=jq(),k=(0,uq.useCallback)(e=>{let t=n.actions.findIndex(t=>t.id===e.id),r=[...n.actions];r[t]=e,l({...n,actions:[...r]})},[n]),S=(0,uq.useCallback)(()=>{e.triggerType===vw.QueryMatched&&(x(m),b(p))},[m,p,e.triggerType]),I=(0,uq.useCallback)(()=>{l({...e}),h(e.contentTypes),s(e.name)},[e]),N=(0,uq.useCallback)(()=>{u(!0)},[]),_=(0,uq.useCallback)(()=>{u(!1)},[]),T=(0,uq.useCallback)(()=>n.actions.map(e=>{switch(e.actionType){case vj.GetItems:return{...e,arguments:{...e.arguments,query:jB(g),repositoryId:y}};case vj.AddProjectItem:return{...e,arguments:{...e.arguments,repositoryId:y}};case vj.GetProjectItems:return{...e,arguments:{...e.arguments,query:g}};default:return e}}),[g,y,n.actions]),R=(0,uq.useCallback)(async e=>{let t=e?T():n.actions;await w({...n,name:i.trim(),contentTypes:[...f],enabled:e},[...t])},[f,T,w,n,i]),E=b6({request:R}),D=(0,uq.useCallback)(async(e=!0)=>{let r=!1;v_(n)&&t>0?await C({count:t,confirmationSource:vM.enable,onConfirm:async()=>await E.perform(e),onDismiss:()=>{r=!0}}):await E.perform(e),"succeeded"!==E.status.current.status||r||u(!1)},[t,E,C,n]);return(0,uq.useEffect)(()=>{c||(I(),S())},[S,I,c]),(0,uq.useEffect)(()=>{let e=T();d(wz({...n,actions:e}).isValid)},[T,n]),{localContentTypes:f,setLocalContentTypes:h,localQuery:g,setLocalQuery:x,localRepositoryId:y,setLocalRepositoryId:b,workflowName:i,setWorkflowName:s,isEditing:c,setIsEditing:u,edit:N,discard:_,save:D,saveWorkflowChanges:v,shouldDisableWorkflowToggle:j,workflow:n,setWorkflow:l,replaceAction:k,initialQuery:m,initialRepositoryId:p,isWorkflowValid:o,setIsWorkflowValid:d}},j8=(0,uq.createContext)(null),j9=({children:e,initialWorkflow:t,startInEditMode:r})=>{let[a,n]=(0,uq.useState)(0),{localContentTypes:l,setLocalContentTypes:i,localQuery:s,setLocalQuery:o,localRepositoryId:d,setLocalRepositoryId:c,workflowName:u,setWorkflowName:m,isEditing:p,setIsEditing:f,edit:h,discard:g,save:x,saveWorkflowChanges:y,shouldDisableWorkflowToggle:b,workflow:v,setWorkflow:w,replaceAction:j,initialQuery:C,initialRepositoryId:k,isWorkflowValid:S,setIsWorkflowValid:I}=j7(t,a,r);return(0,uO.jsx)(j8.Provider,{value:(0,uq.useMemo)(()=>({filterCount:a,setFilterCount:n,localContentTypes:l,shouldDisableWorkflowToggle:b,setLocalContentTypes:i,localQuery:s,setLocalQuery:o,saveWorkflowChanges:y,isEditing:p,setIsEditing:f,edit:h,discard:g,save:x,workflow:v,setWorkflow:w,replaceAction:j,localRepositoryId:d,setLocalRepositoryId:c,workflowName:u,setWorkflowName:m,initialQuery:C,initialRepositoryId:k,isWorkflowValid:S,setIsWorkflowValid:I}),[a,l,i,s,o,b,y,p,f,h,g,x,v,w,j,d,c,u,m,C,k,S,I]),children:e})};try{(eu=j8).displayName||(eu.displayName="AutomationGraphContext")}catch{}try{(em=j9).displayName||(em.displayName="AutomationGraphStateProvider")}catch{}let Ce=()=>{let e=(0,uq.useContext)(j8);if(!e)throw Error("useAutomationGraph must be used within an AutomationGraphStateProvider");return e},Ct=({icon:e=mM.zMQ,heading:t,content:r,children:a,headingAs:n="h2",...l})=>(0,uO.jsxs)(w7,{...l,children:[(0,uO.jsx)(mL.Z,{icon:e,size:30,sx:{color:"fg.muted"}}),(0,uO.jsx)(mO.Z,{as:n,sx:{mt:3},children:t}),(0,uO.jsx)(mO.Z,{as:"p",sx:{color:"fg.muted"},children:r}),a]});try{(ep=Ct).displayName||(ep.displayName="BlankslateErrorMessage")}catch{}let ErrorBoundary=class ErrorBoundary extends uq.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){setTimeout(()=>{throw e})}render(){return this.state.error?this.props.fallback:this.props.children}constructor(e){super(e),this.state={error:null}}};let Cr=({endpointPosition:e,workflow:t})=>{let r="top"===e?"to bottom":"to top";return(0,uO.jsx)(mF.Z,{sx:{width:"14px",height:"14px",borderRadius:"50%",marginTop:"top"===e?"-8px":"0px",marginBottom:"bottom"===e?"-8px":"0px",position:"relative",zIndex:1,backgroundImage:e=>`linear-gradient(${r}, ${e.colors.canvas.default} 50%, ${e.colors.border.default} 50%, ${e.colors.border.default})`,"&::before":{content:'""',position:"absolute",top:"1px",left:"1px",width:"12px",height:"12px",backgroundColor:"canvas.default",borderRadius:"50%"},"&::after":{content:'""',position:"absolute",top:"4px",left:"4px",width:"6px",height:"6px",backgroundColor:t.enabled?"accent.emphasis":"border.default",borderRadius:"50%",transition:"background-color 0.3s ease-out"}}})},Ca=()=>{let{workflow:e}=Ce();return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Cr,{workflow:e,endpointPosition:"top"}),(0,uO.jsx)(mF.Z,{sx:{height:"30px",width:"0",borderColor:e.enabled?"accent.muted":"border.muted",borderLeftWidth:"2px",borderStyle:"solid",borderRight:"none",transition:"border-color 0.3s ease-out"}}),(0,uO.jsx)(Cr,{workflow:e,endpointPosition:"bottom"})]})};try{(ef=Cr).displayName||(ef.displayName="ConnectorEndpoint")}catch{}try{(eh=Ca).displayName||(eh.displayName="Connector")}catch{}var Cn=r(75308);let Cl=({icon:e,iconBg:t,iconColor:r,headerDescription:a,children:n,...l})=>(0,uO.jsx)(mF.Z,{sx:{border:"1px solid #EBEDEF",borderRadius:2,backgroundColor:"canvas.default",width:"fit-content",minWidth:"100%",transition:"border-color 0.3s ease-out",boxShadow:"0px 3px 6px rgba(149, 157, 165, 0.15)"},...l["data-testid"]?l:(0,mp.f)("automation-block"),children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,uO.jsxs)(mF.Z,{sx:{p:3,display:"flex",alignItems:"center",borderBottom:n?"1px solid":"none",borderBottomColor:"border.subtle"},children:[e&&(0,uO.jsx)(mF.Z,{sx:{bg:t,width:20,height:20,borderRadius:"4px",p:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,uO.jsx)(mL.Z,{icon:e,size:14,sx:{color:r}})}),a&&(0,uO.jsx)(Cn.Z,{as:"h3",sx:{fontSize:1,color:"fg.default",ml:2},children:a})]}),n&&(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexWrap:"wrap",flex:"auto",alignItems:"center",m:3},children:n})]})});try{(eg=Cl).displayName||(eg.displayName="AutomationBlock")}catch{}let Ci=()=>(0,uO.jsx)(Cl,{icon:mM.pOD,iconBg:"success.subtle",iconColor:"success.fg",headerDescription:fB.addItemBlockLabel,...(0,mp.f)("automation-add-item-block")});try{(ex=Ci).displayName||(ex.displayName="AddItemBlock")}catch{}let Cs=()=>(0,uO.jsx)(Cl,{icon:mM.rKT,iconBg:"attention.subtle",iconColor:"attention.fg",headerDescription:fB.archiveItemLabel,...(0,mp.f)("automation-archive-block")});try{(ey=Cs).displayName||(ey.displayName="ArchiveBlock")}catch{}let Co=()=>(0,uO.jsx)(Cl,{icon:mM.C4D,iconBg:"done.subtle",iconColor:"done.fg",headerDescription:fB.closeItemBlockLabel,...(0,mp.f)("automation-close-block")});try{(eb=Co).displayName||(eb.displayName="CloseItemBlock")}catch{}var Cd=r(78534),Cc=r(58587);async function Cu({repositoryId:e,query:t,memexNumber:r}){let a=f9("count-issues-and-pulls-api-data"),n=new URL(a.url,window.location.origin);n.searchParams.set("repositoryId",`${e}`),n.searchParams.set("q",t),n.searchParams.set("memexNumber",`${r}`);let{data:l}=await hh(n);return l}let Cm=()=>{let[e,t]=(0,uq.useState)(),[r,a]=(0,uq.useState)(0),[n,l]=(0,uq.useState)(""),i=(0,uq.useRef)(),{localQuery:s,setLocalRepositoryId:o,setLocalQuery:d,setLocalContentTypes:c}=Ce(),{projectNumber:u}=b9(),{projectOwner:m}=yk(),p=(0,uq.useMemo)(()=>`-project:${m?.login}/${u}`,[u,m]),f=(0,uq.useCallback)(e=>Cu(e),[]),h=b6({request:f}),g=(0,uq.useCallback)(async(e,t)=>{if(e){await h.perform({repositoryId:e.id,query:t,memexNumber:u});let{data:r,status:n}=h.status.current;"succeeded"===n&&r&&a(r.count)}},[h,u]),x=(0,uq.useCallback)((e,t)=>{let r=jB(t);g(e,r),l(`${e.url}/issues?q=${encodeURIComponent(`${p} ${r}`)}`)},[g,p]),y=(0,uq.useCallback)(t=>{d(t),i.current&&i.current.cancel(),i.current=(0,b7.Z)(()=>{e&&(x(e,t),c(jV(t)))},200),i.current()},[d,e,x,c]),b=(0,uq.useCallback)(e=>{x(e,s),t(e),o(e.id)},[s,o,x]);return{count:r,searchResultUrl:n,onSearchQueryChange:y,onRepositoryChange:b,repository:e}};var Cp=r(16545),Cf=r(19418);async function Ch(e){let t=f9("search-repositories-api-data"),r=new URL(t.url,window.location.origin);r.searchParams.set("q",e);let{data:a}=await hh(r);return a}async function Cg(e,t){let r=f9("suggested-repositories-api-data"),a=new URL(r.url,window.location.origin);null!=e&&a.searchParams.append("memexNumber",`${e}`),null!=t&&a.searchParams.append("repositoryId",`${t}`);let{data:n}=await hh(a);return n}let Cx=(0,uq.createContext)(null),Cy=(0,uq.memo)(function({children:e}){let t=(0,uq.useRef)([]),{projectNumber:r}=b9(),a=(0,uq.useRef)(null),n=(0,uq.useRef)(null),l=(0,uq.useCallback)(e=>{if(e&&!t.current.find(t=>t.id===e))return!0;let r=Date.now(),n=a.current,l=null==n||r-n>3e4;return l&&(a.current=r),l},[]),i=(0,uq.useCallback)(async e=>{if(!l(e)){if(n.current){let e=await n.current;return e.repositories}if(t.current.length>0)return t.current}n.current=Cg(r,e);let a=await n.current;return t.current=a.repositories,n.current=null,a.repositories},[l,r]),s=(0,uq.useCallback)(()=>{a.current=null},[]),o=(0,uq.useMemo)(()=>({suggestRepositories:i,repositoriesRef:t,clearCachedSuggestions:s}),[i,s]);return(0,uO.jsx)(Cx.Provider,{value:o,children:e})});try{(ev=Cx).displayName||(ev.displayName="RepositoriesContext")}catch{}try{(ew=Cy).displayName||(ew.displayName="RepositoriesStateProvider")}catch{}let Cb=()=>{let e=(0,uq.useContext)(Cx);if(!e)throw Error("useRepositories must be used within a RepositoriesStateProvider");let{suggestRepositories:t,repositoriesRef:r,clearCachedSuggestions:a}=e;return{clearCachedSuggestions:a,suggestRepositories:t,repositoriesRef:r}},Cv=({repository:e,...t})=>e.isArchived?(0,uO.jsx)(mL.Z,{icon:mM.rKT,"aria-label":"Archived repository",...t}):e.isForked?(0,uO.jsx)(mL.Z,{icon:mM.jcu,"aria-label":"Forked repository",...t}):e.isPublic?(0,uO.jsx)(mL.Z,{icon:mM.H0r,"aria-label":"Public repository",...t}):(0,uO.jsx)(mL.Z,{icon:mM.mBM,"aria-label":"Private repository",...t});try{(ej=Cv).displayName||(ej.displayName="RepositoryIcon")}catch{}let Cw=({targetRepositoryId:e,isEditing:t,onRepositorySelected:r,onNoSuggestedRepositories:a,sx:n})=>{let l=(0,uq.useRef)(null),i=(0,uq.useRef)(null),[s,o]=(0,uq.useState)(""),[d,c]=(0,uq.useState)(!1),[u,m]=(0,uq.useState)(!1),[p,f]=(0,uq.useState)(void 0),[h,g]=(0,uq.useState)([]),[x,y]=(0,uq.useState)([]),b=(0,uq.useRef)(),{suggestRepositories:v}=Cb(),w=(0,uq.useRef)(x),j=(0,uq.useRef)(0),C=(0,uq.useRef)(!1);(0,Cp.P)({restoreFocusOnCleanUp:!0,initialFocusRef:l,containerRef:i});let k=(0,uq.useCallback)(()=>{c(!1)},[]),S=(0,uq.useCallback)(async()=>{if(w.current.length||C.current)return;C.current=!0,m(!0);let t=await v(e);j.current+=1,t&&(w.current=t),t&&y(t),C.current=!1,m(!1)},[v,e]),I=(0,uq.useCallback)(e=>(""!==s?h:x).find(t=>t.id===e),[s,h,x]),N=(0,uq.useCallback)(()=>{let t=x.find(t=>t.id===e),a=t||x[0];a&&(f({id:a.id,text:a.name,leadingVisual:()=>Cv({repository:a})}),r(a))},[x,e,r]);(0,uq.useEffect)(()=>{p||N()},[N,p]),(0,uq.useEffect)(()=>{p?.id!==e&&N()},[N,p?.id,e]),(0,uq.useEffect)(()=>{!C.current&&(0===j.current?S():e&&!x.find(t=>t.id===e)&&j.current<2?(w.current=[],S()):0===w.current.length&&a&&a())},[S,a,x,e]);let _=e=>{o(e),R(e)},T=(0,uq.useCallback)(async e=>{if(""!==e){m(!0);let{repositories:t}=await Ch(e);g(t),m(!1)}else g(x??[])},[x]),R=(0,uq.useCallback)(e=>{b.current&&b.current.cancel(),b.current=(0,b7.Z)(()=>T(e),200),b.current()},[T]),E=e=>{if(e?.id){let t=I(e.id);t&&(f({id:t.id,text:t.name,leadingVisual:()=>Cv({repository:t})}),r(t))}},D=(""!==s?h:x).map(e=>{let{projectOwner:t}=yk(),r=e.nameWithOwner.split("/")[0],a=r?.toLowerCase()!==t?.login.toLowerCase()?e.nameWithOwner:e.name;return{...e,text:a,leadingVisual:()=>Cv({repository:e}),selectionVariant:"single",descriptionVariant:"block",selected:void 0,onAction:(t,r)=>{r.preventDefault(),E(e),k()}}});return(0,uO.jsx)(uO.Fragment,{children:x.length>0?(0,uO.jsx)(Cf.b,{placeholderText:fE.repoPickerFilterPlaceholder,open:d,renderAnchor:({children:e,...r})=>(0,uO.jsx)(jI.z,{sx:n,disabled:!p||!t,leadingIcon:p?.leadingVisual,trailingIcon:mM.AS7,...r,...(0,mp.f)("repo-suggestions-button"),children:e||"Select Repo"}),onOpenChange:()=>c(!0),loading:u,selected:p,filterValue:s,items:D,showItemDividers:!0,onFilterChange:_,onSelectedChange:E,overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:k,...(0,mp.f)("repo-picker-repo-list")}}):(0,uO.jsx)(Cd.o,{variant:"rounded",width:"138px",height:"32px"})})};function Cj(e){return e.dataType===mD.Date||e.dataType===mD.Number||e.dataType===mD.Iteration}Cw.displayName="RepositoryPicker";let CC={open:"open",closed:"closed",merged:"merged",draft:"draft",issue:"issue",pr:"pr"},Ck={not_planned:"not planned",completed:"completed",reopened:"reopened"},CS={seven_days:"7days",fourteen_days:"14days",twenty_one_days:"21days"},CI={seven_days:"<@today-7d",two_weeks:"<@today-2w",one_month:"<@today-1m"},CN={is:CC,reason:Ck,"last-updated":CS,updated:CI},C_=new Set(["reason"]),CT=e=>C_.has(e.toLowerCase());var CR=r(50576);let CE=({offsetWidth:e,offsetHeight:t,clientWidth:r,clientHeight:a})=>({offsetWidth:e,offsetHeight:t,clientWidth:r,clientHeight:a});function CD(e){let t=(0,uq.useRef)({}),r=(0,uq.useCallback)(t=>{if(!e)return()=>void 0;let r=new ResizeObserver(t);return r.observe(e),()=>{r.unobserve(e),r.disconnect()}},[e]);return(0,uq.useSyncExternalStore)(r,()=>{if(!e)return t.current;let r=CE(e);return(0,CR.Z)(r,t.current)?t.current:(t.current=r,r)})}let CP=[{keyword:"is",isFilterable:!0,description:"Filter by item state or type"},{keyword:"no",isFilterable:!1,description:""},{keyword:"reason",isFilterable:!0,description:"Filter by item's state reason"},{keyword:"last-updated",isFilterable:!0,description:"Filter by item last updated"},{keyword:"updated",isFilterable:!0,description:"Filter by item's updated date"}];function CA(){let e=(0,uq.useCallback)(e=>CP.map(e=>e.keyword).includes(e),[]);return{FilterKeywords:CP,isKeywordQualifier:e}}let CM={None:"none",ColumnOnly:"column-only",ColumnAndValues:"column-and-values"},CL=e=>"last-updated"===e||"updated"===e,CF=[];function CZ({query:e,columns:t,commands:r=CF,options:a={suggestColumns:!0}}){let{searchTokens:n}=(0,uq.useMemo)(()=>wd(e),[e]),l=(0,uq.useCallback)(e=>{let t="";if(n.length){let e=n[n.length-1];void 0!==e&&(t=e)}return wu(t)&&(t=t.substr(1)),!!(0===t.length||wb(e).startsWith(t.toLowerCase())||wv(e).startsWith(t.toLowerCase()))},[n]),i=(0,uq.useMemo)(()=>r.filter(t=>!e||!!t.name.toLowerCase().startsWith(e.toLowerCase())),[r,e]),s=(0,uq.useMemo)(()=>{let e=a.suggestColumns?t.filter(e=>l(e.name)):[];return void 0!==a.showColumnSuggestionIf&&(e=e.filter(e=>{let t=a.showColumnSuggestionIf?.(e.name);return t===CM.ColumnOnly||t===CM.ColumnAndValues})),e},[t,l,a]),{FilterKeywords:o}=CA(),d=(0,uq.useMemo)(()=>{let e=o.map(e=>e.keyword);return a.suggestColumns?e:e.filter(e=>"no"!==e)},[o,a.suggestColumns]),c=(0,uq.useMemo)(()=>d.filter(e=>l(e)),[l,d]);return{displayableColumns:s,displayableCommands:i,displayableKeywords:c}}let CO=()=>{let e=(0,uq.useContext)(jY);if(!e)throw Error("useColumnsContext must be used within a ColumnsContext.Provider");return e},CB=()=>CO();function CV(){let{allColumns:e}=CB(),t=(0,uq.useMemo)(()=>wx(e),[e]),r=(0,uq.useCallback)(e=>t.get(wb(e)),[t]);return{findFilterableFieldByName:r}}var C$=r(57294),Cz=r(75478);let CU=({color:e,sx:t})=>{let{accent:r}=pt(e);return"GRAY"!==e?(0,uO.jsx)(mF.Z,{sx:{bg:r,width:16,height:16,borderRadius:8,flexShrink:0,...t}}):null};try{(eC=CU).displayName||(eC.displayName="ColorDecorator")}catch{}let CW={UserDefined:0,SystemNo:1,SystemExclude:2,Me:3,PreviousIteration:4,NextIteration:5,CurrentIteration:6,TodayToken:6};function CH(e,t){let r=(0,uq.useCallback)((r,a,n,l)=>{let i=r.databaseId,s=CY(e,r,t);a||(l||s.set(`exclude-${i}`,{value:`exclude-${i}`,priority:CW.SystemNo}),s.set(`empty-${i}`,{value:`empty-${i}`,priority:CW.SystemExclude}));let o=Array.from(s.keys());o.sort((e,t)=>(s.get(t)?.priority??CW.UserDefined)-(s.get(e)?.priority??CW.UserDefined));let d=o.filter(e=>{if("string"!=typeof e)return!1;if(g5(r)||r.dataType===mD.TrackedBy){if(e.toLowerCase().includes(n))return!0;let t=s.get(e),r=t&&(t.priority??CW.UserDefined)===CW.UserDefined;if(r)return t.value.toLowerCase().includes(n)}return!a.includes(e)&&e.toLowerCase().includes(n)});return 1===d.length&&d[0]?.toLowerCase()===n&&d.pop(),{filteredKeys:d,uniqueColumnValues:s}},[e,t]);return{getSuggestionsForColumn:r}}function CG(e){return new Map([...e.entries()].sort((e,t)=>{let r=e[1].priority??0,a=t[1].priority??0,n=a-r;if(0!==n)return n;let l=e[0],i=t[0];return l.localeCompare(i)}))}function Cq(e,t,r){for(let a of t){let t=a.columns;if(!t[e.id])continue;let n=t[e.id];n&&r(n)}}let CK=({color:e,nameHtml:t})=>(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden",gap:2},children:[(0,uO.jsx)(CU,{color:e,sx:{height:14,width:14}}),(0,uO.jsx)(jc,{children:t})]}),CQ=({color:e,nameHtml:t})=>(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden",gap:2},children:[(0,uO.jsx)(mF.Z,{sx:{bg:`#${e}`,borderColor:`#${e}`,width:14,minWidth:14,height:14,borderRadius:10,borderWidth:"1px",borderStyle:"solid"}}),(0,uO.jsx)(jc,{children:t})]});function CY(e,t,r){let{loggedInUser:a}=yk(),n=new Map;if(!t)return n;switch(t.dataType){case mD.SingleSelect:for(let e of t.settings.options??[])n.set(e.name,{value:e.nameHtml,renderItem:()=>(0,uO.jsx)(CK,{color:e.color,nameHtml:e.nameHtml})});return n;case mD.Number:{let r=new Set;for(let a of(Cq(t,e,e=>{r.add(e.value)}),[...r].sort((e,t)=>e-t)))n.set(`${a}`,{value:`${a}`});return n}case mD.Iteration:{n.set(g$.Current,{value:g$.Current,priority:CW.CurrentIteration}),n.set(g$.Next,{value:g$.Next,priority:CW.NextIteration}),n.set(g$.Previous,{value:g$.Previous,priority:CW.PreviousIteration});let r=new Set;for(let a of(Cq(t,e,e=>{r.add(e.id)}),gR(t))){let e=r.has(a.id);e&&n.set(a.title,{value:a.titleHtml})}break}case mD.TrackedBy:Cq(t,e,e=>{for(let t of e){let e=xD(t);n.set(e,{value:t.title,renderItem:()=>(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,uO.jsx)(jh,{state:t.state,type:"Issue",isDraft:!1}),(0,uO.jsx)(Cz.Z,{sx:{mr:2,ml:2,maxWidth:"100%",width:"100%",display:"block"},title:t.title,children:t.title}),(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted",fontSize:12},children:e})]})})}});break;case mD.Assignees:Cq(t,e,e=>{CX(n,a,e)});break;case mD.Labels:if(r?.labels)for(let e of r.labels)n.set(e.name,{value:e.nameHTML,renderItem:()=>(0,uO.jsx)(CQ,{nameHtml:e.nameHTML,color:e.color})});else Cq(t,e,e=>{for(let t of e)n.set(t.name,{value:t.nameHtml,renderItem:()=>(0,uO.jsx)(CQ,{nameHtml:t.nameHtml,color:t.color})})});break;case mD.LinkedPullRequests:Cq(t,e,e=>{for(let t of e)n.set(t.number.toString(),{value:t.number.toString(),renderItem:()=>(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:[(0,uO.jsx)(jh,{isDraft:t.isDraft,state:t.state,type:mA.PullRequest}),(0,uO.jsx)(mO.Z,{sx:{ml:2},children:`#${t.number}`})]})})});break;case mD.Repository:Cq(t,e,e=>{n.set(e.nameWithOwner,{value:e.nameWithOwner,renderItem:()=>(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:[(0,uO.jsx)(Cv,{repository:e}),(0,uO.jsx)(mO.Z,{sx:{ml:2},children:e.nameWithOwner})]})})});break;case mD.Reviewers:Cq(t,e,e=>{CX(n,a,e)});break;case mD.Milestone:if(r?.milestones)for(let e of r.milestones)n.set(e.title,{value:e.title});else Cq(t,e,e=>{n.set(e.title,{value:e.title})});break;case mD.Title:Cq(t,e,e=>{let t=p5(e);n.set(t,{value:t})});break;case mD.Text:Cq(t,e,e=>{n.set(e.raw,{value:e.html})});break;case mD.Date:n.set(pd,{value:pd,priority:CW.TodayToken}),Cq(t,e,e=>{let t=pX(e);if(t){let e=p2(t.value),r=p1(t.value);e&&r&&n.set(e,{value:r})}})}return CG(n)}function CX(e,t,r){for(let a of(t?.login&&e.set("@me",{value:"@me",priority:CW.Me}),r)){let t="reviewer"in a?a.reviewer.name:a.login,r="reviewer"in a?a.reviewer.avatarUrl:a.avatarUrl;e.set(t,{value:t,renderItem:()=>(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:[(0,uO.jsx)(C$.O,{loading:"lazy",sx:{minWidth:"20px",mr:2},alt:t,src:r}),(0,uO.jsx)(mO.Z,{children:t})]})})}}try{(ek=CK).displayName||(ek.displayName="SingleSelectSuggestion")}catch{}try{(eS=CQ).displayName||(eS.displayName="LabelSuggestion")}catch{}var CJ=r(31171);let C0=(e="")=>{let t=(0,uq.useId)();return e.trim()?`${e}:${t}`:t};function C1(e){let{originRef:t,contentRef:r,contentWidth:a,contentHeight:n}=e,l=e.alignment??{xAlign:void 0,yAlign:void 0,xOriginEdgeAlign:void 0,yOriginEdgeAlign:void 0,yTopOffset:12},i=a&&n,s=i||r.current,o=i,d=0,c=0;if(t.current&&s){let e=t.current.getBoundingClientRect(),s=parseInt(window.getComputedStyle(t?.current).getPropertyValue("margin-left")),u=i?{width:0,height:0}:gc(r.current).getBoundingClientRect(),m={width:a??u.width,height:n??u.height};switch(o=m.width&&m.height,l.yAlign=C2(l.yOriginEdgeAlign||l.yAlign,m,e),l.xAlign=C5(l.xOriginEdgeAlign||l.xAlign,m,e),l.xAlign){case"left":switch(l.xOriginEdgeAlign){case void 0:case"left":c=e.left;break;case"right":c=e.left+e.width-s}break;case"center":c=e.left+e.width/2;break;case"right":c=e.left-(m.width-e.width)}switch(l.yAlign){case"top":d=e.top-m.height+(l.yTopOffset??12);break;case"middle":d=e.top-m.height/2+(l.yTopOffset??12);break;case"bottom":d=e.top+e.height+4}}return{top:Math.round(d),left:Math.round(c),yAlign:l.yAlign,xAlign:l.xAlign,hasContentDimensions:o}}function C2(e,t,r){let a=r.top,n=window.innerHeight-r.bottom,l={top:a>t.height,middle:a>t.height,bottom:n>t.height};return void 0!==e&&l[e]?e:l.bottom?"bottom":"top"}function C5(e,t,r){let a=window.innerWidth-r.left,n=a<t.width,l={left:!n,center:!n,right:n};return void 0!==e&&l[e]?e:l.left?"left":"right"}let C3=({inputRef:e,selectedIndex:t,getListItemId:r})=>{(0,uq.useEffect)(()=>{let a=e.current;if(a){let e=r(t);-1!==t&&e?a.setAttribute("aria-activedescendant",e):a.removeAttribute("aria-activedescendant")}return()=>{a?.removeAttribute("aria-activedescendant")}},[e,t,r])};function C4(e,t,r){return C7(e,t,r)}function C6(){return C7(null,[],{stopPropagation:!0,preventDefault:!1})}function C7(e,t,r){let a=r?.preventDefault??!0,n=r?.stopPropagation??!0;return(0,uq.useCallback)(t=>{(!e||e&&Boolean(e(t)))&&(a&&t.preventDefault(),n&&t.stopPropagation())},[a,n,...t])}let C8=({children:e,id:t,onMount:r})=>{let a=m1(r),n=je(()=>document.createElement("div"));return t&&n.current.setAttribute("id",t),(0,uq.useEffect)(()=>{let e=n.current,t=document.getElementById("portal-root");return t?.appendChild(e),a.current&&a.current(),function(){t?.removeChild(e)}},[n,a]),(0,w8.createPortal)((0,uO.jsx)(uU.Z,{display:"contents",children:e}),n.current)};try{(eI=C8).displayName||(eI.displayName="Portal")}catch{}let C9={position:"relative",bg:"canvas.overlay",lineHeight:1.5,py:"6px",px:2,my:0,mx:2,fontSize:1,borderRadius:2,color:"fg.default",cursor:"pointer",height:"32px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap","&.is-selected":{bg:"actionListItem.default.activeBg","&::after":{position:"absolute",top:"calc(50% - 12px)",left:"-8px",width:"4px",height:"24px",content:"''",bg:"rgb(9, 105, 218)",borderRadius:"6px"}},"&:not(.is-selected):hover":{bg:"actionListItem.default.activeBg","&::after":{position:"absolute",top:"calc(50% - 12px)",left:"-8px",width:"4px",height:"24px",content:"''",bg:"rgb(9, 105, 218)",borderRadius:"6px"}}},ke=e=>{let t={ref:e.selectedItemRef,className:e.selected?"is-selected":"",onClick:t=>{e.onSelect(),t.stopPropagation()},id:e.id,role:"option","aria-selected":e.selected,tabIndex:-1,...(0,mp.f)(e.testId)};return e.renderItem?(0,uO.jsx)(mF.Z,{as:"li",sx:C9,...t,children:e.renderItem()}):e.asHTML?(0,uO.jsx)(mF.Z,{as:"li",sx:C9,...t,children:(0,uO.jsx)(jc,{children:e.value})}):(0,uO.jsx)(mF.Z,{as:"li",sx:C9,...t,children:e.value})};ke.displayName="SuggestionsListItem";let kt={border:0,clip:"rect(0 0 0 0)",height:"1px",width:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute"},kr=(0,uq.forwardRef)(function({as:e="span",children:t,...r},a){return(0,uO.jsx)(e,{...r,style:kt,ref:a,children:t})});try{(eN=kr).displayName||(eN.displayName="VisuallyHidden")}catch{}let ka=e=>{let[t,r]=(0,uq.useState)(0),{items:a,controllingElementRef:n,inputRef:l}=e,i=(0,uq.useCallback)(e=>a[e]?.testId,[a]);C3({inputRef:l??n,selectedIndex:t,getListItemId:i}),(0,uq.useEffect)(()=>{r(0)},[a.length]);let s=(0,uq.useCallback)(()=>{r(e=>null==e||e+1===a.length?0:e+1)},[a.length]),o=(0,uq.useCallback)(()=>{r(e=>null==e||0===e?a.length-1:e-1)},[a.length]);(0,uq.useLayoutEffect)(()=>{c.current?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[t]);let d=C4(e=>{switch(e.key){case"ArrowDown":return s(),!0;case"ArrowUp":return o(),!0;case"Enter":if(a.length)return a[t]?.onSelect(),!0;return!1;default:return!1}},[a,s,o,t]);(0,uq.useEffect)(()=>(addEventListener("keydown",d),()=>{removeEventListener("keydown",d)}),[d]);let c=(0,uq.useRef)(null),u=C0("__omnibarPortalRoot__");return a.length>0?(0,uO.jsx)(C8,{id:u,children:(0,uO.jsx)(kl,{items:a,controllingElementRef:e.controllingElementRef,listRef:e.listRef,selectedItemIndex:t,selectedItemRef:c,xAlign:e.xAlign,xOriginEdgeAlign:e.xOriginEdgeAlign,testId:e.testId,style:e.style})}):null},kn={position:"absolute",width:"300px",maxHeight:"220px",zIndex:200,overflowY:"auto",overflowX:"hidden",m:0,ml:"22px",py:2,pr:0,pl:1,listStyle:"none",bg:"canvas.overlay",borderRadius:"12px",boxShadow:"shadow.large"};function kl({items:e,controllingElementRef:t,listRef:r,selectedItemIndex:a,selectedItemRef:n,xAlign:l,xOriginEdgeAlign:i,testId:s,style:o}){let d=(0,uq.useRef)(null);return(0,CJ.z)(r,d),ki({controllingElementRef:t,items:e,listRef:d,xAlign:l,xOriginEdgeAlign:i}),(0,uO.jsxs)("div",{role:"dialog","aria-label":"Filter suggestions",children:[(0,uO.jsx)(mF.Z,{as:"ul",sx:{...kn,...o},id:s,"aria-label":"Results",role:"listbox",ref:d,...(0,mp.f)(s),tabIndex:-1,children:e.map((e,t)=>(0,uO.jsx)(ke,{id:e.testId,value:e.value,testId:e.testId,asHTML:e.asHTML,onSelect:e.onSelect,renderItem:e.renderItem,selected:a===t,selectedItemRef:a===t?n:null},t))}),(0,uO.jsx)(kr,{id:`${s}-feedback`,"aria-live":"polite","aria-atomic":"true",...(0,mp.f)(`${s}-feedback`),children:fE.resultCount(e.length)})]})}function ki({controllingElementRef:e,items:t,listRef:r,xAlign:a="left",xOriginEdgeAlign:n="right"}){(0,uq.useEffect)(()=>{let{current:t}=r;if(!e.current||!t)return;let l=C1({originRef:e,contentRef:r,alignment:{xAlign:a,xOriginEdgeAlign:n}});t.style.top=`${l.top}px`,t.style.left=`${l.left}px`,t.style.transition="left 0.1s ease"},[e,t,r,a,n])}function ks(){let{allColumns:e}=CB(),t=(0,uq.useMemo)(()=>wx(e),[e]),{isKeywordQualifier:r}=CA(),a=(0,uq.useCallback)((e,a,n)=>ko(e,a,t,r,n),[t,r]);return{itemMatchesFilterQuery:a}}function ko(e,t,r,a,n){if(e instanceof RedactedItemModel)return!1;let l=e.columns,i=!!t.fieldFilters.length,s=i&&t.fieldFilters.some(e=>e[1].length>0),o=n||[...r.values()];if(i&&s){let n=!0;for(let i of t.fieldFilters){let t=i[0],s=i[1],o=wu(t);o&&(t=t.substring(1));let d=r.get(wb(t));if(!a(t)&&!d)return!1;let c=CT(t),u=!1;if(wc(t)&&s.length)for(let e of s){let t=r.get(wb(e));if(t&&(n=wa({columnData:l,column:t,matchEmpty:!0,matchNegated:o})))break}else if(a(t)){if(!s.length)return!0;for(let r of s){if("last-updated"===t){let t=e.updatedAt?p$(vV(e.updatedAt)):void 0;n=wn({itemUpdateAtDate:t,value:r,matchNegated:o});break}if("updated"===t){let t=e.updatedAt?p$(vV(e.updatedAt)):void 0;n=wi({itemUpdateAtDate:t,value:r,matchNegated:o});break}switch(r){case CN.is.open:case CN.is.closed:case CN.is.merged:n=wt({columnData:l,field:"state",value:r,matchNegated:o});break;case CN.is.issue:case CN.is.pr:n=wt({columnData:l,field:"type",value:r,matchNegated:o});break;case CN.is.draft:n=wt({columnData:l,field:"state",value:r,matchNegated:o})||wt({columnData:l,field:"type",value:r,matchNegated:o});break;case CN.reason.not_planned:case CN.reason.completed:case CN.reason.reopened:n=wt({columnData:l,field:"reason",value:r,matchNegated:o});break;default:if(!c)return!1;u=!0}if(o&&!n||!o&&n)break}}if(d&&!c||c&&u){if(!d)return!1;if(!s.length)continue;n=wa({columnData:l,column:d,values:s,matchNegated:o})}if(!n)break}return!!n&&(t.searchTokens.length&&(n=we(l,o,t.searchTokens)),n)}return i?!t.searchTokens.length||we(l,o,t.searchTokens):(!(t.normalisedQuery.length>0)||0!==t.searchTokens.length)&&we(l,o,t.searchTokens)}function kd(){let e=(0,uQ.TH)();for(let t of[my,mx]){let r=t.matchPath(e.pathname);if(r)return{projectViewRoutesMatch:r,isProjectViewRoute:!0}}return{projectViewRoutesMatch:null,isProjectViewRoute:!1}}ka.displayName="SuggestionsList";let kc={SetSortedBy:"SetSortedBy",SetHorizontalGroupedBy:"SetHorizontalGroupedBy",ClearHorizontalGroupedBy:"ClearHorizontalGroupedBy",SetVerticalGroupedBy:"SetVerticalGroupedBy",SetViewType:"SetViewType",SetFilter:"SetFilter",ShowField:"ShowField",HideField:"HideField",ToggleField:"ToggleField",MoveField:"MoveField",GoToViewNumber:"GoToViewNumber",ResetViewState:"ResetViewState",AddField:"AddField",RemoveField:"RemoveField",SetState:"SetState",SaveViewName:"SaveViewName",AddView:"AddView",DeleteView:"DeleteView",UpdateView:"UpdateView",SetViews:"SetViews",SetLocalViewState:"SetLocalViewState",SetViewServerStates:"SetViewServerStates",ReorderView:"ReorderView",ToggleItemsCount:"ToggleItemsCount",AddFieldAggregation:"AddFieldAggregation",RemoveFieldAggregation:"RemoveFieldAggregation",SetRoadmapDateFields:"SetRoadmapDateFields",SetRoadmapZoomLevel:"SetRoadmapZoomLevel",SetColumnWidths:"SetColumnWidths",ToggleRoadmapMarkerFields:"ToggleRoadmapMarkerFields",UpdateBoardColumnLimit:"UpdateBoardColumnLimit",SetSliceBy:"SetSliceBy",ClearSliceBy:"ClearSliceBy",SetSliceValue:"SetSliceValue",SetSliceByFilter:"SetSliceByFilter"},ku={isMainProjectFilter:!0,viewStateActionType:kc.SetFilter,getSearchQueryFromView:e=>e?.localViewState?.filter??"",getSearchIsDirty:e=>e?.isFilterDirty??!1,stats:{search:"search",cancel:"search_cancel"}},km=(0,uq.createContext)(null),kp=()=>{let e=(0,uq.useContext)(km);if(!e)throw Error("useSearch must be used inside a SearchProvider");return e},kf=(0,uq.memo)(function({children:e,config:t}){let{currentView:r,viewStateDispatch:a}=bP(),{allColumns:n}=CB(),{itemMatchesFilterQuery:l}=ks(),i=(0,uq.useRef)(null),s=(0,uq.useRef)(null),{postStats:o}=bM(),d=m1(o),c=(0,uq.useMemo)(()=>(0,b7.Z)(e=>{t.stats?.search&&d.current({name:t.stats.search,context:e.trim()})},500),[d,t.stats]),u=(0,uq.useCallback)((e,r)=>{c.cancel(),a({type:t.viewStateActionType,viewNumber:e,filter:r}),c(r)},[c,a,t.viewStateActionType]),m=t.getSearchQueryFromView(r),p=t.getSearchIsDirty(r),f=(0,uq.useMemo)(()=>r?.localViewStateDeserialized.visibleFields??[],[r?.localViewStateDeserialized.visibleFields]),h=(0,uq.useMemo)(()=>{let e,t;let a=r?.localViewStateDeserialized.sliceBy?.field,n=r?.localViewStateDeserialized.sliceValue;if(!a||!n)return wD("");let l=wb(a.name);return -1===n?(e="no",t=l):(e=l,t=n),wD(`${e}:"${t}"`)},[r]),g=(0,uq.useMemo)(()=>{let e=t.baseQuery?`${t.baseQuery} ${m}`:m;return wD(e)},[m,t.baseQuery]),x=(0,uq.useCallback)((e,t={})=>{r&&u(r.number,wE(m,e,t))},[r,m,u]),y=(0,uq.useCallback)((e,t)=>g.fieldFilters.some(([r,a])=>r===e.toLowerCase()&&a.includes(t.toLowerCase())),[g.fieldFilters]),b=(0,uq.useCallback)((e,t)=>{if(!r?.number)return;let a=wb(e),n=t.toString();x(a,{value:n})},[x,r]),v=(0,uq.useCallback)((e,t)=>{if(!r?.number)return;let a=wb(e),n=t.toString();u(r.number,wA(a,n,m))},[r,m,u]),w=(0,uq.useCallback)((e,t)=>{if(!r?.number)return;let a=wb(e),n=t.toString(),l=y(a,n)?v:b;l(a,n)},[r,y,b,v]),j=(0,uq.useCallback)((e,t)=>{if(!r?.number)return;let a=e.toLowerCase(),l=t.toString(),i=n.filter(kh).find(e=>e.name.toLowerCase()===("-"===a[0]?a.slice(1):a)),s=wV(i);u(r.number,wL(m,a,l,{columnOptions:s}))},[r,m,u,n]),C=(0,uq.useCallback)((e,t="include")=>{if(!r)return!1;let a=l(e,g,f);return"include"===t&&h.normalisedQuery?a&&l(e,h,f):a},[f,r,g,l,h]),{FilterKeywords:k}=CA(),S=(0,uq.useCallback)((e,t="include")=>e.length?(g.normalisedQuery||h.normalisedQuery)&&("exclude"!==t||g.normalisedQuery)?e.reduce((e,r)=>(r.isGrouped?(r.subRows=S(r.subRows,t),e.push({...r})):C(r.original,t)&&e.push(r),e),[]):e:[],[g.normalisedQuery,h.normalisedQuery,C]),I=(0,uq.useCallback)(()=>{i.current?.focus()},[]),N=(0,uq.useCallback)(e=>{u(e,""),t.stats?.cancel&&o({name:t.stats.cancel})},[o,u,t.stats]),_=(0,uq.useCallback)(()=>{let e=m.trimEnd();if(r&&e.length>0){let t=e.endsWith(":")||e.endsWith(",");u(r.number,t?e:`${e} `),I()}else I()},[r,m,u,I]),{isProjectViewRoute:T}=kd();mm(()=>T&&t.isMainProjectFilter?["f","Filter by...",n.filter(kh).map((e,t)=>[t.toString(36),`Filter by ${e.name}`,"filter",()=>{x(e.name),I()}]).concat(k.filter(e=>e.isFilterable).map((e,t)=>[(100+t).toString(),e.description,"filter",()=>{x(e.keyword),I()}]))]:null,[n,x,T,g,I,k,t.isMainProjectFilter]);let R=(0,uq.useMemo)(()=>({searchInputRef:i,searchToggleButtonRef:s,query:m,baseQuery:t.baseQuery,...g,addSpaceToQuery:_,setQuery:u,clearSearchQuery:N,appendFilter:x,addFilter:b,removeFilter:v,toggleFilter:w,insertFilter:j,isSearchDirty:p,matchesSearchQuery:C,globalFilter:S,focusFilterInput:I,transientQuery:h}),[m,g,_,u,N,x,b,v,w,j,p,C,S,I,h,t.baseQuery]);return(0,uO.jsx)(km.Provider,{value:R,children:e})});function kh(e){return e.dataType!==mD.Title}try{(e_=km).displayName||(e_.displayName="SearchContext")}catch{}try{(eT=kf).displayName||(eT.displayName="SearchProvider")}catch{}let kg=[{name:"Filter by",icon:mM.k1n}],kx=new Set(["title"]),ky=e=>!kx.has(e.name.toLowerCase());function kb(e){return`${wv(e)}:`}let kv=(0,uq.createContext)(null),kw=()=>{let e=(0,uq.useContext)(kv);if(!e)throw Error("useFilterSuggestionsItemsContext can only be used inside a FilterSuggestionsItemsContext");return e},kj=/\b([\w-]+:\S+)/g,kC=/(?=(?:[^"]*"[^"]*")*[^"]*$)(?=(?:[^']*'[^']*')*[^']*$),/g,kk=/\s(?=(?:'[^']*'|[^'])*$)/g,kS=/\s(?=(?:"[^"]*"|[^"])*$)/g,kI=(0,uq.memo)((0,uq.forwardRef)(function({filterInputRef:e,query:t,areFilterSuggestionsVisible:r,setAreFilterSuggestionsVisible:a,setQuery:n,suggestColumns:l=!0,showColumnSuggestionIf:i,testId:s,anchorRef:o},d){let{items:c,repoSuggestions:u}=kw(),{allColumns:m}=CB(),[p,f]=(0,uq.useState)(null),{fieldFilters:h}=kp(),{findColumnByDatabaseId:g}=j5(),{findFilterableFieldByName:x}=CV(),{clientWidth:y}=CD(o.current),b=(0,uq.useMemo)(()=>({minWidth:"300px",width:y??"fit-content",marginLeft:0}),[y]),{activeWorkflow:v}=w2(),w=v&&!vT(v),{isKeywordQualifier:j}=CA(),C=(0,uq.useMemo)(()=>m.filter(ky),[m]),{displayableColumns:k,displayableCommands:S,displayableKeywords:I}=CZ({query:t,columns:C,commands:kg,options:{suggestColumns:l,showColumnSuggestionIf:i}}),{getSuggestionsForColumn:N}=CH(c,u),[_,T]=(0,uq.useState)("none"),[R,E]=(0,uq.useState)(""),[D,P]=(0,uq.useState)(null),A=(0,uq.useCallback)((r,a,l=!1)=>{if(!(r&&r.name)&&!a)return;let i=r?.name??a;n(wE(t,gc(i),{replace:!0,filterForNegative:l})),P({keyword:a,filterForNegative:l,columnDatabaseId:r&&r.databaseId,value:""}),e.current?.focus()},[t,e,n]),M=(0,uq.useCallback)((r,{filterForEmpty:l=!1,filterForNegative:i=!1}={})=>{if(D){if(D.columnDatabaseId){let e=g(D.columnDatabaseId);if(!e)return;n(wE(t,e.name,{value:r,replace:!0,filterForEmpty:l,filterForNegative:i}))}else if(D.keyword){if(!w&&CL(D.keyword))return;let[e,a]="updated"===D.keyword?[`${t}<`,r.replace("<","")]:[t,r];n(wE(e,D.keyword,{value:a,replace:!0,filterForEmpty:l,filterForNegative:i}))}P(null),a(!1)}e.current?.focus()},[D,e,a,g,n,t,w]),L=(0,uq.useMemo)(()=>{let e="",t=h.find(e=>"is"===e[0])?.[1]?.[0];return t&&(e=t),e},[h]),F=(0,uq.useCallback)((e,r,a)=>{let n=wu(e);n&&(e=e.substring(1,e.length));let l=x(e),i=j(e);if(l&&ky(l)){T("values");let i=pD(t),s=pM(i,{kind:["keyword.operator.comparison","keyword.operator.range"],start:a,end:"variable"}),o=s&&Cj(l)?t.substring(s.location.end+1,a):t.substring(r+1,a);P({keyword:CT(l.name)?e:null,columnDatabaseId:l.databaseId,value:o,filterForNegative:n});return}if(i){T("values"),P({keyword:e,columnDatabaseId:null,value:t.substring(r+1,a),filterForNegative:n});return}T("none")},[t,j,x]),Z=(0,uq.useCallback)((e,t)=>{if("number"!=typeof t||t!==e.length){T("none"),P(null);return}if(!p){let e=kg[0];(0,u0.Z)(e,"Default filter command must exist"),f(e),T("filterQualifier")}if((0===t||e[t-1])&&e[t]){T("none");return}if(!e){T(p?"filterQualifier":"commands");return}let r=e.charAt(t-1),a=wm(e),n=fx(a?kj:wo,e),l=0,i=e,s="";n&&(i=n[0],l=n.index);let o=i.indexOf(":"),d=a&&["'",'"'].includes(r);s=i.substring(0,o),E(i.substring(o+1,t-(d?1:0)));let c=fx(kC,e),u=Math.max(fg(kS,e),fg(kk,e),0),m=Math.max((l+s.length||0)+(a?1:0),(c?c.index:e.lastIndexOf(","))||0);if(u>=m&&!a){if(['"',"'"," "].includes(r)){T("none");return}T("filterQualifier"),P({keyword:null,filterForNegative:wu(gc(e[t-1])),columnDatabaseId:null,value:""});return}F(s,m,t)},[p,F]);(0,uq.useEffect)(()=>{let r=requestAnimationFrame(()=>{if(!t.length)return;let r=null;e.current&&(r=e.current.selectionStart),Z(t,r)});return()=>{cancelAnimationFrame(r)}},[Z,t,e,r]);let O=(0,uq.useMemo)(()=>new Set(C.map(e=>e.name.toLowerCase())),[C]),B=(0,uq.useMemo)(()=>I.filter(e=>!CT(e)||CT(e)&&!O.has(e)).filter(e=>!CL(e)||w).map(e=>({key:e,value:kb(e),asHTML:!1,onSelect:()=>A(null,e,!!D?.filterForNegative),testId:`search-suggestions-item-${e}`})),[I,O,w,A,D?.filterForNegative]),V=(0,uq.useCallback)(t=>{e.current&&(e.current.value="",e.current?.focus()),f(t)},[e,f]);if(!t.length||!r)return null;switch(_){case"commands":return(0,uO.jsx)(ka,{xAlign:"left",xOriginEdgeAlign:"left",testId:s,listRef:d,style:b,controllingElementRef:o,inputRef:e,items:S.map(e=>({key:e.name,value:e.name,asHTML:!1,onSelect:()=>V(e),testId:`search-suggestions-item-${e.name}`}))});case"filterQualifier":return(0,uO.jsx)(ka,{xAlign:"left",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,style:b,items:k.map(e=>({key:e.name,value:kb(e.name),asHTML:!1,onSelect:()=>A(e,CT(e.name)?e.name.toLowerCase():null,!!D?.filterForNegative),testId:`search-suggestions-item-${e.name}`})).concat(B)});case"values":{if(!D)return null;let t=D.value.toLowerCase(),r=[];if(D.columnDatabaseId&&l){let e=D.filterForNegative,a=gc(g(D.columnDatabaseId));if(void 0!==i&&i(a.name)!==CM.ColumnAndValues)return null;let{filteredKeys:n,uniqueColumnValues:l}=N(a,R,t,D.filterForNegative),s=wv(a.name);r.push(...n.flatMap(t=>{if(t===`empty-${D.columnDatabaseId}`){let r=`${fE.noSuggestion} ${s}`;return{key:t,value:r,asHTML:!0,onSelect:()=>M(t,{filterForEmpty:!0,filterForNegative:e}),testId:`search-suggestions-item-${r}`}}if(t===`exclude-${D.columnDatabaseId}`){let e=`${fE.excludeSuggestion} ${s}`;return{key:t,value:e,asHTML:!0,onSelect:()=>A(a,null,!0),testId:`search-suggestions-item-${e}`}}let r=l.get(t),n=r?r.value:"",i=!!r&&!!r.priority&&r.priority>CW.UserDefined,o=i?()=>(0,uO.jsx)(mO.Z,{sx:{color:"accent.fg"},children:n}):r?.renderItem;return{key:t,value:n,renderItem:o,asHTML:!0,onSelect:()=>M(t,{filterForNegative:e}),testId:`search-suggestions-item-${t}`}}))}if(D.keyword){if("no"===D.keyword){let t=D.value?k.filter(e=>e.name.toLowerCase().indexOf(D.value)>=0):k,r=D.filterForNegative,a=t.map(e=>wv(e.name)).filter(e=>!R.includes(e));return(0,uO.jsx)(ka,{style:b,xAlign:"right",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,items:a.map(e=>({key:e,value:e,asHTML:!0,onSelect:()=>M(e,{filterForNegative:r}),testId:`search-suggestions-item-${e}`}))})}if(CL(D.keyword)&&!w||!Object.keys(CN).includes(D.keyword))return null;let t=D.keyword,a=Object.values(CN[t]),n=(D.value?a.filter(e=>e.indexOf(D.value)>=0):a).filter(e=>!R.includes(e));if("reason"===t)switch(L){case CC.open:n=n.filter(e=>e===Ck.reopened);break;case CC.closed:n=n.filter(e=>e!==Ck.reopened)}let l=D.filterForNegative;r.push(...n.map(e=>({key:e,value:e,asHTML:!0,onSelect:()=>M(e,{filterForNegative:l}),testId:`search-suggestions-item-${e}`})))}if(r.length>0)return(0,uO.jsx)(ka,{xAlign:"right",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,items:r,style:b});return null}default:return null}}));try{(eR=kv).displayName||(eR.displayName="FilterSuggestionsItemsContext")}catch{}try{(eE=kj).displayName||(eE.displayName="INVALID_VALUE_REGEX")}catch{}try{(eD=kC).displayName||(eD.displayName="COMMA_OUTSIDE_QUOTES_REGEX")}catch{}try{(eP=kk).displayName||(eP.displayName="WHITESPACE_OUTSIDE_SINGLE_QUOTES")}catch{}try{(eA=kS).displayName||(eA.displayName="WHITESPACE_OUTSIDE_DOUBLE_QUOTES")}catch{}try{(eM=kI).displayName||(eM.displayName="FilterSuggestions")}catch{}try{(eL=kI).displayName||(eL.displayName="FilterSuggestions")}catch{}let kN=(0,m8.eE)()?"Meta":"Ctrl",k_={ARCHIVE:"e",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CTRL_J:"Ctrl+j",CTRL_K:"Ctrl+k",CTRL_SPACE:"Ctrl+ ",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",HOME:"Home",META_A:`${kN}+a`,META_C:`${kN}+c`,META_V:`${kN}+v`,META_S:`${kN}+s`,META_D:`${kN}+d`,META_Z:`${kN}+z`,META_ARROW_DOWN:`${kN}+ArrowDown`,META_ARROW_LEFT:`${kN}+ArrowLeft`,META_ARROW_RIGHT:`${kN}+ArrowRight`,META_ARROW_UP:`${kN}+ArrowUp`,META_END:`${kN}+End`,META_SHIFT_F:`${kN}+Shift+f`,META_F:`${kN}+f`,META_HOME:`${kN}+Home`,META_K:`${kN}+k`,META_ENTER:`${kN}+Enter`,META_SPACE:`${kN}+ `,SHIFT_ARROW_DOWN:"Shift+ArrowDown",SHIFT_ARROW_UP:"Shift+ArrowUp",SHIFT_SPACE:"Shift+ ",SHIFT_TAB:"Shift+Tab",SHIFT_ENTER:"Shift+Enter",META_SHIFT_ENTER:`${kN}+Shift+Enter`,SPACE:" ",TAB:"Tab",META_F6:`${kN}+F6`},kT=[k_.ARCHIVE,k_.SHIFT_SPACE],kR=()=>{if(!l){let e=document.querySelector("meta[name=keyboard-shortcuts-preference]");l=e?e.content:"all"}return"no_character_key"===l},kE=e=>{let t="";return(e.ctrlKey&&(t+="Ctrl+"),e.metaKey&&(t+="Meta+"),e.shiftKey&&(t+="Shift+"),t+=e.key,kR()&&kT.includes(t))?"":t},kD=(e=!1)=>e?k_.META_SHIFT_F:k_.META_F,kP=e=>(window.addEventListener("focus",e,{capture:!0}),window.addEventListener("blur",e),window.addEventListener("click",e),()=>{window.removeEventListener("focus",e,{capture:!0}),window.removeEventListener("blur",e),window.removeEventListener("click",e)}),kA=e=>(0,uq.useSyncExternalStore)(kP,()=>e.length>0&&e.some(e=>e.current?.contains(document.activeElement)));var kM=r(22011);function kL(e){let t=(0,uq.useId)(),[r,a]=(0,uq.useState)(!1),n=e.open??r,l=e.id??t;return[{"aria-describedby":l,onPointerEnter:(0,uq.useCallback)(()=>a(!0),[]),onPointerLeave:(0,uq.useCallback)(()=>a(!1),[])},(0,uO.jsx)(kM.u,{...e,open:n,id:l},"portal-tooltip")]}var kF=r(50919);let kZ=(0,uq.memo)(function({onClick:e,onKeyDown:t}){return e?(0,uO.jsx)(kO,{onClick:e,onKeyDown:t}):null}),kO=({onClick:e,onKeyDown:t})=>{let r=(0,uq.useRef)(null),[a,n]=kL({contentRef:r,"aria-label":fE.clearFilter,direction:"sw",anchorSide:"outside-bottom"});return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(kF.h,{ref:r,variant:"invisible",onClick:e,onKeyDown:t,icon:mM.S7k,size:"small","aria-label":fE.clearFilter,...a,...(0,mp.f)("clear-filter-query")}),n]})};try{(eF=kZ).displayName||(eF.displayName="ClearFilterButton")}catch{}try{(eZ=kO).displayName||(eZ.displayName="ClearFilterButtonWithTooltip")}catch{}let kB={display:"flex",flex:1,flexDirection:"row",maxWidth:"100%",position:"relative",zIndex:4,gap:2,flexWrap:["wrap","nowrap"],justifyContent:["flex-end","space-between"]};function kV({children:e,height:t,...r}){return(0,uO.jsx)(mF.Z,{role:"region","aria-label":"View filters",...(0,mp.f)("base-filter-input"),sx:kB,style:{minHeight:t},...r,children:e})}try{(eO=kV).displayName||(eO.displayName="FilterContainer")}catch{}var k$=r(54901);let kz={lineHeight:0};function kU({filterCount:e,hideCounterLabel:t}){return t||"number"!=typeof e?null:(0,uO.jsxs)(mF.Z,{sx:kz,"aria-live":"polite","aria-atomic":!0,children:[(0,uO.jsx)(k$.Z,{...(0,mp.f)("filter-results-count"),children:e}),(0,uO.jsxs)(kr,{children:[" ",1===e?"matching item":"matching items"]})]})}try{(eB=kU).displayName||(eB.displayName="FilterCounterLabel")}catch{}let kW=(0,uq.createContext)(null),kH=(e,t)=>{switch(t.type){case"removeLast":return e.slice(1);case"register":return[t.data,...e].slice(0,5)}},kG=({children:e})=>{let[[t],r]=(0,uq.useReducer)(kH,[]),{postStats:a}=bM(),n=(0,uq.useMemo)(()=>t&&{...t,revert:e=>{t.revert(),r({type:"removeLast"}),a({name:"undo",ui:e,context:t.description})}},[t,a]),l=(0,uq.useMemo)(()=>({lastAction:n,registerAction:e=>r({type:"register",data:e})}),[n]);return mm(()=>n?["z",`Undo ${n.description}`,"undo",()=>n.revert("command_palette_command")]:null,[n]),(0,uq.useEffect)(()=>{let e=e=>{let t=kE(e)===k_.META_Z,r=document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement;t&&!r&&n&&!e.defaultPrevented&&(e.preventDefault(),n.revert("keyboard_shortcut"))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,a]),(0,uO.jsx)(kW.Provider,{value:l,children:e})},kq=()=>(0,uq.useContext)(kW);try{(eV=kW).displayName||(eV.displayName="HistoryContext")}catch{}try{(e$=kG).displayName||(e$.displayName="HistoryProvider")}catch{}var kK=r(38490);let kQ=e=>` ${e.split(" ").map(e=>`<${e.replaceAll("CommandOrControl",(0,m8.eE)()?"Cmd":"Ctrl").replaceAll("Command","Cmd").replaceAll("Control","Ctrl").toLowerCase()}>`).join(" / ")}`,kY=e=>e.replaceAll("{CMD_CTRL}",(0,m8.eE)()?"Command":"Control"),kX=(0,uq.forwardRef)(({label:e,icon:t,shortcut:r,sx:a,tooltipDirection:n,...l},i)=>{let s=(0,uq.useCallback)(()=>(0,uO.jsx)(kK.Z,{"aria-label":`${e}${r?kQ(r):""}`,className:"icon-button-with-tooltip__tooltip",direction:n,children:(0,uO.jsx)(t,{})}),[e,r,t,n]);return(0,uO.jsx)(kF.h,{ref:i,icon:s,"aria-keyshortcuts":r?kY(r):void 0,sx:{...a,"&:focus-visible, &:hover":{"& .icon-button-with-tooltip__tooltip":{"&::after, &::before":{display:"inline-block",textDecoration:"none",animationName:"tooltip-appear",animationDuration:"0.1s",animationFillMode:"forwards",animationTimingFunction:"ease-in"}}},"&:hover .icon-button-with-tooltip__tooltip":{"&::after, &::before":{animationDelay:"0.4s"}}},...l,"aria-label":e})});kX.displayName="IconButtonWithTooltip";try{(ez=TooltippedIcon).displayName||(ez.displayName="TooltippedIcon")}catch{}let kJ={alignItems:"center",display:"flex",height:"100%",gap:2},k0={display:"flex",gap:2,alignItems:"center",flexShrink:0};function k1({onResetChanges:e,onSaveChanges:t,saveButtonText:r,hideSaveButton:a,hideResetChangesButton:n,children:l}){let i=kq();return a&&n?null:(0,uO.jsxs)(mF.Z,{sx:k0,children:[l,(0,uO.jsxs)(mF.Z,{sx:kJ,...(0,mp.f)("filter-state-actions"),children:[n?null:(0,uO.jsx)(jI.z,{onClick:e,size:"small",disabled:!e,...(0,mp.f)("view-options-menu-reset-changes-button"),children:fE.discardChanges}),a?null:(0,uO.jsx)(jI.z,{variant:"outline",size:"small",onClick:t,disabled:!t,...(0,mp.f)("view-options-menu-save-changes-button"),children:r??fE.saveChanges}),i&&(0,uO.jsx)(kX,{icon:mM.HA9,disabled:void 0===i.lastAction,label:`Undo${i.lastAction?.description?` ${i.lastAction.description}`:""}`,onClick:()=>i.lastAction?.revert("toolbar_button"),size:"small",variant:"invisible",tooltipDirection:"nw"})]})]})}try{(eU=k1).displayName||(eU.displayName="FilterInputActions")}catch{}let k2={alignItems:"center",pl:"12px",pr:2,maxWidth:"100%",flexShrink:1,minHeight:"32px",display:"grid",gridTemplateColumns:"auto 1fr auto",gap:2,minWidth:"20px",width:"100%",borderRadius:2,borderColor:"border.default",borderStyle:"solid",borderWidth:"1px",":hover":{cursor:"text"},"&.is-focused":{borderColor:"accent.fg"}},k5=(0,uq.forwardRef)(function({children:e},t){return(0,uO.jsx)(mF.Z,{ref:t,sx:k2,children:e})});try{(eW=k5).displayName||(eW.displayName="FilterInputContainer")}catch{}try{(eH=k5).displayName||(eH.displayName="FilterInputContainer")}catch{}function k3(e){return t=>{let r=(0,uG.U2)(e)({theme:t});return r}}var k4=r(22390);let k6={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},k7=(e,t)=>{for(let r of t)r&&(r.style.font=e.font,r.style.fontSize=e.fontSize,r.style.fontFamily=e.fontFamily,r.style.fontWeight=e.fontWeight,r.style.fontStyle=e.fontStyle,r.style.letterSpacing=e.letterSpacing,r.style.textTransform=e.textTransform)};function k8(...e){for(let t of e)if(null!=t)return t.toString();return""}let k9=(0,uq.forwardRef)(function({minWidth:e=1,as:t=k4.Z,containerSx:r,...a},n){let l=(0,uq.useRef)(null),i=(0,uq.useRef)(null),s=(0,uq.useRef)(null);(0,uq.useImperativeHandle)(n,()=>l.current);let o=(0,uq.useCallback)(()=>{requestAnimationFrame(()=>{let{current:t}=i,{current:r}=s;if(!t)return;let a=l.current&&window.getComputedStyle(l.current);a&&k7(a,[t,r]);let n=t.scrollWidth,o=r?.scrollWidth??0,d=Math.max(n+2,l.current?.value===""?o+2:0,e);l.current&&(l.current.style.width=`${d}px`)})},[e]);(0,uq.useEffect)(()=>{o()});let d={...a,onChange:e=>{o(),a.onChange?.(e)},onBlur:e=>{o(),a.onBlur?.(e)},ref:l};return(0,uO.jsxs)(mF.Z,{sx:r,children:[(0,uO.jsx)(mF.Z,{sx:k6,ref:i,"aria-hidden":"true",children:k8(a.defaultValue,a.value)}),a.placeholder?(0,uO.jsx)(mF.Z,{sx:k6,ref:s,"aria-hidden":"true",children:a.placeholder}):null,(0,uO.jsx)(t,{...d})]})});try{(eG=k9).displayName||(eG.displayName="AutosizeTextInput")}catch{}try{(eq=k9).displayName||(eq.displayName="AutosizeTextInput")}catch{}let Se={color:"fg.default",fontFamily:"inherit",border:0,padding:0,boxShadow:"none",backgroundColor:"transparent",display:"block",width:"100%","&::-webkit-datetime-edit":{display:"flex",alignItems:"center"},"&:focus-within":{border:0,boxShadow:"none",outline:"none"},"&::placeholder":{color:"fg.muted"},"&.is-disabled":{cursor:"not-allowed"}},St={};function Sr(e=St){return{...Se,...e}}let Sa=(0,uq.forwardRef)(function(e,t){let r=(0,uq.useMemo)(()=>Sr(e.sx),[e.sx]);return(0,uO.jsx)(mF.Z,{as:"input",...e,sx:r,ref:t})});function Sn(e){e.stopPropagation(),e.preventDefault()}Sa.displayName="BorderlessTextInput";let Sl="search-suggestions-box",Si="filter-bar-input",Ss=(0,uq.forwardRef)(function({areFilterSuggestionsVisible:e,value:t,onChange:r,onKeyDown:a,onFocus:n,onBlur:l,onClick:i,disabled:s},o){let d=(0,uq.useCallback)(e=>{Sn(e),i?.(e)},[i]);return(0,uO.jsx)(k9,{as:Sa,role:"combobox",id:Si,"aria-haspopup":"listbox","aria-expanded":e,"aria-autocomplete":"list","aria-controls":Sl,"aria-label":fE.filterByKeyboardOrByField,name:"Filter",value:t,disabled:s,onChange:r,onClick:d,onKeyDown:a,onFocus:n,onBlur:l,placeholder:fE.filterByKeyboardOrByField,autoComplete:"off",autoCorrect:"false",autoCapitalize:"false",spellCheck:"false",...(0,mp.f)("filter-bar-input"),ref:o,tabIndex:0,sx:Sd,containerSx:So})}),So={minWidth:"100%",height:"100%"},Sd={position:"relative",display:"flex",resize:"none",outline:"none",border:"0px",width:"100%",padding:"0px",background:"transparent",overflow:"hidden",overflowX:"auto",color:"transparent",minWidth:"100%",caretColor:k3("colors.fg.default"),fontSize:1,flex:1,height:"100%",maxHeight:"unset","&::-webkit-autofill, &::-webkit-contacts-auto-fill-button, &::-webkit-credentials-auto-fill-button":{visibility:"hidden",display:"none !important",pointerEvents:"none",position:"absolute",right:0},"&:disabled":{cursor:"not-allowed"}};try{(eK=Ss).displayName||(eK.displayName="RawFilterInput")}catch{}let Sc={x:0,y:0};function Su(e){let t=(0,uq.useCallback)(()=>e(Sc),[e]);return(0,uq.useSyncExternalStore)(Sm,t)}function Sm(e){function t(t){let r={x:t.x,y:t.y};(0,CR.Z)(r,Sc)||(Sc={x:t.x,y:t.y}),e()}return document.addEventListener("pointermove",t),()=>document.removeEventListener("pointermove",t)}let Sp=e=>e.invalid?{"&::before":{position:"absolute",bottom:0,width:"100%",height:"0.25em",content:'""',background:t=>`linear-gradient(135deg, transparent, transparent 45%, ${t.colors[e.variant??"danger"].emphasis}, transparent 55%, transparent 100%),linear-gradient(45deg, transparent, transparent 45%, ${t.colors[e.variant??"danger"].emphasis}, transparent 55%, transparent 100%)`,backgroundRepeat:"repeat-x,repeat-x",backgroundSize:"0.5em 0.5em"}}:{},Sf=({length:e})=>0===e?null:(0,uO.jsx)(uO.Fragment,{children:Array.from({length:e}).map((e,t)=>(0,uO.jsx)(uq.Fragment,{children:"\xa0"},t))}),Sh={position:"absolute",userSelect:"none",whiteSpace:"nowrap",wordBreak:"break-word",fontSize:1,flex:1,width:"100%",padding:"0px",top:"50%",transform:"translateY(-50%)"},Sg=(0,uq.memo)(function({query:e,suggestColumns:t=!0,showColumnSuggestionIf:r}){let a=(0,uq.useRef)(null),{orderedTokenizedFilters:n,invalidQuery:l}=(0,uq.useMemo)(()=>wd(e),[e]),i=Su((0,uq.useCallback)(e=>!!a.current&&fj(a.current,e),[])),s=e.split(" ").findIndex(e=>" "!==e);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(mF.Z,{sx:Sh,ref:a,...(0,mp.f)("tokenized-query"),"aria-errormessage":l?"tokenized-query-invalid-query-errormessage":void 0,children:[(0,uO.jsx)(Sf,{length:s}),n.map((e,a)=>(0,uO.jsxs)(uq.Fragment,{children:[(0,uO.jsx)(Sj,{...e,id:`tokenized-query-token-${a}`,invalid:l,suggestColumns:t,showColumnSuggestionIf:r}),(0,uO.jsx)(Sf,{length:e.spaceAfter.length})]},a))]}),l?(0,uO.jsx)(kM.u,{contentRef:a,direction:"se",open:i,"aria-label":l?fL.invalidFilterQuotes:void 0,id:"tokenized-query-invalid-query-errormessage","aria-live":"polite",anchorSide:"inside-bottom",anchorOffset:-2}):null]})});function Sx(e){return{message:e}}function Sy(e){let t=e,r=e.match(/(["])(.*?[^\\])\1/);if(r){let e=r[2];(0,u0.Z)(e,"Value must be returned from match"),t=e}return t}let Sb=/^(?:[+\-><]?[=]?|(\*\.\.))\d+(\.\d+)?(?:\.\.\*|\.\.)?(?:\d+(\.\d+)?)?$/;function Sv(e,t,r=!1,a){if(!e)return;let n=wf(t);switch(e.dataType){case mD.SingleSelect:{let{options:t}=e.settings,r=new Set;for(let e of n)t.some(t=>vW([e],t.name))||r.add(e);if(r.size>0)return Sx(fL.noOptionsMatch([...r].join(","),e.name));return}case mD.Number:{let e=new Set;for(let t of n)Sb.test(t)||e.add(t);if(e.size>0)return Sx(fL.invalidNumberValue([...e].join(",")));return}case mD.Date:{let e=new Set;for(let t of n){let r=vJ(t);if(r)switch(r.operator){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":null===p$(r.value)&&e.add(r.value);break;case"RANGE":{let a=!r.start||null!==p$(r.start),n=!r.end||null!==p$(r.end);a||n?a?n||e.add(r.end):e.add(r.start):e.add(t);break}case"LESS_THAN_RANGE":r.end&&null===p$(r.end)&&e.add(r.end);break;case"GREATER_THAN_RANGE":r.start&&null===p$(r.start)&&e.add(r.start);break;default:xE(r)}else null===p$(t)&&e.add(t)}if(e.size>0)return Sx(fL.invalidDateValue([...e].join(",")));return}case mD.Iteration:{let t=new Set;for(let r of n){if(gZ(r))continue;let a=vJ(r);if(a)switch(a.operator){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":null===v3(a.value,e)&&t.add(a.value);break;case"RANGE":{let n=!a.start||null!==v3(a.start,e),l=!a.end||null!==v3(a.end,e);n||l?n?l||t.add(a.end):t.add(a.start):t.add(r);break}case"LESS_THAN_RANGE":a.end&&null===v3(a.end,e)&&t.add(a.end);break;case"GREATER_THAN_RANGE":a.start&&null===v3(a.start,e)&&t.add(a.start);break;default:xE(a)}else null===v3(r,e)&&t.add(r)}if(t.size>0)return Sx(fL.noIterationMatch([...t].join(","),e.name));return}case mD.Labels:{if(!r)return;let t=a?.labels?SI(a.labels):void 0,l=new Set;for(let e of n)t?.has(e)||l.add(e);if(l.size>0)return Sx(fL.noOptionsMatch([...l].join(","),e.name));return}case mD.Milestone:{if(!r)return;let t=a?.milestones?SN(a.milestones):void 0,l=new Set;for(let e of n)t?.has(e)||l.add(e);if(l.size>0)return Sx(fL.noOptionsMatch([...l].join(","),e.name));return}case mD.Text:case mD.Title:case mD.Repository:case mD.Reviewers:case mD.LinkedPullRequests:case mD.Assignees:case mD.Tracks:case mD.TrackedBy:return;default:xE(e)}}function Sw(e,t){let r=wf(e),a=new Set(Object.values(t)),n=new Set(r.filter(e=>!a.has(Sy(e).toLowerCase())));if(0!==n.size)return{message:fL.invalidQualifier([...n],t)}}let Sj=(0,uq.memo)(function({invalid:e,id:t,suggestColumns:r,showColumnSuggestionIf:a,...n}){let{findFilterableFieldByName:l}=CV(),{repoSuggestions:i}=kw(),s=void 0!==a;switch(n.type){case"search":return(0,uO.jsx)(SS,{id:t,value:n.value,invalid:e});case"field":{let o=l(n.field),d=s&&o?a(o.name):void 0;o=s?d===CM.ColumnOnly||d===CM.ColumnAndValues?o:void 0:o;let c=r&&!!o,u=s&&d===CM.ColumnAndValues,m=Sv(o,n.value,u,i);return(0,uO.jsx)(Sk,{id:t,leftSide:n.field,rightSide:n.value,invalid:e||!c,valueErrors:m,keyErrors:c?void 0:{message:fL.unknownFieldFilter(n.field)},exclude:n.exclude})}case"is":case"reason":{let r=Sw(n.value,CN[n.type]);return(0,uO.jsx)(Sk,{id:t,leftSide:n.type,invalid:e,exclude:n.exclude,rightSide:n.value,valueErrors:r})}case"last-updated":{let r=(s&&a("last-updated")===CM.None)??!1,l=n.value.match(pc),i=l?void 0:{message:fL.lastUpdatedValueErrorMessage};return(0,uO.jsx)(Sk,{id:t,leftSide:n.type,invalid:e||r,exclude:n.exclude,rightSide:n.value,valueErrors:r?void 0:i,keyErrors:e||r?{message:fL.unknownFieldFilter(n.type)}:void 0})}case"updated":{let r=(s&&a("updated")===CM.None)??!1,l=n.value.match(pu),i=l?void 0:{message:fL.updatedValueErrorMessage};return(0,uO.jsx)(Sk,{id:t,leftSide:n.type,invalid:e||r,exclude:n.exclude,rightSide:n.value,valueErrors:r?void 0:i,keyErrors:e||r?{message:fL.unknownFieldFilter(n.type)}:void 0})}case"no-field":{let r=SC(n.field,l);return(0,uO.jsx)(Sk,{id:t,leftSide:"no",rightSide:n.field,exclude:n.exclude,invalid:e,valueErrors:r?{message:fL.unknownFieldFilter(n.field)}:void 0})}default:xE(n)}});function SC(e,t){let r=wf(e),a=new Set;for(let e of r){let r=t(e);r||a.add(e)}if(0!==a.size)return{message:fL.unknownFieldFilter([...a].join(","))}}let Sk=(0,uq.memo)(function({id:e,leftSide:t,rightSide:r,invalid:a,exclude:n=!1,valueErrors:l,keyErrors:i}){let s=(0,uq.useRef)(null),o=(0,uq.useRef)(null),d=Su((0,uq.useCallback)(e=>!!s.current&&fj(s.current,e),[])),c=Su((0,uq.useCallback)(e=>!!o.current&&fj(o.current,e),[]));return(0,uO.jsxs)(mF.Z,{id:e,ref:s,sx:{position:"relative",display:"inline-block",...Sp({invalid:Boolean(a||i)})},children:[(0,uO.jsxs)(mO.Z,{sx:{display:"inline-block",whiteSpace:"pre",color:"fg.muted"},"aria-errormessage":i?`${e}-key-errormessage`:void 0,children:[`${n?"-":""}${t}:`,i?(0,uO.jsx)(kM.u,{direction:"se",open:d,"aria-label":i.message,contentRef:s,id:`${e}-key-errormessage`,"aria-live":"polite",anchorSide:"inside-bottom",anchorOffset:-2}):null]}),(0,uO.jsxs)(mO.Z,{ref:o,sx:{position:"relative",display:"inline-block",color:"accent.fg",whiteSpace:"pre",...Sp({invalid:Boolean(l),variant:"attention"})},"aria-errormessage":l?`${e}-value-errormessage`:void 0,children:[r,l?(0,uO.jsx)(kM.u,{contentRef:o,direction:"se",open:c,"aria-label":l.message,id:`${e}-value-errormessage`,"aria-live":"polite",anchorSide:"inside-bottom",anchorOffset:-2}):null]})]})}),SS=(0,uq.memo)(function({value:e,invalid:t,id:r}){return(0,uO.jsx)(mO.Z,{id:r,sx:{color:"fg.default",position:"relative",display:"inline-block",whiteSpace:"pre",...Sp({invalid:t,variant:"danger"})},children:e})});function SI(e){let t=new Set;for(let r of e)t.add(r.name);return t}function SN(e){let t=new Set;for(let r of e)t.add(r.title);return t}try{(eQ=Sf).displayName||(eQ.displayName="Spaces")}catch{}try{(eY=Sg).displayName||(eY.displayName="TokenizedQuery")}catch{}try{(eX=Sb).displayName||(eX.displayName="NUMBER_VALIDATION")}catch{}try{(eJ=QUALIFIERS).displayName||(eJ.displayName="QUALIFIERS")}catch{}try{(e0=Sj).displayName||(e0.displayName="Token")}catch{}try{(e1=Sk).displayName||(e1.displayName="PairFilterToken")}catch{}try{(e2=SS).displayName||(e2.displayName="SingleFilterToken")}catch{}let S_={position:"relative",display:"flex",alignItems:"center",zIndex:2,maxHeight:"unset",overflowX:"auto",height:"100%",msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}};function ST({children:e}){return(0,uO.jsx)(mF.Z,{sx:S_,children:e})}try{(e5=ST).displayName||(e5.displayName="TokenizedQueryContainer")}catch{}let SR={color:"fg.subtle"},SE=(0,uq.memo)(function({height:e,containerRef:t,value:r,onChange:a,onInputKeyDown:n,onFocus:l,onBlur:i,inputRef:s,filterCount:o,onClearButtonClick:d,onClearButtonKeyDown:c,onResetChanges:u,onSaveChanges:m,setValueFromSuggestion:p,saveButtonText:f,suggestColumns:h=!0,showColumnSuggestionIf:g,hideSuggestions:x=!1,filterIconButtonIcon:y=mM.k1n,hideSaveButton:b=!1,hideCounterLabel:v=!1,hideResetChangesButton:w=!1,children:j,onInputClick:C,...k}){let S=(0,uq.useRef)(null);(0,uq.useImperativeHandle)(s,()=>S.current);let{memex_table_without_limits:I}=g9(),N=(0,uq.useRef)(null);(0,uq.useImperativeHandle)(t,()=>N.current);let _=(0,uq.useRef)(null),T=kA([_,S,N]),R=Boolean(r&&(d||c)),[E,D]=(0,uq.useState)(T);(0,uq.useLayoutEffect)(()=>{D(T&&r.trim().length>0)},[T,r]);let P=m1(n),A=(0,uq.useCallback)(e=>{switch(kE(e)){case k_.ESCAPE:if(E){D(!1);return}P.current?.(e);return;case k_.ARROW_DOWN:if(E)return;P.current?.(e);return;case k_.TAB:if(r.length>0)return;E&&D(!1),P.current?.(e);return}},[E,P,D,r.length]),M=(0,uq.useCallback)(e=>{e.stopPropagation(),(0,w8.flushSync)(()=>{u?.(e)}),S.current?.focus()},[u]),L=(0,uq.useCallback)(e=>{e.stopPropagation(),(0,w8.flushSync)(()=>{m?.(e)}),S.current?.focus()},[m]),F=(0,uq.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),(0,w8.flushSync)(()=>{d?.(e)}),S.current?.focus()},[d]),Z=(0,uq.useCallback)(()=>{S.current?.focus()},[]);return(0,uO.jsxs)(kV,{height:e,...k,children:[(0,uO.jsxs)(k5,{ref:N,children:[(0,uO.jsx)(mF.Z,{onClick:Z,children:(0,uO.jsx)(mL.Z,{sx:SR,icon:y})}),(0,uO.jsxs)(ST,{children:[(0,uO.jsx)(Sg,{query:r,suggestColumns:h,showColumnSuggestionIf:g}),(0,uO.jsx)(Ss,{areFilterSuggestionsVisible:E,onKeyDown:A,ref:S,onChange:a,value:r,onBlur:i,onFocus:l,onClick:C,disabled:I})]}),(0,uO.jsxs)(mF.Z,{sx:SD,children:[(0,uO.jsx)(kU,{hideCounterLabel:v,filterCount:o}),(0,uO.jsx)(kZ,{onClick:R?F:void 0,onKeyDown:c})]})]}),(0,uO.jsx)(k1,{hideSaveButton:b,hideResetChangesButton:w,onResetChanges:u?M:void 0,onSaveChanges:m&&!b?L:void 0,saveButtonText:f,children:j}),x?null:(0,uO.jsx)(kI,{testId:Sl,ref:_,filterInputRef:S,anchorRef:N,query:r,setQuery:p,suggestColumns:h,showColumnSuggestionIf:g,areFilterSuggestionsVisible:E,setAreFilterSuggestionsVisible:D})]})}),SD={display:"flex",alignItems:"center"};try{(e3=SE).displayName||(e3.displayName="TokenizedFilterInput")}catch{}try{(e4=SE).displayName||(e4.displayName="TokenizedFilterInput")}catch{}let SP=({query:e,onClickHandler:t,filterCount:r,icon:a})=>(0,uO.jsx)(mF.Z,{...(0,mp.f)("disabled-filter-input"),onClick:t,sx:{border:e=>`1px solid ${e.colors.border.default}`,borderRadius:2,display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between",maxWidth:"100%",pl:2,pr:[3,4,5],position:"relative",color:e=>`${e.colors.primer.fg.disabled}`,backgroundColor:e=>`${e.colors.input.disabledBg}`,minHeight:"32px",cursor:"text"},children:(0,uO.jsxs)(mF.Z,{sx:{alignItems:"center",maxWidth:"100%",display:"flex"},children:[a,(0,uO.jsx)(mO.Z,{sx:{pl:2,pr:2,whiteSpace:"nowrap"},children:e}),void 0!==r&&(0,uO.jsx)(k$.Z,{...(0,mp.f)("disabled-filter-results-count"),children:r})]})});try{(e6=SP).displayName||(e6.displayName="DisabledFilterInput")}catch{}let SA=e=>0===e.query.length&&e.isDirty?(0,uO.jsxs)(mO.Z,{...(0,mp.f)("empty-query-message"),as:"p",sx:{fontSize:0,fontWeight:"bold",color:e.isAutoAdd?"attention.fg":"danger.fg",mt:2,mb:0,width:"100%",display:"flex",alignItems:"center"},children:[(0,uO.jsx)(mF.Z,{as:"span",sx:{display:"flex",mr:1},"aria-hidden":"true",children:(0,uO.jsx)(mM.zMQ,{size:12})}),(0,uO.jsx)(mO.Z,{as:"span",children:e.isAutoAdd?fB.emptyFilterAutoAdd:fB.emptyFilterDefault})]}):null;try{(e7=SA).displayName||(e7.displayName="EmptyQueryMessage")}catch{}var SM=r(44311);let SL=r(83792),SF=r(91683),SZ=({query:e,initialQuery:t,onQueryChange:r})=>{let[a,n]=(0,uq.useState)(t),l=(0,uq.useMemo)(()=>e.trim()!==a,[e,a]),{isEditing:i}=Ce(),{hasWorkflowWritePermission:s}=j4(),o=!s||!i,d=(0,uq.useCallback)(e=>{r?.(e)},[r]),c=(0,uq.useCallback)(()=>{d("")},[d]),u=(0,uq.useCallback)(()=>{d(a)},[a,d]),m=(0,uq.useCallback)(e=>{d(e.currentTarget.value)},[d]),p=(0,uq.useCallback)(e=>{d(e)},[d]);return(0,uq.useEffect)(()=>{n(t)},[t]),{queryCheckpoint:a,editingDisabled:o,isDirty:l,clearQuery:c,handleQueryChange:m,setValueFromSuggestion:p,setQueryCheckpoint:n,resetChanges:u}},SO=new Map([["Labels",CM.ColumnAndValues],["Milestone",CM.ColumnAndValues],["Assignees",CM.ColumnOnly],["last-updated",CM.None],["updated",CM.None]]),SB=e=>{if(SO.has(e))return SO.get(e)},SV=r(13303),S$=r(88213),Sz=({onQueryChange:e,query:t,initialQuery:a="",milestoneSuggestionsQueryRef:n,labelSuggestionsQueryRef:l})=>{let{workflow:i}=Ce(),{setValueFromSuggestion:s,isDirty:o,editingDisabled:d,clearQuery:c,handleQueryChange:u,resetChanges:m}=SZ({query:t,initialQuery:a,workflow:i,onQueryChange:e}),p=(0,vZ.usePreloadedQuery)(SV,l),f=(0,vZ.usePreloadedQuery)(S$,n),{data:h,loadNext:g,isLoadingNext:x,hasNext:y}=(0,vZ.usePaginationFragment)(r(10846),p.repository?p.repository:null),{data:b,loadNext:v,isLoadingNext:w,hasNext:j}=(0,vZ.usePaginationFragment)(r(18972),f.repository?f.repository:null),C=h?.labels?.totalCount||0,k=(h?.labels?.edges||[]).flatMap(e=>e?.node?[(0,vZ.readInlineData)(SF,e.node)]:[]),S=b?.milestones?.totalCount||0,I=(b?.milestones?.edges||[]).flatMap(e=>e?.node?[(0,vZ.readInlineData)(SL,e.node)]:[]);(0,uq.useEffect)(()=>{y&&!x&&k.length<C&&g(100)},[g,k,C,y,x]),(0,uq.useEffect)(()=>{j&&!w&&I.length<S&&v(100)},[v,I,S,j,w]);let N=(0,uq.useMemo)(()=>{let e=[];return e.concat(k)},[k]),_=(0,uq.useMemo)(()=>{let e=[];return e.concat(I)},[I]),T=(0,uq.useMemo)(()=>({items:[],repoSuggestions:{labels:N,milestones:_}}),[N,_]);return d?(0,uO.jsx)(SP,{query:t,icon:(0,uO.jsx)(mM.W1M,{})}):(0,uO.jsxs)(kv.Provider,{value:T,children:[(0,uO.jsx)(SE,{height:"32px",value:t,onChange:u,onClearButtonClick:c,setValueFromSuggestion:s,onResetChanges:o?m:void 0,filterIconButtonIcon:mM.W1M,suggestColumns:!0,showColumnSuggestionIf:SB,hideSaveButton:!0,hideCounterLabel:!0}),(0,uO.jsx)(SA,{query:t,isDirty:o,isAutoAdd:!0})]})};try{(e8=SO).displayName||(e8.displayName="AllowedSuggestedColumnsMap")}catch{}try{(e9=Sz).displayName||(e9.displayName="SearchInput")}catch{}let SU=({onNoSuggestedRepositories:e})=>{let{isEditing:t,localRepositoryId:r,localQuery:a,initialQuery:n}=Ce(),{count:l,searchResultUrl:i,onRepositoryChange:s,onSearchQueryChange:o,repository:d}=Cm(),c=d?.nameWithOwner.split("/")[0],[u,m,p]=(0,vZ.useQueryLoader)(SV),[f,h,g]=(0,vZ.useQueryLoader)(S$);return(0,uq.useEffect)(()=>(d&&c&&(m({owner:c,repo:d.name},{fetchPolicy:"store-or-network"}),h({owner:c,repo:d.name},{fetchPolicy:"store-or-network"})),()=>{p(),g()}),[d,p,g,m,h,c]),(0,uO.jsx)(Cl,{icon:mM.H0r,iconBg:"severe.subtle",iconColor:"attention.fg",headerDescription:fB.getItemsBlockLabel,...(0,mp.f)("get-items-block"),children:(0,uO.jsxs)(Cc.Z,{sx:{flex:1,alignItems:"stretch"},children:[(0,uO.jsx)(Cc.Z.Label,{children:"Filters"}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flex:"auto"},children:[(0,uO.jsx)(Cw,{targetRepositoryId:r,sx:{alignSelf:"start"},onRepositorySelected:s,onNoSuggestedRepositories:e,isEditing:t},"repoSuggestions"),(0,uO.jsx)(mF.Z,{sx:{ml:2,flex:"1 1 100%"},children:u&&f?(0,uO.jsx)(Sz,{labelSuggestionsQueryRef:u,milestoneSuggestionsQueryRef:f,onQueryChange:o,initialQuery:n,query:a}):(0,uO.jsx)(Cd.o,{variant:"rounded",height:"32px",width:"100%"})})]}),t&&i&&(0,uO.jsxs)(mO.Z,{sx:{color:"fg.muted",paddingTop:3},children:[(0,uO.jsxs)(w3.Z,{sx:{alignSelf:"start"},target:"_blank",rel:"noreferrer",href:i,...(0,mp.f)("search-result-link"),children:[" ","See ",l," existing items that match this query ",(0,uO.jsx)(mM.Pfi,{})]}),(0,uO.jsxs)(mF.Z,{sx:{paddingTop:3},children:[fB.autoAddManualTip," ",(0,uO.jsx)(w3.Z,{sx:{alignSelf:"start"},target:"_blank",rel:"noreferrer",href:"https://docs.github.com/en/issues/planning-and-tracking-with-projects/managing-items-in-your-project/adding-items-to-your-project#adding-multiple-issues-or-pull-requests-from-a-repository",...(0,mp.f)("add-multiple-link"),"aria-label":"Link to GitHub Docs page about adding multiple issues or pull requests to a project",children:(0,uO.jsx)(mM.Pfi,{})})]})]})]})})};try{(te=SU).displayName||(te.displayName="GetItemsBlock")}catch{}let SW=()=>{let{itemMatchesFilterQuery:e}=ks(),{items:t}=bt(),{setFilterCount:r,localQuery:a,setLocalQuery:n,setLocalContentTypes:l}=Ce(),i=(0,uq.useRef)(),s=(0,uq.useCallback)(r=>{let a=t=>e(t,wD(r));return t.filter(a).length},[e,t]),o=(0,uq.useCallback)(e=>{n(e),i.current&&i.current.cancel(),i.current=(0,b7.Z)(()=>{l(jV(e))},200),i.current()},[n,l]);return(0,uq.useEffect)(()=>{r(s(a))},[s,a,r]),{onSearchQueryChange:o}},SH=({field:e,unit:t,value:r})=>(0,uO.jsxs)(mO.Z,{as:"p",sx:{fontSize:0,color:"fg.muted",display:"flex",alignItems:"center",mt:2,mb:0,width:"100%"},children:[(0,uO.jsx)(mF.Z,{as:"span",sx:{display:"flex",mr:1},"aria-hidden":"true",children:(0,uO.jsx)(mM.u0k,{size:14})}),(0,uO.jsxs)(mO.Z,{as:"span",children:["Using the ",e," operator means that your workflow will run every ",r," ",t]})]});try{(tt=SH).displayName||(tt.displayName="TimeBoundFilterWarning")}catch{}let SG={"last-updated":{field:"last-updated",unit:"hours",value:12},updated:{field:"updated",unit:"hours",value:12}},Sq=()=>{let{workflow:e,initialQuery:t,localQuery:r,filterCount:a}=Ce(),{hasWorkflowWritePermission:n}=j4(),{items:l}=bt(),{onSearchQueryChange:i}=SW(),{setValueFromSuggestion:s,isDirty:o,editingDisabled:d,clearQuery:c,handleQueryChange:u,resetChanges:m}=SZ({query:r,initialQuery:t,workflow:e,onQueryChange:i}),p=(0,uq.useRef)(null),f=(0,uq.useRef)(null),h=(0,uq.useMemo)(()=>v_(e),[e]),g=(0,uq.useMemo)(()=>{let e={},t=wd(r);for(let r of t.orderedTokenizedFilters){let t=SG[r.type];t&&!e[r.type]&&(e[r.type]=t)}return Object.values(e)},[r]),x=(0,uq.useMemo)(()=>({items:l}),[l]);return(0,uO.jsxs)(Cl,{icon:mM.k1n,iconBg:"accent.subtle",iconColor:"accent.fg",headerDescription:fB.autoArchiveItemsLabel,children:[(0,uO.jsxs)(Cc.Z,{sx:{flex:1,alignItems:"stretch"},children:[(0,uO.jsx)(Cc.Z.Label,{children:"Filters"}),d?(0,uO.jsx)(SP,{query:r,filterCount:n?a:void 0,icon:(0,uO.jsx)(mM.k1n,{})}):(0,uO.jsx)(kv.Provider,{value:x,children:(0,uO.jsx)(SE,{height:"32px",containerRef:p,value:r,onChange:u,inputRef:f,onClearButtonClick:c,setValueFromSuggestion:s,filterCount:a,onResetChanges:o?m:void 0,suggestColumns:!1,hideSaveButton:!0})})]}),g.length>0&&(0,uO.jsx)(mF.Z,{sx:{width:"100%"},...(0,mp.f)("time-bound-notification"),children:h&&g.map(({field:e,value:t,unit:r})=>(0,uO.jsx)(SH,{field:e,value:t,unit:r},e))}),(0,uO.jsx)(SA,{query:r,isDirty:o})]})};try{(tr=Sq).displayName||(tr.displayName="GetProjectItemsBlock")}catch{}let SK=({selectedOption:e,options:t,isEditing:r,onStatusSelected:a,testId:n,sx:l})=>{let i=(0,uq.useMemo)(()=>t.map(e=>({text:e.name,id:e.name})),[t]),[s,o]=(0,uq.useState)(""),[d,c]=(0,uq.useState)(!1),u=(0,uq.useCallback)(()=>{c(!1)},[]),m=e=>{a(t.find(t=>t.name===e?.text))},p=i.filter(e=>e.text?.toLowerCase().startsWith(s.toLowerCase())),f=i.find(t=>t.text===e?.name);return(0,uO.jsx)(Cf.b,{placeholderText:fB.setValueLabel,open:d,onOpenChange:c,selected:f,onFilterChange:o,items:p,onSelectedChange:m,renderAnchor:({children:t,...a})=>(0,uO.jsx)(jI.z,{sx:l,disabled:!r,trailingIcon:mM.AS7,...a,...(0,mp.f)(`${n}-anchor`),children:e?(0,uO.jsx)(jc,{children:`Status:${e?.nameHtml}`}):fB.invalidNoValue}),overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:u,...(0,mp.f)(`${n}-panel`)}})};try{(ta=SK).displayName||(ta.displayName="StatusPicker")}catch{}let SQ=({headerDescription:e})=>{let{isEditing:t,workflow:r,replaceAction:a}=Ce(),n=r.actions[0];(0,u0.Z)(n,"Action must be defined");let{column:l,selectedOption:i}=j3(n),s=l&&"options"in l.settings?l.settings.options:[],o=e=>{let t={...n,arguments:{...n.arguments,fieldOptionId:e?.id}};a(t)};return(0,uO.jsx)(Cl,{icon:mM.vdY,iconBg:"attention.subtle",iconColor:"attention.fg",headerDescription:e,children:(0,uO.jsx)(SK,{onStatusSelected:o,options:s,selectedOption:i?{...i}:void 0,isEditing:t,testId:"workflow-set-field"},"statusPicker")})};try{(tn=SQ).displayName||(tn.displayName="SetBlock")}catch{}function SY(e){switch(e){case vk.PullRequest:return fE.pullRequest;case vk.Issue:return fE.issue;default:xE(e)}}let SX=({selectedContentTypes:e,contentTypes:t,isEditing:r,onContentTypesSelected:a,testId:n,sx:l})=>{let{setIsWorkflowValid:i}=Ce(),s=(0,uq.useMemo)(()=>t.map(e=>({text:SY(e),id:e})),[t]),[o,d]=(0,uq.useState)(""),[c,u]=(0,uq.useState)(!1),m=(0,uq.useCallback)(()=>{u(!1)},[]),p=(0,uq.useCallback)(e=>{0===e.length?i(!1):i(!0)},[i]),f=e=>{let t=e.map(e=>e.id),r=t.filter(e=>void 0!==e&&e in vk);p(r),a(r)},h=s.filter(e=>e.text.toLowerCase().startsWith(o.toLowerCase())),g=s.filter(t=>e.includes(t.id));return(0,uO.jsx)(Cf.b,{placeholderText:fB.selectContentType,open:c,onOpenChange:u,selected:g,onFilterChange:d,items:h,onSelectedChange:f,renderAnchor:({children:e,...t})=>(0,uO.jsx)(jI.z,{sx:l,disabled:!g||!r,trailingIcon:mM.AS7,...t,...(0,mp.f)(`${n}-anchor`),children:g.length>0?e:fB.invalidNoContentType}),overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:m,...(0,mp.f)(`${n}-panel`)}})};try{(tl=SX).displayName||(tl.displayName="ContentTypePicker")}catch{}let SJ=({description:e,icon:t,iconColor:r,iconBg:a})=>{let{isEditing:n,workflow:l,localContentTypes:i,setLocalContentTypes:s}=Ce(),{getValidContentTypesForTriggerType:o}=w2(),d=o(l.triggerType);return(0,uO.jsx)(Cl,{icon:t,iconBg:a,iconColor:r,headerDescription:e,children:d.length>1&&(0,uO.jsx)(SX,{contentTypes:d,onContentTypesSelected:s,selectedContentTypes:i,isEditing:n,testId:"workflows-when-content-types"},"contentTypePicker")})};try{(ti=SJ).displayName||(ti.displayName="WhenBlock")}catch{}function S0(e){switch(e){case vw.ItemAdded:return{description:fB.itemAddedToProjectLabel,icon:vA(e),iconColor:"success.fg",iconBg:"success.subtle"};case vw.Reopened:return{description:fB.itemReopenedLabel,icon:vA(e),iconColor:"success.fg",iconBg:"success.subtle"};case vw.Closed:return{description:fB.itemClosedLabel,icon:vA(e),iconColor:"fg.muted",iconBg:"canvas.inset"};case vw.ReviewChangesRequested:return{description:fB.codeChangesRequestedLabel,icon:vA(e),iconColor:"danger.fg",iconBg:"danger.subtle"};case vw.ReviewApproved:return{description:fB.codeReviewApprovedLabel,icon:vA(e),iconColor:"open.fg",iconBg:"success.subtle"};case vw.Merged:return{description:fB.pullRequestMergedLabel,icon:vA(e),iconColor:"done.fg",iconBg:"done.subtle"};default:throw Error(`${e} is not a valid MemexWorkflowTriggerType for a WhenBlock`)}}let S1=({action:e,onNoSuggestedRepositories:t})=>{let{workflow:r}=Ce();switch(e.actionType){case vj.SetField:{let e=S0(r.triggerType);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(SJ,{...e}),(0,uO.jsx)(Ca,{}),(0,uO.jsx)(SQ,{headerDescription:fB.setValueLabel})]})}case vj.GetProjectItems:if(r.triggerType===vw.ProjectItemColumnUpdate)return(0,uO.jsx)(SQ,{headerDescription:fB.projectItemColumnUpdateLabel});return(0,uO.jsx)(Sq,{});case vj.GetItems:return(0,uO.jsx)(SU,{onNoSuggestedRepositories:t});case vj.ArchiveProjectItem:return(0,uO.jsx)(Cs,{});case vj.AddProjectItem:return(0,uO.jsx)(Ci,{});case vj.CloseItem:return(0,uO.jsx)(Co,{});default:return null}};try{(ts=S1).displayName||(ts.displayName="ActionBlock")}catch{}let S2=({onNoSuggestedRepositories:e})=>{let{workflow:t}=Ce(),r=(0,uq.useMemo)(()=>t.actions.sort(vE),[t.actions]);return(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"80%",px:3},children:r.map((t,a)=>(0,uO.jsxs)(uq.Fragment,{children:[(0,uO.jsx)(S1,{action:t,sortedActions:r,onNoSuggestedRepositories:e}),a<r.length-1&&(0,uO.jsx)(Ca,{})]},t.id??t.actionType))})};try{(to=S2).displayName||(to.displayName="AutomationGraph")}catch{}let S5=(e,t,{leading:r=!1,maxWait:a,trailing:n=!0,onChangeBehavior:l="flush"}={})=>{let i=m1(e),s=(0,uq.useMemo)(()=>{let e=void 0===a?{leading:r,trailing:n}:{leading:r,trailing:n,maxWait:a};return(0,b7.Z)((...e)=>i.current(...e),t,e)},[i,t,r,a,n]);return(0,uq.useEffect)(()=>()=>{s?.[l]()},[s,l]),s},S3=()=>{let{workflowNames:e}=w2(),{workflowName:t,isEditing:r,setWorkflowName:a,setIsWorkflowValid:n,workflow:l}=Ce(),[i,s]=(0,uq.useState)(),o=(0,uq.useRef)(null);(0,uq.useLayoutEffect)(()=>{r&&o?.current?.focus()},[]);let d=(0,uq.useCallback)(t=>{let r=w$(t,e);r.isValid?i&&(n(!0),s(void 0)):(n(!1),s(r.errorMessage))},[e,n,i]),c=S5(d,200),u=(0,uq.useCallback)(e=>{let t=e.target.value;a(t),c(t)},[c,a]);return(0,uq.useEffect)(()=>{r?d(l.name):r||(n(!0),s(void 0))},[r]),(0,uO.jsx)(uO.Fragment,{children:r?(0,uO.jsxs)(mF.Z,{sx:{flex:1,display:"flex",flexDirection:"column"},children:[(0,uO.jsx)(k4.Z,{ref:o,name:"workflowName","aria-label":"Workflow name",value:t,onChange:u,validationStatus:i?"error":void 0,sx:{fontWeight:"bold"},...(0,mp.f)("workflow-name-editor-input")}),i&&(0,uO.jsx)(mO.Z,{as:"p",sx:{color:"danger.fg"},...(0,mp.f)("workflow-name-editor-error"),children:i})]}):(0,uO.jsx)(Cn.Z,{as:"h2",sx:{fontSize:3,color:"fg.default",wordBreak:"break-word"},id:"workflow-name",...(0,mp.f)("workflow-name-editor-read-only"),children:t})})};try{(td=S3).displayName||(td.displayName="WorkflowNameEditor")}catch{}let S4=()=>(0,uO.jsxs)(mF.Z,{sx:{mb:5,color:"fg.muted",fontSize:"12px",display:"flex",alignItems:"center"},...(0,mp.f)("read-only-label"),children:[(0,uO.jsx)(mL.Z,{icon:mM.mBM,size:12,sx:{color:"fg.muted",mr:1}}),(0,uO.jsx)(mO.Z,{children:fB.readOnlyLabel})]}),S6=()=>{let{discard:e}=Ce();return(0,uO.jsx)(jI.z,{onClick:e,...(0,mp.f)("workflow-discard-button"),sx:{ml:2},children:fB.discardWorkflow})},S7=({clientId:e})=>{let{deleteNonPersistedWorkflow:t}=w2(),r=(0,f6.N)(),a=(0,uq.useCallback)(async()=>{let a=await r({title:fB.deleteWorkflowConfirmationTitle,content:fB.deleteWorkflowConfirmationContent,confirmButtonContent:fB.deleteWorkflowConfirmationButton,confirmButtonType:"danger"});a&&t(e)},[r,t,e]);return(0,uO.jsx)(jI.z,{onClick:()=>a(),...(0,mp.f)("workflow-delete-button"),sx:{ml:2},children:fB.deleteWorkflow})},S8=({children:e})=>{let{isEditing:t,edit:r,workflow:a,save:n,isWorkflowValid:l}=Ce(),{shouldDisableWorkflowToggle:i}=Ce(),s=(0,uq.useCallback)(async()=>{n(!a.enabled)},[n,a]),o=vN(a);return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexGrow:1,flexDirection:"column",minWidth:"80%"},children:[(0,uO.jsxs)(mF.Z,{sx:{py:[1,2,3],px:[2,3,4],display:"flex",justifyContent:"space-between",alignItems:"baseline",width:"100%",borderBottom:"1px solid",borderBottomColor:"border.subtle"},children:[(0,uO.jsx)(S3,{}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},...(0,mp.f)("workflow-enable-toggle"),children:[!t&&(0,uO.jsxs)(uO.Fragment,{children:[o&&(0,uO.jsx)(jN.Z,{checked:a.enabled,onClick:s,disabled:i,"aria-labelledby":"workflow-name"}),(0,uO.jsx)(jI.z,{sx:{ml:2},leadingIcon:mM.vdY,onClick:r,...(0,mp.f)("workflow-edit-button"),children:fB.editWorkflow})]}),t&&(0,uO.jsxs)(uO.Fragment,{children:[!o&&a.isUserWorkflow?(0,uO.jsx)(S7,{clientId:a.clientId}):(0,uO.jsx)(S6,{}),(0,uO.jsx)(jI.z,{sx:{ml:2},variant:"primary",disabled:!l,onClick:()=>{n()},...(0,mp.f)("workflow-save-button"),children:fB.saveWorkflow})]})]})]}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",backgroundColor:"canvas.inset",py:5,borderRadius:2},children:[!t&&(0,uO.jsx)(S4,{}),e]})]})},S9=({workflow:e,onNoSuggestedRepositories:t,startInEditMode:r})=>(0,uO.jsx)(j9,{startInEditMode:r,initialWorkflow:e,children:(0,uO.jsx)(ErrorBoundary,{fallback:(0,uO.jsx)(Ct,{heading:"Oops!",content:"Something went wrong loading this workflow configuration."}),children:(0,uO.jsx)(S8,{children:(0,uO.jsx)(S2,{onNoSuggestedRepositories:t})})})});try{(tc=S4).displayName||(tc.displayName="ReadOnlyLabel")}catch{}try{(tu=S6).displayName||(tu.displayName="DiscardButton")}catch{}try{(tm=S7).displayName||(tm.displayName="DeleteButton")}catch{}try{(tp=S8).displayName||(tp.displayName="AutomationGraphViewContent")}catch{}try{(tf=S9).displayName||(tf.displayName="AutomationGraphView")}catch{}var Ie=r(14783);let It=(0,uq.forwardRef)(function({isActive:e,className:t,...r},a){return(0,uO.jsx)(yQ,{...r,ref:a,className:({isActive:r})=>r||e?`${t} selected`.trim():t??""})});try{(th=It).displayName||(th.displayName="NavLinkWithActiveClassName")}catch{}try{(tg=It).displayName||(tg.displayName="NavLinkWithActiveClassName")}catch{}function Ir({to:e,children:t,isActive:r,...a}){let n=(0,uQ.WU)(e),l=(0,uQ.bS)({path:n.pathname,end:!0});return(0,uO.jsx)(Ie.$.Item,{"aria-current":(!!r||!!l)&&"page",as:It,...a,to:e,children:t})}try{(tx=Ir).displayName||(tx.displayName="NavLinkActionListItem")}catch{}var Ia=r(50901),In=r(10936);let Il=({workflowToDuplicate:e})=>{let{setIsDialogOpen:t,applyWorkflowTemplate:r}=w5(),{customWorkflowLimitReached:a,setWorkflowMenuState:n}=w2(),l=(0,uq.useCallback)(l=>{a||(r(e),t(!0),n(e.clientId),l.stopPropagation())},[a,r,e,t,n]);return a?(0,uO.jsx)(kK.Z,{"aria-label":fV.userAddedWorkflowLimitReached,direction:"s",wrap:!0,children:(0,uO.jsxs)(Ia.S.Item,{as:"button","aria-label":"Duplicate workflow",onSelect:e=>e.stopPropagation(),...(0,mp.f)(`duplicate-option-disabled-${e.clientId}`),disabled:!0,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.NAN,{className:"duplicate-workflow-button"})}),(0,uO.jsx)(mO.Z,{className:"duplicate-workflow-button",children:fV.duplicateWorkflowLabel})]},`duplicate-option-${e.clientId}`)}):(0,uO.jsxs)(Ia.S.Item,{as:"button",onSelect:l,"aria-label":"Duplicate workflow",...(0,mp.f)(`duplicate-option-${e.clientId}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.NAN,{className:"duplicate-workflow-button"})}),(0,uO.jsx)(mO.Z,{className:"duplicate-workflow-button",children:fV.duplicateWorkflowLabel})]},`duplicate-option-${e.clientId}`)};try{(ty=Il).displayName||(ty.displayName="DuplicateWorkflowButton")}catch{}let Ii=(0,uq.forwardRef)(({workflow:e,showDelete:t,isOpen:r},a)=>{let{deleteWorkflow:n,setWorkflowMenuState:l,handleReturnFocus:i}=w2(),s=(0,vZ.useRelayEnvironment)(),o=(0,f6.N)(),d=(0,uq.useCallback)(()=>{l(e.clientId),i(e.clientId)},[l,e.clientId,i]),c=(0,uq.useCallback)(async t=>{let r=await o({title:fB.deleteWorkflowConfirmationTitle,content:fB.deleteWorkflowConfirmationContent,confirmButtonContent:fB.deleteWorkflowConfirmationButton,confirmButtonType:"danger"});l(e.clientId),r?n(t.number,s):i(e.clientId)},[o,n,s,i,l,e.clientId]),[u,m]=(0,uq.useState)(r),p=(0,uq.useCallback)(t=>{t.target instanceof Element&&t.target?.closest("a")?.href?.includes("/workflows/")||l(e.clientId)},[l,e.clientId]),f=(0,uq.useRef)(null);(0,CJ.z)(a,f);let h=(0,uq.useMemo)(()=>{let r=[];return vN(e)&&(t&&r.push((0,uO.jsxs)(Ia.S.Item,{variant:"danger",onSelect:()=>c(e),...(0,mp.f)(`workflow-nav-item-menu-delete-${e.clientId}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),fB.deleteWorkflowCallToAction]},`${e.clientId}-delete-option`)),vT(e)&&r.push((0,uO.jsx)(Il,{workflowToDuplicate:e},`${e.clientId}-duplicate-option`))),r},[c,t,e]);return(0,uO.jsx)(uO.Fragment,{children:h.length>0?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(kF.h,{id:`workflow-nav-item-menu-${e.clientId}`,ref:f,icon:mM.Ui8,variant:"invisible","aria-label":"Open workflow options",sx:{color:"fg.default",py:0},...(0,mp.f)(`workflow-nav-item-menu-${e.clientId}`)},`workflow-nav-item-menu-${e.clientId}`),(0,uO.jsx)(In.P,{anchorRef:f,open:u,onOpenChange:m,children:(0,uO.jsx)(In.P.Overlay,{sx:{overflow:"visible"},onClickOutside:p,onEscape:d,children:(0,uO.jsx)(Ia.S,{...(0,mp.f)(`workflow-nav-item-menu-list-${e.clientId}`),children:h},`workflow-nav-item-menu-list-${e.clientId}`)})})]}):null})});Ii.displayName="WorkflowMenu";let Is=(0,uq.memo)(({activeWorkflow:e})=>{let{workflows:t,workflowWithTriggerTypeIsEnableable:r,setWorkflowMenuState:a,resetWorkflowMenuStates:n,isWorkflowMenuOpen:l,getWorkflowMenuItemsMap:i}=w2(),{isArchiveFull:s}=vh(),o=(0,uq.useCallback)((e,t)=>{["button","svg","path"].includes(e.target.tagName.toLowerCase())?(e.preventDefault(),a(t)):n()},[n,a]);return(0,uO.jsx)(Ie.$,{...(0,mp.f)("settings-side-nav"),sx:{minWidth:"280px",maxWidth:"25%",borderRight:"1px solid",borderColor:"border.subtle",overflowY:"scroll",pb:4},children:(0,uO.jsx)(Ie.$.Group,{title:"Default workflows",children:t.map(a=>{let n=r(a.triggerType),d=a.clientId===e.clientId,c=a.isUserWorkflow&&!vN(a);return(0,uO.jsx)(Ir,{to:{pathname:mv.generatePath({workflowClientId:a.clientId})},onClick:e=>o(e,a.clientId),tabIndex:n?0:-1,isActive:d,sx:{pointerEvents:n?"auto":"none",opacity:n?void 0:.5,minHeight:"44px",display:"flex",alignItems:"center"},...(0,mp.f)(`workflow-nav-item-${vD(a)}`),children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between"},children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",wordBreak:"break-word"},children:[(0,uO.jsx)(Io,{workflow:a,isActive:d,isArchiveFull:s,isNonPersistedUserWorkflow:c}),(0,uO.jsx)(Id,{name:a.name,isNonPersistedUserWorkflow:c})]}),(0,uO.jsx)(mF.Z,{sx:{flexShrink:"0",display:"flex",alignItems:"center"},children:vN(a)&&(0,uO.jsx)(Ii,{ref:e=>{let t=i();e?t.set(a.clientId,e):t.delete(a.clientId)},workflow:a,showDelete:!vI(t,a),isOpen:l(a.clientId)},`workflow-nav-list-item-${a.clientId}`)})]})},a.clientId)})})})});Is.displayName="AutomationSideNav";let Io=({workflow:e,isActive:t,isArchiveFull:r,isNonPersistedUserWorkflow:a})=>a?(0,uO.jsx)(mL.Z,{icon:mM.ydi,size:20,sx:{mr:1,color:"attention.emphasis"}}):r&&v_(e)?(0,uO.jsx)(mL.Z,{icon:mM.ydi,size:20,sx:{mr:1,color:"danger.fg"}}):e.enabled?(0,uO.jsx)(mL.Z,{icon:mM.ydi,size:20,sx:{mr:1,color:"success.emphasis"}}):wz(e).isValid?(0,uO.jsx)(mL.Z,{icon:mM.ZNd,size:20,sx:{mr:1,color:t?"fg.default":"fg.muted"}}):(0,uO.jsx)(mL.Z,{icon:mM.wNq,size:14,sx:{ml:"3px",mr:"7px",color:"danger.fg"}}),Id=({name:e,isNonPersistedUserWorkflow:t})=>t?(0,uO.jsx)(mO.Z,{sx:{fontStyle:"italic"},children:e}):(0,uO.jsx)(mO.Z,{children:e});try{(tb=Io).displayName||(tb.displayName="ProjectWorkflowIcon")}catch{}try{(tv=Id).displayName||(tv.displayName="WorkflowName")}catch{}var Ic=r(12470);let Iu=({onWorkflowNameValidation:e,onWorkflowNameChange:t,debounceDelay:r,workflowNames:a})=>{let[n,l]=(0,uq.useState)(),i=(0,uq.useCallback)(t=>{let r=w$(t,a);r.isValid?n&&(e?.(!0),l(void 0)):(e?.(!1),l(r.errorMessage))},[n,e,a]),s=S5(i,r??200),o=(0,uq.useCallback)(e=>{let r=e.target.value;t?.(r),s(r)},[s,t]);return{validate:i,onChangeHandler:o,error:n}},Im=({setStartInEditMode:e})=>{let{isDialogOpen:t,setIsDialogOpen:r,workflowName:a,setWorkflowName:n,workflowTemplate:l,applyWorkflowTemplate:i,returnFocusClientId:s}=w5(),{workflowNames:o,activeWorkflow:d,newWorkflow:c,handleReturnFocus:u}=w2(),{error:m,onChangeHandler:p,validate:f}=Iu({onWorkflowNameChange:n,workflowNames:d?new Set(o).add(d.name.toLocaleLowerCase()):o}),h=(0,uq.useRef)(null),g=(0,uq.useCallback)(()=>{c(a,"query_matched_add_project_item",l),r(!1),e(!0)},[c,e,r,a,l]),x=(0,uq.useCallback)(()=>{r(!1),i(),u(s)},[i,r,u,s]);return(0,uq.useEffect)(()=>{t&&f(a)},[t]),(0,uO.jsxs)(Ic.Z,{isOpen:t,initialFocusRef:h,onDismiss:x,"aria-labelledby":"new-workflow-header",children:[(0,uO.jsx)(Ic.Z.Header,{sx:{background:"none",border:"none"},id:"new-workflow-header",children:(0,uO.jsx)(Cn.Z,{as:"h3",sx:{fontSize:3},children:fV.duplicateWorkflowLabel})}),(0,uO.jsx)(mF.Z,{sx:{px:3},children:(0,uO.jsxs)(Cc.Z,{sx:{my:2},children:[(0,uO.jsx)(Cc.Z.Label,{children:fV.workflowNameInputLabel}),(0,uO.jsx)(k4.Z,{ref:h,sx:{width:"100%",minHeight:"34px"},value:a,onChange:p,validationStatus:m?"error":void 0,...(0,mp.f)("new-workflow-dialog-input")}),m&&(0,uO.jsx)(mO.Z,{as:"p",sx:{color:"danger.fg"},...(0,mp.f)("new-workflow-dialog-error"),children:m})]})}),(0,uO.jsx)(mF.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:4,py:3,px:3,borderTop:"1px solid",borderColor:"border.default"},children:(0,uO.jsx)(jI.z,{disabled:!!m,variant:"primary",onClick:g,...(0,mp.f)("new-workflow-dialog-create-button"),children:fV.duplicateButton})})]})};try{(tw=Im).displayName||(tw.displayName="CreateNewWorkflowDialog")}catch{}let Ip=()=>{let[e,t]=(0,uq.useState)(!1),{activeWorkflow:r}=w2(),{shouldDisableArchiveForActiveWorkflow:a,setArchiveStatus:n}=vh(),[l,i]=(0,uq.useState)(!1);(0,uq.useEffect)(()=>(n(),()=>{n.cancel()}),[n]),(0,uq.useEffect)(()=>{t(!1),i(!1)},[r]);let s=(0,uq.useCallback)(()=>{t(!0)},[t]),{projectOwner:o,isOrganization:d}=yk(),c=o?.name?.toLowerCase();return(0,uO.jsx)(mF.Z,{as:"main",sx:{pl:[3,4,5],display:"flex",flex:"auto",height:"100%"},children:r?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Is,{activeWorkflow:r}),(0,uO.jsxs)(mF.Z,{sx:{flex:1,display:"flex",flexDirection:"column"},children:[a?(0,uO.jsx)(If,{}):null,e?(0,uO.jsx)(jC,{isOrganization:d,owner:c}):(0,uO.jsx)(S9,{startInEditMode:l,workflow:r,onNoSuggestedRepositories:s},r.id)]}),(0,uO.jsx)(Im,{setStartInEditMode:i})]}):(0,uO.jsx)("div",{children:"No workflows"})})},If=()=>{let{projectNumber:e}=b9(),t=e?mI.generatePath():"";return(0,uO.jsx)(vd.Z,{variant:"danger",sx:{mb:3},...(0,mp.f)("archive-full-warning"),children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,uO.jsx)(mL.Z,{icon:mM.wNq,size:14,sx:{color:"danger.fg"}}),(0,uO.jsxs)(mO.Z,{sx:{ml:"8px"},children:["This workflow is disabled because the Archive is full. Remove items from"," ",(0,uO.jsx)(yK,{to:t,children:"the Archive"})," to enable this workflow."]})]})})};try{(tj=Ip).displayName||(tj.displayName="AutomationView")}catch{}try{(tC=If).displayName||(tC.displayName="FullArchiveWarning")}catch{}function Ih(){return b2(),(0,uO.jsx)(vs,{children:(0,uO.jsx)(b5,{...(0,mp.f)("automation-page"),children:(0,uO.jsx)(Ip,{})})})}try{(tk=Ih).displayName||(tk.displayName="AutomationPage")}catch{}let Ig=()=>{window.location.reload()},Ix=()=>(0,uO.jsx)(Ct,{as:"main",headingAs:"h1",heading:"This project failed to load",content:"Sorry about that. Please try refreshing and contact us if the problem persists.",...(0,mp.f)("project-error-fallback"),children:(0,uO.jsx)(jI.z,{variant:"primary",onClick:Ig,sx:{mt:2,mx:"auto"},children:"Reload"})});try{(tS=Ix).displayName||(tS.displayName="ProjectErrorFallback")}catch{}function Iy(e,{timeoutMs:t=225}={}){let[r,a]=(0,uq.useState)(e),n=m1(t);return(0,uq.useEffect)(()=>{let t=!0,r=setTimeout(()=>{t&&a(e)},n.current);return()=>{t=!1,clearTimeout(r)}},[e,n]),r}var Ib=r(813),Iv=r.n(Ib);let Iw=(0,uq.createContext)({visible:!1,findValue:""}),Ij=(0,uq.memo)(function({children:e,visible:t,findValue:r}){let a=(0,uq.useMemo)(()=>({visible:t,findValue:r}),[r,t]);return(0,uO.jsx)(Iw.Provider,{value:a,children:e})});function IC(e,{disabled:t=!1}={}){let{visible:r,findValue:a}=(0,uq.useContext)(Iw);(0,uq.useEffect)(()=>{if(!r||!e?.current||t||!a)return;let n=new(Iv())(e.current);return n.mark(a,{element:"mark",className:"find-in-project-highlight",separateWordSearch:!1,acrossElements:!0,ignoreJoiners:!0,caseSensitive:!1,ignorePunctuation:[".",",",";",":","!","?","-","\u2014","\u2013",'"',"'","\u201C","\u201D","\u2018","\u2019"]}),function(){n.unmark()}})}try{(tI=Iw).displayName||(tI.displayName="MarkedTextContext")}catch{}try{(tN=Ij).displayName||(tN.displayName="MarkedTextProvider")}catch{}let Ik=(0,uq.createContext)(null),IS=()=>void 0,II=(0,uq.memo)(function({children:e}){let{memex_find_in_project:t}=g9(),r=(0,uq.useRef)(null),[a,n]=(0,uq.useState)(!1),[l,i]=(0,uq.useState)(""),s=(0,uq.useRef)(IS),o=(0,uq.useCallback)(e=>{if(t){if(a){r.current?.focus();return}n(!0),s.current=e??IS}},[t,a]),d=(0,uq.useCallback)(()=>{t&&(n(!1),s.current())},[t]);(0,uq.useEffect)(()=>{a?r.current?.focus():s.current=IS},[a]);let c=Iy(l.trim());return(0,uO.jsx)(Ik.Provider,{value:(0,uq.useMemo)(()=>({showInput:o,hideInput:d,findValue:l,visible:a,setFindValue:i,inputRef:r}),[l,d,o,a]),children:(0,uO.jsx)(Ij,{visible:a,findValue:c,children:e})})}),IN=()=>{let e=(0,uq.useContext)(Ik);if(!e)throw Error("useFindInProject must be used within a FindInProjectContext");return e};try{(t_=Ik).displayName||(t_.displayName="FindInProjectContext")}catch{}try{(tT=II).displayName||(tT.displayName="FindInProjectProvider")}catch{}var I_=r(61958),IT=r(42055),IR=r(65722);let IE={FilterName:"tracked-by"};function ID(){IP.cancel()}let IP=vm(async e=>{let t=f9("memex-refresh-api-data"),{visibleFields:r}=e,a=new URL(t.url,window.location.origin);r.length>0&&a.searchParams.set("visibleFields",JSON.stringify(r));let{data:n,ok:l}=await hh(a);if(!l)throw new api_error_ApiError("Unable to refresh project data");return n},1250);async function IA(e){let t=f9("memex-refresh-api-data"),{visibleFields:r}=e,a=new URL(t.url,window.location.origin);r.length>0&&a.searchParams.set("visibleFields",JSON.stringify(r));let{data:n,ok:l}=await hh(a);if(!l)throw new api_error_ApiError("Unable to refresh project data");return n}async function IM(e){let t=f9("memex-item-update-api-data"),{memex_skip_json_parsing_if_invalid_response_and_content_found:r}=ho(),{data:a}=await hx(t.url,{method:"PUT",body:e},r);return a}let IL=()=>{let{setItemsStateFromModels:e}=bR(),t=(0,uq.useCallback)((t,r,a=!1)=>{let{contentType:n}=t,{memexProjectColumnId:l}=r;(n!==mA.DraftIssue||bc(l)||a)&&(ID(),t.setColumnValueForItemColumnType(r),e())},[e]);return{setColumnValue:t}},IF=()=>{let{setColumnValue:e}=IL(),{setItemData:t}=bR(),r=(0,uq.useCallback)(async(r,a)=>{if(r.contentType===mA.RedactedItem)return;let n=null,l=null;if(a.columnValue){let t=vr(a.columnValue);l=vr(bn(a.columnValue,r)),n=vl(a.columnValue),t&&e(r,t)}let i=a.previousMemexProjectItemId,s=n?[n]:void 0,o=bh(r.contentType,s,i);if(o)try{ID();let{memexProjectItem:e}=await IM({memexProjectItemId:r.id,...o});t(e)}catch(t){throw l&&e(r,l),t}},[e,t]),a=(0,uq.useCallback)(async(r,a,n)=>{if(r.contentType===mA.RedactedItem)return;let l=a.map(vr),i=a.map(vl),s=a.map(e=>vr(bn(e,r)));return r.whileSkippingLiveUpdates(async()=>{let a;for(let t of l)t&&e(r,t);for(let e of i){if(!e)continue;let t=e?[e]:void 0,l=bh(r.contentType,t,n);if(l)try{ID(),a=await IM({memexProjectItemId:r.id,...l})}catch(e){}}if(a){t(a.memexProjectItem);return}for(let t of s)e(r,t)})},[e,t]);return{updateColumnValueAndPriority:r,updateMultipleSequentially:a}},IZ=()=>{let{allColumnsRef:e}=j2(),t=(0,uq.useCallback)(t=>e.current.find(e=>e.name.toLowerCase()===t.toLowerCase()),[e]);return{findColumnByName:t}},IO=()=>{let e=(0,uW.NL)(),t=(0,uq.useCallback)(t=>bv(e,t),[e]),r=(0,uq.useCallback)(t=>bw(e,t),[e]);return{findMemexItem:t,findMemexItemIndex:r}};async function IB({issueId:e}){let t=f9("memex-tracked-by-api-data"),r=new URL(t.url,window.location.origin);r.searchParams.set("issueId",`${e}`);let{data:a}=await hh(r);return a}let IV=(0,uq.createContext)(null),I$=(0,uq.createContext)(null),Iz=(0,uq.memo)(function({children:e}){let{items:t}=bt(),{findMemexItem:r}=IO(),[a,n]=(0,uq.useState)(new Map),l=(0,uq.useRef)(a),i=(0,uq.useRef)(new Map),s=(0,uq.useCallback)(async e=>{if(l.current.has(e))return l.current.get(e);l.current.set(e,void 0);let t=await IB({issueId:e}).catch(()=>null);if(!t){n(new Map(a.set(e,void 0)));return}return n(r=>new Map(r.set(e,t))),l.current=new Map(l.current.set(e,t)),a.get(e)},[a]),o=(0,uq.useCallback)(e=>{let t=e.reduce((e,t)=>{let r=a.get(t);return r?(l.current.delete(t),e.set(t,r)):e},new Map);n(new Map(l.current));let r=()=>{for(let e of t.keys())l.current.set(e,t.get(e));n(new Map(l.current))};return r},[a]),d=(0,uq.useCallback)(e=>{let t=new Map;for(let[r]of l.current){let n=a.get(r);if(!n)continue;let i=n.items.filter(t=>0>e.indexOf(t.itemId));i.length!==n.items.length&&t.set(r,n),0===i.length?l.current.delete(r):l.current.set(r,{...n,items:i,count:i.length})}n(new Map(l.current));let r=()=>{for(let e of t.keys())l.current.set(e,t.get(e));n(new Map(l.current))};return r},[a]),c=(0,uq.useCallback)((e,t)=>{i.current.set(e,t)},[]),u=(0,uq.useCallback)(()=>i.current,[]),m=m1(t),p=(0,uq.useMemo)(()=>t.some(e=>e.contentType===mA.Issue&&e.columns[mP.TrackedBy]),[t]);(0,uq.useEffect)(()=>{i.current=m.current.reduce((e,t)=>{let a=t.columns[mP.TrackedBy];if(t.contentType!==mA.Issue||!a)return e;let n=r(t.id)?.content.id;if(!n)return e;for(let t of a)e.get(t.key.itemId)?.includes(n)||e.set(t.key.itemId,[...e.get(t.key.itemId)||[],n]);return e},new Map)},[r,p,m]);let f=(0,uq.useMemo)(()=>({getChildrenTrackedByParent:s,setChildTrackedByParent:c,parentIssuesById:a,parentIssuesByIdRef:l,removeParentIssues:o,removeChildIssues:d,getAllProjectRelationships:u}),[u,s,a,d,o,c]),h=(0,uq.useMemo)(()=>({parentIssuesByIdRef:l,removeParentIssues:o,setChildTrackedByParent:c,getAllProjectRelationships:u}),[u,o,c]);return(0,uO.jsx)(IV.Provider,{value:f,children:(0,uO.jsx)(I$.Provider,{value:h,children:e})})});try{(tR=IV).displayName||(tR.displayName="TrackedByItemsContext")}catch{}try{(tE=I$).displayName||(tE.displayName="TrackedByItemsStableContext")}catch{}try{(tD=Iz).displayName||(tD.displayName="TrackedByItemsStateProvider")}catch{}let IU=()=>{let e=(0,uq.useContext)(IV);if(!e)throw Error("useTrackedByItemsContext must be used within a TrackedByItemsContext.Provider.");return e},IW=()=>{let{parentIssuesByIdRef:e}=IU(),t=(0,uq.useCallback)(t=>{let r=[],a=new Set(t);for(let[t,n]of e.current){let e=n?.items.some(({itemId:e})=>a.has(e));e&&r.push(t)}return r},[e]),r=(0,uq.useCallback)(t=>e.current.get(t)?.items??[],[e]),a=(0,uq.useCallback)(t=>e.current.get(t)?.parentCompletion,[e]),n=(0,uq.useCallback)(t=>e.current.get(t),[e]);return{getChildrenIssuesForParent:r,getParentIssuesFromChildren:t,getParentCompletion:a,getParent:n}},IH=()=>{let{getAllProjectRelationships:e,removeParentIssues:t,setChildTrackedByParent:r}=IU(),{getParent:a,getParentIssuesFromChildren:n}=IW(),{findMemexItem:l}=IO(),i=(0,uq.useCallback)(r=>{let a=n(r);if(a.length){t(a);return}for(let[t,n]of e())n.some(e=>r.includes(e))&&a.push(t);t(a)},[e,n,t]),s=(0,uq.useCallback)(e=>{i([e])},[i]),o=(0,uq.useCallback)(e=>{let[t]=n([e]);if(!t)return;let l=a(t);r(t,l?.items.map(({itemId:e})=>e)||[]),s(e)},[a,n,s,r]),d=(0,uq.useCallback)(e=>e.reduce((e,t)=>{let r=l(t);return r?[...e,r.content.id]:e},[]),[l]);return{removeParentFromChildren:i,removeParentFromChild:s,setChildParentRelationship:o,getIssuesIdsToRemove:d}};async function IG({memexProjectItemId:e}){let t=f8("memex-item-suggested-assignees-api-data"),r=new URL(t.url,window.location.origin);r.searchParams.set("memexProjectItemId",`${e}`);let{data:a}=await hh(r);return a}let Iq={ISSUE:"issue",PROJECT_DRAFT_ISSUE:"project_draft_issue"},IK={HEART:"heart",TADA:"tada",SMILE:"smile",ROCKET:"rocket",EYES:"eyes",THUMBS_UP:"+1",THUMBS_DOWN:"-1",THINKING_FACE:"thinking_face"},IQ={COLLABORATOR:"COLLABORATOR",CONTRIBUTOR:"CONTRIBUTOR",FIRST_TIMER:"FIRST_TIMER",FIRST_TIME_CONTRIBUTOR:"FIRST_TIME_CONTRIBUTOR",MANNEQUIN:"MANNEQUIN",MEMBER:"MEMBER",NONE:"NONE",OWNER:"OWNER"};async function IY(e){return I0(e,"milestones")}async function IX(e){return I0(e,"labels")}async function IJ(e){return I0(e,"assignees")}async function I0(e,t){let r=f9("memex-sidepanel-item-suggestions-api-data"),a=new URL(r.url,window.location.origin);switch(e.kind){case Iq.ISSUE:a.searchParams.set("kind",e.kind),a.searchParams.set("item_id",`${e.itemId}`),a.searchParams.set("repository_id",`${e.repositoryId}`),a.searchParams.set("suggestions_type",t);break;case Iq.PROJECT_DRAFT_ISSUE:a.searchParams.set("kind",e.kind),a.searchParams.set("project_item_id",`${e.projectItemId}`),a.searchParams.set("suggestions_type",t);break;default:xE(e)}let{data:n}=await hh(a);return n}let I1=(0,uq.createContext)(null),I2=(0,uq.createContext)(null),I5=(0,uq.memo)(function({children:e}){let[t,r]=(0,uq.useState)({}),[a,n]=(0,uq.useState)({}),[l,i]=(0,uq.useState)({}),s=(0,uq.useCallback)(e=>a[e],[a]),o=(0,uq.useCallback)(e=>t[e],[t]),d=(0,uq.useCallback)(e=>l[e],[l]),c=(0,uq.useCallback)((e,t)=>{n(r=>({...r,[e]:t}))},[n]),u=(0,uq.useCallback)((e,t)=>{r(r=>({...r,[e]:t}))},[r]),m=(0,uq.useCallback)((e,t)=>{i(r=>({...r,[e]:t}))},[i]),p=(0,uq.useCallback)(e=>{n(t=>ht(t,e)),r(t=>ht(t,e)),i(t=>ht(t,e))},[]),f=(0,uq.useMemo)(()=>({getSuggestedAssigneesForItem:s,getSuggestedLabelsForItem:o,getSuggestedMilestonesForItem:d,setSuggestedAssigneesForItem:c,setSuggestedLabelsForItem:u,setSuggestedMilestonesForItem:m,removeSuggestions:p}),[s,o,d,c,u,m,p]),h=(0,uq.useMemo)(()=>({setSuggestedAssigneesForItem:c,setSuggestedLabelsForItem:u,setSuggestedMilestonesForItem:m,removeSuggestions:p}),[c,u,m,p]);return(0,uO.jsx)(I1.Provider,{value:f,children:(0,uO.jsx)(I2.Provider,{value:h,children:e})})});async function I3(e){let t,r;try{t=await e()}catch(e){e instanceof Error&&(r=Error(e.message),e instanceof api_error_ApiError&&e.code&&(r.name=e.code))}return{response:t,error:r}}try{(tP=I1).displayName||(tP.displayName="SuggestionsContext")}catch{}try{(tA=I2).displayName||(tA.displayName="SuggestionsStableContext")}catch{}try{(tM=I5).displayName||(tM.displayName="SuggestionsStateProvider")}catch{}let I4=()=>{let e=(0,uq.useContext)(I2);if(!e)throw Error("useSuggestionsStableContext must be used within a SuggestionsStableContext.Provider.");return e},I6=()=>{let{findMemexItem:e}=IO(),{setColumnValue:t}=IL(),{setSuggestedAssigneesForItem:r}=I4(),a=(0,uq.useCallback)(async a=>{r(a.getSuggestionsCacheKey(),void 0);let{response:n,error:l}=await I3(()=>{if(a.memexItemId?.())return IG({memexProjectItemId:a.memexItemId()});switch(a.contentType){case mA.DraftIssue:return IJ({kind:Iq.PROJECT_DRAFT_ISSUE,projectItemId:a.id});case mA.Issue:return IJ({kind:Iq.ISSUE,itemId:a.itemId(),repositoryId:a.ownerId()});default:throw Error(`Unsupported item type: ${a.contentType}`)}}),i=e(a.id);i&&!l&&t(i,{memexProjectColumnId:mP.Assignees,value:n?.suggestions?.filter(e=>e.selected).sort((e,t)=>e.login.localeCompare(t.login))||null});let s=n?.suggestions??l;return r(a.getSuggestionsCacheKey(),s),s},[r,t,e]);return{fetchSuggestedAssignees:a}};async function I7({memexProjectItemId:e}){let t=f8("memex-item-suggested-labels-api-data"),r=new URL(t.url,window.location.origin);r.searchParams.set("memexProjectItemId",`${e}`);let{data:a}=await hh(r);return a}let I8=()=>{let e=(0,uq.useContext)(I1);if(!e)throw Error("useSuggestionsContext must be used within a SuggestionsContext.Provider.");return e},I9=()=>{let{findMemexItem:e}=IO(),{setColumnValue:t}=IL(),{getSuggestedLabelsForItem:r,setSuggestedLabelsForItem:a}=I8(),n=(0,uq.useCallback)(async n=>{let l=n.getSuggestionsCacheKey(mP.Labels),i=r(l);if(!(i instanceof Error)&&i?.length)return i;let{response:s,error:o}=await I3(()=>{if(n.memexItemId?.())return I7({memexProjectItemId:n.memexItemId()});switch(n.contentType){case mA.DraftIssue:return IX({kind:Iq.PROJECT_DRAFT_ISSUE,projectItemId:n.id});case mA.Issue:return IX({kind:Iq.ISSUE,itemId:n.itemId(),repositoryId:n.ownerId()});default:throw Error(`Unsupported item type: ${n.contentType}`)}}),d=e(n.id);d&&!o&&t(d,{memexProjectColumnId:mP.Labels,value:s?.suggestions.filter(e=>e.selected).sort((e,t)=>e.name.localeCompare(t.name))||null});let c=s?.suggestions??o;return a(l,c),c},[r,a,e,t]);return{fetchSuggestedLabels:n}};async function Ne({memexProjectItemId:e}){let t=f8("memex-item-suggested-milestones-api-data"),r=new URL(t.url,window.location.origin);r.searchParams.set("memexProjectItemId",`${e}`);let{data:a}=await hh(r);return a}let Nt=()=>{let{findMemexItem:e}=IO(),{setColumnValue:t}=IL(),{setSuggestedMilestonesForItem:r}=I4(),a=(0,uq.useCallback)(async a=>{r(a.getSuggestionsCacheKey(),void 0);let{response:n,error:l}=await I3(()=>{if(a.memexItemId?.())return Ne({memexProjectItemId:a.memexItemId()});switch(a.contentType){case mA.DraftIssue:return IY({kind:Iq.PROJECT_DRAFT_ISSUE,projectItemId:a.id});case mA.Issue:return IY({kind:Iq.ISSUE,itemId:a.itemId(),repositoryId:a.ownerId()});default:throw Error(`Unsupported item type: ${a.contentType}`)}}),i=e(a.id);i&&!l&&t(i,{memexProjectColumnId:mP.Milestone,value:n?.suggestions.filter(e=>e.selected)[0]});let s=n?.suggestions??l;return r(a.getSuggestionsCacheKey(),s),s},[r,e,t]);return{fetchSuggestedMilestones:a}},Nr=()=>{let{fetchSuggestedAssignees:e}=I6(),{fetchSuggestedLabels:t}=I9(),{fetchSuggestedMilestones:r}=Nt();return(0,uq.useCallback)(async(a,n,l,i)=>{switch(n){case mP.Assignees:{let t=await e(a),r=await Na(t,l);if(!r)return;return{dataType:mD.Assignees,value:r}}case mP.Labels:{let e=await t(a),r=await Nn(e,l);if(!r)return;return{dataType:mD.Labels,value:r}}case mP.Milestone:{let e=await r(a),t=await Nl(e,l);if(!t)return;return{dataType:mD.Milestone,value:t}}case mP.TrackedBy:{if(a.contentType===mA.DraftIssue)return;let e=i?.columns[mP.TrackedBy],t=await Ni(e,l);if(!t)return;return{dataType:mD.TrackedBy,value:t,appendOnly:!0}}}},[e,t,r])},Na=async(e,t)=>{if(e instanceof Error)throw e;if(!e)return null;let r=e.filter(e=>t&&vW([t],e.login)||e.selected);return r.map(e=>ht(e,["selected"]))},Nn=async(e,t)=>{if(e instanceof Error)throw e;if(!e)return null;let r=e.filter(e=>t&&vW([t],e.name)||e.selected);return r.map(e=>ht(e,["selected"]))},Nl=async(e,t)=>{if(e instanceof Error)throw e;if(!e)return null;let r=e.find(e=>t&&vW([t],e.title));return r?ht(r,["selected"]):null},Ni=async(e,t)=>{if(e instanceof Error||!e)throw e;let r=e.find(e=>t&&vW([t],xD(e)));return r?[r]:null};function Ns({applyTransientFilter:e}={applyTransientFilter:"include"}){let{items:t}=bt(),{matchesSearchQuery:r,query:a,transientQuery:n,baseQuery:l}=kp(),i=Boolean(a||l||e&&n.normalisedQuery),s=(0,uq.useCallback)(t=>r(t,e),[r,e]),o=(0,uq.useMemo)(()=>i?t.filter(e=>s(e)):t,[i,t,s]),d=(0,uq.useCallback)(e=>i?e.grouped?{...e,items:e.items.map(e=>({...e,rows:e.rows.filter(s)}))}:{...e,items:e.items.filter(s)}:e,[s,i]);return{filterItems:d,filteredItems:o}}function No(e,t){if(t){let r=e.find(e=>e.id===t);if(r)switch(r.dataType){case mD.SingleSelect:case mD.Iteration:return r.id}}return mP.Status}function Nd(e){return e.dataType!==mD.SingleSelect?[]:e.settings.options.map(t=>({value:t.id,sourceObject:{dataType:mD.SingleSelect,kind:"group",value:{option:t,columnId:e.id}}}))}function Nc(e){return e.dataType!==mD.Iteration?[]:gR(e).sort(gM).map(t=>({value:t.id,sourceObject:{dataType:mD.Iteration,kind:"group",value:{iteration:t,columnId:e.id}}}))}function Nu(e,t){if(e.dataType!==mD.Assignees||!t)return;let r=new Map;for(let e of t)for(let t of e.getAssignees())r.set(t.login,t);return Array.from(r.values()).map(e=>({value:e.login,sourceObject:{dataType:mD.Assignees,kind:"group",value:[e]}}))}function Nm(e,t){if(e.dataType!==mD.Labels||!t)return;let r=new Map;for(let e of t)for(let t of e.getLabels())r.set(t.name,t);return Array.from(r.values()).map(e=>({value:e.name,sourceObject:{dataType:mD.Labels,kind:"group",value:e}}))}let Np=new Intl.Collator(void 0,{numeric:!0});function Nf(e,t){let r=e.sourceObject,a=t.sourceObject;return r.dataType!==mD.Assignees||a.dataType!==mD.Assignees?-1:Np.compare(e.value,t.value)}function Nh(e,t){let r=e.sourceObject,a=t.sourceObject;return r.dataType===mD.TrackedBy&&"group"===r.kind&&a.dataType===mD.TrackedBy&&"group"===a.kind?Np.compare(xD(r.value),xD(a.value)):-1}function Ng(e,t){return Np.compare(e.login,t.login)}function Nx(e,t){switch(e){case mD.Assignees:return t.sort(Nf);case mD.TrackedBy:return t.sort(Nh);default:return t.sort((e,t)=>Np.compare(e.value,t.value))}}function Ny(e,t){let r=e.Assignees;if(!r||0===r.length)return;let a=r.sort(Ng);return t?a.map(e=>({value:e.login,sourceObject:{dataType:mD.Assignees,kind:"group",value:[e]}})):[{value:a.map(e=>e.login).join("_"),sourceObject:{dataType:mD.Assignees,kind:"group",value:a}}]}function Nb(e,t){if(e.dataType!==mD.Date)return;let r=t[e.id],a=pQ(r);if(!a)return;let n=p2(a.value);return[{value:n,sourceObject:{dataType:mD.Date,kind:"group",value:{date:a,columnId:e.id}}}]}function Nv(e,t){if(e.dataType!==mD.Iteration)return;let r=t[e.id],a=pH(r);if(!a)return;let n=gR(e),l=n.find(e=>e.id===a.id);if(l)return[{value:l.id,sourceObject:{dataType:mD.Iteration,kind:"group",value:{iteration:l,columnId:e.id}}}]}function Nw(e){let t=e.Milestone;if(t)return[{value:t.title,sourceObject:{dataType:mD.Milestone,kind:"group",value:t}}]}function Nj(e,t){if(e.dataType!==mD.Number)return;let r=t[e.id],a=pW(r);if(a)return[{value:`${a.value}`,sourceObject:{dataType:mD.Number,kind:"group",value:{number:a,columnId:e.id}}}]}function NC(e){let t=e.Repository;if(t)return[{value:t.nameWithOwner,sourceObject:{dataType:mD.Repository,kind:"group",value:t}}]}function Nk(e,t){if(e.dataType!==mD.SingleSelect)return;let r=t[e.id],a=pH(r);if(!a)return;let n=e.settings.options||[],l=n.find(e=>e.id===a.id);if(l)return[{value:a.id,sourceObject:{dataType:mD.SingleSelect,kind:"group",value:{option:l,columnId:e.id}}}]}function NS(e,t){if(e.dataType!==mD.Text)return;let r=t[e.id],a=pU(r);if(a)return[{value:a.raw,sourceObject:{dataType:mD.Text,kind:"group",value:{text:a,columnId:e.id}}}]}function NI(e){let t=e.Labels;if(t)return t.map(e=>({value:e.name,sourceObject:{dataType:mD.Labels,kind:"group",value:e}}))}function NN(e){let t=e["Tracked by"];if(t&&0!==t.length)return t.map(e=>({value:e.url,sourceObject:{dataType:mD.TrackedBy,kind:"group",value:e}}))}function N_(e,t){return{[mD.Assignees]:{getGroupingMetadata:(r,a)=>Ny(e(a),t?.useDistinctAssigneesGrouping??!1),getAllGroupMetadata:(e,t)=>Nu(e,t)},[mD.Date]:{getGroupingMetadata:(t,r)=>Nb(t,e(r))},[mD.Iteration]:{getGroupingMetadata:(t,r)=>Nv(t,e(r)),getAllGroupMetadata:e=>Nc(e)},[mD.Labels]:{getGroupingMetadata:(t,r)=>NI(e(r)),getAllGroupMetadata:(e,t)=>Nm(e,t)},[mD.LinkedPullRequests]:void 0,[mD.Milestone]:{getGroupingMetadata:(t,r)=>Nw(e(r))},[mD.Number]:{getGroupingMetadata:(t,r)=>Nj(t,e(r))},[mD.Repository]:{getGroupingMetadata:(t,r)=>NC(e(r))},[mD.Reviewers]:void 0,[mD.SingleSelect]:{getGroupingMetadata:(t,r)=>Nk(t,e(r)),getAllGroupMetadata:e=>Nd(e)},[mD.Text]:{getGroupingMetadata:(t,r)=>NS(t,e(r))},[mD.Title]:void 0,[mD.TrackedBy]:{getGroupingMetadata:(t,r)=>NN(e(r))},[mD.Tracks]:void 0}}let NT=(0,uq.createContext)(null),NR=()=>{let e=(0,uq.useContext)(NT);if(!e)throw Error("useHorizontalGroupedBy must be used within a HorizontalGroupedByContext");return e};function NE(e){return e.name.toLocaleLowerCase().trim()}function ND(e){switch(e.dataType){case mD.Date:case mD.Iteration:case mD.Milestone:case mD.Number:case mD.SingleSelect:case mD.Repository:case mD.Text:case mD.Assignees:case mD.TrackedBy:return!0;default:return!1}}function NP(e,t,{include:r,exclude:a}){return t.reduce((t,n)=>{let l={...n,nameHtml:js(n.nameHtml)};if(g2(e)){let e=NE(n),i=0===r.size||vW(Array.from(r),e),s=vW(Array.from(a),e);i&&!s&&t.push(l)}else if(g1(e)){let i=0===r.size||v6(Array.from(r),e,!1,n.id),s=v6(Array.from(a),e,!1,n.id);i&&!s&&t.push(l)}return t},[])}let NA=(e,t)=>{let{orderedTokenizedFilters:r}=kp(),{allColumns:a}=CB(),n=a.find(t=>t.id===e),l=(0,uq.useMemo)(()=>{if(!n)return;let e=r.reduce((e,t)=>{if(n&&"field"===t.type&&a.find(e=>e.name.toLowerCase()===wy(t.field))===n)for(let r of wf(t.value.toLowerCase()))e[t.exclude?"exclude":"include"].add(r);return e},{include:new Set,exclude:new Set}),l=t(n,{includeAllCompletedIterations:g1(n)&&e.include.size+e.exclude.size>0});return NP(n,l,e)},[n,r,t,a]);return{groupByFieldOptions:l,groupByField:n}},NM=(0,uq.createContext)(null),NL=()=>{let e=(0,uq.useContext)(NM);if(!e)throw Error("useVerticalGroupedBy must be used within a VerticalGroupedByContext");return e},NF=()=>{let{groupedByColumnId:e}=NL();return{...NA(e,g7),groupedByColumnId:e}},NZ=(0,uq.createContext)(null),NO=()=>{let e=(0,uq.useContext)(NZ);if(!e)throw Error("useSortedBy must be used within a SortedByContext");return e};function NB(e,t){return"string"==typeof e&&"string"==typeof t?e.toLowerCase()===t.toLowerCase():e===t}function NV(e,t){return"string"==typeof e&&"string"==typeof t?e.toLowerCase()>t.toLowerCase():e>t}function N$(e,t,r,a,n,l){let i=r.contentType,s=a.contentType;if(i===mA.RedactedItem&&s===mA.RedactedItem)return 0;if(i===mA.RedactedItem&&s!==mA.RedactedItem)return n?-1:1;if(i!==mA.RedactedItem&&s===mA.RedactedItem)return n?1:-1;if(0===e.length&&t.length>0)return n?-1:1;if(e.length>0&&0===t.length)return n?1:-1;for(let r=0;r<e.length;r++){if(r>=t.length)return 1;let a=gc(e[r]),n=gc(t[r]);if(!NB(a,n))return NV(a,n)?1:-1}return t.length>e.length?-1:l?0:r.id-a.id}function Nz(e,t,r,a){let n=e.columns.Assignees?.map(e=>e.login)??[],l=t.columns.Assignees?.map(e=>e.login)??[];return N$(n,l,e,t,r,a)}function NU(e,t,r,a,n,l){let i=r.contentType,s=a.contentType;return i===mA.RedactedItem&&s===mA.RedactedItem?0:i===mA.RedactedItem&&s!==mA.RedactedItem?n?-1:1:i!==mA.RedactedItem&&s===mA.RedactedItem?n?1:-1:void 0!==e&&void 0!==t&&e!==t?e-t:void 0===e&&void 0!==t?n?-1:1:void 0!==e&&void 0===t?n?1:-1:l?0:r.id-a.id}function NW(e,t,r,a,n){let l=pQ(e.columns[r.id]),i=pQ(t.columns[r.id]),s=l?.value.getTime(),o=i?.value.getTime();return NU(s,o,e,t,a,n)}function NH(e,t,r,a,n){let l=pH(e.columns[r.id]),i=pH(t.columns[r.id]),s=l?.id||"",o=i?.id||"",d=gR(r);if(!d.length)return 0;if(e.contentType===mA.RedactedItem&&t.contentType!==mA.RedactedItem)return a?-1:1;if(e.contentType!==mA.RedactedItem&&t.contentType===mA.RedactedItem)return a?1:-1;let c=d.find(e=>e.id===s),u=d.find(e=>e.id===o);if(!c&&u)return a?-1:1;if(c&&!u)return a?1:-1;if(c&&u){let e=gM(c,u);if(0!==e)return e}return n?0:e.id-t.id}function NG(e,t,r,a){let n=e.columns.Labels?.map(e=>e.nameHtml)??[],l=t.columns.Labels?.map(e=>e.nameHtml)??[];return N$(n,l,e,t,r,a)}function Nq(e,t,r,a){let n=e.columns["Linked pull requests"]?.map(e=>e.number)??[],l=t.columns["Linked pull requests"]?.map(e=>e.number)??[];return N$(n,l,e,t,r,a)}function NK(e,t,r,a,n,l){let i=r.contentType,s=a.contentType;if(i===mA.RedactedItem&&s===mA.RedactedItem)return 0;if(i===mA.RedactedItem&&s!==mA.RedactedItem)return n?-1:1;if(i!==mA.RedactedItem&&s===mA.RedactedItem)return n?1:-1;if(""===e&&""!==t)return n?-1:1;if(""!==e&&""===t)return n?1:-1;let o=e.localeCompare(t);return 0!==o?o:l?0:r.id-a.id}function NQ(e,t,r,a){let n=e.columns.Milestone?.title??"",l=t.columns.Milestone?.title??"";return NK(n,l,e,t,r,a)}function NY(e,t,r,a,n){let l=pW(e.columns[r.id]),i=pW(t.columns[r.id]),s=l?.value,o=i?.value;return NU(s,o,e,t,a,n)}function NX(e,t,r,a){let n=e.columns.Repository?.name??"",l=t.columns.Repository?.name??"";return NK(n,l,e,t,r,a)}function NJ(e,t,r,a){let n=e.columns.Reviewers?.map(e=>e.reviewer.name)??[],l=t.columns.Reviewers?.map(e=>e.reviewer.name)??[];return N$(n,l,e,t,r,a)}function N0(e,t,r,a,n){let l=pH(e.columns[r.id]),i=pH(t.columns[r.id]),s=l?.id||"",o=i?.id||"",d=r.settings.options;if(!d)return 0;let c=d.findIndex(e=>e.id===s),u=d.findIndex(e=>e.id===o);return e.contentType===mA.RedactedItem&&t.contentType!==mA.RedactedItem?a?-1:1:e.contentType!==mA.RedactedItem&&t.contentType===mA.RedactedItem?a?1:-1:-1===c&&-1!==u?a?-1:1:-1!==c&&-1===u?a?1:-1:c>u?1:c<u?-1:n?0:e.id-t.id}function N1(e,t,r,a,n){let l=pU(e.columns[r.id]),i=pU(t.columns[r.id]),s=l?.raw??"",o=i?.raw??"";return NK(s,o,e,t,a,n)}function N2(e,t,r,a){let n=p3(e.columns.Title),l=p3(t.columns.Title);return NK(n,l,e,t,r,a)}function N5(e,t,r,a){let n=e.columns["Tracked by"]?.map(xD)??[],l=t.columns["Tracked by"]?.map(xD)??[];return N$(n,l,e,t,r,a)}function N3(e,t,r,a){let n=p6(e.columns.Tracks),l=p6(t.columns.Tracks);return NU(n,l,e,t,r,a)}function N4(e){switch(e.dataType){case mD.Title:return N2;case mD.Assignees:return Nz;case mD.Labels:return NG;case mD.LinkedPullRequests:return Nq;case mD.Reviewers:return NJ;case mD.Milestone:return NQ;case mD.Repository:return NX;case mD.Tracks:return N3;case mD.TrackedBy:return N5;case mD.Text:return(t,r,a,n)=>N1(t,r,e,a,n);case mD.Number:return(t,r,a,n)=>NY(t,r,e,a,n);case mD.Date:return(t,r,a,n)=>NW(t,r,e,a,n);case mD.SingleSelect:return(t,r,a,n)=>N0(t,r,e,a,n);case mD.Iteration:return(t,r,a,n)=>NH(t,r,e,a,n);default:xE(e)}}let N6=e=>(t,r)=>{for(let{column:a,direction:n}of e){let e="desc"===n,l=N4(a),i=l(t,r,e);if(e&&(i*=-1),0!==i)return i}return 0};function N7(){let{sorts:e}=NO(),t=(0,uq.useCallback)(t=>[...t].sort(N6(e)),[e]);return{sortUngroupedItems:t}}function N8(e){if("empty"!==e.kind)switch((0,u0.Z)(e.dataType!==mD.Labels,"Drag and drop not yet supported for labels"),e.dataType){case mD.Iteration:return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:{id:e.value.iteration.id}};case mD.SingleSelect:return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:{id:e.value.option.id}};case mD.Text:return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:e.value.text.raw};case mD.Number:{let t=e.value.number;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:{value:t.value}}}case mD.Date:{let t=e.value.date;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case mD.Milestone:case mD.Repository:return{dataType:e.dataType,value:void 0};case mD.Assignees:return{dataType:e.dataType,value:e.value};case mD.TrackedBy:return{dataType:e.dataType,value:[e.value],appendOnly:!1};default:xE(e)}}function N9(e,t,r={memex_group_by_multi_value_changes:!1,ctrlKeyPressed:!1},a=null){switch((0,u0.Z)(e.dataType!==mD.Labels,"Drag and drop not yet supported for labels"),e.dataType){case mD.Iteration:{let t="group"===e.kind?{id:e.value.iteration.id}:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case mD.SingleSelect:{let t="group"===e.kind?{id:e.value.option.id}:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case mD.Text:{let t="group"===e.kind?e.value.text.raw:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case mD.Number:{let t="group"===e.kind?e.value.number:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case mD.Date:{let t="group"===e.kind?e.value.date:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case mD.Milestone:case mD.Repository:return{dataType:e.dataType,value:"group"===e.kind?e.value:void 0};case mD.Assignees:{let a="group"===e.kind?e.value:[];if(a.length>0&&r.memex_group_by_multi_value_changes){let e=t.Assignees||[];for(let t of e){let e=a.find(e=>e.id===t.id);e||a.push(t)}}return{dataType:e.dataType,value:a}}case mD.TrackedBy:{let n="group"===e.kind?[e.value]:[];if(n.length>0){let e=t["Tracked by"]||[];for(let t of e){let e=n.find(e=>e.key.itemId===t.key.itemId),l=a?.dataType===mD.TrackedBy&&a?.kind==="group"&&a?.value.key.itemId===t.key.itemId;if(!e){if(l&&!r.ctrlKeyPressed)continue;n.push(t)}}}return{dataType:e.dataType,value:n,appendOnly:!1}}default:xE(e)}}function _e(e){switch(e.dataType){case mD.Assignees:case mD.Milestone:case mD.Repository:case mD.TrackedBy:case mD.Labels:return{dataType:e.dataType,kind:"empty",value:{titleHtml:`No ${e.name}`}};case mD.Date:case mD.Iteration:case mD.Number:case mD.Text:case mD.SingleSelect:return{dataType:e.dataType,kind:"empty",value:{titleHtml:`No ${e.name}`,columnId:e.id}}}}function _t(e,t){let r=e.groupedRows?.filter(e=>e.isGrouped)||[];if(0===r.length)return;let a=r.find(e=>e.subRows.findIndex(e=>e.id===t.id)>-1);if(a)return{sourceObject:a.groupedSourceObject,value:a.groupedValue}}function _r(e,t,r,a,n,l){let i;let s=a&&a(t,l),o=new Map,d=[],c=[],{dataType:u}=t;for(let a of e){let e=r(t,a);if(!e){let e=n?n(a,"none"):a;c.push(e);continue}for(let t of e){let{value:e}=t;s||-1!==d.findIndex(t=>t.value===e)||d.push(t);let r=n?n(a,e):a,l=o.get(e);l?l.push(r):o.set(e,[r])}}if(s)i=s.map(e=>({...e,rows:o.get(e.value)??[]}));else{let e=Nx(u,[...d]);i=e.map(e=>({...e,rows:o.get(e.value)??[]}))}let m=_e(t);return m&&i.push({value:fE.undefined,sourceObject:m,rows:c}),i}let _a=(e,t)=>r=>_r(r,e,t.getGroupingMetadata,t.getAllGroupMetadata),_n=[];function _l(){let{memex_swimlanes:e}=g9(),{filteredItems:t}=Ns(),{groupedByColumnId:r,groupByFieldOptions:a=_n}=NF(),{groupedByColumn:n,collapsedGroups:l}=NR(),{sortUngroupedItems:i}=N7(),{missingRequiredColumnData:s}=bP(),{allColumns:o}=CB(),d=(0,uq.useMemo)(()=>o.filter(g8),[o]),c=(0,uq.useMemo)(()=>No(d,r),[d,r]),u=(0,uq.useMemo)(()=>o.find(e=>e.id===c),[o,c]),m=(0,uq.useMemo)(()=>Object.fromEntries(Object.entries(_i(t,c,a,s,g3)).map(([e,t])=>[e,i(t)])),[t,c,a,s,i]),p=_c(),f=(0,uq.useMemo)(()=>{if(!e||!n)return;let r=p[n?.id];return r?.groupingConfig?.(t).map(e=>({...e,isCollapsed:l.includes(e.value),itemsGroupedByField:Object.fromEntries(Object.entries(_i(e.rows,c,a,s,g3)).map(([e,t])=>[e,i(t)]))}))},[e,n,p,t,l,c,a,s,i]);return(0,uq.useMemo)(()=>({itemsGroupedByField:m,groupByFieldOptions:a,groupByFieldId:c,groupByField:u,compatibleColumns:d,filteredItems:t,horizontalGroups:f}),[m,a,c,u,d,t,f])}function _i(e,t,r,a,n){let l=Object.fromEntries([[n,[]],...r.map(e=>[e.id,[]])]);if(a)return l;for(let r of e){let e=_s(r.columns,t,n);(e in l||e===n)&&l[e]?.push(r)}return l}function _s(e,t,r){if(-1===t)return r;let a=e[t];return a&&a.id?a.id:r}let _o=N_(e=>e.columns);function _d(e){return _o[e.dataType]}let _c=()=>{let{allColumns:e}=CB(),t=(0,uq.useMemo)(()=>Object.fromEntries(e.map(e=>{let t=_d(e);return[e.id,{...e,groupingConfig:t?_a(e,t):void 0}]})),[e]);return t},_u=(0,uq.createContext)(null),_m=(0,uq.memo)(function({children:e}){return(0,uO.jsx)(_u.Provider,{value:_l(),children:e})}),_p=()=>{let e=_f();return(0,u0.Z)(null!=e),e},_f=()=>{let e=(0,uq.useContext)(_u);return e};try{(tL=_u).displayName||(tL.displayName="BoardContext")}catch{}try{(tF=_m).displayName||(tF.displayName="BoardContextProvider")}catch{}let _h=(0,uq.createContext)(null),_g=(0,uq.memo)(function({children:e}){let[t,r]=(0,uq.useState)(void 0),a=(0,uq.useCallback)((e,t,a)=>{let n={validationMessage:e,rowId:t,colId:a};r(e=>void 0!==e&&fl(e,n)?e:n)},[]),n=(0,uq.useCallback)(()=>{r(void 0)},[]),l=(0,uq.useMemo)(()=>({validationState:t,setValidationMessage:a,clearValidationMessage:n}),[n,a,t]);return(0,uO.jsx)(_h.Provider,{value:l,children:e})});function _x(e,t){let r;let a=(0,uq.useContext)(_h);if(!a)throw Error("Wrap use of `useCellValidationMessage` in `CellValidationContext` provider");return a.validationState&&a.validationState.rowId===e&&a.validationState.colId===t&&(r=a.validationState.validationMessage),{validationMessage:r,setValidationMessage:a.setValidationMessage,clearValidationMessage:a.clearValidationMessage,validationMessageId:r&&"table-cell-validation-message"}}try{(tZ=_h).displayName||(tZ.displayName="CellValidationContext")}catch{}try{(tO=_g).displayName||(tO.displayName="CellValidationContextProvider")}catch{}let _y=(0,uq.createContext)(null),_b=(0,uq.createContext)(null),_v=(0,uq.createContext)(null),_w=(0,uq.createContext)(null),_j=(0,uq.createContext)(null),_C=(0,uq.createContext)(null),_k=(0,uq.createContext)(null),_S=(0,uq.createContext)(null),_I=(0,uq.createContext)(null),_N=(0,uq.createContext)(0),__=e=>(0,uO.jsx)(_y.Provider,{value:e.table.state,children:(0,uO.jsx)(_v.Provider,{value:e.table.state.movingRow,children:(0,uO.jsx)(_w.Provider,{value:e.table.state.overColumn,children:(0,uO.jsx)(_j.Provider,{value:e.table.state.highlightedRowId,children:(0,uO.jsx)(_C.Provider,{value:e.table.state.sortBy,children:(0,uO.jsx)(_k.Provider,{value:e.table.state.rowMenuShortcutOrigin,children:(0,uO.jsx)(_S.Provider,{value:e.table.state.columnResizing,children:(0,uO.jsx)(_I.Provider,{value:e.table,children:(0,uO.jsx)(_b.Provider,{value:e.table.dispatch,children:(0,uO.jsx)(_g,{children:(0,uO.jsx)(_N.Provider,{value:e.cellHeight,children:e.children})})})})})})})})})})});function _T(){let e=(0,uq.useContext)(_y);if(!e)throw Error("Must use `useTableState` in child of `<TableStateProvider>");return e}function _R(){let e=(0,uq.useContext)(_v);return e}function _E(){let e=(0,uq.useContext)(_w);return e}function _D(){let e=(0,uq.useContext)(_b);if(!e)throw Error("Must use `useTableDispatch` in child of `<TableDispatchProvider>");return e}function _P(){let e=(0,uq.useContext)(_j);return e}function _A(){let e=(0,uq.useContext)(_N);return e}function _M(){let e=(0,uq.useContext)(_I);if(!e)throw Error("Must use `useTableInstance` in child of `<TableProvider>");return e}function _L(){let e=(0,uq.useContext)(_k);return e??void 0}function _F(){let e=(0,uq.useContext)(_S);if(!e)throw Error("Must use `useTableColumnResizing` in child of `<TableProvider>");return e}try{(tB=_y).displayName||(tB.displayName="TableStateContext")}catch{}try{(tV=_b).displayName||(tV.displayName="TableDispatchContext")}catch{}try{(t$=_v).displayName||(t$.displayName="TableStateMovingRowContext")}catch{}try{(tz=_w).displayName||(tz.displayName="TableStateOverColumnContext")}catch{}try{(tU=_j).displayName||(tU.displayName="TableStateHighlightedRowIdContext")}catch{}try{(tW=_C).displayName||(tW.displayName="TableStateSortByContext")}catch{}try{(tH=_k).displayName||(tH.displayName="TableStateRowMenuShortcutOriginContext")}catch{}try{(tG=_S).displayName||(tG.displayName="TableStateColumnResizingContext")}catch{}try{(tq=_I).displayName||(tq.displayName="TableInstanceContext")}catch{}try{(tK=_N).displayName||(tK.displayName="TableCellHeightContext")}catch{}let _Z={Table:"table_layout",Board:"board_layout",List:"list_layout",Roadmap:"roadmap_layout"},_O=()=>({hideItemsCount:!1,sum:[]}),_B=["id","number","createdAt","updatedAt","priority"],_V="none",_$={Month:"month",Quarter:"quarter",Year:"year"},_z={Table:"table",Board:"board",List:"list",Roadmap:"roadmap"},_U={[_Z.Board]:_z.Board,[_Z.Table]:_z.Table,[_Z.List]:_z.List,[_Z.Roadmap]:_z.Roadmap},_W={[_z.Board]:_Z.Board,[_z.Table]:_Z.Table,[_z.List]:_Z.List,[_z.Roadmap]:_Z.Roadmap},_H={[_Z.Board]:mM.Rg1,[_Z.Table]:mM.$eq,[_Z.List]:mM.Rg1,[_Z.Roadmap]:mM.Bjy};let EnumValueError=class EnumValueError extends Error{constructor(e,t,r){super(fE.invalidFieldValues({name:e,value:`${t}`,fields:fn(Object.keys(r))})),Object.setPrototypeOf(this,new.target.prototype),this.name="EnumValueError"}};function _G(e){let t=_U[e];if(!t)throw new EnumValueError("ViewTypeParam",e,_Z);return t}function _q(e){let t=_W[e];if(!t)throw new EnumValueError("ViewType",e,_z);return t}function _K(e){let t=_H[e];if(!t)throw new EnumValueError("getViewIcons",e,_H);return t}let _Q=(0,uq.createContext)(null);function _Y(){let e=(0,uq.useContext)(_Q);if(!e)throw Error("useViewType must be used inside a ViewTypeProvider");return e}function _X({updateAction:e,matchesSearchQuery:t}){let{viewType:r}=_Y(),a=(0,uq.useContext)(_I),n=_f();return(0,uq.useCallback)(function(){if(r===_z.Table&&a){let{flatRows:r,groupedRows:n}=a,l=e?n?.find(t=>!!e?.value&&("object"==typeof e.value&&"id"in e.value&&"id"in t.groupedSourceObject.value?e.value.id===t.groupedSourceObject.value.id:e.value===t.groupedValue))?.subRows:r.filter(e=>!e.isGrouped);return l?.findLast(e=>t(e.original))?.original}if(r===_z.Board&&"object"==typeof e?.value&&"id"in e.value)return n?.itemsGroupedByField[e.value.id]?.findLast(e=>t(e))},[n?.itemsGroupedByField,t,a,e,r])}let _J=({onAddItem:e,onAddDraftItem:t,onSave:r,updateAction:a,previousItemId:n,keepSystemFields:l=!1})=>{let{fieldFilters:i,query:s,matchesSearchQuery:o,transientQuery:d}=kp(),{items:c}=bt(),{addToast:u}=m7(),{findColumnByName:m}=IZ(),{updateMultipleSequentially:p}=IF(),f=Nr(),{isKeywordQualifier:h}=CA(),{postStats:g}=bM(),{openProjectItemInPane:x,supportedItemTypes:y}=bJ(),{setChildParentRelationship:b}=IH(),{memex_tracked_by_items:v,memex_tracked_by_add_missing_items:w}=g9(),j=_X({updateAction:a,matchesSearchQuery:o}),C=(0,uq.useCallback)(()=>{if(!i.length&&!d.fieldFilters.length)return;let{columnValuesForCreate:e,columnValuesFromSuggestions:t}=[...i,...d.fieldFilters].reduce((e,[t,r])=>{if(!r.length||wc(t)||h(t)||t===IE.FilterName&&!v)return e;let n=[...r],i=m(wy(t));if(!i||l&&!i.userDefined||a&&("memexProjectColumnId"in a&&i.id===a.memexProjectColumnId||!("memexProjectColumnId"in a)&&i.dataType===a.dataType))return e;let s=j();if(n.length>1&&s){let t=w_(s,i);return t?{...e,columnValuesForCreate:[...e.columnValuesForCreate,t]}:e}if(n.length>1&&(n=[gc(n[0])]),_0(i.id))return{...e,columnValuesFromSuggestions:[...e.columnValuesFromSuggestions,{memexProjectColumnId:i.id,filterValue:gc(n[0])}]};let o=wN(c,i,n);return o?{...e,columnValuesForCreate:[...e.columnValuesForCreate,o]}:e},{columnValuesForCreate:[],columnValuesFromSuggestions:[]});return a&&e.push(a),{columnValuesForCreate:e,columnValuesFromSuggestions:t}},[i,d.fieldFilters,a,h,v,m,l,j,c]),k=(0,uq.useCallback)(async l=>{let c=null,m=[],h=[],k=[];if(i.length||d.fieldFilters.length){let e=C();if(e){for(let t of e.columnValuesForCreate){let e=vr(t);e&&h.push(e);let r=vl(t);r&&m.push(r)}k=e.columnValuesFromSuggestions}}else if(a){let e=vl(a),t=vr(a);e&&(m=[e]),t&&h.push(t)}if("object"==typeof l){let{repositoryId:t,...r}=l;c=await e(r,t,m,h,n)}else c=await t(l,m,h,n);if(!c)return;r?.(),v&&w&&b(c.content.id);let S=!1;if(k){let e=await Promise.all(k.map(async({memexProjectColumnId:e,filterValue:t})=>{if(_1(c,e))try{return await f(c,e,t,j())}catch(e){S=!0}})),t=e.filter(e=>!!e);await p(c,t)}(!o(c)||S)&&(u({type:mB.warning,message:fE.newItemFilterWarning,action:y.has(c.contentType)?{handleClick:()=>c&&x(c),text:fE.viewItem}:void 0}),g({name:"item_added_does_not_match_filter",context:JSON.stringify({model:c,filter:s})}))},[i.length,d.fieldFilters.length,r,v,w,o,C,a,e,n,t,b,p,f,j,u,y,g,s,x]),{perform:S}=b6({request:k});return S},_0=e=>e===mP.Assignees||e===mP.Labels||e===mP.Milestone||e===mP.TrackedBy,_1=(e,t)=>!!e&&e.contentType!==mA.RedactedItem&&(e.contentType!==mA.DraftIssue||bc(t));function _2(e){let t=e.split("/");if(2===t.length)return{owner:gc(t[0]),name:gc(t[1])}}function _5(e){let t=mx.matchFullPathOrChildPaths(window.location.pathname);return["projects-v2","session-store-v1",t?.params.ownerType,t?.params.ownerIdentifier,t?.params.projectNumber,e].join("/")}let _3=()=>{let{addLoadedFieldId:e}=j2(),t=(0,uq.useCallback)(t=>{e(t)},[e]);return{updateLoadedColumns:t}};var _4=r(25434);async function _6(e){let t=f9("memex-item-create-api-data"),{memex_skip_json_parsing_if_invalid_response_and_content_found:r}=ho(),{data:a}=await hx(t.url,{method:"POST",body:e},r);return a}let _7=(0,_4.c)({mutationFn:_6}),_8=()=>{let{findMemexItemIndex:e}=IO(),{setColumnValue:t}=IL(),{addToast:r}=m7(),a=(0,uW.NL)(),n=_7(),{updateLoadedColumns:l}=_3(),i=(0,uq.useCallback)(t=>void 0===t?void 0:""===t?0:e(t)+1,[e]),s=(0,uq.useCallback)(async e=>{let s=i(e.previousMemexProjectItemId),o=e.localColumnValues;delete e.localColumnValues,ID();let d=await n.mutateAsync({memexProjectItem:e}),c=d.memexProjectItem,u=d.memexProjectColumn?.[0]?.partialFailures;u&&r({message:u.message,type:mB.warning,keepAlive:!0});let m=y2(c);for(let e of c.memexProjectColumnValues)l(e.memexProjectColumnId);if(m&&o)for(let e of o)t(m,e);return bb(a,m,s),m},[i,n,a,r,l,t]),o=(0,uq.useCallback)((e,r,n)=>{let i=e.localColumnValues;delete e.localColumnValues;let{contentType:s,content:o}=e,d=null;if(s===mA.Issue&&(d={contentType:s,content:{...o,url:n||""},contentRepositoryId:o.repositoryId,memexProjectColumnValues:r,id:o.id,priority:null,updatedAt:Date.now().toString()}),d){let e=y2(d);for(let e of d.memexProjectColumnValues)l(e.memexProjectColumnId);for(let r=0;e&&i&&r<i.length;++r){let a=i[r];a&&t(e,a)}bb(a,e)}},[a,l,t]);return{createMemexItem:s,createMemexItemOptimisitcally:o}},_9=(0,uq.createContext)(null),Te=()=>(0,uq.useContext)(_9),Tt=()=>{let[e,t,r]=(0,vZ.useQueryLoader)(IT.Jw);return(0,uq.useEffect)(()=>(t({topRepositoriesFirst:10},{fetchPolicy:"store-or-network"}),()=>r()),[r,t]),e},Tr=(e,t)=>{let[r,a,n]=(0,vZ.useQueryLoader)(IT.MC);return(0,uq.useEffect)(()=>(t&&e&&a(t,{fetchPolicy:"store-or-network"}),()=>n()),[n,e,a,t]),r},Ta=_5("issue-creator"),Tn=({onClose:e,visible:t,prefill:r,newItemAttributes:a})=>{let{loggedInUser:n}=yk(),{addToast:l}=m7(),{tasklist_block:i,issues_react_templates:s,memex_project_field_issue_forms:o}=g9(),d=(0,uq.useMemo)(()=>({owner:r?.repo?.owner??"",name:r?.repo?.name??"",includeTemplates:s}),[s,r?.repo?.name,r?.repo?.owner]),c=(0,uq.useMemo)(()=>void 0!==d.name&&void 0!==d.owner&&""!==d.name&&""!==d.owner,[d]),u=Tt(),m=Tr(c,d),{projectOwner:p,themePreferences:f}=yk(),h=f.markdown_fixed_width_font,g=n?.paste_url_link_as_plain_text??!1,{createMemexItem:x}=_8(),y=_J({updateAction:a&&a.setField||void 0,previousItemId:a?.previousItemId,onAddDraftItem:(0,uq.useCallback)(()=>Promise.resolve(null),[]),onAddItem:(0,uq.useCallback)((e,t,r,a,n)=>x({contentType:e.type,content:{id:e.id,repositoryId:t},memexProjectColumnValues:r,localColumnValues:a,previousMemexProjectItemId:n}),[x])}),b=(0,uq.useCallback)(async({issue:t,createMore:r})=>{let{databaseId:a,repository:n}=t;if(r||e(),null===a||null===n.databaseId){l({message:"Could not add the new issue to the project: ID is missing",type:"error"});return}await y({type:"Issue",id:a,repositoryId:n.databaseId})},[e,y,l]);return(0,uO.jsx)(uO.Fragment,{children:t&&u&&(!c||m)&&(0,uO.jsx)(I_.lO,{localStorageKeyPrefix:Ta,onCreate:b,onCancel:e,topReposQueryRef:u,currentRepoQueryRef:m,pasteUrlsAsPlainText:g,useMonospaceFont:h,organization:p?.login,showAddTaskListButton:i,issuesReactTemplates:s,issuesFormProjects:o,navigate:IR.Z,...r})})},Tl=(0,uq.memo)(function({children:e}){let{hasWritePermissions:t}=yI(),{title:r}=f3(),[a,n]=(0,uq.useState)({visible:!1}),{suggestRepositories:l}=Cb(),i=(0,uq.useCallback)(async()=>(await l()).at(0),[l]),s=(0,uq.useCallback)(async({repo:e,issueTitle:t},a)=>{if(!e){let t=(await i())?.nameWithOwner;t&&(e=_2(t))}(0,f4.Z)((0,I_.mJ)(Ta)),n({visible:!0,prefill:{issueTitle:t,repo:e,enforcedSelectedProjectTitle:r},newItemAttributes:a})},[i,r]);mm(()=>t?["i","Create issue","create_issue",()=>s({})]:null,[s,t]);let o=()=>n({visible:!1});return t?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(_9.Provider,{value:s,children:e}),(0,uO.jsx)(Tn,{onClose:o,...a})]}):(0,uO.jsx)(uO.Fragment,{children:e})});try{(tQ=_9).displayName||(tQ.displayName="IssueCreatorContext")}catch{}try{(tY=Tn).displayName||(tY.displayName="IssueCreator")}catch{}try{(tX=Tl).displayName||(tX.displayName="IssueCreatorProvider")}catch{}function Ti(e){return!!Tm(e)&&"string"==typeof e.type}function Ts(e){return s||(s={refreshEvents:new Set(mT("memex-refresh-events"))}),s.refreshEvents.has(e)}function To(e){i||(i=mT("memex-alive"));let t=`${e}Channel`;return i?.[t]}function Td(e){return!!Tp(e)&&"string"==typeof e.reason}function Tc(e){return Tu(e)&&Object.prototype.hasOwnProperty.call(e,"project_migration")}function Tu(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Tm(e){return Tu(e)&&Object.prototype.hasOwnProperty.call(e,"type")}function Tp(e){return Tu(e)&&Object.prototype.hasOwnProperty.call(e,"reason")}function Tf(e){return m1(e).current}function Th(e){return Boolean(e instanceof CustomEvent&&e.detail&&"object"==typeof e.detail&&"data"in e.detail)}function Tg(e,t,r,a){let n=a||To(t),l=m1(r),[i,s]=(0,uq.useState)({});return(0,uq.useEffect)(()=>{let r=e.current;if(!r||!n)return;let a=`socket:${t}`,i=e=>{Th(e)&&l.current(e.detail)},s=[a,i];return r.addEventListener(...s),()=>{r.removeEventListener(...s)}},[n,t,l,e]),(0,uq.useEffect)(()=>{s({className:"js-socket-channel","data-channel":n})},[n]),[i]}function Tx(e){return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}function Ty(){return!document.hidden}function Tb(){return!0}let Tv=()=>(0,uq.useSyncExternalStore)(Tx,Ty,Tb),Tw=(0,uq.createContext)(null);function Tj(){let e=(0,uq.useContext)(Tw);if(null===e)throw Error("useCharts can only be used inside a ChartStateProvider");return e}let TC=()=>{let{loadedFieldIdsRef:e}=j2(),t=(0,uq.useCallback)(()=>[...e.current],[e]);return{findLoadedFieldIds:t}},Tk=()=>{let{allColumnsRef:e}=j2(),t=(0,uq.useCallback)(t=>e.current.find(e=>`${e.id}`==`${t}`),[e]),r=(0,uq.useCallback)(t=>e.current.findIndex(e=>`${e.id}`==`${t}`),[e]);return{findColumn:t,findColumnIndex:r}},TS=()=>{let{setAllColumns:e,allColumnsRef:t}=j2(),{findColumnIndex:r}=Tk(),a=(0,uq.useCallback)(t=>{let r=j0(t);e(r)},[e]),n=(0,uq.useCallback)(a=>{let n=r(a.id);if(-1===n)return;let l=[...t.current];l[n]=a,e(l)},[t,r,e]);return{updateColumns:a,updateColumnEntry:n}},TI=()=>{let e=(0,uq.useContext)(f1);if(!e)throw Error("useSetProject must be used within a SetProjectContext.Provider");return e},TN=()=>{let e=bX(),t=(0,uW.NL)(),r=(0,uq.useCallback)(r=>{bN(t,r,e)},[t,e]);return{updateMemexItems:r}},T_=()=>{let{setAllWorkflows:e}=w2(),{setProject:t}=TI(),{updateMemexItems:r}=TN(),{findLoadedFieldIds:a}=TC(),{updateColumns:n}=TS(),{updateViewServerStates:l}=bP(),{updateChartConfigurations:i}=Tj(),{memex_table_without_limits:s}=g9(),{perform:o,status:d}=b6({request:(0,uq.useCallback)(e=>{ID();let t=IP(e);return t},[]),showErrorToast:!1}),c=(0,uq.useCallback)(async()=>{if(await o({visibleFields:[...a()]}),"succeeded"===d.current.status){let{memexProject:a,memexProjectItems:o,memexProjectAllColumns:c,memexViews:u,memexWorkflows:m,memexWorkflowConfigurations:p,memexCharts:f}=d.current.data;t(a),s||r(o),n(c),l(u),e(p,m),i(f)}},[a,s,o,d,e,t,i,n,r,l]);return c};async function TT(){let e=f8("memex-migration-get-api-data"),{data:t}=await hh(e.url);return t}let TR={pending:0,in_progress_project_details:3,in_progress_status_fields:6,in_progress_default_view:10,in_progress_permissions:30,in_progress_items:40,in_progress_workflows:90,completed:100,completion_acknowledged:100,error:25};function TE(e){return TR[e]||0}let TD=(0,uq.createContext)(null),TP=(0,uq.memo)(function({children:e}){let t=mT("memex-project-migration"),[r,a]=(0,uq.useState)(t),[n,l]=(0,uq.useState)(t?.status),i=(0,uq.useMemo)(()=>({projectMigration:r,setProjectMigration:a,initialProjectMigrationStatus:n,setInitialProjectMigrationStatus:l}),[r,n]);return(0,uO.jsx)(TD.Provider,{value:i,children:e})});try{(tJ=TD).displayName||(tJ.displayName="ProjectMigrationContext")}catch{}try{(t0=TP).displayName||(t0.displayName="ProjectMigrationStateProvider")}catch{}let TA=()=>{let e=(0,uq.useContext)(TD);if(!e)throw Error("useProjectMigration must be used within a ProjectMigrationStateProvider");return e},TM={ERROR:"error",COMPLETED:"completed"},TL=()=>{let[e,t]=(0,uq.useState)(null),{projectMigration:r,setProjectMigration:a}=TA(),n=T_(),{items:l}=bt(),i=(0,uq.useRef)(!1),s=(0,uq.useCallback)((e,t=!0)=>(!i.current&&t&&(i.current=!0),e)?r?r.status===TM.ERROR?void 0:e.status===TM.ERROR?a(e):void(TR[r.status]<TR[e.status]&&a(e)):a(e):void 0,[r,a]),o=(0,uq.useCallback)(async()=>{if(r&&!i.current&&r.status!==TM.COMPLETED)try{let e=await TT();s(e,!1)}catch{}},[r,s]),d=(0,uq.useCallback)(()=>e?.status===TM.COMPLETED,[e?.status]),c=(0,uq.useCallback)(async()=>{if(!r)return;let a=r.source_project,i=r.status;i!==TM.COMPLETED?t(r):a?.empty||i!==TM.COMPLETED?a?.empty&&e&&t({...e,status:TM.COMPLETED}):(l.length||e?.status===TM.COMPLETED||await n(),t(r))},[n,l.length,e,r]);return(0,uq.useEffect)(()=>{c()}),{isMigrationComplete:d,processProjectMigrationState:s,processProjectMigrationOnPageVisibility:o,prevMigrationState:e,projectMigrationState:r}},TF=(0,uq.memo)(function(){let e=(0,uq.useRef)(null),t=T_(),r=m5(t),a=Tv(),n=Tf(a),{processProjectMigrationState:l,processProjectMigrationOnPageVisibility:i,isMigrationComplete:s}=TL(),[o]=Tg(e,"message",e=>{if(Tc(e.data)){l(e.data.project_migration),r(e.data.wait??0)();return}if(Ti(e.data)){let{type:t}=e.data;Ts(t)&&r(e.data.wait??0)()}});return(0,uq.useEffect)(()=>{a&&i(),a&&!n&&t()},[a,n,t,i,s]),(0,uq.useEffect)(()=>()=>{ID()},[]),(0,uO.jsx)("span",{...a?o:void 0,ref:e,hidden:!0,...(0,mp.f)("live-update-listener")})});try{(t1=TF).displayName||(t1.displayName="LiveUpdate")}catch{}let TZ=e=>!!Array.isArray(e),TO=[],TB=e=>{let[t,r]=(0,uq.useState)(TO),[a]=Tg(e,"presence",e=>{TZ(e.data)?r(e.data):r(TO)});return{presenceItems:t,attrs:a}},TV=()=>{let e=(0,uq.useContext)(f0);if(!e)throw Error("useProjectState must be used within a ProjectStateContext.Provider");return e};function T$(e){return{...e,id:e.userId,hovercardUrl:`/hovercards?user_id=${e.userId}`}}let Tz=uJ.F4`
  from {
    opacity: 0
  }
  to {
    opacity: 1
  }`,TU=(0,uq.forwardRef)((e,t)=>{let{sx:r,...a}=e,n={display:"inline-flex",alignItems:"center",position:"relative",justifyContent:"flex-end",zIndex:"0",animationName:Tz.getName(),overflow:"visible",verticalAlign:"text-bottom",...r};return(0,uO.jsx)(mF.Z,{ref:t,sx:n,...a})});TU.displayName="MemexAvatarStackWrapper";let TW=(0,uq.forwardRef)((e,t)=>{let{sx:r,...a}=e,n={display:"flex",alignItems:"center",borderRadius:"100%",flexShrink:0,marginLeft:0,marginRight:e=>`-${e.space[1]}`,animation:"fadeIn 0.5s ease-in-out",...r};return(0,uO.jsx)(mF.Z,{ref:t,sx:n,...a})});TW.displayName="StyledAvatarBox";let TH=(0,uq.forwardRef)((e,t)=>{let{sx:r,...a}=e,n={display:"flex",alignItems:"center",transition:"opacity 0.5s ease-in-out",...r};return(0,uO.jsx)(C$.O,{ref:t,sx:n,...a})});TH.displayName="StyledAvatar";let TG=(0,uq.forwardRef)((e,t)=>{let{sx:r,...a}=e,n={backgroundColor:"canvas.subtle",display:"flex",alignItems:"center",borderRadius:"20px",marginLeft:e=>`-${e.space[1]}`,animation:"fadeIn 0.5s ease-in-out",...r};return(0,uO.jsx)(mF.Z,{ref:t,sx:n,...a})});TG.displayName="StyledCounter";let Tq=({items:e,backgroundSx:t,size:r=24,maxVisible:a=5})=>{let n=e.length,{backgroundColor:l,boxShadow:i}=t,s=n-a;return(0,uO.jsxs)(TU,{...(0,mp.f)("memex-avatar-stack"),children:[(0,uO.jsx)(mF.Z,{sx:{display:"flex",mr:1},children:e.slice(0,a).map((e,t)=>(0,uq.createElement)(TW,{...(0,mp.f)("memex-avatar-stack-item"),key:e.id,sx:{backgroundColor:l,boxShadow:i,zIndex:t}},(0,uO.jsx)(TH,{...(0,mp.f)(`memex-avatar-state-${e.isIdle?"idle":"active"}`),sx:{opacity:e.isIdle?.3:1},size:r,src:e.avatarUrl,"data-hovercard-url":e.hovercardUrl})))}),n>a?(0,uO.jsx)(mF.Z,{sx:{position:"relative",zIndex:a,display:"flex",alignItems:"center"},...(0,mp.f)("memex-avatar-stack-overflow"),children:(0,uO.jsx)(TG,{sx:{boxShadow:i},children:(0,uO.jsxs)(k$.Z,{sx:{height:r+1,width:r+1,fontSize:r<24?"9px":0,p:0,color:"fg.muted",lineHeight:0,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",overflow:"hidden"},children:["+",s>99?"\u221E":s]})})}):null]})};try{(t2=Tq).displayName||(t2.displayName="MemexAvatarStack")}catch{}function TK(e,t){return e.replace(/u\/[0-9]+/,`u/${t}`)}let TQ=(0,uq.createContext)(null),TY=()=>{let e=(0,uq.useContext)(TQ);if(null==e)throw Error("Cannot use usePresenceUsers outside of PresenceUsersProvider");return e},TX=[],TJ=(0,uq.memo)(function({children:e}){let t=(0,uq.useRef)(null),{presenceItems:r,attrs:a}=TB(t),{isPublicProject:n}=TV(),l=(0,uq.useMemo)(()=>{if(n)return TX;let{projectCreator:e,projectOwner:t}=yk(),a=(e||t)?.avatarUrl||"";return r.filter(e=>!e.isOwnUser).map(e=>T$({...e,avatarUrl:TK(a,e.userId)}))},[r,n]);return(0,uO.jsxs)(TQ.Provider,{value:l,children:[(0,uO.jsx)("span",{...(0,mp.f)("presence-avatars-listener"),...a,hidden:!0,ref:t}),e]})}),T0=()=>{let e=TY();return 0===e.length?null:(0,uO.jsx)(mF.Z,{...(0,mp.f)("presence-avatars"),sx:{width:"100%"},children:(0,uO.jsx)(Tq,{items:e,backgroundSx:{backgroundColor:"canvas.subtle",boxShadow:e=>`0 0 0 2px ${e.colors.canvas.subtle} !important`}})})};try{(t5=TQ).displayName||(t5.displayName="PresenceContext")}catch{}try{(t3=TJ).displayName||(t3.displayName="PresenceUsersProvider")}catch{}try{(t4=T0).displayName||(t4.displayName="PresenceAvatars")}catch{}var T1=r(96604),T2=r(74092);async function T5(){let e=f8("memex-migration-acknowledge-completion-api-data"),{data:t}=await hh(e.url,{method:"POST",token:e.token});return t}async function T3(){let e=f8("memex-migration-cancel-api-data"),{data:t}=await hh(e.url,{method:"DELETE",token:e.token});return t}async function T4(){let e=f8("memex-migration-retry-api-data"),{data:t}=await hh(e.url,{method:"POST",token:e.token});return{redirectUrl:t?.redirectUrl}}let T6=e=>"completion_acknowledged"===e.status||"completed"===e.status?"":fH.statuses[e.status],T7=({migration:e,closeOverlay:t})=>(0,uO.jsxs)(mF.Z,{children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(mF.Z,{sx:{justifyContent:"space-around"},children:e.source_project?.closed?(0,uO.jsx)(mL.Z,{icon:mM.nQG,sx:{color:"success.fg"}}):(0,uO.jsx)(mL.Z,{icon:mM.enX,sx:{color:"attention.fg"}})}),(0,uO.jsx)(mF.Z,{sx:{ml:1},children:(0,uO.jsx)("span",{...(0,mp.f)("migration-status"),children:e.source_project?.closed?(0,uO.jsxs)(uO.Fragment,{children:["\u2022 ",(0,uO.jsx)(w3.Z,{target:"_blank",rel:"noreferrer",href:e.source_project?.path,children:fH.yourClassicProject}),` ${fH.completedAndClosed1}`,(0,uO.jsx)("br",{}),`\u{2022} ${fH.completedAndClosed2}`]}):(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(w3.Z,{target:"_blank",rel:"noreferrer",href:e.source_project?.path,children:fH.yourClassicProject}),` ${fH.completedAndStillOpen}`]})})})]}),(0,uO.jsx)(mF.Z,{sx:{mt:3,display:"flex"},children:(0,uO.jsx)(jI.z,{variant:"primary",onClick:t,children:"Done"})})]}),T8=({migration:e,cancelMigration:t,tryAgain:r})=>(0,uO.jsxs)(mF.Z,{children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(mF.Z,{sx:{justifyContent:"space-around"},children:(0,uO.jsx)(mL.Z,{icon:mM.b0D,sx:{color:"danger.fg"}})}),(0,uO.jsx)(mF.Z,{...(0,mp.f)("migration-status"),sx:{ml:1},children:T6(e)})]}),(0,uO.jsxs)(mF.Z,{sx:{mt:3,display:"flex",flexDirection:"row-reverse"},children:[(0,uO.jsx)(jI.z,{variant:"primary",onClick:r,sx:{ml:2},children:"Try again"}),(0,uO.jsx)(jI.z,{onClick:t,children:"Cancel"})]})]}),T9=({migration:e,closeOverlay:t,...r})=>"completed"===e.status?(0,uO.jsx)(T7,{migration:e,closeOverlay:t}):"error"===e.status?(0,uO.jsx)(T8,{migration:e,...r}):(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(mF.Z,{sx:{justifyContent:"space-around",p:1},children:(0,uO.jsx)(w4.Z,{size:"small"})}),(0,uO.jsx)(mF.Z,{...(0,mp.f)("migration-status"),sx:{ml:1,mt:"3px"},children:T6(e)})]});try{(t6=T7).displayName||(t6.displayName="MigrationOverlayCompleted")}catch{}try{(t7=T8).displayName||(t7.displayName="MigrationOverlayError")}catch{}try{(t8=T9).displayName||(t8.displayName="MigrationOverlayDescription")}catch{}function Re(e){return"completed"===e.status||"error"===e.status}function Rt(e,t){return"completed"===e.status?fH.migrationCompleteMessage:"error"===e.status?fH.somethingWentWrongMessage:fK.migratingTitle(t)}let Rr=async()=>{let e=await T4();e.redirectUrl&&window.location.assign(e.redirectUrl)},Ra=async()=>{let e=await T3();e.redirectUrl&&window.location.assign(e.redirectUrl)},Rn=()=>{let{projectMigration:e,initialProjectMigrationStatus:t,setInitialProjectMigrationStatus:r}=TA(),{prevMigrationState:a,isMigrationComplete:n}=TL(),{title:l}=f3();if(!e||!a||"completion_acknowledged"===t)return null;let i=async()=>{r("completion_acknowledged"),T5()},s=n()?TE(e.status):TE(a.status??"pending"),o=Rt(a,l),d="error"===e.status?"danger.fg":"success.emphasis",c=a&&Re(a)?"200px":"125px";return(0,uO.jsx)(T1.Z,{open:!0,caret:"bottom",sx:{position:"fixed",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,uO.jsxs)(T1.Z.Content,{sx:{paddingTop:"25px",width:"480px",height:c,top:"20%","&::before":{content:"none !important"},"&::after":{content:"none !important"}},...(0,mp.f)("migration-popover"),children:[(0,uO.jsx)(Cn.Z,{sx:{fontSize:3,mb:2},children:o}),(0,uO.jsx)(T2.k,{bg:d,progress:s,sx:{marginBottom:"15px"}}),(0,uO.jsx)(T9,{migration:e,cancelMigration:Ra,tryAgain:Rr,closeOverlay:i})]})})};try{(t9=Rn).displayName||(t9.displayName="ProjectMigrationOverlayView")}catch{}var Rl=r(72752);let Ri=(0,uq.memo)(({children:e,initialFocusRef:t,returnFocusRef:r,open:a,onClose:n,onKeyDown:l,topOffset:i,width:s,"aria-label":o,"aria-labelledby":d,defaultCloseElement:c="button"})=>{let u=(0,uq.useMemo)(()=>Array.isArray(s)?s:"string"==typeof s?["100%","",s]:["100%"],[s]),{containerRef:m,initialFocusRef:p}=(0,Cp.P)({initialFocusRef:t}),f=window.matchMedia("(prefers-reduced-motion: reduce)").matches,[h,g]=(0,uq.useState)(a),[x,y]=(0,uq.useState)(a);return((0,uq.useEffect)(()=>{let e;return a?(g(!0),e=setTimeout(()=>y(!0))):(y(!1),e=setTimeout(()=>g(!1),200)),()=>clearTimeout(e)},[a]),h)?(0,uO.jsxs)(Rl.Z,{initialFocusRef:p,returnFocusRef:r,onKeyDown:l,onEscape:n,onClickOutside:()=>{},ref:m,role:"dialog","aria-modal":!0,"aria-label":o,"aria-labelledby":d,sx:{zIndex:2,height:"1px",bg:"none"},children:[(0,uO.jsx)(mF.Z,{sx:{backgroundColor:"neutral.muted",top:i,right:0,bottom:0,left:0,borderRadius:0,position:"fixed",border:"none",transitionDuration:"200ms",transitionProperty:"opacity",transitionTimingFunction:"animation.easeOutCubic",opacity:x?1:0,cursor:"default",width:"100%"},onClick:n,as:"overlay"===c?"button":void 0,"aria-label":"overlay"===c?"Close":void 0}),(0,uO.jsxs)(mF.Z,{sx:{borderRadius:"12px 0 0 12px",position:"fixed",top:i,right:0,bottom:0,width:u,minWidth:"300px",maxWidth:"unset",overflow:"hidden",bg:"canvas.default",boxShadow:"shadow.large",transitionDuration:"200ms",transitionProperty:"opacity, transform",transitionTimingFunction:"animation.easeOutCubic",transform:x||f?"translateX(0%)":"translateX(35%)",opacity:x?1:0},children:["button"===c&&(0,uO.jsx)(kF.h,{variant:"invisible",icon:mM.b0D,"aria-label":"Close",onClick:n,sx:{float:"right",m:3}}),e]})]}):null});Ri.displayName="SidePanel";var Rs=r(63106),Ro=r(52540);let Rd=(e,t)=>{let r=(0,uq.useRef)(!1);(0,uq.useEffect)(()=>{r.current&&!e&&t.current?.focus(),r.current=e},[e,t])},Rc=(0,uq.createContext)(void 0);function Ru(){let e=(0,uq.useContext)(Rc);return e}let Rm=()=>{let{clientHeight:e}=CD(document.body),t=Ru(),r=document.querySelector(".application-main"),{clientHeight:a}=CD(r??t??null);return e&&a?e-a:void 0};function Rp(e){if(e){let t=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.scrollTop=0,e.scrollLeft=0,e.style.scrollBehavior=t}}let Rf=e=>{let{offsetWidth:t}=CD(e),[,r]=(0,uq.useState)(!1);(0,uq.useEffect)(function(){r(e=>!e)},[]);let a=uz.Fg().theme?.breakpoints,n=(0,uq.useMemo)(()=>a?.map(e=>parseInt(e.match(/(\d+)px/)?.[1]??"",10))??[],[a]),l=n.findIndex(e=>(t??0)<e);return -1===l&&(l=n.length-1),e=>e[Math.min(l,e.length-1)]},Rh=()=>{let{dirtyItems:e,setDirtyItems:t}=bJ(),r=(0,uq.useRef)(Symbol()).current,a=(0,uq.useCallback)((e=!0)=>t(t=>{let a=new Set(t);if(e)return t.has(r)?t:a.add(r);{let e=a.delete(r);return e?a:t}}),[r,t]);return[e.has(r),a]};var Rg=r(8981);async function Rx(e,t){let r=f9("memex-get-sidepanel-item-api-data"),a=new URL(r.url,window.location.origin);switch(e.kind){case Iq.ISSUE:a.searchParams.set("kind",e.kind),a.searchParams.set("item_id",`${e.itemId}`),a.searchParams.set("repository_id",`${e.repositoryId}`),a.searchParams.set("omit_comments",`${e.omitComments??!1}`),a.searchParams.set("omit_capabilities",`${e.omitCapabilities??!1}`);break;case Iq.PROJECT_DRAFT_ISSUE:a.searchParams.set("kind",e.kind),a.searchParams.set("project_item_id",`${e.projectItemId}`)}let{data:n}=await hh(a,t);return n}async function Ry(e){let t=f8("memex-comment-on-sidepanel-item-api-data"),{data:r}=await hh(t.url,{method:"POST",body:e,token:t.token,contentType:hu.FormData});return r}async function Rb(e){let t=f8("memex-edit-sidepanel-comment-api-data"),{data:r}=await hh(t.url,{method:"PUT",body:e,token:t.token,contentType:hu.FormData});return r}async function Rv(e){let t=f8("memex-update-sidepanel-item-api-data"),{data:r}=await hh(t.url,{method:"POST",body:e,token:t.token,contentType:hu.FormData});return r}async function Rw(e){let t=f8("memex-update-sidepanel-item-reaction-api-data"),{data:r}=await hh(t.url,{method:"POST",body:e,token:t.token,contentType:hu.FormData});return r}async function Rj(e){let t=f8("memex-update-sidepanel-item-state-api-data"),r=new URL(t.url,window.location.origin);r.searchParams.set("kind",Iq.ISSUE);let{data:a}=await hh(r,{method:"POST",body:e,token:t.token,contentType:hu.FormData});return a}function RC(e,t,r,a){let n=e;return a?n[t]=n[t]?.filter(e=>e!==r):t in n?n[t]?.push(r):n[t]=[r],n}let Rk=(0,yJ.r)({primaryKey:"side-panel-item",queryFn:async({queryKey:[e,t],signal:r})=>{let{contentType:a,itemId:n,memexItemId:l,repositoryId:i}=t;switch(a){case mA.Issue:return Rx({kind:Iq.ISSUE,itemId:n,repositoryId:i},{signal:r});case mA.DraftIssue:return Rx({kind:Iq.PROJECT_DRAFT_ISSUE,projectItemId:gc(l)},{signal:r});default:throw Error(`${a} is not supported`)}}}),RS=()=>{let e=(0,uW.NL)();return(0,Rg.D)({mutationFn:async({contentType:e,itemId:t,memexItemId:r,repositoryId:a})=>{switch(e){case mA.Issue:return Rx({kind:Iq.ISSUE,itemId:t,repositoryId:a,omitCapabilities:!0});case mA.DraftIssue:return Rx({kind:Iq.PROJECT_DRAFT_ISSUE,projectItemId:gc(r),omitCapabilities:!0});default:throw Error(`${e} is not supported`)}},onMutate:async({contentType:t,repositoryId:r,itemId:a,memexItemId:n})=>{e.cancelQueries({queryKey:Rk.getKey({contentType:t,repositoryId:r,itemId:a,memexItemId:n})})},onSuccess:async(t,{contentType:r,repositoryId:a,itemId:n,memexItemId:l})=>{e.setQueriesData({queryKey:Rk.getKey({contentType:r,repositoryId:a,itemId:n,memexItemId:l})},e=>e?{...e,...t}:e)}})},RI=()=>{let e=(0,uW.NL)();return(0,Rg.D)({mutationFn:async({contentType:e,itemId:t,memexItemId:r,repositoryId:a,update:n,tasklist_blocks_operation:l,tasklist_blocks_operation_tracker:i})=>{switch(e){case mA.Issue:return Rv({kind:Iq.ISSUE,itemId:t,repositoryId:a,update:n,tasklist_blocks_operation:l,tasklist_blocks_operation_tracker:i});case mA.DraftIssue:return Rv({kind:Iq.PROJECT_DRAFT_ISSUE,projectItemId:gc(r),update:n,tasklist_blocks_operation:l,tasklist_blocks_operation_tracker:i});default:throw Error(`${e} is not supported`)}},onMutate:async({contentType:t,repositoryId:r,itemId:a,memexItemId:n})=>{e.cancelQueries({queryKey:Rk.getKey({contentType:t,repositoryId:r,itemId:a,memexItemId:n})})},onSuccess:async(t,{contentType:r,repositoryId:a,itemId:n,memexItemId:l})=>{e.setQueriesData({queryKey:Rk.getKey({contentType:r,repositoryId:a,itemId:n,memexItemId:l})},e=>e?{...e,...t}:e)},onSettled:(t,r,{contentType:a,repositoryId:n,itemId:l,memexItemId:i})=>{e.invalidateQueries({queryKey:Rk.getKey({contentType:a,repositoryId:n,itemId:l,memexItemId:i})})}})},RN=()=>{let e=(0,uW.NL)();return(0,Rg.D)({mutationFn:async e=>Ry(e),onSuccess:async(t,{repositoryId:r,itemId:a,memexItemId:n,updateState:l,stateReason:i})=>{e.setQueriesData({queryKey:Rk.getKey({contentType:mA.Issue,repositoryId:r,itemId:a,memexItemId:n})},e=>e?{...e,comments:e.comments?.concat(t),state:{state:l??e.state.state,stateReason:i??e.state.stateReason}}:e)},onSettled:(t,r,{repositoryId:a,itemId:n,memexItemId:l})=>{e.invalidateQueries({queryKey:Rk.getKey({contentType:mA.Issue,repositoryId:a,itemId:n,memexItemId:l})})}})},R_=()=>{let e=(0,uW.NL)();return(0,Rg.D)({mutationFn:async e=>Rb(e),onSuccess:async(t,{repositoryId:r,itemId:a,memexItemId:n})=>{e.setQueriesData({queryKey:Rk.getKey({contentType:mA.Issue,repositoryId:r,itemId:a,memexItemId:n})},e=>e?{...e,comments:e.comments?.map(e=>e.id===t.id?t:e)}:e)},onSettled:(t,r,{repositoryId:a,itemId:n,memexItemId:l})=>{e.invalidateQueries({queryKey:Rk.getKey({contentType:mA.Issue,repositoryId:a,itemId:n,memexItemId:l})})}})},RT=()=>{let e=(0,uW.NL)();return(0,Rg.D)({mutationFn:async e=>(await Rw(e),e),onMutate:async({repositoryId:t,itemId:r,memexItemId:a,commentId:n,reaction:l,actor:i,command:s})=>{e.setQueriesData({queryKey:Rk.getKey({contentType:mA.Issue,repositoryId:t,itemId:r,memexItemId:a})},e=>e?void 0===n&&e.reactions?{...e,reactions:RC(e.reactions,l,i,"unreact"===s)}:{...e,comments:e.comments?.map(e=>{if(e.id===n){let t=RC(e.reactions,l,i,"unreact"===s);return{...e,reactions:t}}return e})}:e)},onSettled:(t,r,{repositoryId:a,itemId:n,memexItemId:l})=>{e.invalidateQueries({queryKey:Rk.getKey({contentType:mA.Issue,repositoryId:a,itemId:n,memexItemId:l})})}})},RR=()=>{let e=(0,uW.NL)();return(0,Rg.D)({mutationFn:async e=>(await Rj(e),e),onMutate:t=>{e.setQueriesData({queryKey:Rk.getKey({contentType:mA.Issue,repositoryId:t.repositoryId,itemId:t.itemId,memexItemId:t.memexItemId})},e=>e?{...e,state:{state:t.state??e.state.state,stateReason:t.stateReason??e.state.stateReason}}:e)},onSettled:(t,r,{itemId:a,repositoryId:n,memexItemId:l})=>{e.invalidateQueries({queryKey:Rk.getKey({contentType:mA.Issue,itemId:a,repositoryId:n,memexItemId:l})})}})},RE={itemKey:{kind:Iq.ISSUE,repositoryId:0,itemId:0},title:{raw:"",html:""},description:{body:"",bodyHtml:""},createdAt:"",updatedAt:"",user:{id:0,global_relay_id:"",login:"",name:"",avatarUrl:""},state:{state:yh.Open},capabilities:[],liveUpdateChannel:"",url:"",issueNumber:0},RD=(0,uq.createContext)(null),RP=class UnsupportedActionError extends TypeError{constructor(e){super(`Item does not support ${e}.`),Object.setPrototypeOf(this,new.target.prototype),this.name="UnsupportedActionError"}},RA=(0,uq.memo)(function({children:e,contentType:t,itemId:r,memexItemId:a,repositoryId:n}){let{findMemexItem:l}=IO(),{setColumnValue:i}=IL(),{postStats:s}=bM(),{data:o=RE,isInitialLoading:d}=Rk({variables:{contentType:t,itemId:r,repositoryId:n,memexItemId:a}}),c=m1(({name:e,context:r={}})=>{s({name:e,context:JSON.stringify({contentType:t,...r})})}),{mutate:u}=RS(),m=m1(async(e=!1)=>{u({contentType:t,itemId:r,repositoryId:n,memexItemId:a},{onSuccess:()=>{c.current({name:"side_panel_metadata_refresh",context:{fromSocketEvent:e}})}})}),p=(0,uq.useMemo)(()=>(0,b7.Z)((...e)=>m.current(...e),1250),[m]),{mutateAsync:f}=RI(),h=(0,uq.useCallback)(async(e,s,o)=>f({contentType:t,itemId:r,memexItemId:a,repositoryId:n,update:e,tasklist_blocks_operation:s,tasklist_blocks_operation_tracker:o},{onSettled:()=>{c.current({name:"side_panel_edit_item",context:{updates:Object.keys(e)}})},onSuccess:e=>{if(a&&e){let t=l(a);if(t){let r=t.columns.Title?.value;if(r&&r.title!==e.title){let a=vr({dataType:mD.Title,value:{...r,title:e.title}});a&&i(t,a)}}}}}),[t,f,l,r,a,c,n,i]),g=(0,uq.useCallback)(async e=>h({title:e}),[h]),x=(0,uq.useCallback)(async e=>h({labels:e}),[h]),y=(0,uq.useCallback)(async e=>h({assignees:e}),[h]),b=(0,uq.useCallback)(async e=>h({milestone:e}),[h]),{mutateAsync:v}=RN(),w=(0,uq.useCallback)(async(e,t,l)=>{let i=o.comments;if(!i)throw new RP("comments");return v({kind:Iq.ISSUE,itemId:r,repositoryId:n,comment:e,updateState:t,stateReason:l,memexItemId:a},{onSuccess:()=>{c.current({name:"side_panel_post_comment",context:{state:t,stateReason:l}})}})},[o.comments,v,r,n,a,c]),{mutateAsync:j}=R_(),C=(0,uq.useCallback)(async(e,t)=>{let l=o.comments;if(!l)throw new RP("comments");return j({kind:Iq.ISSUE,itemId:r,repositoryId:n,commentId:e,body:t,memexItemId:a},{onSuccess:()=>{c.current({name:"side_panel_edit_comment"})}})},[o.comments,j,r,n,a,c]),{mutate:k}=RT(),S=(0,uq.useCallback)(async(e,t,l,i)=>{if(!o.reactions)throw new RP("reactions");return k({reaction:e,command:t?"unreact":"react",commentId:i,itemId:r,repositoryId:n,actor:l,memexItemId:a,kind:Iq.ISSUE},{onSuccess:()=>{c.current({name:"side_panel_react",context:{command:t?"unreact":"react",subject:i?"comment":"issue"}})}})},[o.reactions,k,r,n,a,c]),{mutate:I}=RR(),N=(0,uq.useCallback)(async(e,l)=>{if(t!==mA.Issue)throw new RP("state updates");return I({state:e,stateReason:l,itemId:r,repositoryId:n,memexItemId:a,kind:Iq.ISSUE},{onSuccess:()=>{c.current({name:"side_panel_update_issue_state",context:{state:e,stateReason:l}})}})},[t,I,r,n,a,c]),_=(0,uq.useMemo)(()=>({isLoading:d,sidePanelMetadata:o,editIssue:h,editIssueTitle:g,addIssueComment:w,editIssueComment:C,reactToSidePanelItem:S,updateSidePanelItemState:N,editIssueLabels:x,editIssueAssignees:y,editIssueMilestone:b,reloadSidePanelMetadata:p}),[d,o,h,g,w,C,x,y,b,S,N,p]);return(0,uO.jsx)(RD.Provider,{value:_,children:e})});try{(re=RD).displayName||(re.displayName="IssueContext")}catch{}try{(rt=RA).displayName||(rt.displayName="IssueStateProvider")}catch{}let RM=()=>{let e=(0,uq.useContext)(RD);if(!e)throw Error("useIssueContext must be used within a IssueContext.Provider.");return e};async function RL({text:e,context:t}){let r=f9("memex-preview-markdown-api-data"),a={text:e};t&&(a.repository=t.repositoryId,a.subject_type=t.subjectType,"issueId"in t&&(a.issue=t.issueId),"pullRequestId"in t&&(a.pull_request=t.pullRequestId),"discussionId"in t&&(a.discussion=t.discussionId));let n=await hv(r.url,{method:"POST",body:hp(a),headers:{Accept:"text/html","Content-Type":hu.FormData}});return n.text()}let RF=e=>{let[t,r]=(0,uq.useState)(""),[a,n]=(0,uq.useState)(!1),l=(0,uq.useCallback)(async t=>{n(!0),r("");let a=await RL({text:t,context:e});return n(!1),r(a),a},[e]);return{html:t,isLoading:a,loadPreview:l}};async function RZ(e){ID();let t=f9("memex-update-api-data"),{memex_skip_json_parsing_if_invalid_response_and_content_found:r}=ho(),{data:a}=await hx(t.url,{method:"PUT",body:e},r);return a}let RO=()=>{let e=f3(),{setProject:t}=TI(),r=(0,uq.useCallback)(async r=>{if(r=r.trim(),e.description===r)return;let a=await RZ({description:r});t(a.memexProject)},[e.description,t]);return{updateDescription:r}};var RB=r(99252),RV=r(66280);async function R$(e){let t=f8("memex-get-asset-upload-policy-api-data"),{data:r}=await hh(t.url,{method:"POST",body:e,token:t.token,contentType:hu.FormData});return r}async function Rz(e,{file:t}){let r=new FormData;for(let[t,a]of(e.same_origin&&r.append("authenticity_token",e.upload_authenticity_token),Object.entries(e.form)))r.append(t,a);r.append("file",t);let a=await hb(e.upload_url,{method:"POST",headers:e.header,body:r}),n="href"in e.asset?e.asset:await a.json();return await RU(e),n}async function RU(e){if(!("asset_upload_url"in e))return;let t=new FormData;t.append("authenticity_token",e.asset_upload_authenticity_token),await hb(e.asset_upload_url,{method:"PUT",body:t,credentials:"same-origin",headers:{Accept:"application/json"}})}async function RW({subjectId:e,subjectType:t,subjectRepo:r}){let a=f8("memex-global-suggester-api-data"),n=new URL(`${a.url}/${t}/${e}`,window.location.origin);n.searchParams.append("mention_suggester","1"),n.searchParams.append("repository_id",`${r}`);let{data:l}=await hh(n);return l}async function RH({subjectId:e,subjectType:t,subjectRepo:r}){let a=f9("memex-global-suggester-api-data"),n=new URL(`${a.url}/${t}/${e}`,window.location.origin);n.searchParams.set("issue_suggester","1"),n.searchParams.set("repository_id",`${r}`);let{data:l}=await hh(n);return l}let RG={"+1":"\u{1F44D}","-1":"\u{1F44E}",100:"\u{1F4AF}",1234:"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}",ab:"\u{1F18E}",abacus:"\u{1F9EE}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",adhesive_bandage:"\u{1FA79}",adult:"\u{1F9D1}",aerial_tramway:"\u{1F6A1}",afghanistan:"\u{1F1E6}\u200D\u{1F1EB}",airplane:"\u2708",aland_islands:"\u{1F1E6}\u200D\u{1F1FD}",alarm_clock:"\u23F0",albania:"\u{1F1E6}\u200D\u{1F1F1}",alembic:"\u2697",algeria:"\u{1F1E9}\u200D\u{1F1FF}",alien:"\u{1F47D}",ambulance:"\u{1F691}",american_samoa:"\u{1F1E6}\u200D\u{1F1F8}",amphora:"\u{1F3FA}",anchor:"\u2693",andorra:"\u{1F1E6}\u200D\u{1F1E9}",angel:"\u{1F47C}",anger:"\u{1F4A2}",angola:"\u{1F1E6}\u200D\u{1F1F4}",angry:"\u{1F620}",anguilla:"\u{1F1E6}\u200D\u{1F1EE}",anguished:"\u{1F627}",ant:"\u{1F41C}",antarctica:"\u{1F1E6}\u200D\u{1F1F6}",antigua_barbuda:"\u{1F1E6}\u200D\u{1F1EC}",apple:"\u{1F34E}",aquarius:"\u2652",argentina:"\u{1F1E6}\u200D\u{1F1F7}",aries:"\u2648",armenia:"\u{1F1E6}\u200D\u{1F1F2}",arrow_backward:"\u25C0",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6",arrow_heading_down:"\u2935",arrow_heading_up:"\u2934",arrow_left:"\u2B05",arrow_lower_left:"\u2199",arrow_lower_right:"\u2198",arrow_right:"\u27A1",arrow_right_hook:"\u21AA",arrow_up:"\u2B06",arrow_up_down:"\u2195",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196",arrow_upper_right:"\u2197",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",artist:"\u{1F9D1}\u200D\u{1F3A8}",aruba:"\u{1F1E6}\u200D\u{1F1FC}",ascension_island:"\u{1F1E6}\u200D\u{1F1E8}",asterisk:"*\u200D\u20E3",astonished:"\u{1F632}",astronaut:"\u{1F9D1}\u200D\u{1F680}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B",australia:"\u{1F1E6}\u200D\u{1F1FA}",austria:"\u{1F1E6}\u200D\u{1F1F9}",auto_rickshaw:"\u{1F6FA}",avocado:"\u{1F951}",axe:"\u{1FA93}",azerbaijan:"\u{1F1E6}\u200D\u{1F1FF}",b:"\u{1F171}",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badger:"\u{1F9A1}",badminton:"\u{1F3F8}",bagel:"\u{1F96F}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",bahamas:"\u{1F1E7}\u200D\u{1F1F8}",bahrain:"\u{1F1E7}\u200D\u{1F1ED}",balance_scale:"\u2696",bald_man:"\u{1F468}\u200D\u{1F9B2}",bald_woman:"\u{1F469}\u200D\u{1F9B2}",ballet_shoes:"\u{1FA70}",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C",bangladesh:"\u{1F1E7}\u200D\u{1F1E9}",banjo:"\u{1FA95}",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barbados:"\u{1F1E7}\u200D\u{1F1E7}",barber:"\u{1F488}",baseball:"\u26BE",basket:"\u{1F9FA}",basketball:"\u{1F3C0}",basketball_man:"\u26F9\u200D\u2642",basketball_woman:"\u26F9\u200D\u2640",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bearded_person:"\u{1F9D4}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",belarus:"\u{1F1E7}\u200D\u{1F1FE}",belgium:"\u{1F1E7}\u200D\u{1F1EA}",belize:"\u{1F1E7}\u200D\u{1F1FF}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",benin:"\u{1F1E7}\u200D\u{1F1EF}",bento:"\u{1F371}",bermuda:"\u{1F1E7}\u200D\u{1F1F2}",beverage_box:"\u{1F9C3}",bhutan:"\u{1F1E7}\u200D\u{1F1F9}",bicyclist:"\u{1F6B4}",bike:"\u{1F6B2}",biking_man:"\u{1F6B4}\u200D\u2642",biking_woman:"\u{1F6B4}\u200D\u2640",bikini:"\u{1F459}",billed_cap:"\u{1F9E2}",biohazard:"\u2623",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B",black_medium_small_square:"\u25FE",black_medium_square:"\u25FC",black_nib:"\u2712",black_small_square:"\u25AA",black_square_button:"\u{1F532}",blond_haired_man:"\u{1F471}\u200D\u2642",blond_haired_person:"\u{1F471}",blond_haired_woman:"\u{1F471}\u200D\u2640",blonde_woman:"\u{1F471}\u200D\u2640",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blue_square:"\u{1F7E6}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5",bolivia:"\u{1F1E7}\u200D\u{1F1F4}",bomb:"\u{1F4A3}",bone:"\u{1F9B4}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bosnia_herzegovina:"\u{1F1E7}\u200D\u{1F1E6}",botswana:"\u{1F1E7}\u200D\u{1F1FC}",bouncing_ball_man:"\u26F9\u200D\u2642",bouncing_ball_person:"\u26F9",bouncing_ball_woman:"\u26F9\u200D\u2640",bouquet:"\u{1F490}",bouvet_island:"\u{1F1E7}\u200D\u{1F1FB}",bow:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_man:"\u{1F647}\u200D\u2642",bowing_woman:"\u{1F647}\u200D\u2640",bowl_with_spoon:"\u{1F963}",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",brain:"\u{1F9E0}",brazil:"\u{1F1E7}\u200D\u{1F1F7}",bread:"\u{1F35E}",breast_feeding:"\u{1F931}",bricks:"\u{1F9F1}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",british_indian_ocean_territory:"\u{1F1EE}\u200D\u{1F1F4}",british_virgin_islands:"\u{1F1FB}\u200D\u{1F1EC}",broccoli:"\u{1F966}",broken_heart:"\u{1F494}",broom:"\u{1F9F9}",brown_circle:"\u{1F7E4}",brown_heart:"\u{1F90E}",brown_square:"\u{1F7EB}",brunei:"\u{1F1E7}\u200D\u{1F1F3}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bulgaria:"\u{1F1E7}\u200D\u{1F1EC}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burkina_faso:"\u{1F1E7}\u200D\u{1F1EB}",burrito:"\u{1F32F}",burundi:"\u{1F1E7}\u200D\u{1F1EE}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butter:"\u{1F9C8}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",cambodia:"\u{1F1F0}\u200D\u{1F1ED}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",cameroon:"\u{1F1E8}\u200D\u{1F1F2}",camping:"\u{1F3D5}",canada:"\u{1F1E8}\u200D\u{1F1E6}",canary_islands:"\u{1F1EE}\u200D\u{1F1E8}",cancer:"\u264B",candle:"\u{1F56F}",candy:"\u{1F36C}",canned_food:"\u{1F96B}",canoe:"\u{1F6F6}",cape_verde:"\u{1F1E8}\u200D\u{1F1FB}",capital_abcd:"\u{1F520}",capricorn:"\u2651",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",caribbean_netherlands:"\u{1F1E7}\u200D\u{1F1F6}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cartwheeling:"\u{1F938}",cat:"\u{1F431}",cat2:"\u{1F408}",cayman_islands:"\u{1F1F0}\u200D\u{1F1FE}",cd:"\u{1F4BF}",central_african_republic:"\u{1F1E8}\u200D\u{1F1EB}",ceuta_melilla:"\u{1F1EA}\u200D\u{1F1E6}",chad:"\u{1F1F9}\u200D\u{1F1E9}",chains:"\u26D3",chair:"\u{1FA91}",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chess_pawn:"\u265F",chestnut:"\u{1F330}",chicken:"\u{1F414}",child:"\u{1F9D2}",children_crossing:"\u{1F6B8}",chile:"\u{1F1E8}\u200D\u{1F1F1}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",chopsticks:"\u{1F962}",christmas_island:"\u{1F1E8}\u200D\u{1F1FD}",christmas_tree:"\u{1F384}",church:"\u26EA",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",climbing:"\u{1F9D7}",climbing_man:"\u{1F9D7}\u200D\u2642",climbing_woman:"\u{1F9D7}\u200D\u2640",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clipperton_island:"\u{1F1E8}\u200D\u{1F1F5}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663",cn:"\u{1F1E8}\u200D\u{1F1F3}",coat:"\u{1F9E5}",cocktail:"\u{1F378}",coconut:"\u{1F965}",cocos_islands:"\u{1F1E8}\u200D\u{1F1E8}",coffee:"\u2615",coffin:"\u26B0",cold_face:"\u{1F976}",cold_sweat:"\u{1F630}",collision:"\u{1F4A5}",colombia:"\u{1F1E8}\u200D\u{1F1F4}",comet:"\u2604",comoros:"\u{1F1F0}\u200D\u{1F1F2}",compass:"\u{1F9ED}",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congo_brazzaville:"\u{1F1E8}\u200D\u{1F1EC}",congo_kinshasa:"\u{1F1E8}\u200D\u{1F1E9}",congratulations:"\u3297",construction:"\u{1F6A7}",construction_worker:"\u{1F477}",construction_worker_man:"\u{1F477}\u200D\u2642",construction_worker_woman:"\u{1F477}\u200D\u2640",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cook:"\u{1F9D1}\u200D\u{1F373}",cook_islands:"\u{1F1E8}\u200D\u{1F1F0}",cookie:"\u{1F36A}",cool:"\u{1F192}",cop:"\u{1F46E}",copyright:"\xa9",corn:"\u{1F33D}",costa_rica:"\u{1F1E8}\u200D\u{1F1F7}",cote_divoire:"\u{1F1E8}\u200D\u{1F1EE}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}\u200D\u2764\u200D\u{1F468}",couple_with_heart_woman_man:"\u{1F469}\u200D\u2764\u200D\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}\u200D\u2764\u200D\u{1F469}",couplekiss:"\u{1F48F}",couplekiss_man_man:"\u{1F468}\u200D\u2764\u200D\u{1F48B}\u200D\u{1F468}",couplekiss_man_woman:"\u{1F469}\u200D\u2764\u200D\u{1F48B}\u200D\u{1F468}",couplekiss_woman_woman:"\u{1F469}\u200D\u2764\u200D\u{1F48B}\u200D\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F997}",cricket_game:"\u{1F3CF}",croatia:"\u{1F1ED}\u200D\u{1F1F7}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cuba:"\u{1F1E8}\u200D\u{1F1FA}",cucumber:"\u{1F952}",cup_with_straw:"\u{1F964}",cupcake:"\u{1F9C1}",cupid:"\u{1F498}",curacao:"\u{1F1E8}\u200D\u{1F1FC}",curling_stone:"\u{1F94C}",curly_haired_man:"\u{1F468}\u200D\u{1F9B1}",curly_haired_woman:"\u{1F469}\u200D\u{1F9B1}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",cursing_face:"\u{1F92C}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cut_of_meat:"\u{1F969}",cyclone:"\u{1F300}",cyprus:"\u{1F1E8}\u200D\u{1F1FE}",czech_republic:"\u{1F1E8}\u200D\u{1F1FF}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancers:"\u{1F46F}",dancing_men:"\u{1F46F}\u200D\u2642",dancing_women:"\u{1F46F}\u200D\u2640",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",de:"\u{1F1E9}\u200D\u{1F1EA}",deaf_man:"\u{1F9CF}\u200D\u2642",deaf_person:"\u{1F9CF}",deaf_woman:"\u{1F9CF}\u200D\u2640",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",denmark:"\u{1F1E9}\u200D\u{1F1F0}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",detective:"\u{1F575}",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666",diego_garcia:"\u{1F1E9}\u200D\u{1F1EC}",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",diving_mask:"\u{1F93F}",diya_lamp:"\u{1FA94}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",djibouti:"\u{1F1E9}\u200D\u{1F1EF}",dna:"\u{1F9EC}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",dominica:"\u{1F1E9}\u200D\u{1F1F2}",dominican_republic:"\u{1F1E9}\u200D\u{1F1F4}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",drop_of_blood:"\u{1FA78}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dumpling:"\u{1F95F}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",ear_with_hearing_aid:"\u{1F9BB}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",ecuador:"\u{1F1EA}\u200D\u{1F1E8}",egg:"\u{1F95A}",eggplant:"\u{1F346}",egypt:"\u{1F1EA}\u200D\u{1F1EC}",eight:"8\u200D\u20E3",eight_pointed_black_star:"\u2734",eight_spoked_asterisk:"\u2733",eject_button:"\u23CF",el_salvador:"\u{1F1F8}\u200D\u{1F1FB}",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",elf:"\u{1F9DD}",elf_man:"\u{1F9DD}\u200D\u2642",elf_woman:"\u{1F9DD}\u200D\u2640",email:"\u2709",end:"\u{1F51A}",england:"\u{1F3F4}\u200D\u{E0067}\u200D\u{E0062}\u200D\u{E0065}\u200D\u{E006E}\u200D\u{E0067}\u200D\u{E007F}",envelope:"\u2709",envelope_with_arrow:"\u{1F4E9}",equatorial_guinea:"\u{1F1EC}\u200D\u{1F1F6}",eritrea:"\u{1F1EA}\u200D\u{1F1F7}",es:"\u{1F1EA}\u200D\u{1F1F8}",estonia:"\u{1F1EA}\u200D\u{1F1EA}",ethiopia:"\u{1F1EA}\u200D\u{1F1F9}",eu:"\u{1F1EA}\u200D\u{1F1FA}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",european_union:"\u{1F1EA}\u200D\u{1F1FA}",evergreen_tree:"\u{1F332}",exclamation:"\u2757",exploding_head:"\u{1F92F}",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}\u200D\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",facepalm:"\u{1F926}",facepunch:"\u{1F44A}",factory:"\u{1F3ED}",factory_worker:"\u{1F9D1}\u200D\u{1F3ED}",fairy:"\u{1F9DA}",fairy_man:"\u{1F9DA}\u200D\u2642",fairy_woman:"\u{1F9DA}\u200D\u2640",falafel:"\u{1F9C6}",falkland_islands:"\u{1F1EB}\u200D\u{1F1F0}",fallen_leaf:"\u{1F342}",family:"\u{1F46A}",family_man_boy:"\u{1F468}\u200D\u{1F466}",family_man_boy_boy:"\u{1F468}\u200D\u{1F466}\u200D\u{1F466}",family_man_girl:"\u{1F468}\u200D\u{1F467}",family_man_girl_boy:"\u{1F468}\u200D\u{1F467}\u200D\u{1F466}",family_man_girl_girl:"\u{1F468}\u200D\u{1F467}\u200D\u{1F467}",family_man_man_boy:"\u{1F468}\u200D\u{1F468}\u200D\u{1F466}",family_man_man_boy_boy:"\u{1F468}\u200D\u{1F468}\u200D\u{1F466}\u200D\u{1F466}",family_man_man_girl:"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}",family_man_man_girl_boy:"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F466}",family_man_man_girl_girl:"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F467}",family_man_woman_boy:"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}",family_man_woman_boy_boy:"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}",family_man_woman_girl:"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}",family_man_woman_girl_boy:"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}",family_man_woman_girl_girl:"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}",family_woman_boy:"\u{1F469}\u200D\u{1F466}",family_woman_boy_boy:"\u{1F469}\u200D\u{1F466}\u200D\u{1F466}",family_woman_girl:"\u{1F469}\u200D\u{1F467}",family_woman_girl_boy:"\u{1F469}\u200D\u{1F467}\u200D\u{1F466}",family_woman_girl_girl:"\u{1F469}\u200D\u{1F467}\u200D\u{1F467}",family_woman_woman_boy:"\u{1F469}\u200D\u{1F469}\u200D\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}",family_woman_woman_girl:"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}",farmer:"\u{1F9D1}\u200D\u{1F33E}",faroe_islands:"\u{1F1EB}\u200D\u{1F1F4}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\u200D\u2640",female_sign:"\u2640",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",fiji:"\u{1F1EB}\u200D\u{1F1EF}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",finland:"\u{1F1EB}\u200D\u{1F1EE}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fire_extinguisher:"\u{1F9EF}",firecracker:"\u{1F9E8}",firefighter:"\u{1F9D1}\u200D\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist:"\u270A",fist_left:"\u{1F91B}",fist_oncoming:"\u{1F44A}",fist_raised:"\u270A",fist_right:"\u{1F91C}",five:"5\u200D\u20E3",flags:"\u{1F38F}",flamingo:"\u{1F9A9}",flashlight:"\u{1F526}",flat_shoe:"\u{1F97F}",fleur_de_lis:"\u269C",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",flipper:"\u{1F42C}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",flying_disc:"\u{1F94F}",flying_saucer:"\u{1F6F8}",fog:"\u{1F32B}",foggy:"\u{1F301}",foot:"\u{1F9B6}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fortune_cookie:"\u{1F960}",fountain:"\u26F2",fountain_pen:"\u{1F58B}",four:"4\u200D\u20E3",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",fr:"\u{1F1EB}\u200D\u{1F1F7}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",french_guiana:"\u{1F1EC}\u200D\u{1F1EB}",french_polynesia:"\u{1F1F5}\u200D\u{1F1EB}",french_southern_territories:"\u{1F1F9}\u200D\u{1F1EB}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639",frowning_man:"\u{1F64D}\u200D\u2642",frowning_person:"\u{1F64D}",frowning_woman:"\u{1F64D}\u200D\u2640",fu:"\u{1F595}",fuelpump:"\u26FD",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1",gabon:"\u{1F1EC}\u200D\u{1F1E6}",gambia:"\u{1F1EC}\u200D\u{1F1F2}",game_die:"\u{1F3B2}",garlic:"\u{1F9C4}",gb:"\u{1F1EC}\u200D\u{1F1E7}",gear:"\u2699",gem:"\u{1F48E}",gemini:"\u264A",genie:"\u{1F9DE}",genie_man:"\u{1F9DE}\u200D\u2642",genie_woman:"\u{1F9DE}\u200D\u2640",georgia:"\u{1F1EC}\u200D\u{1F1EA}",ghana:"\u{1F1EC}\u200D\u{1F1ED}",ghost:"\u{1F47B}",gibraltar:"\u{1F1EC}\u200D\u{1F1EE}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",giraffe:"\u{1F992}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",gloves:"\u{1F9E4}",goal_net:"\u{1F945}",goat:"\u{1F410}",goggles:"\u{1F97D}",golf:"\u26F3",golfing:"\u{1F3CC}",golfing_man:"\u{1F3CC}\u200D\u2642",golfing_woman:"\u{1F3CC}\u200D\u2640",gorilla:"\u{1F98D}",grapes:"\u{1F347}",greece:"\u{1F1EC}\u200D\u{1F1F7}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_circle:"\u{1F7E2}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",green_square:"\u{1F7E9}",greenland:"\u{1F1EC}\u200D\u{1F1F1}",grenada:"\u{1F1EC}\u200D\u{1F1E9}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guadeloupe:"\u{1F1EC}\u200D\u{1F1F5}",guam:"\u{1F1EC}\u200D\u{1F1FA}",guard:"\u{1F482}",guardsman:"\u{1F482}\u200D\u2642",guardswoman:"\u{1F482}\u200D\u2640",guatemala:"\u{1F1EC}\u200D\u{1F1F9}",guernsey:"\u{1F1EC}\u200D\u{1F1EC}",guide_dog:"\u{1F9AE}",guinea:"\u{1F1EC}\u200D\u{1F1F3}",guinea_bissau:"\u{1F1EC}\u200D\u{1F1FC}",guitar:"\u{1F3B8}",gun:"\u{1F52B}",guyana:"\u{1F1EC}\u200D\u{1F1FE}",haircut:"\u{1F487}",haircut_man:"\u{1F487}\u200D\u2642",haircut_woman:"\u{1F487}\u200D\u2640",haiti:"\u{1F1ED}\u200D\u{1F1F9}",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",hand_over_mouth:"\u{1F92D}",handbag:"\u{1F45C}",handball_person:"\u{1F93E}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hash:"#\u200D\u20E3",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",health_worker:"\u{1F9D1}\u200D\u2695",hear_no_evil:"\u{1F649}",heard_mcdonald_islands:"\u{1F1ED}\u200D\u{1F1F2}",heart:"\u2764",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665",heavy_check_mark:"\u2714",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_exclamation_mark:"\u2757",heavy_heart_exclamation:"\u2763",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716",heavy_plus_sign:"\u2795",hedgehog:"\u{1F994}",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hiking_boot:"\u{1F97E}",hindu_temple:"\u{1F6D5}",hippopotamus:"\u{1F99B}",hocho:"\u{1F52A}",hole:"\u{1F573}",honduras:"\u{1F1ED}\u200D\u{1F1F3}",honey_pot:"\u{1F36F}",honeybee:"\u{1F41D}",hong_kong:"\u{1F1ED}\u200D\u{1F1F0}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_face:"\u{1F975}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668",hourglass:"\u231B",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hungary:"\u{1F1ED}\u200D\u{1F1FA}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_cube:"\u{1F9CA}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",iceland:"\u{1F1EE}\u200D\u{1F1F8}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",india:"\u{1F1EE}\u200D\u{1F1F3}",indonesia:"\u{1F1EE}\u200D\u{1F1E9}",infinity:"\u267E",information_desk_person:"\u{1F481}",information_source:"\u2139",innocent:"\u{1F607}",interrobang:"\u2049",iphone:"\u{1F4F1}",iran:"\u{1F1EE}\u200D\u{1F1F7}",iraq:"\u{1F1EE}\u200D\u{1F1F6}",ireland:"\u{1F1EE}\u200D\u{1F1EA}",isle_of_man:"\u{1F1EE}\u200D\u{1F1F2}",israel:"\u{1F1EE}\u200D\u{1F1F1}",it:"\u{1F1EE}\u200D\u{1F1F9}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",jamaica:"\u{1F1EF}\u200D\u{1F1F2}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",jersey:"\u{1F1EF}\u200D\u{1F1EA}",jigsaw:"\u{1F9E9}",jordan:"\u{1F1EF}\u200D\u{1F1F4}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",jp:"\u{1F1EF}\u200D\u{1F1F5}",judge:"\u{1F9D1}\u200D\u2696",juggling_person:"\u{1F939}",kaaba:"\u{1F54B}",kangaroo:"\u{1F998}",kazakhstan:"\u{1F1F0}\u200D\u{1F1FF}",kenya:"\u{1F1F0}\u200D\u{1F1EA}",key:"\u{1F511}",keyboard:"\u2328",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiribati:"\u{1F1F0}\u200D\u{1F1EE}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kite:"\u{1FA81}",kiwi_fruit:"\u{1F95D}",kneeling_man:"\u{1F9CE}\u200D\u2642",kneeling_person:"\u{1F9CE}",kneeling_woman:"\u{1F9CE}\u200D\u2640",knife:"\u{1F52A}",koala:"\u{1F428}",koko:"\u{1F201}",kosovo:"\u{1F1FD}\u200D\u{1F1F0}",kr:"\u{1F1F0}\u200D\u{1F1F7}",kuwait:"\u{1F1F0}\u200D\u{1F1FC}",kyrgyzstan:"\u{1F1F0}\u200D\u{1F1EC}",lab_coat:"\u{1F97C}",label:"\u{1F3F7}",lacrosse:"\u{1F94D}",lantern:"\u{1F3EE}",laos:"\u{1F1F1}\u200D\u{1F1E6}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D",latvia:"\u{1F1F1}\u200D\u{1F1FB}",laughing:"\u{1F606}",leafy_green:"\u{1F96C}",leaves:"\u{1F343}",lebanon:"\u{1F1F1}\u200D\u{1F1E7}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194",left_speech_bubble:"\u{1F5E8}",leftwards_arrow_with_hook:"\u21A9",leg:"\u{1F9B5}",lemon:"\u{1F34B}",leo:"\u264C",leopard:"\u{1F406}",lesotho:"\u{1F1F1}\u200D\u{1F1F8}",level_slider:"\u{1F39A}",liberia:"\u{1F1F1}\u200D\u{1F1F7}",libra:"\u264E",libya:"\u{1F1F1}\u200D\u{1F1FE}",liechtenstein:"\u{1F1F1}\u200D\u{1F1EE}",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lithuania:"\u{1F1F1}\u200D\u{1F1F9}",lizard:"\u{1F98E}",llama:"\u{1F999}",lobster:"\u{1F99E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",lotion_bottle:"\u{1F9F4}",lotus_position:"\u{1F9D8}",lotus_position_man:"\u{1F9D8}\u200D\u2642",lotus_position_woman:"\u{1F9D8}\u200D\u2640",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",love_you_gesture:"\u{1F91F}",low_brightness:"\u{1F505}",luggage:"\u{1F9F3}",luxembourg:"\u{1F1F1}\u200D\u{1F1FA}",lying_face:"\u{1F925}",m:"\u24C2",macau:"\u{1F1F2}\u200D\u{1F1F4}",macedonia:"\u{1F1F2}\u200D\u{1F1F0}",madagascar:"\u{1F1F2}\u200D\u{1F1EC}",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mage:"\u{1F9D9}",mage_man:"\u{1F9D9}\u200D\u2642",mage_woman:"\u{1F9D9}\u200D\u2640",magnet:"\u{1F9F2}",mahjong:"\u{1F004}",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",malawi:"\u{1F1F2}\u200D\u{1F1FC}",malaysia:"\u{1F1F2}\u200D\u{1F1FE}",maldives:"\u{1F1F2}\u200D\u{1F1FB}",male_detective:"\u{1F575}\u200D\u2642",male_sign:"\u2642",mali:"\u{1F1F2}\u200D\u{1F1F1}",malta:"\u{1F1F2}\u200D\u{1F1F9}",man:"\u{1F468}",man_artist:"\u{1F468}\u200D\u{1F3A8}",man_astronaut:"\u{1F468}\u200D\u{1F680}",man_cartwheeling:"\u{1F938}\u200D\u2642",man_cook:"\u{1F468}\u200D\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}\u200D\u2642",man_factory_worker:"\u{1F468}\u200D\u{1F3ED}",man_farmer:"\u{1F468}\u200D\u{1F33E}",man_firefighter:"\u{1F468}\u200D\u{1F692}",man_health_worker:"\u{1F468}\u200D\u2695",man_in_manual_wheelchair:"\u{1F468}\u200D\u{1F9BD}",man_in_motorized_wheelchair:"\u{1F468}\u200D\u{1F9BC}",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}\u200D\u2696",man_juggling:"\u{1F939}\u200D\u2642",man_mechanic:"\u{1F468}\u200D\u{1F527}",man_office_worker:"\u{1F468}\u200D\u{1F4BC}",man_pilot:"\u{1F468}\u200D\u2708",man_playing_handball:"\u{1F93E}\u200D\u2642",man_playing_water_polo:"\u{1F93D}\u200D\u2642",man_scientist:"\u{1F468}\u200D\u{1F52C}",man_shrugging:"\u{1F937}\u200D\u2642",man_singer:"\u{1F468}\u200D\u{1F3A4}",man_student:"\u{1F468}\u200D\u{1F393}",man_teacher:"\u{1F468}\u200D\u{1F3EB}",man_technologist:"\u{1F468}\u200D\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_probing_cane:"\u{1F468}\u200D\u{1F9AF}",man_with_turban:"\u{1F473}\u200D\u2642",mandarin:"\u{1F34A}",mango:"\u{1F96D}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",manual_wheelchair:"\u{1F9BD}",maple_leaf:"\u{1F341}",marshall_islands:"\u{1F1F2}\u200D\u{1F1ED}",martial_arts_uniform:"\u{1F94B}",martinique:"\u{1F1F2}\u200D\u{1F1F6}",mask:"\u{1F637}",massage:"\u{1F486}",massage_man:"\u{1F486}\u200D\u2642",massage_woman:"\u{1F486}\u200D\u2640",mate:"\u{1F9C9}",mauritania:"\u{1F1F2}\u200D\u{1F1F7}",mauritius:"\u{1F1F2}\u200D\u{1F1FA}",mayotte:"\u{1F1FE}\u200D\u{1F1F9}",meat_on_bone:"\u{1F356}",mechanic:"\u{1F9D1}\u200D\u{1F527}",mechanical_arm:"\u{1F9BE}",mechanical_leg:"\u{1F9BF}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",medical_symbol:"\u2695",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}\u200D\u2642",menorah:"\u{1F54E}",mens:"\u{1F6B9}",mermaid:"\u{1F9DC}\u200D\u2640",merman:"\u{1F9DC}\u200D\u2642",merperson:"\u{1F9DC}",metal:"\u{1F918}",metro:"\u{1F687}",mexico:"\u{1F1F2}\u200D\u{1F1FD}",microbe:"\u{1F9A0}",micronesia:"\u{1F1EB}\u200D\u{1F1F2}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",middle_finger:"\u{1F595}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",moldova:"\u{1F1F2}\u200D\u{1F1E9}",monaco:"\u{1F1F2}\u200D\u{1F1E8}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",mongolia:"\u{1F1F2}\u200D\u{1F1F3}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monocle_face:"\u{1F9D0}",monorail:"\u{1F69D}",montenegro:"\u{1F1F2}\u200D\u{1F1EA}",montserrat:"\u{1F1F2}\u200D\u{1F1F8}",moon:"\u{1F314}",moon_cake:"\u{1F96E}",morocco:"\u{1F1F2}\u200D\u{1F1E6}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",mosquito:"\u{1F99F}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorized_wheelchair:"\u{1F9BC}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_bicyclist:"\u{1F6B5}",mountain_biking_man:"\u{1F6B5}\u200D\u2642",mountain_biking_woman:"\u{1F6B5}\u200D\u2640",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mozambique:"\u{1F1F2}\u200D\u{1F1FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",myanmar:"\u{1F1F2}\u200D\u{1F1F2}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",namibia:"\u{1F1F3}\u200D\u{1F1E6}",national_park:"\u{1F3DE}",nauru:"\u{1F1F3}\u200D\u{1F1F7}",nauseated_face:"\u{1F922}",nazar_amulet:"\u{1F9FF}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nepal:"\u{1F1F3}\u200D\u{1F1F5}",nerd_face:"\u{1F913}",netherlands:"\u{1F1F3}\u200D\u{1F1F1}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_caledonia:"\u{1F1F3}\u200D\u{1F1E8}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",new_zealand:"\u{1F1F3}\u200D\u{1F1FF}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",ng_man:"\u{1F645}\u200D\u2642",ng_woman:"\u{1F645}\u200D\u2640",nicaragua:"\u{1F1F3}\u200D\u{1F1EE}",niger:"\u{1F1F3}\u200D\u{1F1EA}",nigeria:"\u{1F1F3}\u200D\u{1F1EC}",night_with_stars:"\u{1F303}",nine:"9\u200D\u20E3",niue:"\u{1F1F3}\u200D\u{1F1FA}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4",no_entry_sign:"\u{1F6AB}",no_good:"\u{1F645}",no_good_man:"\u{1F645}\u200D\u2642",no_good_woman:"\u{1F645}\u200D\u2640",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",norfolk_island:"\u{1F1F3}\u200D\u{1F1EB}",north_korea:"\u{1F1F0}\u200D\u{1F1F5}",northern_mariana_islands:"\u{1F1F2}\u200D\u{1F1F5}",norway:"\u{1F1F3}\u200D\u{1F1F4}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55",o2:"\u{1F17E}",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",office_worker:"\u{1F9D1}\u200D\u{1F4BC}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}\u200D\u2642",ok_person:"\u{1F646}",ok_woman:"\u{1F646}\u200D\u2640",old_key:"\u{1F5DD}",older_adult:"\u{1F9D3}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",oman:"\u{1F1F4}\u200D\u{1F1F2}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",one:"1\u200D\u20E3",one_piece_swimsuit:"\u{1FA71}",onion:"\u{1F9C5}",open_book:"\u{1F4D6}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602",ophiuchus:"\u26CE",orange:"\u{1F34A}",orange_book:"\u{1F4D9}",orange_circle:"\u{1F7E0}",orange_heart:"\u{1F9E1}",orange_square:"\u{1F7E7}",orangutan:"\u{1F9A7}",orthodox_cross:"\u2626",otter:"\u{1F9A6}",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",oyster:"\u{1F9AA}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",pakistan:"\u{1F1F5}\u200D\u{1F1F0}",palau:"\u{1F1F5}\u200D\u{1F1FC}",palestinian_territories:"\u{1F1F5}\u200D\u{1F1F8}",palm_tree:"\u{1F334}",palms_up_together:"\u{1F932}",panama:"\u{1F1F5}\u200D\u{1F1E6}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",papua_new_guinea:"\u{1F1F5}\u200D\u{1F1EC}",parachute:"\u{1FA82}",paraguay:"\u{1F1F5}\u200D\u{1F1FE}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}",parrot:"\u{1F99C}",part_alternation_mark:"\u303D",partly_sunny:"\u26C5",partying_face:"\u{1F973}",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",paw_prints:"\u{1F43E}",peace_symbol:"\u262E",peach:"\u{1F351}",peacock:"\u{1F99A}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil:"\u{1F4DD}",pencil2:"\u270F",penguin:"\u{1F427}",pensive:"\u{1F614}",people_holding_hands:"\u{1F9D1}\u200D\u{1F91D}\u200D\u{1F9D1}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_bald:"\u{1F9D1}\u200D\u{1F9B2}",person_curly_hair:"\u{1F9D1}\u200D\u{1F9B1}",person_fencing:"\u{1F93A}",person_in_manual_wheelchair:"\u{1F9D1}\u200D\u{1F9BD}",person_in_motorized_wheelchair:"\u{1F9D1}\u200D\u{1F9BC}",person_red_hair:"\u{1F9D1}\u200D\u{1F9B0}",person_white_hair:"\u{1F9D1}\u200D\u{1F9B3}",person_with_probing_cane:"\u{1F9D1}\u200D\u{1F9AF}",person_with_turban:"\u{1F473}",peru:"\u{1F1F5}\u200D\u{1F1EA}",petri_dish:"\u{1F9EB}",philippines:"\u{1F1F5}\u200D\u{1F1ED}",phone:"\u260E",pick:"\u26CF",pie:"\u{1F967}",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pilot:"\u{1F9D1}\u200D\u2708",pinching_hand:"\u{1F90F}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pirate_flag:"\u{1F3F4}\u200D\u2620",pisces:"\u2653",pitcairn_islands:"\u{1F1F5}\u200D\u{1F1F3}",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",pleading_face:"\u{1F97A}",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D",point_up_2:"\u{1F446}",poland:"\u{1F1F5}\u200D\u{1F1F1}",police_car:"\u{1F693}",police_officer:"\u{1F46E}",policeman:"\u{1F46E}\u200D\u2642",policewoman:"\u{1F46E}\u200D\u2640",poodle:"\u{1F429}",poop:"\u{1F4A9}",popcorn:"\u{1F37F}",portugal:"\u{1F1F5}\u200D\u{1F1F9}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",pout:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_face:"\u{1F64E}",pouting_man:"\u{1F64E}\u200D\u2642",pouting_woman:"\u{1F64E}\u200D\u2640",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",pretzel:"\u{1F968}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",probing_cane:"\u{1F9AF}",puerto_rico:"\u{1F1F5}\u200D\u{1F1F7}",punch:"\u{1F44A}",purple_circle:"\u{1F7E3}",purple_heart:"\u{1F49C}",purple_square:"\u{1F7EA}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",qatar:"\u{1F1F6}\u200D\u{1F1E6}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",raccoon:"\u{1F99D}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622",rage:"\u{1F621}",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\u200D\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_eyebrow:"\u{1F928}",raised_hand:"\u270B",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand:"\u{1F64B}",raising_hand_man:"\u{1F64B}\u200D\u2642",raising_hand_woman:"\u{1F64B}\u200D\u2640",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",razor:"\u{1FA92}",receipt:"\u{1F9FE}",record_button:"\u23FA",recycle:"\u267B",red_car:"\u{1F697}",red_circle:"\u{1F534}",red_envelope:"\u{1F9E7}",red_haired_man:"\u{1F468}\u200D\u{1F9B0}",red_haired_woman:"\u{1F469}\u200D\u{1F9B0}",red_square:"\u{1F7E5}",registered:"\xae",relaxed:"\u263A",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",reunion:"\u{1F1F7}\u200D\u{1F1EA}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",ringed_planet:"\u{1FA90}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roll_of_paper:"\u{1F9FB}",roller_coaster:"\u{1F3A2}",romania:"\u{1F1F7}\u200D\u{1F1F4}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowboat:"\u{1F6A3}",rowing_man:"\u{1F6A3}\u200D\u2642",rowing_woman:"\u{1F6A3}\u200D\u2640",ru:"\u{1F1F7}\u200D\u{1F1FA}",rugby_football:"\u{1F3C9}",runner:"\u{1F3C3}",running:"\u{1F3C3}",running_man:"\u{1F3C3}\u200D\u2642",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}\u200D\u2640",rwanda:"\u{1F1F7}\u200D\u{1F1FC}",sa:"\u{1F202}",safety_pin:"\u{1F9F7}",safety_vest:"\u{1F9BA}",sagittarius:"\u2650",sailboat:"\u26F5",sake:"\u{1F376}",salt:"\u{1F9C2}",samoa:"\u{1F1FC}\u200D\u{1F1F8}",san_marino:"\u{1F1F8}\u200D\u{1F1F2}",sandal:"\u{1F461}",sandwich:"\u{1F96A}",santa:"\u{1F385}",sao_tome_principe:"\u{1F1F8}\u200D\u{1F1F9}",sari:"\u{1F97B}",sassy_man:"\u{1F481}\u200D\u2642",sassy_woman:"\u{1F481}\u200D\u2640",satellite:"\u{1F4E1}",satisfied:"\u{1F606}",saudi_arabia:"\u{1F1F8}\u200D\u{1F1E6}",sauna_man:"\u{1F9D6}\u200D\u2642",sauna_person:"\u{1F9D6}",sauna_woman:"\u{1F9D6}\u200D\u2640",sauropod:"\u{1F995}",saxophone:"\u{1F3B7}",scarf:"\u{1F9E3}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scientist:"\u{1F9D1}\u200D\u{1F52C}",scissors:"\u2702",scorpion:"\u{1F982}",scorpius:"\u264F",scotland:"\u{1F3F4}\u200D\u{E0067}\u200D\u{E0062}\u200D\u{E0073}\u200D\u{E0063}\u200D\u{E0074}\u200D\u{E007F}",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",senegal:"\u{1F1F8}\u200D\u{1F1F3}",serbia:"\u{1F1F7}\u200D\u{1F1F8}",service_dog:"\u{1F415}\u200D\u{1F9BA}",seven:"7\u200D\u20E3",seychelles:"\u{1F1F8}\u200D\u{1F1E8}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shit:"\u{1F4A9}",shoe:"\u{1F45E}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shorts:"\u{1FA73}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",shrug:"\u{1F937}",shushing_face:"\u{1F92B}",sierra_leone:"\u{1F1F8}\u200D\u{1F1F1}",signal_strength:"\u{1F4F6}",singapore:"\u{1F1F8}\u200D\u{1F1EC}",singer:"\u{1F9D1}\u200D\u{1F3A4}",sint_maarten:"\u{1F1F8}\u200D\u{1F1FD}",six:"6\u200D\u20E3",six_pointed_star:"\u{1F52F}",skateboard:"\u{1F6F9}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620",skunk:"\u{1F9A8}",sled:"\u{1F6F7}",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",sloth:"\u{1F9A5}",slovakia:"\u{1F1F8}\u200D\u{1F1F0}",slovenia:"\u{1F1F8}\u200D\u{1F1EE}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_face_with_three_hearts:"\u{1F970}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744",snowman:"\u26C4",snowman_with_snow:"\u2603",soap:"\u{1F9FC}",sob:"\u{1F62D}",soccer:"\u26BD",socks:"\u{1F9E6}",softball:"\u{1F94E}",solomon_islands:"\u{1F1F8}\u200D\u{1F1E7}",somalia:"\u{1F1F8}\u200D\u{1F1F4}",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",south_africa:"\u{1F1FF}\u200D\u{1F1E6}",south_georgia_south_sandwich_islands:"\u{1F1EC}\u200D\u{1F1F8}",south_sudan:"\u{1F1F8}\u200D\u{1F1F8}",space_invader:"\u{1F47E}",spades:"\u2660",spaghetti:"\u{1F35D}",sparkle:"\u2747",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",sponge:"\u{1F9FD}",spoon:"\u{1F944}",squid:"\u{1F991}",sri_lanka:"\u{1F1F1}\u200D\u{1F1F0}",st_barthelemy:"\u{1F1E7}\u200D\u{1F1F1}",st_helena:"\u{1F1F8}\u200D\u{1F1ED}",st_kitts_nevis:"\u{1F1F0}\u200D\u{1F1F3}",st_lucia:"\u{1F1F1}\u200D\u{1F1E8}",st_martin:"\u{1F1F2}\u200D\u{1F1EB}",st_pierre_miquelon:"\u{1F1F5}\u200D\u{1F1F2}",st_vincent_grenadines:"\u{1F1FB}\u200D\u{1F1E8}",stadium:"\u{1F3DF}",standing_man:"\u{1F9CD}\u200D\u2642",standing_person:"\u{1F9CD}",standing_woman:"\u{1F9CD}\u200D\u2640",star:"\u2B50",star2:"\u{1F31F}",star_and_crescent:"\u262A",star_of_david:"\u2721",star_struck:"\u{1F929}",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stethoscope:"\u{1FA7A}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",student:"\u{1F9D1}\u200D\u{1F393}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sudan:"\u{1F1F8}\u200D\u{1F1E9}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",superhero:"\u{1F9B8}",superhero_man:"\u{1F9B8}\u200D\u2642",superhero_woman:"\u{1F9B8}\u200D\u2640",supervillain:"\u{1F9B9}",supervillain_man:"\u{1F9B9}\u200D\u2642",supervillain_woman:"\u{1F9B9}\u200D\u2640",surfer:"\u{1F3C4}",surfing_man:"\u{1F3C4}\u200D\u2642",surfing_woman:"\u{1F3C4}\u200D\u2640",suriname:"\u{1F1F8}\u200D\u{1F1F7}",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",svalbard_jan_mayen:"\u{1F1F8}\u200D\u{1F1EF}",swan:"\u{1F9A2}",swaziland:"\u{1F1F8}\u200D\u{1F1FF}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweden:"\u{1F1F8}\u200D\u{1F1EA}",sweet_potato:"\u{1F360}",swim_brief:"\u{1FA72}",swimmer:"\u{1F3CA}",swimming_man:"\u{1F3CA}\u200D\u2642",swimming_woman:"\u{1F3CA}\u200D\u2640",switzerland:"\u{1F1E8}\u200D\u{1F1ED}",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syria:"\u{1F1F8}\u200D\u{1F1FE}",syringe:"\u{1F489}","t-rex":"\u{1F996}",taco:"\u{1F32E}",tada:"\u{1F389}",taiwan:"\u{1F1F9}\u200D\u{1F1FC}",tajikistan:"\u{1F1F9}\u200D\u{1F1EF}",takeout_box:"\u{1F961}",tanabata_tree:"\u{1F38B}",tangerine:"\u{1F34A}",tanzania:"\u{1F1F9}\u200D\u{1F1FF}",taurus:"\u2649",taxi:"\u{1F695}",tea:"\u{1F375}",teacher:"\u{1F9D1}\u200D\u{1F3EB}",technologist:"\u{1F9D1}\u200D\u{1F4BB}",teddy_bear:"\u{1F9F8}",telephone:"\u260E",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA",test_tube:"\u{1F9EA}",thailand:"\u{1F1F9}\u200D\u{1F1ED}",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",thread:"\u{1F9F5}",three:"3\u200D\u20E3",thumbsdown:"\u{1F44E}",thumbsup:"\u{1F44D}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",timor_leste:"\u{1F1F9}\u200D\u{1F1F1}",tipping_hand_man:"\u{1F481}\u200D\u2642",tipping_hand_person:"\u{1F481}",tipping_hand_woman:"\u{1F481}\u200D\u2640",tired_face:"\u{1F62B}",tm:"\u2122",togo:"\u{1F1F9}\u200D\u{1F1EC}",toilet:"\u{1F6BD}",tokelau:"\u{1F1F9}\u200D\u{1F1F0}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tonga:"\u{1F1F9}\u200D\u{1F1F4}",tongue:"\u{1F445}",toolbox:"\u{1F9F0}",tooth:"\u{1F9B7}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",tr:"\u{1F1F9}\u200D\u{1F1F7}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",trinidad_tobago:"\u{1F1F9}\u200D\u{1F1F9}",tristan_da_cunha:"\u{1F1F9}\u200D\u{1F1E6}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tshirt:"\u{1F455}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",tunisia:"\u{1F1F9}\u200D\u{1F1F3}",turkey:"\u{1F983}",turkmenistan:"\u{1F1F9}\u200D\u{1F1F2}",turks_caicos_islands:"\u{1F1F9}\u200D\u{1F1E8}",turtle:"\u{1F422}",tuvalu:"\u{1F1F9}\u200D\u{1F1FB}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two:"2\u200D\u20E3",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}",u6708:"\u{1F237}",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",uganda:"\u{1F1FA}\u200D\u{1F1EC}",uk:"\u{1F1EC}\u200D\u{1F1E7}",ukraine:"\u{1F1FA}\u200D\u{1F1E6}",umbrella:"\u2614",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",united_arab_emirates:"\u{1F1E6}\u200D\u{1F1EA}",united_nations:"\u{1F1FA}\u200D\u{1F1F3}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",uruguay:"\u{1F1FA}\u200D\u{1F1FE}",us:"\u{1F1FA}\u200D\u{1F1F8}",us_outlying_islands:"\u{1F1FA}\u200D\u{1F1F2}",us_virgin_islands:"\u{1F1FB}\u200D\u{1F1EE}",uzbekistan:"\u{1F1FA}\u200D\u{1F1FF}",v:"\u270C",vampire:"\u{1F9DB}",vampire_man:"\u{1F9DB}\u200D\u2642",vampire_woman:"\u{1F9DB}\u200D\u2640",vanuatu:"\u{1F1FB}\u200D\u{1F1FA}",vatican_city:"\u{1F1FB}\u200D\u{1F1E6}",venezuela:"\u{1F1FB}\u200D\u{1F1EA}",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",vietnam:"\u{1F1FB}\u200D\u{1F1F3}",violin:"\u{1F3BB}",virgo:"\u264D",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vomiting_face:"\u{1F92E}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",waffle:"\u{1F9C7}",wales:"\u{1F3F4}\u200D\u{E0067}\u200D\u{E0062}\u200D\u{E0077}\u200D\u{E006C}\u200D\u{E0073}\u200D\u{E007F}",walking:"\u{1F6B6}",walking_man:"\u{1F6B6}\u200D\u2642",walking_woman:"\u{1F6B6}\u200D\u2640",wallis_futuna:"\u{1F1FC}\u200D\u{1F1EB}",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0",wastebasket:"\u{1F5D1}",watch:"\u231A",water_buffalo:"\u{1F403}",water_polo:"\u{1F93D}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030",waxing_crescent_moon:"\u{1F312}",waxing_gibbous_moon:"\u{1F314}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting:"\u{1F3CB}",weight_lifting_man:"\u{1F3CB}\u200D\u2642",weight_lifting_woman:"\u{1F3CB}\u200D\u2640",western_sahara:"\u{1F1EA}\u200D\u{1F1ED}",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638",wheelchair:"\u267F",white_check_mark:"\u2705",white_circle:"\u26AA",white_flag:"\u{1F3F3}",white_flower:"\u{1F4AE}",white_haired_man:"\u{1F468}\u200D\u{1F9B3}",white_haired_woman:"\u{1F469}\u200D\u{1F9B3}",white_heart:"\u{1F90D}",white_large_square:"\u2B1C",white_medium_small_square:"\u25FD",white_medium_square:"\u25FB",white_small_square:"\u25AB",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}\u200D\u{1F3A8}",woman_astronaut:"\u{1F469}\u200D\u{1F680}",woman_cartwheeling:"\u{1F938}\u200D\u2640",woman_cook:"\u{1F469}\u200D\u{1F373}",woman_dancing:"\u{1F483}",woman_facepalming:"\u{1F926}\u200D\u2640",woman_factory_worker:"\u{1F469}\u200D\u{1F3ED}",woman_farmer:"\u{1F469}\u200D\u{1F33E}",woman_firefighter:"\u{1F469}\u200D\u{1F692}",woman_health_worker:"\u{1F469}\u200D\u2695",woman_in_manual_wheelchair:"\u{1F469}\u200D\u{1F9BD}",woman_in_motorized_wheelchair:"\u{1F469}\u200D\u{1F9BC}",woman_judge:"\u{1F469}\u200D\u2696",woman_juggling:"\u{1F939}\u200D\u2640",woman_mechanic:"\u{1F469}\u200D\u{1F527}",woman_office_worker:"\u{1F469}\u200D\u{1F4BC}",woman_pilot:"\u{1F469}\u200D\u2708",woman_playing_handball:"\u{1F93E}\u200D\u2640",woman_playing_water_polo:"\u{1F93D}\u200D\u2640",woman_scientist:"\u{1F469}\u200D\u{1F52C}",woman_shrugging:"\u{1F937}\u200D\u2640",woman_singer:"\u{1F469}\u200D\u{1F3A4}",woman_student:"\u{1F469}\u200D\u{1F393}",woman_teacher:"\u{1F469}\u200D\u{1F3EB}",woman_technologist:"\u{1F469}\u200D\u{1F4BB}",woman_with_headscarf:"\u{1F9D5}",woman_with_probing_cane:"\u{1F469}\u200D\u{1F9AF}",woman_with_turban:"\u{1F473}\u200D\u2640",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}\u200D\u2640",womens:"\u{1F6BA}",woozy_face:"\u{1F974}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",wrestling:"\u{1F93C}",writing_hand:"\u270D",x:"\u274C",yarn:"\u{1F9F6}",yawning_face:"\u{1F971}",yellow_circle:"\u{1F7E1}",yellow_heart:"\u{1F49B}",yellow_square:"\u{1F7E8}",yemen:"\u{1F1FE}\u200D\u{1F1EA}",yen:"\u{1F4B4}",yin_yang:"\u262F",yo_yo:"\u{1FA80}",yum:"\u{1F60B}",zambia:"\u{1F1FF}\u200D\u{1F1F2}",zany_face:"\u{1F92A}",zap:"\u26A1",zebra:"\u{1F993}",zero:"0\u200D\u20E3",zimbabwe:"\u{1F1FF}\u200D\u{1F1FC}",zipper_mouth_face:"\u{1F910}",zombie:"\u{1F9DF}",zombie_man:"\u{1F9DF}\u200D\u2642",zombie_woman:"\u{1F9DF}\u200D\u2640",zzz:"\u{1F4A4}"},Rq=Object.keys(RG).map(e=>`:${(0,vB.Z)(e)}:`),RK=RegExp(Rq.join("|"),"g"),RQ=e=>RK.test(e)?e.replace(RK,e=>{let t=e.substring(1,e.length-1);return RG[t]??e}):e,RY=Object.entries(RG).map(([e,t])=>({name:e,character:t})),RX=e=>{let t=document.createElement("div");return t.innerHTML=js(e),t.textContent??""},RJ=e=>{let t;return()=>t??(t=e().catch(e=>{if(e instanceof api_error_ApiError)return[];throw e}))},R0=e=>{let t=e?.repositoryId,r=void 0!==e&&"issueId"in e?e.issueId:void 0;return(0,uq.useMemo)(()=>void 0===t||void 0===r?void 0:{subjectRepo:t,subjectId:r,subjectType:"issue"},[r,t])},R1=e=>{let t=R0(e),r=(0,uq.useMemo)(()=>RJ(async()=>{if(!t)return[];let e=await RW(t);return e.map(e=>({identifier:"team"===e.type?e.name:e.login,description:"team"===e.type?e.description:e.name}))}),[t]),a=(0,uq.useMemo)(()=>RJ(async()=>{if(!t)return[];let e=await RH(t);return e.suggestions?.map(t=>({titleHtml:t.title,titleText:RX(t.title),id:t.number.toString(),iconHtml:e.icons[t.type]}))}),[t]);return{emojiSuggestions:RY,mentionSuggestions:r,referenceSuggestions:a}};var R2=r(34912);async function R5(){let{url:e}=f8("memex-saved-replies-api-data"),{data:t}=await hh(e);return t}let R3=e=>({content:e.body,name:e.title}),R4=(0,yJ.r)({primaryKey:"savedReplies",queryFn:()=>R5().then(e=>e.map(R3)),refetchOnMount:!1,cacheTime:(0,R2.Z)({minutes:30}),staleTime:(0,R2.Z)({minutes:15})}),R6=(e,t)=>e===mA.Issue||e===Iq.ISSUE?t?"issue_comment":"issue_body":e===mA.PullRequest?"pull_request":void 0,R7=(e,t)=>{let r=new URL(e,window.location.origin);return r.searchParams.append("surface",t),r.toString()},R8=(0,uq.memo)(function({children:e,url:t,surface:r}){let a=(0,uq.useRef)(null),[{top:n,left:l},i]=(0,uq.useState)({top:0,left:0});return(0,uq.useEffect)(()=>{let e=a.current;if(!e)return;let t=e?.querySelector("textarea"),r={top:0,left:0};for(;t!==e;){if(null===t)return;r.top+=t.offsetTop,r.left+=t.offsetLeft,t=t.offsetParent instanceof HTMLElement?t.offsetParent:null}i(r)},[]),(0,uO.jsx)(mF.Z,{ref:a,sx:{position:"relative","& .js-slash-command-menu":{mt:`${n}px`,ml:`${l}px`}},className:"js-slash-command-surface",children:(0,uO.jsx)("slash-command-expander",{keys:"/","data-slash-command-url":R7(t,r),children:e})})});try{(rr=R8).displayName||(rr.displayName="SlashCommandsProvider")}catch{}let R9=[".svg",".gif",".jpg",".jpeg",".png",".mov",".mp4",".webm"],Ee=[...R9,".pdf",".docx",".pptx",".xlsx",".odt",".fodt",".ods",".fods",".odp",".fodp",".odg",".fodg",".odf",".csv",".xls",".zip",".gz",".tgz",".txt",".log",".md"],Et={"& fieldset":{minInlineSize:"auto",m:0,p:0}},Er=(0,uq.createContext)(null),Ea=(0,uq.forwardRef)(({context:e,slashCommandsConfig:t,children:r,...a},n)=>{let{loggedInUser:l,projectOwner:i}=yk(),{loadPreview:s}=RF(e),[o,d]=(0,uq.useState)(!1),c=R1(e),u=(0,uq.useRef)(null);(0,CJ.z)(n,u);let{memex_disable_draft_issue_file_upload:m}=g9(),p=i?.name?`File uploads have been disabled for draft issues in the ${i.name} organization.`:"File uploads have been disabled for draft issues in this project's organization.",f=(0,uq.useCallback)(async t=>{if(m&&!e)throw d(!0),Error(p);let r=await R$({repository_id:e?.repositoryId,name:t.name,size:t.size,content_type:t.type}),a=await Rz(r,{file:t});return{file:new File([t],t.name,{type:a.content_type}),url:a.href}},[e,p,m]),h=(0,uq.useCallback)(()=>{u.current?.focus();try{document.execCommand("insertText",!1,"/")}catch{}},[u]),g=(0,uq.useCallback)(()=>{d(!1)},[]),x=(0,uq.useMemo)(()=>[...e?.repositoryId?Ee:R9],[e?.repositoryId]),y=R4(),b=(0,uO.jsxs)(RB.Z,{...a,...c,ref:u,pasteUrlsAsPlainText:l?.paste_url_link_as_plain_text,onRenderPreview:s,acceptedFileTypes:x,onUploadFile:f,monospace:yk().themePreferences.markdown_fixed_width_font,savedReplies:y.data,children:[(0,uO.jsx)(RB.Z.Toolbar,{children:(0,uO.jsx)(El,{})}),r]});return(0,uO.jsxs)(mF.Z,{sx:Et,...(0,mp.f)("markdown-editor"),children:[t?(0,uO.jsx)(Er.Provider,{value:h,children:(0,uO.jsx)(R8,{...t,children:b})}):b,m&&o&&(0,uO.jsx)(RV.V,{title:"File uploads disabled",footerButtons:[{content:"Ok",onClick:g}],onClose:g,children:(0,uO.jsx)(mO.Z,{sx:{fontFamily:"sans-serif"},children:p})})]})});Ea.displayName="MarkdownEditor";let En=()=>{let e=(0,uq.useContext)(Er);return e?(0,uO.jsx)(Ec,{icon:mM.xs5,"aria-label":"Slash commands",onClick:e}):null},El=()=>(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(RB.Z.DefaultToolbarButtons,{}),(0,uO.jsx)(En,{})]}),{Label:Ei,Actions:Es,ActionButton:Eo,Toolbar:Ed,ToolbarButton:Ec}=RB.Z,Eu=Object.assign(Ea,{Label:Ei,Actions:Es,ActionButton:Eo,Toolbar:Ed,ToolbarButton:Ec,DefaultToolbarButtons:El});try{(ra=Er).displayName||(ra.displayName="SlashCommandButtonContext")}catch{}try{(rn=En).displayName||(rn.displayName="SlashCommandsButton")}catch{}try{(rl=El).displayName||(rl.displayName="DefaultToolbarButtons")}catch{}var Em=r(47434);function Ep(e){let t=jo(e.dangerousRenderedHTML.__html);return(0,uO.jsx)(Em.Z,{...e,dangerousRenderedHTML:{__html:t}})}try{(ri=Ep).displayName||(ri.displayName="SanitizedMarkdownViewer")}catch{}var Ef=r(62719);let Eh=(e,{isPropUpdateDisabled:t=!1,isEqual:r=Object.is}={})=>{let[a,n]=(0,uq.useState)(e),[l,i]=(0,uq.useState)(e),s=e instanceof Function?e():e;return t||r(l,s)||(i(s),n(s)),[a,n]},Eg=e=>{let t=(0,uq.useRef)(!1),r=(0,uq.useRef)(!1),a=(0,uq.useCallback)(e=>{"compositionstart"===e.type&&(t.current=!0,r.current=!1),"compositionend"===e.type&&(t.current=!1,r.current=!0)},[]),n=(0,uq.useCallback)(a=>{if(("Enter"!==a.key||!t.current)&&("Tab"!==a.key||!t.current)){if((0,m8.eE)()&&229===a.keyCode&&r.current){r.current=!1;return}e(a)}},[e]),l=(0,uq.useMemo)(()=>({onCompositionStart:a,onCompositionEnd:a,onKeyDown:n}),[a,n]);return l},Ex={None:"none",Successful:"successful",Failed:"failed"},Ey=({initialValue:e,commitFn:t})=>{let[r,a]=Eh(e),[n,l]=(0,uq.useState)(!1),[i,s]=(0,uq.useState)(Ex.None),o=(0,uq.useCallback)(()=>{a(e),l(!1)},[a,l,e]),d=(0,uq.useCallback)(async()=>{if(!n)return;let e=r.trim();if(0===e.length){s(Ex.Failed);return}a(e);try{await t(RQ(e)),s(Ex.Successful)}catch{s(Ex.Failed)}l(!1)},[n,r,a,t]),c=(0,uq.useCallback)(e=>{l(!0),s(Ex.None),a(RQ(e.target.value))},[a,l]),u=(0,uq.useCallback)(e=>{switch(s(Ex.None),e.key){case"Enter":d();break;case"Escape":n&&e.stopPropagation(),o()}},[d,o,n]),m=Eg(u),p=(0,uq.useCallback)(()=>{document.hasFocus()&&d()},[d]);return{localValue:r,setLocalValue:a,isSuccess:i===Ex.Successful,isError:i===Ex.Failed,inputProps:{onChange:c,onBlur:p,...m}}},Eb={bg:"danger.subtle",borderColor:"danger.fg",color:"danger.fg"},Ev=e=>(0,uO.jsx)(mF.Z,{sx:{padding:"8px 16px",borderWidth:"1px",borderStyle:"solid",borderRadius:"6px",fontSize:"14px",lineHeight:"20px",...Eb},...e}),Ew=e=>(0,uO.jsx)(Ef.Z,{sx:{marginTop:"16px",padding:"8px 6px",borderRadius:"6px",fontSize:"12px",lineHeight:"18px",...Eb},...e}),Ej=({message:e=fE.genericErrorMessage,caret:t,testId:r="error-state-message-box"})=>{let a=t?Ew:Ev;return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mF.Z,{sx:{flexBasis:"100%"}}),(0,uO.jsx)(a,{caret:t,...(0,mp.f)(r),children:e}),(0,uO.jsx)(mF.Z,{sx:{flexBasis:"100%"}})]})},EC=()=>(0,uO.jsx)(mL.Z,{icon:mM.nQG,sx:{ml:3,color:"success.fg"}}),Ek=({status:e})=>{switch(e){case"idle":case Ex.None:return(0,uO.jsx)(uO.Fragment,{});case"failed":case Ex.Failed:return(0,uO.jsx)(mL.Z,{icon:mM.b0D,sx:{color:"danger.fg"}});case"loading":return(0,uO.jsx)(w4.Z,{size:"small"});case"succeeded":case Ex.Successful:return(0,uO.jsx)(mL.Z,{icon:mM.nQG,sx:{color:"success.fg"}})}},ES={borderColor:"#CB2431 !important"};try{(rs=Ev).displayName||(rs.displayName="AlertStyledBox")}catch{}try{(ro=Ew).displayName||(ro.displayName="ErrorStyledPointerBox")}catch{}try{(rd=Ej).displayName||(rd.displayName="ErrorState")}catch{}try{(rc=EC).displayName||(rc.displayName="SuccessState")}catch{}try{(ru=Ek).displayName||(ru.displayName="RequestStateIcon")}catch{}function EI({onSaveStats:e,editModeOff:t=!1,setHasUnsavedChanges:r,hideLabel:a}){let{hasWritePermissions:n}=yI(),{description:l,descriptionHtml:i,setDescriptionHtml:s}=f3(),{updateDescription:o}=RO(),[d,c]=(0,uq.useState)(!1),[u,m]=(0,uq.useState)(l),[p,f]=(0,uq.useState)(!1),[h,g]=(0,uq.useState)(!1),[x,y]=(0,uq.useState)(t),{isLoading:b,loadPreview:v}=RF(),w=(0,uq.useRef)(null),j=(0,uq.useRef)(null),C=(0,uq.useCallback)(async e=>{l?s(await v(e)):s("")},[l,v,s]),k=(0,uq.useCallback)(e=>{r&&r(e!==l),m(e)},[l,r]);(0,uq.useEffect)(()=>{!i&&l&&C(l)},[l,i,C]),(0,uq.useEffect)(()=>{k(l)},[l,k]);let S=(0,uq.useCallback)(()=>{t||((0,w8.flushSync)(()=>{y(!1)}),j.current?.focus())},[t]),I=(0,uq.useCallback)(async()=>{if(!l&&!u||l===u)return S(),null;try{c(!0),f(!1),e(!!l),await o(u),C(u),g(!0),S(),setTimeout(()=>{g(!1)},1800)}catch(e){f(!0)}finally{c(!1)}},[l,u,S,e,o,C]),N=(0,uq.useCallback)(()=>{k(l),S()},[k,l,S]),_=(0,uq.useCallback)(e=>{e.target instanceof HTMLAnchorElement||((0,w8.flushSync)(()=>{y(!0)}),w.current?.focus())},[]),T=(0,uq.useMemo)(()=>n&&(x||t)?h&&t?(0,uO.jsxs)(mF.Z,{sx:{minHeight:"30px",display:"flex","& > svg":{ml:"auto"}},children:[(0,uO.jsx)(EC,{})," ",(0,uO.jsx)(mO.Z,{sx:{ml:1},children:"Saved"})]}):u===l&&t?void 0:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Eu.ActionButton,{variant:"invisible",sx:{color:"fg.muted"},onClick:N,children:fz.cancelButton}),(0,uO.jsx)(Eu.ActionButton,{variant:"primary",onClick:I,children:fz.saveButton})]}):void 0,[n,x,u,l,h,t,I,N]);return(0,uO.jsxs)(uO.Fragment,{children:[t?null:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",color:"fg.muted",fontSize:1,width:"100%",fontWeight:"normal",mb:1},children:[(0,uO.jsxs)(mF.Z,{sx:{width:"100%",display:"flex",alignItems:"center",minHeight:32,gap:2},children:[(0,uO.jsx)(mM.vJ3,{size:"small"}),(0,uO.jsx)(mO.Z,{as:"h3",sx:{fontSize:14,fontWeight:"bold",color:"fg.default"},children:fz.readmeTitle})]}),!x&&n&&(0,uO.jsx)(kX,{variant:"invisible",onClick:_,sx:{color:"fg.muted"},icon:mM.vdY,label:"Edit",ref:j,...(0,mp.f)("pencil-editor-button")})]}),!x&&!u&&(0,uO.jsx)(mF.Z,{sx:{wordBreak:"break-word",whiteSpace:"normal",textAlign:"start",fontSize:12},children:fz.readmePlaceholder})]}),x?(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",mb:4},children:[(0,uO.jsxs)(Eu,{value:u,onChange:k,disabled:!n||!x||d,placeholder:fz.readmePlaceholder,maxLength:1e4,ref:w,onPrimaryAction:I,children:[(0,uO.jsx)(Eu.Label,{visuallyHidden:a,children:fz.readmeTitle}),(0,uO.jsx)(Eu.Actions,{children:T})]}),p&&(0,uO.jsx)(Ej,{caret:"top-left",message:fz.errorMessage})]}):!n||i||b?(0,uO.jsx)(Ep,{dangerousRenderedHTML:{__html:i},loading:b}):null]})}try{(rm=EI).displayName||(rm.displayName="DescriptionEditor")}catch{}var EN=r(17791),E_=r(42667),ET=r(81895);let ER=()=>{let{emojiSuggestions:e}=R1(),{calculateSuggestions:t,trigger:r}=(0,ET.c)(e??[]),a=(0,uq.useMemo)(()=>[r],[r]),[n,l]=(0,uq.useState)(null),i=async({query:e})=>{l("loading"),l(await t(e))};return{triggers:a,suggestions:n,onShowSuggestions:i,onHideSuggestions:()=>l(null)}},EE=()=>{let e=f3(),{setProject:t}=TI(),r=(0,uq.useCallback)(async r=>{if(r=r.trim(),e.shortDescription===r)return;let a=await RZ({shortDescription:r});t(a.memexProject)},[e.shortDescription,t]);return{updateShortDescription:r}},ED=({onSaveStats:e,editModeOff:t=!1,setHasUnsavedChanges:r,hideLabel:a})=>{let{hasWritePermissions:n}=yI(),{shortDescription:l,shortDescriptionHtml:i}=f3(),{updateShortDescription:s}=EE(),[o,d]=(0,uq.useState)(l),[c,u]=(0,uq.useState)(!1),[m,p]=(0,uq.useState)(t),[f,h]=(0,uq.useState)(!1),[g,x]=(0,uq.useState)(!1),y=(0,uq.useRef)(null),b=(0,uq.useRef)(null);(0,uq.useEffect)(()=>{d(l),r&&r(!1)},[l,r]);let v=(0,uq.useCallback)(async()=>{try{h(!0),u(!1),e(!!l),await s(o),t||p(!1),r&&r(!1),x(!0),setTimeout(()=>{x(!1)},1800)}catch(e){u(!0)}finally{h(!1)}},[e,l,s,o,r,t]),w=(0,uq.useCallback)(()=>{d(l),t||p(!1),r&&r(!1)},[r,l,t]),j=(0,uq.useCallback)(()=>{p(!m)},[m]);(0,uq.useEffect)(()=>{m&&y.current&&(y.current.focus(),y.current.selectionStart=y.current.selectionEnd=y.current.value.length)},[m]);let C=(0,uq.useCallback)(e=>{r&&r(e.currentTarget.value!==l),d(e.currentTarget.value)},[l,r]),k=(0,uq.useCallback)(e=>{("Enter"===e.key||" "===e.key&&" "===e.currentTarget.value.slice(-1))&&e.preventDefault()},[]),S=(0,uq.useCallback)(e=>{setTimeout(()=>{y.current&&d(y.current.value.replace(RegExp("\\s+","gs")," "))})},[]),I=ER();return(0,uO.jsxs)(uO.Fragment,{children:[!t&&(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",color:"fg.muted",fontSize:1,width:"100%",fontWeight:"normal",mt:3,mb:1},children:[(0,uO.jsxs)(mF.Z,{sx:{width:"100%",display:"flex",alignItems:"center",minHeight:32,gap:2},children:[(0,uO.jsx)(mM.Zi2,{size:"small"}),(0,uO.jsx)(mO.Z,{as:"h3",sx:{fontSize:14,fontWeight:"bold",color:"fg.default"},children:fz.shortDescriptionTitle})]}),!m&&n&&(0,uO.jsx)(kX,{variant:"invisible",onClick:j,sx:{color:"fg.muted"},icon:mM.vdY,label:"Edit short description",ref:b,...(0,mp.f)("description-editor-edit")})]}),m?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(Cc.Z,{children:[(0,uO.jsx)(Cc.Z.Label,{visuallyHidden:a,children:fz.shortDescriptionTitle}),(0,uO.jsx)(E_.Z,{...I,sx:{width:t?415:"100%"},children:(0,uO.jsx)(EN.ZP,{"aria-labelledby":"settings-project-description-label",ref:y,placeholder:fz.shortDescriptionPlaceholder,onChange:C,onKeyDown:k,onPaste:S,maxLength:300,value:o,...(0,mp.f)("description-editor")})})]}),(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"row-reverse",mt:2,width:t?415:"100%",minHeight:"30px"},...(0,mp.f)("readme-editor-buttons"),children:g&&t?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mO.Z,{sx:{ml:1},children:"Saved"})," ",(0,uO.jsx)(EC,{})]}):o===l&&t?null:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(jI.z,{variant:"primary",size:"small",sx:{ml:2},onClick:v,disabled:f,children:fz.saveButton}),(0,uO.jsx)(jI.z,{variant:"invisible",size:"small",sx:{color:"fg.muted"},onClick:w,disabled:f,children:fz.cancelButton})]})}),c&&(0,uO.jsx)(Ej,{caret:"top-left",message:fz.errorMessage})]}):(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"column",mb:4},children:i?(0,uO.jsx)(jc,{children:i}):(0,uO.jsx)(mF.Z,{sx:{wordBreak:"break-word",whiteSpace:"normal",textAlign:"start",fontSize:12},children:fz.shortDescriptionPlaceholder})})]})};try{(rp=ED).displayName||(rp.displayName="ShortDescriptionEditor")}catch{}var EP=r(86207),EA=r(37169),EM=r(47001),EL=r(63309);let HierarchySidePanelItem=class HierarchySidePanelItem{getState(){return this.state}isDraft(){return!1}getItemIdentifier(){return y0(this.getUrl())}hierarchyEntry(){return{ownerId:this.key.repoId,itemId:this.key.issueId}}itemId(){return this.key.issueId}ownerId(){return this.key.repoId}getTitle(){return this.title}getLabels(){return this.labels}getUrl(){return this.url}getAssignees(){return this.assignees}getSuggestionsCacheKey(e){if(e===mP.Labels){let e=this.getExtendedRepository()?.id.toString();if(e)return`repository:${e}`}return`${this.contentType}:${this.itemId()}`}getRepositoryName(){return this.repoName}getItemNumber(){return this.number}getMilestone(){}getCompletion(){return this.completion}getLinkedPullRequests(){return[]}getExtendedRepository(){return this.repository||{name:this.repoName,nameWithOwner:"",id:this.key.repoId,url:"",isForked:!1,isPublic:!1,isArchived:!1,hasIssues:!1}}getTrackedBy(){return this.trackedBy}getStatus(){}getCustomField(e){}constructor(e,t){this.isHierarchy=!0,Object.assign(this,e),this.completion=t,this.contentType=mA.Issue,this.state===ym.Draft&&(this.contentType=mA.DraftIssue),-1===this.itemId()&&(this.contentType=mA.RedactedItem)}};var EF=r(8135);async function EZ(e){let t=f8("dismiss-notice-api-data"),{ok:r}=await hh(t.url,{method:"POST",body:e,token:t.token,contentType:hu.FormData});return r}async function EO(e){let t=f8("notice-dismissal-status-api-data"),{data:r,ok:a}=await hh(t.url,{method:"POST",body:e,token:t.token,contentType:hu.FormData});return a?r:{dismissed:!1}}let EB="tasklist_blocks_onboarding_prompt",EV=(e,t=!0)=>{let r=t?"### Tasks":"",a=e?"\n":"";return`\`\`\`[tasklist]
${r}${a}${e}
\`\`\``},E$=()=>{let[e,t]=(0,uq.useState)(!1);(0,uq.useEffect)(()=>{let e=!0,r=async()=>{let{dismissed:e}=await EO({notice:EB});return e};return r().then(r=>{e&&t(!r)}),()=>{e=!1}},[]);let r=async()=>{await EZ({notice:EB}),t(!1)};return(0,uO.jsx)(T1.Z,{open:e,caret:"top-right",sx:{right:-1},...(0,mp.f)("add-tasklist-button-onboarding"),children:(0,uO.jsxs)(T1.Z.Content,{sx:{mt:2,width:320},children:[(0,uO.jsx)(Cn.Z,{sx:{fontSize:2},children:"We improved tasklists!"}),(0,uO.jsx)(mO.Z,{as:"p",children:"You can now add hierarchy to your Issues by adding our new and improved tasklists! See Issue metadata, quickly add new Issues or tasklist items, and seamlessly explore your hierarchy in GitHub Projects. \u{1F389}"}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(jI.z,{as:"a",href:"https://docs.github.com/en/early-access/issues/about-tasklists",target:"_blank",sx:{mr:2},children:"Learn more"}),(0,uO.jsx)(jI.z,{variant:"invisible",onClick:r,...(0,mp.f)("add-tasklist-button-onboarding-dismiss"),children:"OK, dismiss"})]})]})})},Ez=({editedBody:e,onChangeBody:t,isTextButton:r=!1,loading:a=!1,tasklistContent:n="- [ ] Add a draft title or issue reference here"})=>{let l=()=>{let r=n,a=!0,l=document.activeElement;if(!l||!(l instanceof HTMLTextAreaElement)){let a=EV(r);t(`${e?`${e}
`:""}${a}`);return}let i=l.selectionStart||0,s=l.selectionEnd||0;i!==s&&(r=e.slice(i,s),a=!(0,EF.I)(r),r=(0,EF.t)(r));let o=e&&i?`${e.slice(0,i)}
`:"",d=e?`
${e.slice(s)}`:"",c=EV(r,a);(0,w8.flushSync)(()=>{t(`${o}${c}${d}`)});let u=i+c.length+1;l.selectionStart=u,l.selectionEnd=u};return(0,uO.jsx)(mF.Z,{sx:{position:"relative"},children:r?a?(0,uO.jsx)(jI.z,{size:"small",sx:{borderRadius:20,px:2,boxShadow:"none",marginRight:2,display:"flex",alignItems:"center"},disabled:!0,children:(0,uO.jsxs)(mF.Z,{sx:{alignItems:"center",display:"flex"},children:[(0,uO.jsx)(w4.Z,{size:"small",sx:{marginRight:1}}),"Adding tasklist..."]})}):(0,uO.jsx)(jI.z,{size:"small",sx:{borderRadius:20,px:2,boxShadow:"none",marginRight:2},className:"js-add-tasklist-button",leadingIcon:mM.pOD,onClick:l,...(0,mp.f)("add-tasklist-text-button"),children:"Add tasklist"}):(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Eu.ToolbarButton,{icon:mM.yAY,"aria-label":"Add a tasklist",onClick:l,...(0,mp.f)("add-tasklist-button")}),(0,uO.jsx)(E$,{})]})})};try{(rf=E$).displayName||(rf.displayName="OnboardingPopover")}catch{}var EU=r(22114),EW=r(17840),EH=r(2708);let EG=({reactions:e,onReact:t})=>{let{loggedInUser:r}=yk(),a=r?.login||"",n=Object.values(IK).map(t=>[t,e[t]??[]]),l=new Set(n.filter(([,e])=>e?.includes(a)??!1).map(([e])=>e)),i=void 0===t,s=e=>t?.(e,l.has(e),a),{containerRef:o}=(0,EW.v)({bindKeys:EU.Qw.HomeAndEnd|EU.Qw.ArrowHorizontal,focusOutBehavior:"wrap"});return(0,uO.jsxs)(mF.Z,{role:"toolbar","aria-label":"Reactions",ref:o,sx:{display:"flex",gap:1,flexWrap:"wrap"},...(0,mp.f)("reactions-toolbar"),children:[!i&&(0,uO.jsx)(Eq,{onReact:s,reactedReactions:l}),n.map(([e,t])=>(0,uO.jsx)(EK,{reaction:e,reactedUsers:t,reacted:l.has(e),onClick:()=>s(e),disabled:i},e))]})},Eq=({onReact:e,reactedReactions:t})=>{let[r,a]=(0,uq.useState)(!1),{containerRef:n}=(0,EW.v)(),l=t=>{a(!1),e(t)};return(0,uO.jsx)(EH.w,{open:r,onOpen:()=>a(!0),onClose:()=>a(!1),anchorRef:n,focusZoneSettings:{bindKeys:EU.Qw.ArrowAll|EU.Qw.HomeAndEnd,focusOutBehavior:"wrap"},renderAnchor:e=>(0,uO.jsx)(kF.h,{size:"small",sx:{borderRadius:"50%",height:28,width:28,"& > span":{ml:"-1px"}},icon:mM.W5D,...(0,mp.f)("all-reactions-button"),...e,"aria-label":"All reactions","aria-labelledby":void 0}),children:(0,uO.jsx)(Ia.S,{sx:{display:"flex",flexDirection:"row",p:1,gap:1},role:"menu","aria-orientation":"horizontal",...(0,mp.f)("reactions-overlay"),children:Object.values(IK).map(e=>(0,uO.jsx)(Ia.S.Item,{sx:{"&:hover":{backgroundColor:"accent.emphasis"},py:1,px:2,m:0,backgroundColor:t.has(e)?"accent.subtle":"transparent"},role:"menuitemcheckbox","aria-checked":t.has(e),onClick:()=>l(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.stopPropagation(),l(e))},...(0,mp.f)(`all-reactions-${e}-reaction-button`),children:EY(e)},e))})})},EK=({reaction:e,reactedUsers:t,disabled:r,reacted:a,onClick:n})=>{if(0===t.length)return null;let l=`${a?"React":"Unreact"} with ${EY(e)} (${t.length} ${EY(e)} reaction${1===t.length?"":"s"} so far, including ${EQ(t)})`;return(0,uO.jsx)(kK.Z,{"aria-label":EQ(t),sx:{maxWidth:"100%"},wrap:!0,direction:"ne",align:"left",children:(0,uO.jsx)(jI.z,{size:"small",sx:{"&:hover:not([disabled])":{backgroundColor:"accent.muted"},backgroundColor:a?"accent.subtle":"transparent",borderColor:a?"accent.emphasis":"border.default",borderRadius:20,px:2,boxShadow:"none"},"aria-label":l,role:"switch","aria-checked":a,leadingIcon:()=>(0,uO.jsx)(uO.Fragment,{children:EY(e)}),...(0,mp.f)(`${e}-reaction-button`),onClick:n,disabled:r,children:t.length})})};function EQ(e){let t=e.slice(0,5);return(e.length>5&&t.push(`${e.length-5} more`),1===t.length)?t[0]:2===t.length?t.join(" and "):(t.push(`and ${t.pop()}`),t.join(", "))}function EY(e){switch(e){case IK.THUMBS_UP:return"\u{1F44D}";case IK.THUMBS_DOWN:return"\u{1F44E}";case IK.SMILE:return"\u{1F604}";case IK.TADA:return"\u{1F389}";case IK.THINKING_FACE:return"\u{1F615}";case IK.HEART:return"\u2764\uFE0F";case IK.ROCKET:return"\u{1F680}";case IK.EYES:return"\u{1F440}";default:throw Error(`${e} must be handled`)}}let EX=({url:e,onEdit:t})=>(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsx)(kX,{icon:mM.Ui8,variant:"invisible",size:"small",label:"Comment actions",sx:{color:"fg.default"},...(0,mp.f)("comment-overflow-menu-button")})}),(0,uO.jsx)(In.P.Overlay,{align:"end",children:(0,uO.jsxs)(Ia.S,{children:[(0,uO.jsx)(Ia.S.Item,{onSelect:()=>navigator.clipboard.writeText(e),children:"Copy link"}),t&&(0,uO.jsx)(Ia.S.Item,{onSelect:t,...(0,mp.f)("overflow-menu-edit-button"),children:"Edit"})]})})]}),EJ=({url:e,onEdit:t})=>e?(0,uO.jsx)(EX,{url:e,onEdit:t}):t?(0,uO.jsx)(jI.z,{size:"small",variant:"invisible",sx:{color:"fg.default"},onClick:t,"aria-label":"Edit comment",...(0,mp.f)("edit-comment-button"),children:"Edit"}):null,E0=({createdAt:e,editedAt:t})=>{let r=t??e;return(0,ps.Z)(r)?(0,uO.jsxs)(mO.Z,{sx:{color:"fg.muted"},...(0,mp.f)("edit-timestamp"),children:[(0,uO.jsx)(EM.Z,{date:r}),r===t&&" (edited)"]}):null},E1=({author:e,createdAt:t,editedAt:r,authorAssociation:a,url:n,onStartEdit:l})=>(0,uO.jsxs)(mF.Z,{sx:{display:"flex",justifyContent:"space-between",gap:2},as:"header",children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexWrap:"wrap",gap:2,alignItems:"center"},children:[e.avatarUrl&&(0,uO.jsx)(C$.O,{loading:"lazy",size:24,alt:"",src:e.avatarUrl,...(0,mp.f)("author-avatar"),sx:{flexShrink:0}},e.id),(0,uO.jsx)(mO.Z,{sx:{fontWeight:600,fontStyle:"normal"},...(0,mp.f)("author-login"),as:"address",children:e.login}),n?(0,uO.jsx)(w3.Z,{href:n,target:"_blank",...(0,mp.f)("edit-timestamp-link"),children:(0,uO.jsx)(E0,{createdAt:t,editedAt:r})}):(0,uO.jsx)(E0,{createdAt:t,editedAt:r}),a&&a!==IQ.NONE&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted"},children:"\xb7"}),(0,uO.jsx)(EL.Z,{sx:{fontWeight:600,alignSelf:"center"},...(0,mp.f)("author-association"),children:fa(a)})]})]}),(0,uO.jsx)(EJ,{url:n,onEdit:l})]}),E2=({onCancel:e,onSave:t,updateButtonDisabled:r})=>(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(jI.z,{variant:"invisible",sx:{color:"fg.muted"},size:"small",onClick:e,...(0,mp.f)("cancel-button"),children:"Cancel"}),(0,uO.jsx)(jI.z,{variant:"primary",size:"small",onClick:t,...(0,mp.f)("save-button"),disabled:r,children:"Update comment"})]}),E5=({allowEmptyBody:e,author:t,authorAssociation:r,createdAt:a,editedAt:n,url:l,description:i,onEdit:s,onEditTasklistBlock:o,context:d,slashCommandsConfig:c,fullHeight:u,reactions:m,onReact:p,showAddTasklistButton:f})=>{let[,h]=Rh(),[g,x]=(0,uq.useState)(!1),[y,b]=(0,uq.useState)(!1),[v,w]=(0,uq.useState)(!1),[j,C]=(0,uq.useState)(i.body||""),k=(0,uq.useRef)(null),S=(0,uq.useRef)(null),I=(0,uq.useRef)(null),N=(0,uq.useRef)([]),_=(0,EA.Z)(),{openPaneHistoryItem:T}=bJ(),{items:R}=bt(),[E,D]=(0,uq.useState)(!1),{postStats:P}=bM(),A=(0,uq.useRef)(!1),M=(0,uq.useRef)(null),L=(0,uq.useRef)(null),F=e||""!==j.trim(),[Z,O]=(0,uq.useState)({__html:i.bodyHtml??""}),B=(0,uq.useCallback)(()=>{if(g||v||A.current&&!L.current||S.current?.querySelector(".is-dirty, .js-tasklist-dragging")||S.current?.contains(document.activeElement))return;let e=A.current&&M.current?M.current:i.bodyHtml;O({__html:e??""})},[i.bodyHtml,g,v]),V=(0,uq.useCallback)(()=>{!g&&L.current&&C(L.current)},[g]);(0,uq.useLayoutEffect)(()=>{(g?!v:v)||A.current||C(i.body||"")},[i.body,g,v]),(0,uq.useLayoutEffect)(()=>{B(),V()},[B,V]);let $=(0,uq.useCallback)(async()=>{let e=S.current?.querySelector("tracking-block:first-of-type");if(!e)return;let t=e?.closest(".markdown-body");M.current=t?.firstElementChild?.innerHTML??""},[]);(0,uq.useEffect)(()=>{let e=S.current||I.current;if(!e||!s||!o)return;let t=e=>{C(e.detail.body),o()},r=async e=>{let{detail:t}=e;e.preventDefault(),A.current=!1,L.current=null,w(!0);try{if("string"==typeof t)await o(t);else{let{payload:e,resolve:r,reject:a}=t,n=JSON.stringify(N.current);e?await o(e,j,n).then(r,a):await s(j,n).then(r,a)}}finally{w(!1),N.current=[]}},a=async e=>{let{detail:t}=e,{payload:r,resolve:a,reject:n}=t;try{let e=await (0,EP.fp)(j,r),t=!1,n={name:r.operation};(0,EP.C9)(r)&&(n.value=r.value),N.current.push(n),null!=e?(t=!0,C(e),L.current=e,A.current=!0):(C(j),L.current=j,A.current=!0),a(t)}catch(e){n(e)}},n=()=>{h(null!=e.querySelector(".is-dirty"))};return e.addEventListener("tracking-block:change",t),e.addEventListener("tracking-block:update",r),e.addEventListener("tracking-block:operation",a),e.addEventListener("tracking-block:dirty-change",n),()=>{e.removeEventListener("tracking-block:change",t),e.removeEventListener("tracking-block:update",r),e.removeEventListener("tracking-block:operation",a),e.removeEventListener("tracking-block:dirty-change",n)}},[s,o,y,g,i.bodyHtml,j,h,$]);let z=(0,uq.useCallback)(e=>{C(e),h(!0)},[C,h]),{perform:U}=b6({request:async e=>{s&&(e||b(!0),await s(e||j),M.current=null,_()&&b(!1))},rollback:()=>{b(!1),B()},showErrorToast:!0}),W=S5(U,1e3),H=(0,uq.useCallback)(e=>{C(e),W(void 0)},[W]),G=s?()=>{(0,w8.flushSync)(()=>{$(),x(!0)}),k.current?.focus()}:void 0,q=()=>{x(!1),C(i.body||""),h(!1)},K=async()=>{F&&(await U(void 0),_()&&(x(!1),h(!1),A.current=!1))},Q=(0,uq.useCallback)((e,t)=>R.find(r=>r.contentRepositoryId===e&&r.content.id===t),[R]),Y=e=>{let t=e.closest("[data-issue]");if(!t)return{};let{repositoryId:r,itemId:a,repositoryName:n,displayNumber:l,itemTitle:i}=t.dataset,s={repoId:parseInt(r??"0"),issueId:parseInt(a??"0")},o=Q(s.repoId,s.issueId);if(o)return{item:o};let d=e.closest("a"),c=d?.getAttribute("href")??"";return{item:new HierarchySidePanelItem({key:s,title:gc(i),url:c,state:"open",repoName:n??"",number:parseInt(l??""),assignees:[],labels:[]},{completed:0,total:0,percent:0})}};return y||g&&v?(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"row",py:6,justifyContent:"center"},children:(0,uO.jsx)(w4.Z,{"aria-label":"Loading"})}):g?(0,uO.jsxs)(Eu,{ref:k,value:j,onChange:z,context:d,slashCommandsConfig:c,onPrimaryAction:K,sx:{border:"none"},fullHeight:u,children:[(0,uO.jsx)(Eu.Label,{visuallyHidden:!0,children:"Edit comment"}),f&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Eu.Label,{visuallyHidden:!0,children:"Custom Buttons"}),(0,uO.jsxs)(Eu.Toolbar,{children:[(0,uO.jsx)(Eu.DefaultToolbarButtons,{}),(0,uO.jsx)(Ez,{editedBody:j,onChangeBody:z})]})]}),(0,uO.jsx)(Eu.Actions,{children:(0,uO.jsx)(E2,{onSave:K,onCancel:q,updateButtonDisabled:!F})})]}):(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",p:3,gap:3},as:"article",children:[(0,uO.jsx)(E1,{author:t,createdAt:a,editedAt:n,url:l,onStartEdit:G,authorAssociation:r}),i.bodyHtml?(0,uO.jsx)("div",{...(0,mp.f)("comment-body"),ref:S,children:(0,uO.jsx)(Ep,{dangerousRenderedHTML:Z,onChange:H,markdownValue:i.body||"",disabled:y||!s,onLinkClick:e=>{if(e.metaKey||e.shiftKey||1===e.button)return;let t=Y(e.target);t.item&&(e.preventDefault(),T(t))}})}):(0,uO.jsx)(mO.Z,{className:"js-comment",sx:{color:"fg.muted",m:0,fontStyle:"italic"},as:"p",ref:I,...(0,mp.f)("empty-body-placeholder"),children:fE.noDescriptionProvided}),(0,uO.jsx)("footer",{children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:[f&&G?(0,uO.jsx)("tasklist-block-add-tasklist",{onClick:()=>{P({name:"add_tasklist_button_click"})},children:(0,uO.jsx)(Ez,{editedBody:j,onChangeBody:async()=>{let e=S.current?.querySelector(".js-comment, .markdown-body")||I.current;if(e){D(!0);try{await new Promise((t,r)=>{let a=e.dispatchEvent(new CustomEvent("tracking-block:add-tasklist",{bubbles:!0,cancelable:!0,detail:{resolve:t,reject:r}}));a&&t()})}finally{D(!1)}}},isTextButton:!0,loading:E,tasklistContent:""})}):null,(0,uO.jsx)(EG,{reactions:m,onReact:p})]})})]})};try{(rh=E0).displayName||(rh.displayName="Timestamp")}catch{}let E3=(0,uq.memo)(function(){let e=(0,uq.useRef)(null),t=(0,uq.useRef)(null),r=Tv(),a=Tf(r),{sidePanelMetadata:n,reloadSidePanelMetadata:l}=RM(),{reloadPaneItem:i,sidePanelState:s}=bJ(),o=m5(l),d=m5(i),c=(0,uq.useRef)(null),u=e=>n.itemKey.kind===Iq.ISSUE&&Td(e),m=e=>n.itemKey.kind===Iq.PROJECT_DRAFT_ISSUE&&Ti(e)&&e.payload.item_id===n.itemKey.projectItemId,[p]=Tg(e,"message",e=>{(u(e.data)||m(e.data))&&o(e.data.wait??0)(!0)},n.liveUpdateChannel),[f]=Tg(t,"message",e=>{Ti(e.data)&&s?.type===hk.ISSUE&&e.data.payload&&(s.item.memexItemId?.()===e.data.payload.memex_project_item_id||s.item.memexItemId?.()===e.data.payload.item_id)&&(c.current?.cancel(),c.current=d(e.data.wait??0)())});return(0,uq.useEffect)(()=>{r&&!a&&(l(!1),i())},[r,a,l,i]),(0,uO.jsxs)(uO.Fragment,{children:[n.liveUpdateChannel&&(0,uO.jsx)("span",{...r?p:void 0,ref:e,hidden:!0,...(0,mp.f)("side-panel-item-live-update-listener")}),(0,uO.jsx)("span",{...r?f:void 0,ref:t,hidden:!0,...(0,mp.f)("side-panel-pane-item-live-update-listener")})]})});try{(rg=E3).displayName||(rg.displayName="SidePanelLiveUpdate")}catch{}let E4=({editedBody:e,issueId:t,repositoryId:r,csrfToken:a,projectNumber:n})=>(0,uO.jsxs)("form",{id:"tasklist-form",...(0,mp.f)("tasklist-form"),children:[(0,uO.jsx)("input",{type:"hidden",name:"body",value:e}),(0,uO.jsx)("input",{type:"hidden",name:"item-id",value:t}),(0,uO.jsx)("input",{type:"hidden",name:"repository-id",value:r}),(0,uO.jsx)("input",{type:"hidden",name:"kind",value:"issue"}),(0,uO.jsx)("input",{type:"hidden",name:"csrf-token",value:a}),(0,uO.jsx)("input",{type:"hidden",name:"project-id",value:n})]}),E6=({item:e,isLoading:t,fullHeight:r})=>{let{sidePanelMetadata:a,editIssue:n,reactToSidePanelItem:l,reloadSidePanelMetadata:i}=RM(),{projectNumber:s}=b9(),o=f8("memex-update-sidepanel-item-api-data"),{tasklist_block:d}=g9(),{postStats:c}=bM(),u=(0,uq.useMemo)(()=>new Set(a.capabilities),[a]),m=u.has("react")?(e,t,r)=>l(e,t,r):void 0,p=(0,uq.useMemo)(()=>u.has("editDescription")?async(t,r)=>{await n({body:t},null,r),e.contentType===mA.DraftIssue&&c({name:"draft_edit",memexProjectItemId:e.id})}:void 0,[u,n,e.contentType,c,e.id]),f=(0,uq.useMemo)(()=>u.has("editDescription")?async(e,t,r)=>{if(e&&a.description){let l=t||a.description.body||"";await n({body:l},e,r)}else i(!1)}:void 0,[u,n,i,a.description]),h=(0,uq.useMemo)(()=>e.contentType===mA.Issue?{repositoryId:e.ownerId(),issueId:e.itemId(),subjectType:mA.Issue}:e.contentType===mA.PullRequest?{repositoryId:e.ownerId(),pullRequestId:e.itemId(),subjectType:mA.PullRequest}:void 0,[e]),g=R6(e.contentType,!1),x=a.slashCommandsUrl&&g?{url:a.slashCommandsUrl,surface:g}:void 0,y=d&&e.contentType!==mA.DraftIssue;return(0,uO.jsxs)(mF.Z,{sx:{flex:r?"auto":void 0,px:2},children:[(0,uO.jsx)(E3,{}),t?(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"row",py:6,justifyContent:"center"},children:(0,uO.jsx)(w4.Z,{"aria-label":"Loading"})}):(0,uO.jsxs)(mF.Z,{as:"section",sx:{height:r?"100%":void 0},children:[(0,uO.jsx)("h3",{style:{position:"absolute",clipPath:"circle(0)"},children:"Description"}),(0,uO.jsx)(E5,{allowEmptyBody:!0,author:a.user,createdAt:new Date(a.createdAt),editedAt:a.description.editedAt?new Date(a.description.editedAt):void 0,reactions:a.reactions??{},description:a.description,context:h,onEdit:p,onEditTasklistBlock:f,onReact:m,fullHeight:r&&a.itemKey.kind!==Iq.PROJECT_DRAFT_ISSUE,showAddTasklistButton:y,slashCommandsConfig:x},e.itemId()),e.contentType===mA.Issue&&(0,uO.jsx)(mF.Z,{sx:{display:"none"},children:(0,uO.jsx)(E4,{editedBody:a.description.body||"",issueId:h?.issueId,repositoryId:h?.repositoryId,csrfToken:o.token,projectNumber:s})})]})]})};try{(rx=E6).displayName||(rx.displayName="SidePanelBody")}catch{}var E7=r(97335);function E8({children:e}){return(0,uO.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",role:"img",className:"octicon",fill:"currentColor",style:{display:"inline-block",userSelect:"none",overflow:"visible"},children:e})}try{(ry=E8).displayName||(ry.displayName="BaseIconSvg")}catch{}function E9(){return(0,uO.jsx)(E8,{children:(0,uO.jsx)("path",{d:"m11.294.984 3.722 3.722a1.75 1.75 0 0 1-.504 2.826l-1.327.613a3.089 3.089 0 0 0-1.707 2.084l-.584 2.454c-.317 1.332-1.972 1.8-2.94.832L5.75 11.311 1.78 15.28a.749.749 0 1 1-1.06-1.06l3.969-3.97-2.204-2.204c-.968-.968-.5-2.623.832-2.94l2.454-.584a3.08 3.08 0 0 0 2.084-1.707l.613-1.327a1.75 1.75 0 0 1 2.826-.504ZM6.283 9.723l2.732 2.731a.25.25 0 0 0 .42-.119l.584-2.454a4.586 4.586 0 0 1 2.537-3.098l1.328-.613a.25.25 0 0 0 .072-.404l-3.722-3.722a.25.25 0 0 0-.404.072l-.613 1.328a4.584 4.584 0 0 1-3.098 2.537l-2.454.584a.25.25 0 0 0-.119.42l2.731 2.732Z"})})}try{(rb=E9).displayName||(rb.displayName="PinIcon")}catch{}function De(){return(0,uO.jsx)(E8,{children:(0,uO.jsx)("path",{d:"m2.155.595 13.75 13.75a.749.749 0 1 1-1.06 1.06l-3.311-3.31-.14.588c-.317 1.332-1.972 1.8-2.94.832L6.25 11.311 2.28 15.28a.749.749 0 1 1-1.06-1.06l3.969-3.97-2.204-2.204c-.968-.968-.5-2.623.832-2.94l.588-.14-3.31-3.311a.749.749 0 1 1 1.06-1.06Zm8.134 10.254L5.651 6.211l-1.486.354a.25.25 0 0 0-.119.42l2.731 2.732.003.003.003.003 2.732 2.731a.25.25 0 0 0 .42-.119ZM11.794.984l3.722 3.722a1.75 1.75 0 0 1-.504 2.826l-1.627.751a1.25 1.25 0 0 0-.355.247.749.749 0 1 1-1.06-1.06c.228-.228.494-.414.787-.549l1.627-.751a.25.25 0 0 0 .072-.404l-3.722-3.722a.25.25 0 0 0-.404.072l-.751 1.627a2.726 2.726 0 0 1-.549.787.749.749 0 1 1-1.06-1.06 1.25 1.25 0 0 0 .247-.355l.751-1.627a1.75 1.75 0 0 1 2.826-.504Z"})})}try{(rv=De).displayName||(rv.displayName="PinSlashIcon")}catch{}var Dt=r(98641);let Dr=({items:e,onClick:t})=>{let r=(0,uO.jsx)(Dt.Z,{children:e.map(({url:r,repoName:a,repoIcon:n,issueNumber:l,id:i},s)=>(0,uO.jsxs)(Dt.Z.Item,{sx:{color:"fg.muted",fontSize:"fontSizes.1"},"data-id":i,href:r,selected:s===e.length-1,target:"_blank","data-hovercard-type":"issue","data-hovercard-url":`${r}/hovercard`,onClick:t??void 0,children:[n&&(0,uO.jsx)(mO.Z,{sx:{mr:1},children:n}),(0,uO.jsx)(Cz.Z,{inline:!0,as:"span",title:`${a} ${l}`,sx:{maxWidth:s===e.length-1?"none":"150px",textDecoration:"inherit"},children:a}),(0,uO.jsx)(mO.Z,{children:a?` ${l}`:l})]},s))});return(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(mF.Z,{sx:{ml:-3,mr:1,mt:"2px"},children:e.length>1?(0,uO.jsx)(kF.h,{...(0,mp.f)("side-panel-nav-button-up"),"aria-label":"Navigate up one level",disabled:1===e.length||!t,icon:mM.wyc,onClick:t,variant:"invisible",sx:{color:"fg.muted",":hover":{bg:"transparent",boxShadow:"none"},":disabled":{color:"fg.muted"},display:"flex",alignItems:"center",justifyContent:"center",pr:2,py:0,pt:"4px",pl:"8px",height:18,width:18,"& svg":{verticalAlign:"top!important"}}}):(0,uO.jsx)(mF.Z,{sx:{ml:"10px",mt:"2px"}})}),r]})},Da=()=>{let{openPaneHistoryItem:e}=bJ(),t=bY(),r=r=>{if(r.metaKey||r.shiftKey||1===r.button)return;r.preventDefault();let a=parseInt(r.currentTarget.getAttribute("data-id")??(t.length-2).toString()),n={historyIdx:a,item:t[a]};e(n)},a=[...t],n=a.map((e,t)=>{let r=e.getExtendedRepository(),n=r?.name||e.getRepositoryName()||"",l=r?.url?(0,uO.jsx)(Cv,{repository:r}):void 0,i=t===a.length-5||a.length<5&&0===t,s=a[t-1],o=s&&s.getRepositoryName()||"";return!i&&o&&o===n&&(n="",l=void 0),{url:e.getUrl(),repoName:n,repoIcon:l,issueNumber:`#${e.getItemNumber()}`,id:t}});return(0,uO.jsx)(Dr,{items:n.slice(-5),onClick:r})};try{(rw=Da).displayName||(rw.displayName="SidePanelBreadcrumbsWrapper")}catch{}var Dn=r(21364);let Dl=({itemType:e,state:t})=>{let r=null;return e===Iq.PROJECT_DRAFT_ISSUE&&(r=(0,uO.jsx)(Di,{})),e===Iq.ISSUE&&(r=(0,uO.jsx)(Ds,{state:t.state,reason:t.stateReason})),r?(0,uO.jsxs)(mF.Z,{as:"figure",sx:{m:0},children:[(0,uO.jsx)("figcaption",{style:{position:"absolute",clipPath:"circle(0)"},children:"Item status"}),r]}):null},Di=()=>(0,uO.jsx)(Dn.Z,{status:"issueDraft",variant:"small",children:"Draft"}),Ds=({state:e,reason:t})=>e===ym.Open?(0,uO.jsx)(Dn.Z,{status:"issueOpened",variant:"small",className:"prc-StateLabel--open",children:"Open"}):e===ym.Closed&&t===yp.NotPlanned?(0,uO.jsxs)(Dn.Z,{status:"draft",variant:"small",sx:{"& > svg:first-child":{visibility:"hidden",position:"absolute"}},children:[(0,uO.jsx)(mM.C4D,{}),(0,uO.jsx)(mO.Z,{sx:{pl:1},children:"Closed"})]}):e===ym.Closed?(0,uO.jsx)(Dn.Z,{status:"issueClosed",variant:"small",children:"Closed"}):null;try{(rj=Dl).displayName||(rj.displayName="ItemStateLabel")}catch{}try{(rC=Di).displayName||(rC.displayName="DraftIssueState")}catch{}try{(rk=Ds).displayName||(rk.displayName="IssueState")}catch{}let Do=({onResize:e}={})=>{let[t,r]=(0,uq.useState)(()=>document.getElementById("memex-project-view-root")),a=CD(t);(0,uq.useLayoutEffect)(()=>{t||r(document.getElementById("memex-project-view-root"))},[t]);let n=m1(e);return(0,uq.useLayoutEffect)(()=>{n.current?.(a)},[a,n]),a},Dd={completed:0,total:0,percent:0};function Dc(e){if(!e)return{};let{repositoryId:t,itemId:r,title:a,url:n,state:l,stateReason:i,repositoryName:s,displayNumber:o,assignees:d,labels:c}=e;return{item:new HierarchySidePanelItem({key:{repoId:t,issueId:r},title:a,url:n,state:l,stateReason:i,repoName:s,number:o,assignees:d,labels:c},Dd)}}function Du(e){let{title:t,state:r,stateReason:a,url:n,number:l,repoId:i,repoName:s,userName:o,assignees:d,labels:c}=e;return{ownerId:e.key.ownerId,uuid:e.key.primaryKey.uuid,itemId:e.key.itemId,title:t,state:r,stateReason:a,url:n,displayNumber:l,repositoryId:i,repositoryName:s,ownerLogin:o,assignees:d,labels:c,position:0}}function Dm(e){return{key:{ownerId:e.ownerId,itemId:e.itemId,primaryKey:{uuid:e.uuid}},title:e.title,url:e.url,state:e.state,repoName:e.repositoryName,repoId:e.repositoryId,userName:e.ownerLogin,number:e.displayNumber,labels:e.labels,assignees:e.assignees,stateReason:e.stateReason}}let Dp={position:"relative"},Df=[],Dh=({currentValue:e=Df})=>{let[t,r]=(0,uq.useState)(!1),[a,n]=(0,uq.useState)(!1),[l,i]=(0,uq.useState)(null),{openPaneHistoryItem:s}=bJ(),o=CD(l),d=(0,uq.useRef)(null),c=(0,uq.useRef)(null),u=()=>r(!t),m=e.length>2&&!t||a,p=t&&!a,f=e.slice(0,2),h=p?e:f,{clientHeight:g}=Do({onResize:()=>{a&&((0,w8.flushSync)(()=>{n(!1)}),n(!0))}});return(0,uq.useEffect)(()=>{if(!d.current)return;let e=d.current.getBoundingClientRect(),t=e.right>(window.innerWidth||document.documentElement.clientWidth);a||n(t)},[a,t]),e.length?(0,uO.jsx)("div",{ref:c,children:(0,uO.jsxs)(mF.Z,{sx:Dp,ref:i,style:{width:o.clientWidth},children:[(0,uO.jsx)(EL.Z,{as:"div",onMouseEnter:u,onMouseLeave:u,ref:d,size:"large",sx:t&&!a?{...Dw,...Dj}:Dw,...(0,mp.f)("tracked-by-label"),children:(0,uO.jsx)(Dv,{showElipsis:m,children:(0,uO.jsx)(Dx,{items:h})})}),(0,uO.jsx)(In.P,{anchorRef:c,open:a,onOpenChange:IR.Z,children:(0,uO.jsx)(In.P.Overlay,{sx:{width:"353px",maxHeight:g,overflow:"auto"},onEscape:()=>n(!1),onClickOutside:()=>n(!1),children:(0,uO.jsx)(Ia.S,{children:(0,uO.jsx)(Ia.S.Group,{children:e.map(e=>(0,uO.jsx)(Ia.S.LinkItem,{href:e.url,onClick:Dg(e,s),rel:"noreferer",role:"button",target:"_blank",children:(0,uO.jsx)(Db,{title:`Tracking: ${e.title}`,displayNumber:e.displayNumber,state:e.state,stateReason:e.stateReason,url:e.url})},e.itemId))})})})})]})}):null},Dg=(e,t)=>{let r=Dc(e);return e=>{e.ctrlKey||e.metaKey||!r.item||(e.preventDefault(),t(r))}},Dx=({items:e})=>{let{openPaneHistoryItem:t}=bJ();return(0,uO.jsx)(uO.Fragment,{children:e.map((r,a)=>(0,uO.jsx)(Dy,{onClick:Dg(r,t),title:`#${r.displayNumber}${e.length>1&&a!==e.length-1?",":""}`,state:r.state,stateReason:r.stateReason,url:r.url,itemId:r.itemId},r.itemId))})},Dy=({title:e,state:t,stateReason:r,url:a,itemId:n,...l})=>(0,uO.jsxs)(w3.Z,{...l,target:"_blank",rel:"noreferer",href:a,role:"button","data-hovercard-type":"issue","data-hovercard-url":`${a}/hovercard`,...(0,mp.f)(`tracked-by-label-${n}`),children:[(0,uO.jsx)(jh,{state:t,stateReason:r,type:"Issue",isDraft:!1}),(0,uO.jsx)(mO.Z,{as:"span",sx:{color:"fg.muted",fontSize:0,mx:1},children:e})]}),Db=({displayNumber:e,title:t,state:r,stateReason:a,url:n,...l})=>(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},...l,children:[(0,uO.jsx)(jh,{state:r,stateReason:a,type:"Issue",isDraft:!1}),(0,uO.jsx)(mO.Z,{as:"span",sx:{color:"fg.default",fontSize:0,mx:1},children:t}),(0,uO.jsx)(mO.Z,{as:"span",sx:{color:"fg.muted",fontSize:0,mx:1,flexGrow:1,textAlign:"end"},children:`#${e}`})]}),Dv=({showElipsis:e,children:t})=>{let{trackedBy:r}=fq;return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mO.Z,{as:"span",sx:{color:"fg.muted",fontSize:0,mr:1},children:r}),t,e&&(0,uO.jsx)(mO.Z,{as:"span",sx:{color:"fg.muted"},children:"..."})]})},Dw={backgroundColor:"canvas.subtle",color:"fg.muted",cursor:"pointer",display:"flex",justifyContent:"center",p:"4px 12px",overflow:"hidden",textAlign:"left"},Dj={position:"absolute",zIndex:1,top:0,bottom:0,margin:"-12px 0"};try{(rS=Dh).displayName||(rS.displayName="TrackedByLabel")}catch{}try{(rI=Dx).displayName||(rI.displayName="TrackedByItems")}catch{}try{(rN=Dy).displayName||(rN.displayName="TrackedByLink")}catch{}try{(r_=Db).displayName||(r_.displayName="TrackedByMenuItem")}catch{}try{(rT=Dv).displayName||(rT.displayName="TrackedByLabelContent")}catch{}var DC=r(84817);function Dk({progress:e}){let{theme:t}=(0,uz.Fg)();return(0,uO.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14","data-target":"tracked-issues-progress.progress","data-circumference":"38",style:{transform:"rotate(-90deg)",display:"inline-block",overflow:"visible",verticalAlign:"text-bottom"},children:[e<1?null:(0,uO.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0206 11.1074C9.68518 11.3949 9.18014 11.3561 8.8926 11.0206L5.8926 7.52061C5.62055 7.20322 5.63873 6.72989 5.93432 6.4343L7.43432 4.9343C7.74674 4.62188 8.25327 4.62188 8.56569 4.9343C8.87811 5.24672 8.87811 5.75325 8.56569 6.06567L7.58953 7.04182L10.1074 9.97935C10.3949 10.3148 10.3561 10.8198 10.0206 11.1074Z",fill:t?.colors.done.fg}),(0,uO.jsx)("circle",{stroke:t?.colors.border.default,strokeWidth:"2",fill:"transparent",cx:"50%",cy:"50%",r:"6"}),(0,uO.jsx)("circle",{style:{transition:"stroke-dashoffset 0.35s"},stroke:t?.colors.done.fg,strokeWidth:"2",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",fill:"transparent",cx:"50%",cy:"50%",r:"6"})]})}let DS=(0,uq.forwardRef)(({progress:{percent:e,total:t,completed:r},description:a,constantWidth:n,...l},i)=>{let s=("button"===l.as&&!l.disabled||"a"===l.as)&&!n;return(0,uO.jsx)(DC.Z,{ref:i,leadingVisual:()=>(0,uO.jsx)(Dk,{progress:e/100}),text:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)("span",{...(0,mp.f)("progress-text"),children:a??`${r} of ${t}`}),s&&(0,uO.jsx)(mL.Z,{icon:mM.VZf,className:"triangle",sx:{opacity:"0 !important",transitionProperty:"transform, opacity",transitionDuration:"0.2s",transitionTimingFunction:"ease-in-out",position:"absolute",right:0,paddingRight:0,transform:"translateX(-12px) translateY(-50%)",top:"50%"}})]}),...l,sx:{pl:1,bg:"canvas.default",transitionProperty:"background-color, padding-right",transitionDuration:"0.2s",transitionTimingFunction:"ease-in-out","&:hover, &:focus":s?{pr:3,".triangle":{opacity:"1 !important",transform:"translateX(0) translateY(-50%)"}}:{},...l.sx}})});DS.displayName="TracksToken";try{(rR=Dk).displayName||(rR.displayName="ProgressIcon")}catch{}let DI=({completion:e})=>{if(!e||0===e.total)return null;let{completed:t,total:r}=e,{tasks:a}=fG,n=a(t,r);return t?(0,uO.jsx)(DS,{progress:e,description:n,size:"large"}):(0,uO.jsxs)(EL.Z,{size:"large",variant:"secondary",sx:{display:"flex",height:"25.5px",p:"5px 12px"},children:[(0,uO.jsx)(mM.yAY,{size:16}),(0,uO.jsx)(mO.Z,{as:"div",sx:{m:"0 4px"},children:n})]})};try{(rE=DI).displayName||(rE.displayName="TracksLabel")}catch{}let DN=()=>{let{sidePanelMetadata:e}=RM(),{completion:t,trackedBy:r}=e;return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",gap:"8px"},...(0,mp.f)("tracking-fields"),children:[(0,uO.jsx)(DI,{completion:t}),r?.length?(0,uO.jsx)(Dh,{currentValue:r}):null]})};try{(rD=DN).displayName||(rD.displayName="TrackingFields")}catch{}let D_=(0,uq.memo)(function({item:e,isLoading:t,selectedTab:r,onTabChange:a,showBreadcrumbs:n,showTabs:l}){let{sidePanelMetadata:i}=RM(),{memex_sidepanel_tracking_fields:s}=g9(),{title:o,createdAt:d,user:c,state:u,itemKey:m}=i,p=!n&&e.contentType===mA.Issue;return(0,uO.jsxs)(mF.Z,{as:"header",sx:{backgroundColor:"canvas.default",zIndex:1},children:[(0,uO.jsx)(mF.Z,{sx:{px:[3,"",4],pt:3},children:(0,uO.jsx)(mF.Z,{sx:{display:"flex"},children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",flex:"auto"},children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"row-reverse"},children:[(0,uO.jsx)(DR,{}),n&&(0,uO.jsx)(mF.Z,{...(0,mp.f)("side-panel-breadcrumbs"),sx:{flexGrow:1},children:(0,uO.jsx)(Da,{})}),p&&(0,uO.jsx)(mF.Z,{sx:{flex:1},children:(0,uO.jsx)(DT,{item:e})})]}),(0,uO.jsx)(DE,{item:e,title:o,isLoading:t}),!t&&d&&c.login?(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:2,mt:1},children:[(0,uO.jsx)(Dl,{itemType:m.kind,state:u}),s&&(0,uO.jsx)(DN,{}),(0,uO.jsxs)(mO.Z,{sx:{fontSize:1,fontStyle:"normal"},as:"address",children:[(0,uO.jsx)(mO.Z,{sx:{fontWeight:"bold"},children:c.login}),(0,uO.jsxs)(mO.Z,{sx:{color:"fg.muted"},children:[" opened ",(0,uO.jsx)(EM.Z,{datetime:d})]})]})]}):null]})})}),l?(0,uO.jsx)(DD,{selectedTab:r,onTabChange:a}):(0,uO.jsx)(mF.Z,{sx:{borderBottom:"1px solid",borderColor:"border.muted",pb:4}})]})});D_.displayName="SidePanelHeader";let DT=({item:e})=>{let t=e.getExtendedRepository(),r=t?.name||e.getRepositoryName()||"",a=t?.url?(0,uO.jsx)(Cv,{repository:t}):void 0;return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:[a&&(0,uO.jsx)(mO.Z,{sx:{mr:1},children:a}),(0,uO.jsx)(mO.Z,{children:`${r} #${e.getItemNumber()}`})]})},DR=({children:e})=>{let{closeButtonRef:t,pinButtonRef:r,closePane:a,pinned:n,setPinned:l}=bJ(),{memex_pinned_side_panel:i}=g9();return(0,uO.jsxs)(mF.Z,{role:"group","aria-label":fE.sidePanelToolbarLabel,sx:{display:"flex",flexDirection:"row-reverse"},children:[(0,uO.jsx)(kF.h,{variant:"invisible","aria-label":"Close panel",icon:mM.b0D,onClick:()=>a(),...(0,mp.f)("side-panel-button-close"),ref:t}),i&&(0,uO.jsx)(kX,{variant:"invisible",label:n?fE.sidePanelUnpinLabel:fE.sidePanelPinLabel,icon:n?De:E9,onClick:()=>l(!n),ref:r,tooltipDirection:"sw"}),e]})},DE=(0,uq.memo)(function({item:e,title:t,isLoading:r}){let[a,n]=Rh(),[l,i]=(0,uq.useState)(""),s=(0,uq.useRef)(null),{hasWritePermissions:o}=yI(),{postStats:d}=bM(),{addToast:c}=m7(),{editIssueTitle:u,sidePanelMetadata:{capabilities:m,itemKey:p,issueNumber:f,url:h}}=RM(),g=(0,uq.useMemo)(()=>m?.includes("editTitle"),[m]),x=(0,uq.useCallback)(()=>{a||i(t.raw)},[t,a]);(0,uq.useEffect)(()=>x(),[x]);let y=(0,uq.useCallback)(async t=>{let r=RQ(t);e&&(await u(r),d({name:hV,ui:hS,memexProjectItemId:e.id}))},[u,e,d]),b=b6({request:y,rollback:x}),v=(0,uq.useCallback)(async()=>{if(s.current&&s.current instanceof HTMLInputElement){let e=s.current.value.trim();if(""===e){c({message:fE.titleCannotBeBlank,type:mB.warning});return}await b.perform(e)}n(!1)},[b,c,n]),w=(0,uq.useCallback)(e=>{i(e.target.value)},[i]),j=(0,uq.useCallback)(e=>{switch(e.key){case k_.ENTER:v(),e.preventDefault();break;case k_.ESCAPE:x(),n(!1),e.preventDefault()}},[v,x,n]),C=Eg(j),k=(0,uq.useCallback)(()=>{o&&(x(),n(!0))},[o,x,n]);(0,uq.useEffect)(()=>{a?s.current?.focus():setTimeout(()=>{document.activeElement===document.body&&s.current?.focus()})},[a]);let S=ER();return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexGrow:1,justifyContent:"space-between",alignItems:"center",gap:2,pt:a?1:0,mb:a?1:0},children:[(0,uO.jsx)(mF.Z,{sx:{flexGrow:1},...(0,mp.f)("side-panel-title"),children:a?(0,uO.jsx)(E_.Z,{...S,sx:{width:"100%"},children:(0,uO.jsx)(k4.Z,{"aria-label":"Item title",sx:{lineHeight:"18px"},ref:s,value:l,onChange:w,...C,size:"small",...(0,mp.f)("side-panel-title-input")})}):(0,uO.jsx)(uO.Fragment,{children:(0,uO.jsx)(mO.Z,{sx:{fontSize:4,fontWeight:"bold",maxWidth:"100%",display:"inline",wordBreak:"break-word"},as:"h2",...(0,mp.f)("side-panel-title-content"),children:r?(0,uO.jsx)(mO.Z,{sx:{fontWeight:"normal",fontSize:3},children:"Loading..."}):p.kind===Iq.ISSUE&&f&&h?(0,uO.jsxs)(w3.Z,{href:h,target:"_blank",sx:{color:"fg.default"},onClick:()=>d({name:ga}),children:[(0,uO.jsx)(jc,{as:"bdi",children:t.html}),(0,uO.jsxs)(mO.Z,{sx:{ml:2,color:"fg.muted",fontWeight:"normal"},children:["#",f]})]}):(0,uO.jsx)(jc,{as:"bdi",children:t.html})})})}),(0,uO.jsxs)(mF.Z,{sx:{mt:a?0:1},children:[!a&&!r&&g&&(0,uO.jsx)(jI.z,{size:"small",onClick:k,variant:"invisible",...(0,mp.f)("side-panel-title-edit-button"),sx:{color:"fg.default"},children:fE.editTitle}),a&&(0,uO.jsxs)(mF.Z,{sx:{display:"flex",gap:2},children:[(0,uO.jsx)(jI.z,{size:"small",variant:"primary",onClick:v,...(0,mp.f)("side-panel-title-save-button"),children:"Save"}),(0,uO.jsx)(jI.z,{size:"small",onClick:()=>{x(),n(!1)},...(0,mp.f)("side-panel-title-revert-button"),children:"Cancel"})]})]})]})}),DD=({selectedTab:e,onTabChange:t})=>(0,uO.jsxs)(E7.Z,{sx:{pl:3,flexShrink:0,cursor:"pointer",borderBottom:0},children:[(0,uO.jsx)(E7.Z.Link,{onClick:()=>t("details"),selected:"details"===e,sx:{"&:hover":{outline:"none"}},children:"Details"}),(0,uO.jsx)(E7.Z.Link,{onClick:()=>t("tracks"),selected:"tracks"===e,sx:{"&:hover":{outline:"none"}},children:"Tracks"})]});try{(rP=DR).displayName||(rP.displayName="SidePanelToolbar")}catch{}try{(rA=DE).displayName||(rA.displayName="SidePanelTitle")}catch{}let DP=({targetRepository:e,sx:t})=>{let r=(0,uq.useRef)(null),a=(0,uq.useRef)(null),[n,l]=(0,uq.useState)(""),[i,s]=(0,uq.useState)(!1),[o,d]=(0,uq.useState)(!1),[c,u]=(0,uq.useState)(void 0),[m,p]=(0,uq.useState)([]),[f,h]=(0,uq.useState)([]),g=(0,uq.useRef)(),{suggestRepositories:x,clearCachedSuggestions:y}=Cb(),{postStats:b}=bM(),v=(0,uq.useRef)(f),{hasFetchedRepos:w,setSelectedRepo:j,setHasFetchedRepos:C}=vo();(0,Cp.P)({restoreFocusOnCleanUp:!0,initialFocusRef:r,containerRef:a});let k=(0,uq.useCallback)(()=>{s(!1)},[]),S=(0,uq.useCallback)(async()=>{if(v.current.length)return;d(!0),y();let t=await x(e?.id);h(t??[]),C(!0),d(!1)},[y,C,x,e?.id]),I=(0,uq.useCallback)(e=>(""!==n?m:f).find(t=>t.id===e),[n,m,f]);(0,uq.useEffect)(()=>{S()},[S,C]),(0,uq.useEffect)(()=>{if(w&&!c){let t=f.find(t=>t.id===e?.id),r=t??f[0];r&&u({id:r.id,text:r.name,leadingVisual:()=>Cv({repository:r})}),C(!0),j(r||null)}},[j,C,f,c,w,e?.id]);let N=e=>{l(e),T()},_=(0,uq.useCallback)(async e=>{if(""!==e){d(!0);let{repositories:t}=await Ch(e);p(t),d(!1)}else p(f??[])},[f]),T=(0,uq.useCallback)(()=>{g.current&&g.current.cancel(),g.current=(0,b7.Z)(()=>_(n),200),g.current()},[_,n]),R=e=>{if(e?.id){let t=I(e.id);t&&(u({id:t.id,text:t.name,leadingVisual:()=>Cv({repository:t})}),j(t),b({name:"bulk_add_side_panel_repo_switched",context:JSON.stringify({repo:t.name})}))}},E=(""!==n?m:f).map(e=>{let{projectOwner:t}=yk(),r=e.nameWithOwner.split("/")[0],a=r?.toLowerCase()!==t?.login.toLowerCase()?e.nameWithOwner:e.name;return{...e,text:a,leadingVisual:()=>Cv({repository:e}),selectionVariant:"single",descriptionVariant:"block",selected:void 0,onAction:(t,r)=>{r.preventDefault(),R(e),k()}}});return(0,uO.jsx)(Cf.b,{placeholderText:fE.repoPickerFilterPlaceholder,open:i,renderAnchor:({children:e,...r})=>(0,uO.jsx)(jI.z,{leadingIcon:c?.leadingVisual,trailingIcon:mM.AS7,sx:t,...r,...(0,mp.f)("repo-suggestions-button"),children:e||fE.selectRepo}),onOpenChange:()=>s(!0),loading:o,selected:c,filterValue:n,items:E,showItemDividers:!0,onFilterChange:N,onSelectedChange:R,overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:k,...(0,mp.f)("repo-picker-repo-list")}})};DP.displayName="RepoSuggestions";let DA=(0,uq.memo)(function({onClick:e,disabled:t}){return(0,uO.jsx)(jI.z,{variant:"invisible",size:"small",onClick:e,"aria-label":"Search",disabled:t,sx:{margin:"0 2px",color:t?"accent.muted":"accent.fg",border:"none",height:"24px"},...(0,mp.f)("bulk-add-search-button"),children:"Search \u23CE"})}),DM=({targetRepository:e,newItemAttributes:t})=>{let{postStats:r}=bM(),{isPaneOpened:a}=bJ(),{addSelectedItemsRequest:n,selectedItems:l,hasFetchedRepos:i,selectedRepo:s,setSelectedRepo:o,setHasFetchedRepos:d,loading:c,addingItems:u,items:m,searchQuery:p,setSearchQuery:f,setAreAllItemsAdded:h,setUpdateColumnsAction:g,MAX_ITEM_NUM:x}=vo(),[y,b]=(0,uq.useState)(!1),[v,w]=(0,uq.useState)(!1),[j,C]=(0,uq.useState)(p),k=i&&s,S=(0,uq.useRef)(null),I=(0,uq.useRef)(a);(0,uq.useEffect)(function(){I.current&&!a&&(o(null),f(""),g([]),d(!1)),I.current=a},[d,f,o,g,a]);let N=(0,uq.useCallback)(e=>{let t=kE(e),r=e.currentTarget.value.trim();t===k_.ENTER&&f(r)},[f]),_=Eg(N),T=(0,uq.useCallback)(e=>{C(e.currentTarget.value),w(e.currentTarget.value.trim().length>0)},[]),R=(0,uq.useCallback)(()=>{let e=S.current?.value??"";f(e)},[f]),E=(0,uq.useCallback)(()=>{b(!0)},[]),D=(0,uq.useCallback)(()=>{b(!1)},[]);(0,uq.useEffect)(()=>{t&&t.setField?g([t.setField]):g([])},[g,t]);let P=(0,uq.useCallback)(async()=>{await n.perform(l),r({name:"bulk_add_side_panel_add_items",context:l.length.toString()}),l.length===x&&h(!0)},[n,l,r,x,h]),A=v||y||p!==j,M=!v&&!p||p===j;return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",backgroundColor:"canvas.default",width:"100%",height:"100%",overflow:"auto",justifyContent:"space-between"},...(0,mp.f)("bulk-add-view"),children:[(0,uO.jsxs)(mF.Z,{sx:{mt:4,mx:[3,"",4]},children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",mb:3,flexDirection:"row-reverse"},children:[(0,uO.jsx)(DR,{}),(0,uO.jsx)(mF.Z,{sx:{flex:1}}),(0,uO.jsx)(mO.Z,{sx:{fontWeight:"600",fontSize:3},children:fE.sidePanelBulkAddLabel})]}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",justifyContent:"flex-start"},children:[(0,uO.jsx)(DP,{targetRepository:e},"repoSuggestions"),(0,uO.jsx)(k4.Z,{sx:{flex:1,ml:2},disabled:!k,leadingVisual:mM.W1M,"aria-label":"Search for issues and pull requests",ref:S,type:"text",placeholder:"Search for issues and pull requests",onChange:T,onFocus:E,onBlur:D,..._,size:"small",value:j,trailingAction:A?(0,uO.jsx)(DA,{onClick:R,disabled:M}):void 0,...(0,mp.f)("suggested-items-search-input")})]}),(0,uO.jsx)(jS,{})]}),(0,uO.jsx)(mF.Z,{sx:{position:"sticky",zIndex:"1",display:"flex",justifyContent:"flex-end",bottom:"0",backgroundColor:"canvas.default",borderTop:"1px solid",borderColor:"border.default",width:"100%"},children:(0,uO.jsx)(jI.z,{variant:"primary",onClick:P,...(0,mp.f)("bulk-add-button"),disabled:c||u||m?.length===0||0===l.length,sx:{my:3,mr:4},children:u?1===l.length?"Adding item...":"Adding items...":"Add selected items"})})]})};try{(rM=DA).displayName||(rM.displayName="SearchButton")}catch{}try{(rL=DM).displayName||(rL.displayName="BulkAddView")}catch{}var DL=r(33831);let DF=(0,uq.forwardRef)((e,t)=>{let[r,a]=Rh(),[n,l]=(0,uq.useState)(""),[i,s]=(0,uq.useState)(!1),[o,d]=(0,uq.useState)(!1);(0,uq.useEffect)(()=>a(""!==n.trim()),[n,a]);let[c,u]=(0,uq.useState)("edit"),m=()=>{l(""),u("edit"),s(!1)};(0,uq.useEffect)(()=>{if(kR())return;let e=e=>{let r="r"===e.key,a=window.getSelection()?.toString(),n=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey,i=document.activeElement instanceof HTMLTextAreaElement||document.activeElement instanceof HTMLInputElement;r&&a&&!n&&!i&&((0,w8.flushSync)(()=>{l(e=>e.length?`${e}

> ${a}

`:`> ${a}

`)}),t&&"current"in t&&(t?.current?.scrollIntoView(),t?.current?.focus())),d((e.ctrlKey||e.metaKey)&&e.shiftKey)},r=()=>d(!1);return window.addEventListener("keydown",e),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",r)}},[t]);let{addIssueComment:p,sidePanelMetadata:f,updateSidePanelItemState:h}=RM(),g=(0,uq.useMemo)(()=>new Set(f.capabilities),[f]),x=b6({request:async()=>{s(!0),await p(n),m()},rollback:l,showErrorToast:!0}),y=()=>r&&!i&&x.perform(void 0,n),b=b6({request:async({state:e,stateReason:t})=>{s(!0),r?await p(n,e,t):await h(e,t),m()},rollback:l,showErrorToast:!0}),v=(e,t)=>!i&&b.perform({state:e,stateReason:t},n),w=g.has("reopen")?()=>v(yh.Open,yg.Reopened):void 0,j=g.has("close")?e=>v(yh.Closed,e):void 0;if(f.itemKey.kind!==Iq.ISSUE)return null;let C={repositoryId:f.itemKey.repositoryId,issueId:f.itemKey.itemId},k=R6(f.itemKey.kind,!0),S=f.slashCommandsUrl&&k?{url:f.slashCommandsUrl,surface:k}:void 0,I=()=>{if(o){let e=f.state.state===yh.Closed;return e?w?.():j?.()}y()};return(0,uO.jsxs)(Eu,{disabled:i,value:n,onChange:l,placeholder:"Leave a comment",context:C,onPrimaryAction:I,viewMode:c,onChangeViewMode:u,ref:t,sx:{mb:2,boxShadow:"shadow.small"},slashCommandsConfig:S,children:[(0,uO.jsx)(Eu.Label,{visuallyHidden:!0,children:"Add new comment"}),(0,uO.jsx)(Eu.Actions,{children:(0,uO.jsx)(Dz,{disabled:i,isCommentEmpty:!r,currentIssueState:f.state.state,currentIssueStateReason:f.state.stateReason,onSaveComment:y,onClose:j,onReopen:w})})]})});function DZ(e,t,r){return e===yh.Open?r?fE.issueButtonLabel.closeWithComment:fE.issueButtonLabel.closeIssue:t===yg.NotPlanned?fE.issueButtonLabel.closeAsNotPlanned:fE.issueButtonLabel.closeAsCompleted}function DO(e){return e?fE.issueButtonLabel.reopenWithComment:fE.issueButtonLabel.reopenIssue}DF.displayName="SidePanelAddComment";let DB=({selectedStateReason:e,issueState:t,onClose:r,onReopen:a,hasComment:n,disabled:l})=>{switch(e){case yg.Completed:return(0,uO.jsx)(jI.z,{size:"small",onClick:()=>r?.(),leadingIcon:mM.GFI,sx:{color:"done.fg",display:"inline-block"},disabled:!r||l,...(0,mp.f)("sidepanel-close-issue-as-completed-button"),children:(0,uO.jsx)(mO.Z,{sx:{color:"fg.default"},children:DZ(t,e,n)})});case yg.Reopened:return(0,uO.jsx)(jI.z,{size:"small",onClick:a,leadingIcon:mM.eJg,sx:{color:"open.fg"},disabled:!a||l,...(0,mp.f)("sidepanel-reopen-issue-button"),children:(0,uO.jsx)(mO.Z,{sx:{color:"fg.default"},children:DO(n)})});case yg.NotPlanned:return(0,uO.jsx)(jI.z,{size:"small",onClick:()=>r?.(yg.NotPlanned),leadingIcon:mM.C4D,sx:{color:"fg.muted"},disabled:!r||l,...(0,mp.f)("sidepanel-close-issue-as-not-planned-button"),children:(0,uO.jsx)(mO.Z,{sx:{color:"fg.default"},children:DZ(t,e,n)})});default:return null}},DV=({selectedStateReason:e,setSelectedStateReason:t,issueState:r,issueStateReason:a,canClose:n,canReopen:l})=>{let i=(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>t(yg.Completed),selected:e===yg.Completed,disabled:!n,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{sx:{color:"done.fg"},children:(0,uO.jsx)(mM.GFI,{})}),fE.issueButtonLabel.closeAsCompleted,(0,uO.jsx)(Ia.S.Description,{variant:"block",children:fE.issueButtonLabel.closeAsCompletedDescription})]},"close-issue-as-completed-option"),s=(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>t(yg.NotPlanned),selected:e===yg.NotPlanned,disabled:!n,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.C4D,{})}),fE.issueButtonLabel.closeAsNotPlanned,(0,uO.jsx)(Ia.S.Description,{variant:"block",children:fE.issueButtonLabel.closeAsNotPlannedDescription})]},"close-issue-as-not-planned-option"),o=(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>t(yg.Reopened),selected:e===yg.Reopened,disabled:!l,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{sx:{color:"open.fg"},children:(0,uO.jsx)(mM.eJg,{})}),fE.issueButtonLabel.reopenIssue]},"reopen-issue-option");return(0,uO.jsxs)(Ia.S,{selectionVariant:"single",role:"listbox","aria-roledescription":"update issue state options menu",sx:{display:"flex",flexDirection:"column"},children:[r===yh.Open&&(0,uO.jsxs)(uO.Fragment,{children:[i,s]}),r===yh.Closed&&(a===yg.Completed||!a)&&(0,uO.jsxs)(uO.Fragment,{children:[o,s]}),r===yh.Closed&&a===yg.NotPlanned&&(0,uO.jsxs)(uO.Fragment,{children:[o,i]})]})};function D$(e){return e===yh.Open?yg.Completed:yg.Reopened}let Dz=({isCommentEmpty:e,onSaveComment:t,currentIssueState:r,currentIssueStateReason:a,disabled:n,onClose:l,onReopen:i})=>{let[s,o]=(0,uq.useState)(D$(r));(0,uq.useLayoutEffect)(()=>o(D$(r)),[r,a]);let[d,c]=(0,uq.useState)(!1);return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:2},children:[(l||i)&&(0,uO.jsxs)(DL.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(DB,{disabled:n,issueState:r,hasComment:!e,selectedStateReason:s,onClose:l,onReopen:i}),(0,uO.jsxs)(In.P,{open:d,onOpenChange:c,children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsx)(kF.h,{size:"small",icon:mM.AS7,"aria-label":fE.issueSideButtonMoreOptionsLabel})}),(0,uO.jsx)(In.P.Overlay,{children:(0,uO.jsx)(DV,{selectedStateReason:s,setSelectedStateReason:o,canClose:void 0!==l,canReopen:void 0!==i,issueState:r,issueStateReason:a})})]})]}),(0,uO.jsx)(Eu.ActionButton,{variant:"primary",className:"prc-Button--primary",disabled:e||n,onClick:t,...(0,mp.f)("add-comment-button"),children:"Comment"})]})};try{(rF=CloseAsCompleted).displayName||(rF.displayName="CloseAsCompleted")}catch{}try{(rZ=CloseAsNotPlanned).displayName||(rZ.displayName="CloseAsNotPlanned")}catch{}try{(rO=Reopen).displayName||(rO.displayName="Reopen")}catch{}let DU=({itemURL:e})=>{let{sidePanelMetadata:{comments:t,capabilities:r,slashCommandsUrl:a},editIssueComment:n,reactToSidePanelItem:l}=RM(),[i,s]=(0,uq.useState)(null),o=(0,uq.useRef)(null),d=CD(i),c=d.offsetHeight??0,u=()=>{o.current?.scrollIntoView({behavior:"smooth",block:"end"}),o.current?.focus({preventScroll:!0})};return t?(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",px:2,backgroundColor:"canvas.subtle",borderTop:"1px solid",borderColor:"border.muted",flex:"auto"},as:"section",ref:s,...(0,mp.f)("all-comments-box"),children:[(0,uO.jsx)("h3",{style:{clipPath:"circle(0)",position:"absolute"},children:"Comments"}),(0,uO.jsx)(DW,{onClick:u,visible:c>=1e4}),(0,uO.jsx)("ul",{style:{listStyle:"none"},children:t.map(t=>(0,uO.jsx)(DG,{comment:t,editIssueComment:n,reactToSidePanelItem:l,itemURL:e,slashCommandsUrl:a},t.id))}),r?.includes("comment")&&(0,uO.jsx)(DF,{ref:o})]}):null},DW=({onClick:e,visible:t})=>(0,uO.jsx)(DH,{sx:{display:"flex",justifyContent:"flex-end",px:3},children:(0,uO.jsx)(jI.z,{variant:"invisible",size:"small",onClick:e,trailingIcon:mM.veu,sx:{px:2,position:t?"unset":"absolute",clipPath:t?"unset":"Circle(0)",":focus":{position:"unset",clipPath:"unset"}},"aria-label":"Jump to 'add comment' input",...(0,mp.f)("jump-to-bottom-button"),children:fE.jumpToBottom})}),DH=({children:e,sx:t})=>(0,uO.jsx)(mF.Z,{sx:{borderLeft:"1px solid",borderColor:"border.muted",py:2,ml:4,...t},children:e}),DG=({comment:e,editIssueComment:t,reactToSidePanelItem:r,itemURL:a,slashCommandsUrl:n})=>{let l=`${a}#issuecomment-${e.id}`,i={repositoryId:e.repositoryId,issueId:e.issueId},s=n?{url:n,surface:"issue_comment"}:void 0,o=e.capabilities?.includes("editDescription")?async r=>{await t(e.id,r)}:void 0,d=e.capabilities?.includes("react")?(t,a,n)=>r(t,a,n,e.id):void 0;return(0,uO.jsxs)(mF.Z,{as:"li",...(0,mp.f)(`comments-box-${e.id}`),children:[(0,uO.jsx)(mF.Z,{sx:{border:"1px solid",borderColor:"border.muted",backgroundColor:"canvas.default",borderRadius:2,boxShadow:"shadow.small"},children:(0,uO.jsx)(E5,{author:e.user,authorAssociation:e.authorAssociation,createdAt:new Date(e.createdAt),editedAt:e.description.editedAt?new Date(e.description.editedAt):void 0,description:e.description,reactions:e.reactions,context:i,slashCommandsConfig:s,onEdit:o,onReact:d,url:l})}),(0,uO.jsx)(DH,{})]})};try{(rB=DU).displayName||(rB.displayName="SidePanelComments")}catch{}try{(rV=DW).displayName||(rV.displayName="JumpToBottomButton")}catch{}try{(r$=DH).displayName||(r$.displayName="TimelineSpacer")}catch{}var Dq=r(32650);let DK=e=>e!==mA.RedactedItem;function DQ(e,t){let r=(0,fS.Z)(e.archivedAt),a=(0,fS.Z)(t.archivedAt),n=a.getTime()-r.getTime();return 0!==n?n:t.id-e.id}async function DY(e){let t=f9("memex-item-archive-api-data"),{memex_skip_json_parsing_if_invalid_response_and_content_found:r}=ho(),{data:a}=await hx(t.url,{method:"POST",body:e},r);return a}function DX(e){let t=(0,uq.useCallback)((t,r)=>e.mutateAsync(t,r).catch(IR.Z),[e]);return{mutation:e,mutateAsync:t}}let DJ=()=>{let e=I4(),{findMemexItem:t}=IO(),r=(0,uq.useCallback)(r=>{e.removeSuggestions(r.map(e=>"number"==typeof e?t(e)?.getSuggestionsCacheKey():e.getSuggestionsCacheKey()).filter(e=>e?.length))},[e,t]);return{removeSuggestions:r}},D0=()=>{let{removeSuggestions:e}=DJ(),{setArchiveStatus:t}=vh(),{getIssuesIdsToRemove:r,removeParentFromChildren:a}=IH(),{memex_tracked_by_items:n,memex_tracked_by_add_missing_items:l}=g9(),i=(0,uW.NL)(),{addToast:s}=m7(),o=(0,_4.c)({mutationFn:e=>DY(e),onMutate:e=>{let t=r(e.memexProjectItemIds),a=bj(i);return bC(i,e.memexProjectItemIds),ID(),{originalMemexItemModels:a,issueIdsToRemove:t}},onSuccess:(r,i,s)=>{n&&l&&s?.issueIdsToRemove&&a(s.issueIdsToRemove),e(i.memexProjectItemIds),t()},onError:(e,t,r)=>{r?.originalMemexItemModels&&bk(i,r?.originalMemexItemModels),s({type:"error",message:e instanceof api_error_ApiError?e.message:fE.genericErrorMessage})}}),d=o();return DX(d)},D1=()=>{let{findMemexItem:e}=IO(),{mutateAsync:t}=D0(),r=(0,uq.useCallback)(async r=>{let a=r.filter(t=>{let r=e(t);return!!r&&DK(r.contentType)});if(0!==a.length)return t({memexProjectItemIds:a})},[e,t]);return{archiveMemexItems:r}},D2=(e,t,r,a)=>({title:r||fE.defaultArchiveConfirmationTitle(e),content:a||fE.defaultArchiveConfirmationMessage(e,t),confirmButtonContent:"Archive"}),D5=(e,t,r,a)=>{let{postStats:n}=bM(),{addToast:l}=m7(),i=(0,f6.N)(),{archiveMemexItems:s}=D1(),o=(0,uq.useCallback)(async(o,d,c,u)=>{let m=o.length>1;e?.();let p=async()=>{try{a?.(),await s(o),t?.(o),n({name:"item_archive",ui:d,numberOfRows:o.length})}catch(e){e instanceof api_error_ApiError&&l({message:e.message,type:mB.error})}};await i(D2(m,o.length,c,u))?p():r?.()},[e,i,a,s,t,n,l,r]);return{openArchiveConfirmationDialog:o}};async function D3(e){let t=f9("memex-item-delete-api-data"),{memex_skip_json_parsing_if_invalid_response_and_content_found:r}=ho(),{data:a}=await hx(t.url,{method:"DELETE",body:e},r);return a}let D4=()=>{let{removeSuggestions:e}=DJ(),{setArchiveStatus:t}=vh(),{getIssuesIdsToRemove:r,removeParentFromChildren:a}=IH(),{memex_tracked_by_items:n,memex_tracked_by_add_missing_items:l}=g9(),i=(0,uW.NL)(),{addToast:s}=m7(),o=(0,_4.c)({mutationFn:e=>D3(e),onMutate:e=>{let t=r(e.memexProjectItemIds),a=bj(i);return bC(i,e.memexProjectItemIds),ID(),{originalMemexItemModels:a,issueIdsToRemove:t}},onSuccess:(r,i,s)=>{n&&l&&s?.issueIdsToRemove&&a(s.issueIdsToRemove),e(i.memexProjectItemIds),t()},onError:(e,t,r)=>{r?.originalMemexItemModels&&bk(i,r.originalMemexItemModels),s({type:"error",message:e instanceof api_error_ApiError?e.message:fE.genericErrorMessage})}}),d=o();return DX(d)},D6=()=>{let{mutateAsync:e}=D4(),t=(0,uq.useCallback)(async t=>{if(t.length)return e({memexProjectItemIds:t})},[e]);return{removeMemexItems:t}},D7=(e,t,r,a)=>{let{postStats:n}=bM(),{removeMemexItems:l}=D6(),{confirmRemoveItems:i}=D8(),s=(0,uq.useCallback)(async(s,o,d={})=>{let c=()=>{a?.(),(0,w8.flushSync)(()=>{l(s)}),(0,w8.flushSync)(()=>{t?.(s)}),n({name:"item_delete",ui:o,numberOfRows:s.length})};e?.(),await i(s,d)?c():r?.()},[e,i,a,n,l,t,r]);return{openRemoveConfirmationDialog:s}};function D8(){let e=(0,f6.N)(),t=(0,uq.useCallback)(async(t,r={})=>{let a=t.length>1;return e({title:`Delete item${a?"s":""}?`,content:`Are you sure you want to delete ${a?`these ${t.length} items`:"this item"} from this project?`,confirmButtonContent:"Delete",confirmButtonType:"danger",...r})},[e]);return{confirmRemoveItems:t}}function D9({owner:e,repo:t,number:r,url:a,itemId:n}){let{loggedInUser:l,themePreferences:i,relayIds:s,issueViewerFeedbackLink:o}=yk(),{tasklist_block:d,hyperlist_issue_live_updates:c,graphql_subscriptions:u}=g9(),{items:m}=bt(),p=(0,uW.NL)(),{openProjectItemInPane:f,reloadPaneItem:h}=bJ(),g=(0,uq.useCallback)(e=>{let t;if(e.metaKey||e.shiftKey||1===e.button||!e.target||!(e.target instanceof HTMLElement))return;let r=e.target.closest("a")?.dataset.url;if(r)t=m.find(e=>e.getUrl()===r);else{let r=e.target.closest("[data-issue]");if(!r)return;let{repositoryId:a,blockItemId:n}=r.dataset,l=parseInt(a??"0"),i=parseInt(n??"0");t=m.find(e=>e.contentRepositoryId===l&&e.content.id===i)}t&&(e.preventDefault(),f(t))},[m,f]),{closePane:x}=bJ(),y={pasteUrlsAsPlainText:l?.paste_url_link_as_plain_text??!1,useMonospaceFont:i.markdown_fixed_width_font,showAddTaskListButton:d},{openArchiveConfirmationDialog:b}=D5(void 0,void 0,void 0,()=>x({force:!0})),{openRemoveConfirmationDialog:v}=D7(void 0,void 0,void 0,()=>x({force:!0})),w=(0,uq.useCallback)(()=>{window.open(a)},[a]),j=(0,uq.useCallback)(()=>{navigator.clipboard.writeText(window.location.toString())},[]),C=(0,uq.useCallback)(()=>{b([n],hS)},[n,b]),k=(0,uq.useCallback)(()=>{v([n],hS)},[n,v]),S=[(0,uO.jsxs)(Ia.S.Item,{onSelect:w,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.Pfi,{})}),fY.openInNewTab]},"open-in-new-tab"),(0,uO.jsxs)(Ia.S.Item,{onSelect:j,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.TIy,{})}),fY.copyLinkInProject]},"copy-link-in-project"),(0,uO.jsxs)(Ia.S.Item,{onSelect:C,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.rKT,{})}),fY.archiveInProject]},"archive-in-project"),(0,uO.jsxs)(Ia.S.Item,{variant:"danger",onSelect:k,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),fY.deleteFromProject]},"delete-from-project")],I=(0,uq.useCallback)(()=>{h()},[h]),N=(0,uq.useCallback)(async()=>{bC(p,[n]),x({force:!0})},[x,n,p]),_={withLiveUpdates:c&&u,markdownEditorConfig:y,onLinkClick:g,selectedProjectId:s?.memexProject,customEditMenuEntries:S,issueQueriesFetchingPolicy:{fetchPolicy:"store-and-network"},repoQueriesFetchingPolicy:{fetchPolicy:"store-or-network"},onIssueUpdate:I,timelineEventBaseUrl:`/${e}/${t}/issues`,onIssueDelete:N,feedbackLink:o,showRepositoryPill:!0};return(0,uO.jsx)(mF.Z,{sx:{position:"relative",height:"100%",overflowY:"auto"},children:(0,uO.jsx)(mF.Z,{sx:{m:4},children:(0,uO.jsx)(Dq.qA,{children:(0,uO.jsx)(Dq.E4,{itemIdentifier:{owner:e,repo:t,number:r,type:"Issue"},optionConfig:_,additionalHeaderActions:(0,uO.jsx)(DR,{})})})})})}try{(rz=D9).displayName||(rz.displayName="SharedIssueViewer")}catch{}let Pe=(e="medium")=>"small"===e?10:"medium"===e?14:"large"===e?16:24,Pt=(0,uq.forwardRef)(({avatars:e,...t},r)=>(0,uO.jsx)(DC.Z,{leadingVisual:()=>(0,uO.jsx)(Tq,{backgroundSx:{backgroundColor:"canvas.default",boxShadow:e=>`0 0 0 2px ${e.colors.canvas.default} !important`},items:e,size:Pe(t.size)-1,maxVisible:3}),ref:r,...t}));Pt.displayName="AvatarsToken";let Pr=(0,uq.forwardRef)(({linkedPullRequest:e,sx:t,...r},a)=>(0,uO.jsx)(DC.Z,{ref:a,as:"a",href:e.url,target:"_blank",rel:"noreferrer","data-hovercard-url":`${e.url}/hovercard`,leadingVisual:()=>(0,uO.jsx)(jh,{isDraft:e.isDraft,state:e.state,type:mA.PullRequest,size:Pe(r.size)}),sx:{"&, &:hover":{bg:"canvas.default"},...t},text:`#${e.number}`,...(0,mp.f)("linked-pr-token"),...r}));Pr.displayName="LinkedPullRequestToken";let Pa=e=>{let t=(0,uq.useRef)(null);return IC(t),(0,uO.jsx)(Pr,{ref:t,...e})};try{(rU=Pa).displayName||(rU.displayName="FindableLinkedPullRequestToken")}catch{}let Pn=(0,uq.forwardRef)(({repository:e,withOwner:t,...r},a)=>(0,uO.jsx)(DC.Z,{leadingVisual:()=>(0,uO.jsx)(Cv,{repository:e,size:Pe(r.size)}),text:t?e.nameWithOwner:e.name,ref:a,...r,...(0,mp.f)("repository-token")}));Pn.displayName="RepositoryToken";let Pl=()=>{let{items:e}=bt(),{openProjectItemInPane:t,openPaneHierarchyHistoryItem:r}=bJ(),{getAllProjectRelationships:a}=IU(),n=(0,uq.useCallback)(n=>{let l=Dc(Du(n));return i=>{if(i.ctrlKey||i.metaKey||!l.item)return;i.preventDefault();let s=e.find(e=>e.content.id===n.key.itemId&&e.contentType!==mA.DraftIssue);if(s)t(s);else{let n=a().get(l.item.itemId()),i=e.find(e=>e.content.id===n?.at(0));i&&(t(i),r(l))}}},[a,e,r,t]);return{createSidePanelHandler:n}},Pi=(0,uq.forwardRef)(({trackedBy:e,noPrefix:t=!1,projectOwner:r,as:a="a",...n},l)=>{let{createSidePanelHandler:i}=Pl(),s=e.url.includes("/pull/"),o={as:"a","data-hovercard-type":s?"pull_request":"issue","data-hovercard-url":`${e.url}/hovercard`,href:e.url,onClick:i(e),rel:"noreferrer",target:"_blank"},d="a"===a,c=(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(jh,{state:e.state,stateReason:e.stateReason,type:s?"PullRequest":"Issue",isDraft:!1,sx:{mr:1,height:"14px",width:"14px"}}),(0,uO.jsx)(mO.Z,{sx:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},children:xM(e,r)})]});return(0,uO.jsx)(DC.Z,{ref:l,text:(0,uO.jsxs)(uO.Fragment,{children:[!t&&fq.trackedBy," ",d?c:(0,uO.jsx)(w3.Z,{...o,sx:{color:"inherit"},children:c})]}),...d?o:{},...n})});Pi.displayName="TrackedByToken";var Ps=r(47142);let Po=(e,t)=>{let r=(0,Ps.Gs)(e,t);return r===Ps.DU&&t.toLocaleLowerCase()!==e.toLocaleLowerCase()&&(r=0),r};function Pd(e,t,r,a){return e>t?-1:e<t?1:r<a?-1:r>a?1:0}function Pc(e,t){let r=(0,Ps.m7)(e,t),a=-1,n=0,l=[];for(let e of r)e-1!==a&&(-1===a?l.push({startIndex:n,endIndex:e,highlight:!1}):(l.push({startIndex:n,endIndex:a+1,highlight:!0}),l.push({startIndex:a+1,endIndex:e,highlight:!1})),n=e),a=e;return a===t.length-1?l.push({startIndex:n,endIndex:t.length,highlight:!0}):-1===a?l.push({startIndex:n,endIndex:t.length,highlight:!1}):(l.push({startIndex:n,endIndex:a+1,highlight:!0}),l.push({startIndex:a+1,endIndex:t.length,highlight:!1})),l}let ScoringCache=class ScoringCache{sortByWithCache(e,t){let r=this.scoreCache.get(e)||0,a=this.scoreCache.get(t)||0,n=this.textCache.get(e)||"",l=this.textCache.get(t)||"";return Pd(r,a,n,l)}getText(e){return this.textCache.get(e)}setText(e,t){null==this.scoreCache.get(e)&&this.textCache.set(e,t)}getScore(e){return this.scoreCache.get(e)}setScore(e,t){this.scoreCache.set(e,t)}constructor(){this.textCache=new WeakMap,this.scoreCache=new WeakMap}};function Pu(e,t,r,a,n,l=5){let i=t;if(e){for(let n of(i=[],t)){let t=r(n);a.setText(n,t);let l=Po(e,t);a.setScore(n,l),l>0&&i.push(n)}i.sort(n)}null!==l&&(i=i.slice(0,l));let s=new WeakMap;for(let t of i){let a=r(t);s.set(t,{chunks:Pc(e,a)})}return{filteredItems:i,positionData:s}}let Pm=new ScoringCache,Pp=Pm.sortByWithCache.bind(Pm);function Pf(e,t,r){return Pu(e,t,e=>e.login+(e.name?` ${e.name}`:""),Pm,Pp,r)}var Ph=r(90174);let Pg=()=>{let e=(0,uW.NL)(),t=(0,uq.useCallback)((t,r)=>b_(e,t,r),[e]);return{setNewRowPosition:t}},Px={Top:"top",Bottom:"bottom"};function Py(){let{updateAndReorderItem:e}=Pv(),{updateColumnValueAndPriority:t}=IF(),r=(0,Ph.U)(t,!0),{addToast:a}=m7(),{findMemexItem:n}=IO(),l=(0,Ph.U)(n,!0),i=kq(),s=(0,uq.useCallback)(async(e,t,n=fD.updateItem,s)=>{if(!e)return Promise.resolve();if(void 0!==s)try{Pj([e],t,s)}catch(e){if(e instanceof UpdateValidationError){a({message:e.message,type:"warning"});return}throw e}let o=bn(t,e);await r(e,{columnValue:t}),i?.registerAction({description:n,revert:async()=>{let t=l(e.id);"object"==typeof t&&await r(t,{columnValue:o})}})},[r,l,a,i]);return{updateItem:s,updateAndReorderItem:e}}function Pb(e,t,r,a){let n=e.findIndex(e=>e.id===t);if(n<0)return -1;let l=e.findIndex(e=>e.id===r);return l<0?-1:l>n?"top"===a?l-1:l:"top"===a?l:l+1}function Pv(){let{postStats:e}=bM(),{setNewRowPosition:t}=Pg(),{findMemexItem:r}=IO(),{updateColumnValueAndPriority:a}=IF(),n=(0,uW.NL)(),l=(0,uq.useCallback)(async(l,{reorderData:i,updateColumnAction:s},{visibleItems:o})=>{let d,c,u;let m=r(l);if(!m)return;if(i){d=Pb(bj(n),l,i.overItemId,i.side);let e=t(l,d);u=e.previousItemId,c=e.previousMovingItemIndex}let p=y5(s,u);if(p){try{await a(m,p)}catch(e){throw void 0!==c&&c>=0&&t(l,c),e}return i&&o&&(d=Pb(o,l,i.overItemId,i.side)),e({name:"item_order",context:`position: ${d}`,memexProjectItemId:l}),d}},[r,e,n,t,a]);return{updateAndReorderItem:l}}function Pw(e,t){return e&&t?{reorderData:t,updateColumnAction:e}:e?{updateColumnAction:e}:t?{reorderData:t}:void 0}let UpdateValidationError=class UpdateValidationError extends Error{};function Pj(e,t,r){switch(t.dataType){case mD.Assignees:for(let t of e)if((t.contentType===mA.Issue||t.contentType===mA.PullRequest)&&r!==t.contentRepositoryId)throw new UpdateValidationError(fE.unableToPasteAssigneesBetweensRepos);break;case mD.Milestone:for(let t of e){if(t.contentType===mA.DraftIssue)throw new UpdateValidationError(fE.unableToPasteMilestonesOnDraftIssue);if(r!==t.contentRepositoryId)throw new UpdateValidationError(fE.unableToPasteMilestonesBetweensRepos)}break;case mD.Labels:for(let t of e){if(t.contentType===mA.DraftIssue)throw new UpdateValidationError(fE.unableToPasteLabelsOnDraftIssue);if(r!==t.contentRepositoryId)throw new UpdateValidationError(fE.unableToPasteLabelsBetweensRepos)}}}let PC=e=>e.login,Pk=(e,t)=>{let r=t.find(t=>t.id===e.id);return{...e,leadingVisual:()=>(0,uO.jsx)(C$.O,{alt:e.login,src:e.avatarUrl,sx:{mr:1}}),text:e.login,description:e.name??void 0,descriptionVariant:"inline",groupId:r?"assigned":"suggestions",...(0,mp.f)("table-cell-editor-row")}};function PS({model:e,onSaved:t}){let{updateItem:r}=Py(),{fetchSuggestedAssignees:a}=I6(),n=(0,uq.useCallback)(()=>{a(e)},[e,a]),l=(0,uq.useCallback)(async a=>{await r(e,{dataType:mD.Assignees,value:a}),t&&t()},[e,t,r]);return{fetchOptions:n,saveSelected:l}}var PI=r(90836);let PN=(0,uq.forwardRef)(({children:e,dangerousHtml:t,sx:r,...a},n)=>{let l={textAlign:"left",whiteSpace:"nowrap",color:"fg.muted",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",code:{fontFamily:"fonts.mono",fontSize:0},...r};return t?(0,uO.jsx)(jc,{...a,ref:n,sx:l,children:t}):(0,uO.jsx)(mO.Z,{...a,ref:n,sx:l,children:e})});function P_(e){return{...e.reviewer,hovercardUrl:"User"===e.reviewer.type?`/hovercards?user_id=${e.reviewer.id}`:`${e.reviewer.url}/hovercard`}}function PT(e){return{...e,name:e.login}}PN.displayName="TextCell";let PR=({user:e,isDisabled:t})=>{let r=(0,uq.useRef)(null);return IC(r),(0,uO.jsxs)(mF.Z,{sx:{mr:2,alignItems:"center",overflow:"hidden",display:"flex"},children:[(0,uO.jsx)(C$.O,{loading:"lazy",alt:e.name,src:e.avatarUrl,sx:{minWidth:"20px",mr:1},"data-hovercard-url":e.hovercardUrl}),(0,uO.jsx)(PN,{ref:r,sx:{fontSize:1},isDisabled:t,children:e.name})]})},PE=({users:e,isDisabled:t})=>{let r=(0,uq.useRef)(null);return(IC(r),e)?e.length>1?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(PI.Z,{sx:{zIndex:0,mr:1},children:e.map(e=>(0,uO.jsx)(C$.O,{loading:"lazy",alt:e.name,src:e.avatarUrl,"data-hovercard-url":e.hovercardUrl},e.id))}),(0,uO.jsx)(PN,{ref:r,sx:{fontSize:1,textOverflow:"ellipsis"},isDisabled:t,children:fn(e.map(e=>e.name))})]}):(0,uO.jsx)(uO.Fragment,{children:e.map(e=>(0,uO.jsx)(PR,{user:e,isDisabled:t},e.id))}):null};try{(rW=PR).displayName||(rW.displayName="AvatarWithLogin")}catch{}try{(rH=PE).displayName||(rH.displayName="UserGroup")}catch{}let PD=({children:e,listRef:t,onKeyDown:r})=>(0,uO.jsx)(mF.Z,{as:"dl",ref:t,onKeyDown:r,children:e}),PP=({label:e,children:t,...r})=>(0,uO.jsxs)(mF.Z,{as:"div",sx:{px:2,py:1,display:"flex",gap:1,flexDirection:"row",flexWrap:"wrap"},...r,children:[(0,uO.jsx)(PA,{children:e}),(0,uO.jsx)(mF.Z,{as:"dd",sx:{flexBasis:"65%",flexGrow:1,overflow:"hidden",minWidth:"200px"},children:t})]}),PA=({children:e})=>(0,uO.jsx)(mO.Z,{as:"dt",sx:{px:2,pt:"6px",flexBasis:"33%",flexGrow:1,flexShrink:0,fontSize:0,fontWeight:"bold",color:"fg.muted"},children:e}),PM=(0,uq.forwardRef)(({interactable:e=!1,children:t,sx:r,...a},n)=>{let l=e?{cursor:"pointer",backgroundColor:"canvas.subtle"}:{};return(0,uO.jsx)(mF.Z,{...a,sx:{px:2,py:1,background:"transparent",border:"none",borderRadius:1,":hover":l,":focus":l,width:"100%",textAlign:"left",...r},ref:n,...(0,mp.f)("field-value"),children:t})});PM.displayName="FieldValue";try{(rG=PP).displayName||(rG.displayName="Field")}catch{}try{(rq=PA).displayName||(rq.displayName="FieldLabel")}catch{}let PL=({model:e,columnModel:t,content:r,onSaved:a,renderer:n,editor:l})=>{let{hasWritePermissions:i}=yI();return i?(0,uO.jsx)(l,{model:e,columnModel:t,content:r,onSaved:a}):(0,uO.jsx)(PM,{children:(0,uO.jsx)(n,{model:e,columnModel:t,content:r})})};try{(rK=PL).displayName||(rK.displayName="SidebarField")}catch{}let PF={position:"relative",p:"32px",textAlign:"center"},PZ={mx:1,mb:2,color:"fg.muted"},PO={color:"fg.muted",mt:2};function PB(e){let t,r;let a=e.error.name;switch(a){case"RepoArchived":r=fE.repoArchivedErrorMessage,t=(0,uO.jsx)(mM.rKT,{size:26});break;case"Forbidden":r=fE.forbiddenErrorMessage,t=(0,uO.jsx)(mM.mBM,{size:26});break;default:r=fE.genericErrorMessage,t=(0,uO.jsx)(mM.zMQ,{size:26})}return(0,uO.jsxs)(mF.Z,{sx:PF,children:[(0,uO.jsx)(mF.Z,{sx:PZ,children:t}),(0,uO.jsx)(mO.Z,{as:"p",sx:PO,children:r})]})}try{(rQ=PB).displayName||(rQ.displayName="SelectMenuError")}catch{}let PV=(e,t,r)=>{let a;let n=I8();if(r)return{suggestions:r,error:void 0};switch(t){case mP.Assignees:a=n.getSuggestedAssigneesForItem(e.getSuggestionsCacheKey(mP.Assignees));break;case mP.Labels:a=n.getSuggestedLabelsForItem(e.getSuggestionsCacheKey(mP.Labels));break;case mP.Milestone:a=n.getSuggestedMilestonesForItem(e.getSuggestionsCacheKey(mP.Milestone))}if(a instanceof Error){let e=a;return{suggestions:void 0,error:e}}return{suggestions:a,error:void 0}},P$=({fetchSuggestions:e,memexItemModel:t,columnId:r,filterSuggestions:a,maxSuggestions:n,options:l,initialFilterValue:i=""})=>{let[s,o]=(0,uq.useState)(i),{suggestions:d,error:c}=PV(t,r,l),u=()=>{Pz(t.contentType,r)&&e&&e()},m=(0,uq.useMemo)(()=>{if(d){let e=a(s,d,n);return e.filteredItems}},[a,s,d,n]);return{onOpen:u,setFilterValue:o,filterValue:s,suggestions:d,filteredSuggestions:m,error:c}};function Pz(e,t){return e!==mA.DraftIssue||bc(t)}let PU={leadingVisual:mM.KHo,text:"No matches",disabled:!0,selected:void 0,key:"no-matches",...(0,mp.f)("table-cell-editor-empty-row")},PW={leadingVisual:void 0,text:"Nothing to show",disabled:!0,selected:void 0,key:"blankslate",...(0,mp.f)("table-cell-editor-blankslate-row")};function PH({model:e,selected:t,initialFilterValue:r,blankslateText:a,saveSelected:n,onOpenChange:l,open:i,fetchOptions:s,options:o,filterOptions:d,getOptionMatchingFilterValue:c,columnId:u,getSortAttribute:m,convertOptionToItem:p,renderCreateNewOption:f,singleSelect:h=!1,groupMetadata:g,placeholderText:x,renderAnchor:y}){let{projectLimits:b}=yk(),{postStats:v}=bM(),[w,j]=Eh(t),C="Assignees"===u?mP.Assignees:"Labels"===u?mP.Labels:mP.Milestone,{onOpen:k,setFilterValue:S,filterValue:I,suggestions:N,filteredSuggestions:_,error:T}=P$({initialFilterValue:r,memexItemModel:e,columnId:C,fetchSuggestions:s,filterSuggestions:d,maxSuggestions:h?b.singleSelectColumnOptionsLimit:12,options:o}),R=m1(k);(0,uq.useEffect)(()=>{R.current()},[e,R]);let E=(0,uq.useCallback)(t=>{n(t),v({name:w.length>0?hQ:hY,memexProjectColumnId:gc(pB(u)),memexProjectItemId:e.itemId()})},[u,e,v,n,w.length]),D=(0,EA.Z)();(0,uq.useEffect)(()=>()=>{void 0!==i||h||D()||E(w)},[i,D,w,h,E]);let P=(0,uq.useRef)(i);(0,uq.useEffect)(()=>{!P.current||i||h||E(w),P.current=i},[i,w,h,E]);let A=(0,uq.useCallback)(e=>{let t=Array.isArray(e)?e:[e].filter(e=>e),r=t.sort((e,t)=>m(e).localeCompare(m(t)));j(r),h&&E(r)},[j,h,m,E]),M=(0,uq.useMemo)(()=>new WeakMap,[p]),L=(0,uq.useMemo)(()=>new Set(w.map(e=>e.id)),[w]),F=(0,uq.useCallback)(e=>{let t=M.get(e);return t||(t=p(e,w),M.set(e,t)),t},[M,p,w]),Z=(0,uq.useMemo)(()=>(_??[]).map(F),[_,F]),O=(0,uq.useMemo)(()=>{if(!h)return(N??[]).filter(e=>L.has(e.id)).map(F);{let e=(_||N||[]).filter(e=>L.has(e.id)).map(F);return gc(e[0])}},[_,N,F,h,L]),B=I&&_&&c&&!_.some(e=>c(I,e)),V=(0,uq.useMemo)(()=>({...PW,text:a??PW.text}),[a]),$=[...Z.map(e=>(h&&(e.children&&(e.children=(0,uO.jsx)(mO.Z,{sx:{wordBreak:"break-all"},children:e.children})),e.onAction=(t,r)=>{r.preventDefault(),A(O===e?void 0:e),l(!1,"selection",r)}),e)),...I||Z.length||!a?[]:[V],...!I||Z.length||f?[]:[PU],...B&&f?[f(I)]:[]],z=(0,uq.useCallback)(()=>T?(0,uO.jsx)(PB,{error:T}):(0,uO.jsx)(uO.Fragment,{}),[T]),U={open:i??!0,showItemDividers:!0,onSelectedChange:A,selected:O,filterValue:I,onFilterChange:S,onOpenChange:l,items:$,loading:!_&&!T,placeholderText:x,renderAnchor:y};return(g&&(U.groupMetadata=g.filter(e=>$.some(t=>"groupId"in t&&t.groupId===e.groupId))),T)?(U.renderItem=z,U.textInputProps={disabled:!0},U.items=[{}],{...U,...(0,mp.f)("table-cell-editor-error")}):U}function PG({displayValue:e,saveSelected:t,selected:r,...a}){let[n,l]=(0,uq.useState)(!1),i=(0,uq.useCallback)(e=>l(e),[]),[s,o]=(0,uq.useState)(!1),d=(0,uq.useRef)(!0),c=(0,EA.Z)(),{perform:u}=b6({request:async e=>{o(!0),d.current=!1,await t(e),d.current=!0,o(!1)},rollback:()=>{d.current=!0,c()&&o(!1)}});(0,uq.useEffect)(()=>{d.current&&o(!1)},[r]);let m=PH({...a,open:n,onOpenChange:i,selected:r,renderAnchor:t=>(0,uO.jsx)(PM,{interactable:!0,as:"button",...t,children:s?(0,uO.jsx)(w4.Z,{size:"small"}):e}),saveSelected:u});return(0,uO.jsx)(Cf.b,{...m,overlayProps:{width:"small",height:"auto",maxHeight:"large",...m.overlayProps}})}PG.displayName="SidebarSelectPanelFunc";let Pq=(0,uq.memo)(PG);try{(rY=Pq).displayName||(rY.displayName="SidebarSelectPanel")}catch{}let PK=({columnName:e,columnType:t,...r})=>"dangerousHtml"in r&&r.dangerousHtml?(0,uO.jsx)(jc,{...ht(r,["dangerousHtml"]),children:r.dangerousHtml}):"text"in r&&r.text?(0,uO.jsx)(mO.Z,{...ht(r,["text"]),children:r.text}):(0,uO.jsx)(PY,{columnName:e,columnType:t,...r}),PQ={},PY=({columnName:e,columnType:t,sx:r=PQ,...a})=>{let n;let{hasWritePermissions:l}=yI();if(!l)return(0,uO.jsx)(mO.Z,{sx:{color:"fg.subtle",...r},...a,children:fE.noPermissionEmptyColumnValue(e)});switch(t){case mD.Number:n=fE.emptyColumnNameValue.number;break;case mD.Date:n=fE.emptyColumnNameValue.date;break;case mD.Text:n=fE.emptyColumnNameValue.text;break;case mD.SingleSelect:n=fE.emptyColumnNameValue.singleSelect;break;case mD.Iteration:n=fE.emptyColumnNameValue.iteration;break;default:n=fE.addColumnNameValue(e)}return(0,uO.jsxs)(mF.Z,{children:[(0,uO.jsx)(mO.Z,{sx:{color:"fg.subtle",...r},...a,children:n}),(t===mD.Iteration||t===mD.SingleSelect)&&(0,uO.jsx)(mL.Z,{icon:mM.AS7,size:"small",sx:{verticalAlign:"middle",color:"fg.muted",opacity:.3,".is-focused &":{opacity:1},ml:2}})]})};try{(rX=PK).displayName||(rX.displayName="TextValueWithFallback")}catch{}try{(rJ=PY).displayName||(rJ.displayName="FallbackText")}catch{}let PX=()=>{let{setColumnValue:e}=IL(),{findMemexItem:t}=IO(),r=(0,uq.useCallback)((r,a)=>{let n=t(r);n&&e(n,a,!0)},[t,e]);return{updateLocalMemexItem:r}},PJ=e=>(0,uO.jsx)(PL,{...e,renderer:P1,editor:P0}),P0=({model:e,columnModel:t,content:r,onSaved:a})=>{let{editIssueAssignees:n}=RM(),{fetchSuggestedAssignees:l}=I6(),{updateLocalMemexItem:i}=PX(),s=(0,uq.useMemo)(()=>r?.map(e=>({selected:!0,...e}))??[],[r]);return(0,uO.jsx)(Pq,{model:e,columnId:t.id.toString(),getSortAttribute:PC,convertOptionToItem:Pk,initialFilterValue:"",selected:s,saveSelected:async t=>{await n(t.map(e=>e.id)),e.memexItemId?.()&&i(e.memexItemId?.(),{memexProjectColumnId:mP.Assignees,value:t}),a()},fetchOptions:()=>l(e),filterOptions:Pf,placeholderText:"Search people",displayValue:(0,uO.jsx)(P1,{model:e,columnModel:t,content:r}),groupMetadata:[{groupId:"assigned"},{groupId:"suggestions",header:{title:"Suggestions",variant:"filled"}}]})},P1=({columnModel:e,content:t})=>t?.length?(0,uO.jsx)(mF.Z,{sx:{display:"flex"},children:(0,uO.jsx)(PE,{users:t.map(PT),isDisabled:!0})}):(0,uO.jsx)(PK,{columnName:e.name});try{(r0=PJ).displayName||(r0.displayName="AssigneeField")}catch{}try{(r1=P0).displayName||(r1.displayName="AssigneeEditor")}catch{}try{(r2=P1).displayName||(r2.displayName="AssigneeRenderer")}catch{}var P2=r(94810),P5=r(83863);let P3=e=>(0,uO.jsx)(PL,{...e,renderer:P7,editor:P6}),P4=e=>e?{value:new Date((0,P5.Z)(e,{representation:"date"}))}:void 0,P6=({model:e,columnModel:t,content:r,onSaved:a})=>{let{updateItem:n}=Py(),{postStats:l}=bM(),i=(0,uq.useCallback)(async r=>{if(g5(t)){let i=e.getCustomField(t.id);await n(e,{dataType:mD.Date,memexProjectColumnId:t.id,value:P4(r)}),l({name:i?.value?hQ:hY,memexProjectColumnId:t.id,memexProjectItemId:e.id}),a()}},[t,e,a,l,n]),s=(0,uq.useMemo)(()=>r?.value?new Date(r.value.slice(0,16)):null,[r]);return(0,uO.jsx)(P2.Mt,{onChange:i,value:s,showClearButton:!0,showTodayButton:!1,anchor:a=>(0,uO.jsx)(PM,{interactable:!0,as:"button",...a,children:(0,uO.jsx)(P7,{content:r,columnModel:t,model:e})})})},P7=({content:e,columnModel:t})=>{let r=pY(e)||"";return(0,uO.jsx)(PK,{text:r,columnName:t.name,columnType:t.dataType})};try{(r5=P3).displayName||(r5.displayName="DateField")}catch{}try{(r3=P6).displayName||(r3.displayName="DateEditor")}catch{}try{(r4=P7).displayName||(r4.displayName="DateRenderer")}catch{}let P8={borderColor:"border.default",pt:"1px",color:"fg.muted"},P9={...P8,borderColor:"accent.emphasis",color:"accent.fg"},Ae={...P8,color:"fg.subtle"};function At({sx:e}){return(0,uO.jsx)(EL.Z,{sx:{...P9,...e},children:fE.iterationLabel.current})}function Ar({labelType:e,sx:t}){let r=fE.iterationLabel[e];return(0,uO.jsx)(mF.Z,{sx:{mr:3,width:"5.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:1,...t??{}},children:(0,uO.jsx)(EL.Z,{sx:{mt:.75,textDecoration:"inherit",..."current"===e?P9:"break"===e?Ae:P8},as:"span",children:r})})}try{(r6=At).displayName||(r6.displayName="CurrentIterationLabel")}catch{}try{(r7=Ar).displayName||(r7.displayName="IterationRowLabel")}catch{}let Aa=new ScoringCache,An=Aa.sortByWithCache.bind(Aa);function Al(e,t,r){return Pu(e,t,e=>`${e.title} ${g_(e)}`,Aa,An,r)}let Ai=e=>{let t=(0,uO.jsx)(jc,{sx:{display:"block"},children:e.titleHtml});return{...e,children:t,...(0,mp.f)("table-cell-editor-row")}},As=e=>e.title,Ao=(e,t)=>{let r=t.title;return r.toLowerCase()!==e.toLowerCase()?null:t};function Ad({model:e,iteration:t,columnModel:r,onSaved:a}){let{updateItem:n}=Py(),l=yq(),{settings:i}=r,s=t?.id,o=(0,uq.useMemo)(()=>{let e=i.configuration.iterations;if(e.length>0){let t=new Date;return e.map(e=>{let r=g_(e),a=gj(t,e);return{...e,title:e.title,titleHtml:e.titleHtml,description:r,descriptionVariant:"block",selected:s===e.id,groupId:"active",trailingIcon:a?At:null}})}return[{id:"create-iteration",title:"Create an Iteration",titleHtml:"Create an iteration",startDate:"",duration:0,selected:!1,groupId:"active"}]},[i,s]),d=(0,uq.useMemo)(()=>{let e=i.configuration.completedIterations;return e.length>0?e.map(e=>{let t=g_(e);return{...e,title:e.titleHtml,description:t,descriptionVariant:"block",selected:s===e.id,groupId:"completed"}}):[]},[i,s]),c=(0,uq.useMemo)(()=>[...o,...d].filter(e=>e.selected),[o,d]),u=(0,uq.useCallback)(async t=>{t[0]?.id==="create-iteration"?l({pathname:mj.generatePath({fieldId:r.id})}):(await n(e,{memexProjectColumnId:r.id,dataType:mD.Iteration,value:{id:t[0]?.id??null}}),a&&a())},[l,r.id,n,e,a]),m=(0,uq.useCallback)((e,t,r)=>{let a=e.length>0?[...o,...d]:t;return Al(e,a,r)},[o,d]);return{activeOptions:o,completedOptions:d,selected:c,saveSelected:u,filterChange:m}}let Ac=(0,uq.forwardRef)(({iteration:e,...t},r)=>(0,uO.jsx)(DC.Z,{leadingVisual:()=>(0,uO.jsx)(mM.H9J,{size:Pe(t.size)}),text:(0,uO.jsx)(jc,{children:e.titleHtml}),ref:r,...t}));Ac.displayName="IterationToken";let Au=e=>(0,uO.jsx)(PL,{...e,renderer:Af,editor:Ap});function Am(e){return e?(0,uO.jsx)(Ac,{iteration:e}):(0,uO.jsx)(PK,{columnName:"Iteration",columnType:mD.Iteration})}let Ap=({model:e,columnModel:t,content:r,onSaved:a})=>{let{activeOptions:n,completedOptions:l,saveSelected:i,filterChange:s,selected:o}=Ad({model:e,iteration:r??null,columnModel:t,onSaved:a});return(0,uO.jsx)(Pq,{model:e,columnId:t.id.toString(),getSortAttribute:As,convertOptionToItem:Ai,initialFilterValue:"",selected:o,options:[...n,...l.slice(0,3)],saveSelected:i,fetchOptions:IR.Z,filterOptions:s,placeholderText:"Filter options",displayValue:(0,uO.jsx)(Af,{model:e,columnModel:t,content:r}),getOptionMatchingFilterValue:Ao,singleSelect:!0,groupMetadata:[{groupId:"active"},{groupId:"completed",header:{title:"Completed",variant:"filled"}}]})},Af=({content:e})=>Am(e);try{(r8=Au).displayName||(r8.displayName="IterationField")}catch{}try{(r9=Ap).displayName||(r9.displayName="IterationEditor")}catch{}try{(ae=Af).displayName||(ae.displayName="IterationRenderer")}catch{}let Ah=new ScoringCache,Ag=Ah.sortByWithCache.bind(Ah);function Ax(e,t,r){return Pu(e,t,e=>e.nameHtml,Ah,Ag,r)}let Ay=e=>e.nameHtml,Ab=e=>{let t=(0,uO.jsx)(jc,{sx:{display:"block"},children:e.nameHtml}),r=`#${e.color}`;return{...e,leadingVisual:()=>(0,uO.jsx)(mF.Z,{sx:{bg:r,borderColor:r,width:14,height:14,borderRadius:10,borderWidth:"1px",borderStyle:"solid"}}),children:t,...(0,mp.f)("table-cell-editor-row")}};function Av({model:e,onSaved:t}){let{updateItem:r}=Py(),{fetchSuggestedLabels:a}=I9(),n=(0,uq.useCallback)(()=>{a(e)},[e,a]),l=(0,uq.useCallback)(async a=>{await r(e,{dataType:mD.Labels,value:a}),t&&t()},[e,t,r]);return{fetchOptions:n,saveSelected:l}}var Aw=r(60147);let Aj=(0,uq.forwardRef)(({label:e,...t},r)=>(0,uO.jsx)(Aw.Z,{text:(0,uO.jsx)(jc,{children:e.nameHtml}),fillColor:`#${e.color}`,ref:r,...t}));Aj.displayName="LabelToken";let AC=e=>{let t=(0,uq.useRef)(null);return IC(t),(0,uO.jsx)(Aj,{ref:t,...e})},Ak=({color:e})=>(0,uO.jsx)(mF.Z,{sx:{width:16,height:16,borderRadius:8,flexShrink:0,bg:`#${e}`,borderColor:`#${e}`}});try{(at=AC).displayName||(at.displayName="FindableLabelToken")}catch{}try{(ar=Ak).displayName||(ar.displayName="LabelDecorator")}catch{}let AS=e=>(0,uO.jsx)(PL,{...e,renderer:AN,editor:AI}),AI=({model:e,columnModel:t,content:r,onSaved:a})=>{let{editIssueLabels:n}=RM(),{fetchSuggestedLabels:l}=I9(),{updateLocalMemexItem:i}=PX(),s=(0,uq.useMemo)(()=>r?.map(e=>({...e,selected:!0}))??[],[r]);return(0,uO.jsx)(Pq,{model:e,columnId:t.id.toString(),getSortAttribute:Ay,convertOptionToItem:Ab,initialFilterValue:"",selected:s,saveSelected:async t=>{await n(t.map(e=>e.id)),e.memexItemId?.()&&i(e.memexItemId?.(),{memexProjectColumnId:mP.Labels,value:t}),a()},fetchOptions:()=>l(e),filterOptions:Ax,placeholderText:"Search labels",displayValue:(0,uO.jsx)(AN,{model:e,columnModel:t,content:r})})},AN=({columnModel:e,content:t})=>t?.length?(0,uO.jsx)(mF.Z,{as:"ul",sx:{display:"flex",gap:1,flexWrap:"wrap",listStyle:"none"},children:t?.map(e=>(0,uO.jsx)("li",{children:(0,uO.jsx)(Aj,{label:e})},e.id))}):(0,uO.jsx)(PK,{columnName:e.name});try{(aa=AS).displayName||(aa.displayName="LabelField")}catch{}try{(an=AI).displayName||(an.displayName="LabelEditor")}catch{}try{(al=AN).displayName||(al.displayName="LabelRenderer")}catch{}let A_=new ScoringCache,AT=A_.sortByWithCache.bind(A_);function AR(e,t,r){return Pu(e,t,e=>e.title,A_,AT,r)}function AE(e){if(e.state===yu.Closed)return fM.closed;if(!e.dueDate)return fM.noDueDate;let t=new Date(`${e.dueDate}T23:59:59`);return t<new Date?fM.pastDueBy(new Date(`${e.dueDate}T00:00:00`)):fM.dueOn(t)}let AD=e=>e.title,AP=e=>{let t=e.state===yu.Open;return{...e,leadingVisual:()=>(0,uO.jsx)(mL.Z,{icon:mM.K37,"aria-label":t?"Open milestone":"Closed milestone",sx:{color:"fg.muted"}}),text:e.title,description:AE(e),descriptionVariant:"block",groupId:t?"open":"closed",...(0,mp.f)("table-cell-editor-row")}};function AA({model:e,onSaved:t}){let{updateItem:r}=Py(),{fetchSuggestedMilestones:a}=Nt(),n=(0,uq.useCallback)(()=>{a(e)},[e,a]),l=(0,uq.useCallback)(async a=>{await r(e,{dataType:mD.Milestone,value:a[0]}),t&&t()},[e,t,r]);return{fetchOptions:n,saveSelected:l}}let AM=(0,uq.forwardRef)(({milestone:e,...t},r)=>(0,uO.jsx)(DC.Z,{leadingVisual:()=>(0,uO.jsx)(mM.K37,{size:Pe(t.size)}),text:e.title,ref:r,...(0,mp.f)("milestone-token"),...t}));AM.displayName="MilestoneToken";let AL=e=>(0,uO.jsx)(PL,{...e,renderer:AZ,editor:AF}),AF=({model:e,columnModel:t,content:r,onSaved:a})=>{let{editIssueMilestone:n}=RM(),{fetchSuggestedMilestones:l}=Nt(),{updateLocalMemexItem:i}=PX(),s=(0,uq.useMemo)(()=>r?[{selected:!0,...r}]:[],[r]);return(0,uO.jsx)(Pq,{model:e,columnId:t.id.toString(),getSortAttribute:AD,convertOptionToItem:AP,initialFilterValue:"",selected:s,saveSelected:async t=>{await n(t[0]?.id??"clear"),e.memexItemId?.()&&i(e.memexItemId(),{memexProjectColumnId:mP.Milestone,value:t[0]}),a()},fetchOptions:()=>l(e),filterOptions:AR,placeholderText:"Search milestones",blankslateText:"No milestones to show.",displayValue:(0,uO.jsx)(AZ,{model:e,columnModel:t,content:r}),singleSelect:!0,groupMetadata:[{groupId:"open",header:{title:"Open",variant:"filled"}},{groupId:"closed",header:{title:"Closed",variant:"filled"}}]})},AZ=({content:e})=>e?(0,uO.jsx)(AM,{milestone:e}):(0,uO.jsx)(PK,{columnName:"Milestone"});try{(ai=AL).displayName||(ai.displayName="MilestoneField")}catch{}try{(as=AF).displayName||(as.displayName="MilestoneEditor")}catch{}try{(ao=AZ).displayName||(ao.displayName="MilestoneRenderer")}catch{}function AO(e){let t=pV(e);if(Number.isNaN(t))return fE.fieldMustBeANumber;if(t<-2147483647||t>2147483647)return`${fE.fieldMustBeBetween} -2147483647 and 2147483647`;let r=e.split("."),a=r[1];if(a&&a.length>15)return fE.floatingPointValueTooPrecise}function AB(e){return new Blob([e]).size>1024?fE.fieldValueTooLong:void 0}let AV=({submitValue:e,defaultValue:t,validationFn:r,type:a="text",withEmojiPicker:n=!1,placeholder:l})=>{let i=(0,uq.useRef)(null),[s,o]=(0,uq.useState)(void 0),[d,c]=(0,uq.useState)(t);(0,uq.useEffect)(()=>{i.current&&i.current===document.activeElement||c(t)},[t]);let u=e=>{let t=r?.(e);return o(t),!t},m=t=>{u(t)&&e(t)},p=(0,uq.useCallback)(()=>c(t),[t]),f=e=>{"Enter"===e.key?(e.preventDefault(),m(d)):"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),p())},h=e=>{let t=e.currentTarget.value;c(t),u(t)},g=()=>{d!==t&&u(d)?e(d):p()},x=(0,uO.jsx)(PM,{interactable:!0,as:Sa,ref:i,onBlur:g,onChange:h,onKeyDown:f,type:a,value:d,placeholder:l,"aria-label":"Edit value"}),y=ER();return(0,uO.jsxs)(uO.Fragment,{children:[n?(0,uO.jsx)(E_.Z,{...y,sx:{width:"100%"},children:x}):x,s?(0,uO.jsx)(Ef.Z,{sx:{position:"absolute",zIndex:100,fontSize:0,mt:"12px",py:1,px:2,bg:"danger.subtle",color:"fg.default",borderColor:"danger.muted"},caret:"top-left",id:"foo",children:(0,uO.jsx)("span",{children:s})}):null]})};try{(ad=AV).displayName||(ad.displayName="SidebarTextInput")}catch{}let A$=e=>(0,uO.jsx)(PL,{...e,renderer:AU,editor:Az}),Az=({model:e,columnModel:t,content:r,onSaved:a})=>{let{updateItem:n}=Py(),l=(0,uq.useCallback)(async r=>{t.dataType===mD.Number&&(await n(e,{dataType:mD.Number,memexProjectColumnId:t.id,value:""!==r?{value:pV(r)}:void 0}),a())},[t,e,a,n]);return(0,uO.jsx)(AV,{submitValue:l,validationFn:AO,defaultValue:r?.value?.toString()||"",placeholder:fE.emptyColumnNameValue.number})},AU=({columnModel:e,content:t})=>(0,uO.jsx)(PK,{text:t?.value.toString(),columnName:e.name,columnType:e.dataType});try{(ac=A$).displayName||(ac.displayName="NumberField")}catch{}try{(au=Az).displayName||(au.displayName="NumberEditor")}catch{}try{(am=AU).displayName||(am.displayName="NumberRenderer")}catch{}function AW(e){return e.filter(e=>e.name.length>0)}let AH={color:"GRAY",description:"",name:""},AG=new ScoringCache,Aq=AG.sortByWithCache.bind(AG);function AK(e,t,r){return Pu(e,t,e=>e.name,AG,Aq,r)}let AQ=(e,t)=>{let r=t.name;return r.toLowerCase()!==e.toLowerCase()?null:t},AY=e=>e.name,AX=(e,t)=>({...e,...(0,mp.f)("table-cell-editor-row"),children:(0,uO.jsx)(jc,{sx:{display:"block"},children:e.nameHtml}),description:p8(e.descriptionHtml),leadingVisual:t?()=>(0,uO.jsx)(CU,{color:e.color,sx:{height:"14px",width:"14px"}}):void 0,descriptionVariant:"block"});function AJ({model:e,columnModel:t,selectedValueId:r,onSaved:a}){let{updateItem:n}=Py(),l=(0,uq.useCallback)(async r=>{await n(e,{memexProjectColumnId:t.id,dataType:mD.SingleSelect,value:{id:r[0]?.id??null}}),a?.()},[t.id,e,a,n]),i=(0,uq.useMemo)(()=>t.settings.options.map(e=>({...e,selected:e.id===r})),[t.settings,r]),s=(0,uq.useMemo)(()=>i.filter(e=>e.selected),[i]);return{saveSelected:l,options:i,selected:s}}async function A0(e){let t=f8("memex-column-option-create-api-data"),{data:r}=await hh(t.url,{method:"POST",body:e,token:t.token});return r}async function A1(e){let t=f8("memex-column-option-delete-api-data"),{data:r}=await hh(t.url,{method:"DELETE",body:e,token:t.token});return r}async function A2(e){let t=f8("memex-column-update-api-data"),{data:r}=await hh(t.url,{method:"PUT",body:e,token:t.token});return r}async function A5(e){let t=f8("memex-column-option-update-api-data"),{data:r}=await hh(t.url,{method:"PUT",body:e,token:t.token});return r}let A3=()=>{let{updateLoadedColumns:e}=_3(),{findMemexItem:t}=IO(),{setColumnValue:r}=IL(),a=(0,uW.NL)(),n=(0,uq.useCallback)(a=>{if(e(a.id),a.memexProjectColumnValues)for(let e of a.memexProjectColumnValues){let n=t(e.memexProjectItemId);n&&r(n,{memexProjectColumnId:a.id,value:e.value})}},[t,r,e]),l=(0,uq.useCallback)(t=>{e(t.id),bT(a,t)},[a,e]);return{updateColumnValues:n,updateAllColumnValues:l}},A4=()=>{let{updateColumnEntry:e}=TS(),{updateColumnValues:t}=A3(),r=(0,uq.useCallback)(async(r,a)=>{let n={...r.settings,options:A6(a)};ID();let{memexProjectColumn:l}=await A2({memexProjectColumnId:r.id,settings:n});if(l?.settings){let{settings:t}=l;e(jQ({...r,settings:t}))}l&&t(l)},[e,t]),a=(0,uq.useCallback)((t,r)=>{let{options:a}=r.settings??{};if(a){let r={...t.settings,options:a};e(jQ({...t,settings:r}))}},[e]),n=(0,uq.useCallback)(async(e,t)=>{if(!t.name)return;let r=(0,vv.randomUUID)(),n=[...e.settings.options,{id:r,...t,nameHtml:t.name,descriptionHtml:t.description}];a(e,{settings:{options:n}});try{let{memexProjectColumn:r}=await A0({memexProjectColumnId:e.id,option:t});a(e,r)}catch(t){throw a(e,{settings:{options:e.settings.options.filter(e=>e.id!==r)}}),t}},[a]),l=(0,uq.useCallback)(async(e,t,r=!1)=>{if(void 0!==t.name&&""===t.name.trim())return;let n=e.settings.options.find(e=>e.id===t.id);if(!n)return;let l=e.settings.options.map(e=>e.id===t.id?{...e,...t,nameHtml:t.name??e.nameHtml,descriptionHtml:t.description??e.descriptionHtml}:e);if(a(e,{settings:{options:l}}),r)return;let i={id:t.id,color:t.color,description:t.description,name:t.name},{memexProjectColumn:s}=await A5({memexProjectColumnId:e.id,option:i});a(e,s)},[a]),i=(0,uq.useCallback)(async(e,t)=>{let r=e.settings.options.findIndex(e=>e.id===t.id),n=e.settings.options[r];if(null!=t.position&&n&&e.settings.options){let l=[...e.settings.options];l.splice(r,1),l.splice(t.position-1,0,n),a(e,{settings:{options:l}})}let{memexProjectColumn:l}=await A5({memexProjectColumnId:e.id,option:t});a(e,l)},[a]),s=(0,uq.useCallback)(async(e,t)=>{let{memexProjectColumn:r}=await A1({memexProjectColumnId:e.id,option:t});a(e,r)},[a]);return{addColumnOption:n,moveColumnOption:i,updateOptions:r,updateColumnOption:l,destroyColumnOption:s}};function A6(e){return AW(e).map(({id:e,color:t,description:r,name:a})=>({id:fs(e)?"":e,color:t,description:r,name:a}))}var A7=r(24178),A8=r(39742),A9=r(5359);let Me=({value:e,onChange:t,label:r})=>{let a=(0,uq.useId)(),n=e=>{let r=e.target.value;pr(r)&&t(r)};return(0,uO.jsxs)(mF.Z,{as:"fieldset",sx:{border:0,padding:0,margin:0},children:[(0,uO.jsx)(mO.Z,{as:"legend",sx:{fontWeight:"bold",mb:2},children:r}),(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:m9.map(t=>(0,uO.jsx)(Mt,{name:a,color:t,onChange:n,selected:e===t},t))})]})},Mt=({color:e,onChange:t,selected:r,name:a})=>{let{fg:n,bg:l}=pt(e),i=(e[0]??"")+e.slice(1).toLowerCase();return(0,uO.jsx)(kK.Z,{role:"presentation","aria-label":i,direction:"s",children:(0,uO.jsxs)(mF.Z,{as:"label",sx:{p:2,background:r?n:l,color:r?"canvas.default":n,borderRadius:2,lineHeight:0,":has(:focus-visible)":{outlineWidth:"2px",outlineStyle:"solid",outlineColor:"accent.fg",outlineOffset:"1px"}},children:[(0,uO.jsx)(A9.Z,{name:a,value:e,checked:r,onChange:t,sx:{clipPath:"circle(0)",position:"absolute",outline:"none !important"}}),(0,uO.jsx)(kr,{children:i}),r?(0,uO.jsx)(mM.kD1,{}):(0,uO.jsx)(mM.J$M,{})]})})};try{(ap=Me).displayName||(ap.displayName="ColorPicker")}catch{}try{(af=Mt).displayName||(af.displayName="ColorOption")}catch{}let Mr=(0,uq.forwardRef)(({option:e,onClick:t,sx:r,...a},n)=>{let l=e=>{e.target instanceof HTMLAnchorElement?e.stopPropagation():t?.(e)},i=!!t,s=pt(e.color),o="nameHtml"in e?e.nameHtml:e.name;return(0,uO.jsx)(DC.Z,{sx:{bg:s.bg,color:s.fg,borderColor:s.border,cursor:i?"pointer":"default",":hover":{bg:s.bg,color:i?s.accent:s.fg,borderColor:s.border,boxShadow:i?void 0:"none"},...r},ref:n,onClick:l,text:(0,uO.jsx)(jc,{children:o}),...(0,mp.f)("single-select-token"),...a})});Mr.displayName="SingleSelectToken";let Ma={display:"flex",flexDirection:"column",overflow:"hidden"},Mn={display:"flex",flexDirection:"column",gap:3,overflowY:"auto"},Ml=e=>{"Enter"===e.key&&fh(e)&&e.currentTarget.requestSubmit()},Mi=({name:e,color:t,description:r})=>({name:e,color:t,description:r}),Ms=({initialOption:e,onSave:t,onCancel:r})=>{let[a,n]=(0,uq.useState)(!1),[l,i]=(0,uq.useReducer)((e,t)=>(n(!1),{...e,...t}),Mi(e)),s=(0,uq.useRef)(null),o=e=>{e.preventDefault(),t({...l,name:RQ(l.name),description:RQ(l.description)})},d=e=>{e.preventDefault(),n(!0)};(0,uq.useEffect)(()=>s.current?.focus(),[]);let c=(0,uq.useRef)(null);return(0,A7.t)({containerRef:c,onClickOutside:e=>e.preventDefault()}),(0,uO.jsx)(RV.V,{title:e.name?"Edit option":"New option",onClose:r,width:"medium",ref:c,renderBody:()=>(0,uO.jsxs)(mF.Z,{as:"form",onSubmit:o,onInvalid:d,onKeyDown:Ml,onBlur:e=>e.stopPropagation(),sx:Ma,children:[(0,uO.jsxs)(RV.V.Body,{sx:Mn,children:[(0,uO.jsx)(Mc,{option:l}),(0,uO.jsx)(Mo,{ref:s,value:l.name,onChange:e=>i({name:e}),showValidation:a}),(0,uO.jsx)(Me,{value:l.color,onChange:e=>i({color:e}),label:"Color"}),(0,uO.jsx)(Md,{value:l.description,onChange:e=>i({description:e}),showValidation:a})]}),(0,uO.jsx)(RV.V.Footer,{children:(0,uO.jsx)(RV.V.Buttons,{buttons:[{type:"button",onClick:r,content:"Cancel"},{type:"submit",content:"Save",buttonType:"primary"}]})})]})})},Mo=(0,uq.forwardRef)(function({value:e,onChange:t,showValidation:r},a){let n=r&&""===e.trim(),l=ER();return(0,uO.jsxs)(Cc.Z,{required:!0,children:[(0,uO.jsx)(Cc.Z.Label,{children:"Label text"}),(0,uO.jsx)(E_.Z,{...l,sx:{width:"100%"},children:(0,uO.jsx)(k4.Z,{ref:a,value:e,onChange:e=>t(e.target.value),block:!0,name:"Label text",validationStatus:n?"error":void 0,"aria-invalid":n?"true":void 0,pattern:".*\\S+.*",...(0,mp.f)("single-select-option-text-input")})}),n&&(0,uO.jsx)(Cc.Z.Validation,{variant:"error",children:"Label text is required"})]})}),Md=({value:e,onChange:t})=>{let r=yk().projectLimits.singleSelectDescriptionMaxLength,a=(0,uq.useRef)(null),n=(0,A8.A)({minHeightLines:0,maxHeightLines:12,elementRef:a,value:e}),l=ER();return(0,uO.jsxs)(Cc.Z,{children:[(0,uO.jsx)(Cc.Z.Label,{children:"Description"}),(0,uO.jsx)(E_.Z,{...l,sx:{width:"100%"},children:(0,uO.jsx)(EN.ZP,{ref:a,value:e,onChange:e=>t(e.target.value),block:!0,name:"Description",maxLength:r,sx:{"& textarea":{...n,resize:"vertical"}}})}),(0,uO.jsx)(Cc.Z.Caption,{children:"Visible in group headers and value pickers"})]})},Mc=({option:e})=>(0,uO.jsxs)(mF.Z,{as:"figure",sx:{p:3,borderRadius:2,m:0,display:"flex",alignItems:"center",justifyContent:"center",bg:"canvas.subtle"},children:[(0,uO.jsx)(kr,{as:"figcaption",children:"Preview"}),(0,uO.jsx)(Mr,{option:e})]});try{(ah=Ms).displayName||(ah.displayName="SingleSelectOptionModal")}catch{}try{(ag=Mo).displayName||(ag.displayName="NameInput")}catch{}try{(ax=Md).displayName||(ax.displayName="DescriptionInput")}catch{}try{(ay=Mc).displayName||(ay.displayName="LabelPreview")}catch{}let Mu=e=>(0,uO.jsx)(PL,{...e,renderer:Mp,editor:Mm}),Mm=({model:e,columnModel:t,content:r,onSaved:a})=>{let n=r?r.id:null,{saveSelected:l,options:i,selected:s}=AJ({columnModel:t,model:e,selectedValueId:n,onSaved:a}),{addColumnOption:o}=A4(),{findColumn:d}=Tk(),{navigationDispatch:c}=x3(),[u,m]=(0,uq.useState)(null),{projectLimits:{singleSelectColumnOptionsLimit:p}}=yk(),f=i.every(e=>"GRAY"===e.color),h=(0,uq.useCallback)(e=>AX(e,!f),[f]),g=yS(i),x=(0,uq.useCallback)(async e=>{m(null),await o(t,e);let r=d(t.id),a=g2(r)?r.settings.options.find(({name:t})=>t===e.name):void 0;a&&l([{...a,selected:!0}]),c(x2({focusType:xl.Focus}))},[o,t,d,l,c]),y=(0,uq.useCallback)(e=>{let t=RQ(e);return g?{...(0,mp.f)("table-cell-editor-max-options-length-row"),text:fE.singleSelectOptionLimitWarning(p),disabled:!0}:{description:"Create new option",descriptionVariant:"block",leadingVisual:mM.pOD,children:(0,uO.jsx)(mO.Z,{sx:{color:"accent.emphasis",wordBreak:"break-all"},children:(0,uO.jsx)("strong",{children:t})}),onAction:async(e,r)=>{r.preventDefault(),m({...AH,name:t})},...(0,mp.f)("add-column-option")}},[g,p]);return u?(0,uO.jsx)(Ms,{initialOption:u,onSave:x,onCancel:()=>m(null)}):(0,uO.jsx)(Pq,{model:e,columnId:t.id.toString(),getSortAttribute:AY,convertOptionToItem:h,initialFilterValue:"",selected:s,saveSelected:l,fetchOptions:IR.Z,options:i,filterOptions:AK,placeholderText:"Filter options",displayValue:(0,uO.jsx)(Mp,{model:e,columnModel:t,content:r}),singleSelect:!0,renderCreateNewOption:y,getOptionMatchingFilterValue:AQ})},Mp=({columnModel:e,content:t})=>t?(0,uO.jsx)(Mr,{option:t}):(0,uO.jsx)(PK,{columnName:e.name,columnType:e.dataType});try{(ab=Mu).displayName||(ab.displayName="SingleSelectField")}catch{}try{(av=Mm).displayName||(av.displayName="SingleSelectEditor")}catch{}try{(aw=Mp).displayName||(aw.displayName="SingleSelectRenderer")}catch{}let Mf=e=>(0,uO.jsx)(PL,{...e,renderer:Mg,editor:Mh}),Mh=({model:e,columnModel:t,content:r,onSaved:a})=>{let{updateItem:n}=Py(),l=(0,uq.useCallback)(async r=>{t.dataType===mD.Text&&(await n(e,{dataType:mD.Text,memexProjectColumnId:t.id,value:RQ(r)}),a&&a())},[t,e,a,n]);return(0,uO.jsx)(AV,{withEmojiPicker:!0,submitValue:l,defaultValue:r?.raw||"",placeholder:fE.emptyColumnNameValue.text})},Mg=({columnModel:e,content:t})=>(0,uO.jsx)(PK,{dangerousHtml:t?.html,columnName:e.name,columnType:e.dataType});try{(aj=Mf).displayName||(aj.displayName="TextField")}catch{}try{(aC=Mh).displayName||(aC.displayName="TextEditor")}catch{}try{(ak=Mg).displayName||(ak.displayName="TextRenderer")}catch{}let Mx=({item:e,content:t,field:r,metadata:a})=>{let n=(0,uO.jsx)(PM,{sx:{color:"fg.subtle"},children:fE.noneYet});switch(r.dataType){case mD.Assignees:n=(0,uO.jsx)(PJ,{model:e,columnModel:r,content:a.assignees,onSaved:IR.Z});break;case mD.Labels:n=(0,uO.jsx)(AS,{model:e,columnModel:r,content:a.labels,onSaved:IR.Z});break;case mD.Milestone:n=(0,uO.jsx)(AL,{model:e,columnModel:r,content:a.milestone,onSaved:IR.Z});break;case mD.Iteration:n=(0,uO.jsx)(Au,{model:e,columnModel:r,content:t,onSaved:IR.Z});break;case mD.SingleSelect:n=(0,uO.jsx)(Mu,{model:e,columnModel:r,content:t,onSaved:IR.Z});break;case mD.Text:n=(0,uO.jsx)(Mf,{model:e,columnModel:r,content:t,onSaved:IR.Z});break;case mD.Date:n=(0,uO.jsx)(P3,{model:e,columnModel:r,content:t,onSaved:IR.Z});break;case mD.Number:n=(0,uO.jsx)(A$,{model:e,columnModel:r,content:t,onSaved:IR.Z});break;case mD.LinkedPullRequests:n=t?.length?(0,uO.jsx)(PM,{children:(0,uO.jsx)(mF.Z,{sx:{display:"flex",gap:1,flexDirection:"column",alignItems:"flex-start"},children:t?.slice(0,10).map(e=>(0,uO.jsx)(Pr,{linkedPullRequest:e},e.id))})}):(0,uO.jsx)(PM,{sx:{color:"fg.subtle"},children:fE.emptyColumnNameValue.linkedPullRequest});break;case mD.Repository:t&&(n=(0,uO.jsx)(PM,{children:(0,uO.jsx)(Pn,{repository:t})}));break;case mD.Tracks:(t=a.completion||t)&&0!==t.total&&(n=(0,uO.jsx)(PM,{sx:{display:"flex"},children:(0,uO.jsx)(DS,{progress:t})}));break;case mD.TrackedBy:t&&(n=(0,uO.jsx)(PM,{sx:{display:"flex",flexWrap:"wrap"},children:t?.slice(0,10).map(e=>(0,uO.jsx)(Pi,{trackedBy:e,noPrefix:!0},e.key.itemId))}));break;default:t&&(n=(0,uO.jsx)(PM,{children:t}))}return(0,uO.jsx)(PP,{label:r.name,...(0,mp.f)(`sidebar-field-${r.name}`),children:n})};var My=r(66044);async function Mb(e){let t=f9("memex-item-convert-issue-api-data"),{memex_skip_json_parsing_if_invalid_response_and_content_found:r}=ho(),{data:a}=await hx(t.url,{method:"POST",body:e},r);return a}let Mv=()=>{let{setItemData:e}=bR(),t=(0,_4.c)({mutationFn:Mb,onSuccess:t=>{e(t.memexProjectItem)}});return t()},Mw=()=>{let e=Mv(),t=(0,uq.useCallback)(async(t,r)=>(ID(),e.mutateAsync({repositoryId:r,memexProjectItemId:t})),[e]);return{convertToIssue:t}};function Mj(e){let t=e.memexProjectColumnValues.find(e=>e.memexProjectColumnId===mP.Title);return!t||t.memexProjectColumnId!==mP.Title||"isDraft"in t.value?null:"number"in t.value?t.value.number:null}function MC(e){let t=e.memexProjectColumnValues.find(e=>e.memexProjectColumnId===mP.Repository);return t&&t.memexProjectColumnId===mP.Repository&&t.value?t.value.nameWithOwner:null}function Mk(e){return e.contentType===mA.DraftIssue}let MS=e=>{let{addToast:t}=m7(),{postStats:r}=bM(),{convertToIssue:a}=Mw(),n=(0,uq.useCallback)(async({memexProjectItem:n,repositoryId:l})=>{if(Mk(n)){let{memexProjectItem:i,warnings:s}=await a(n.id,l),o=s?.invalidAssigneeLogins??[];o.length>0&&(t({message:fE.unableToAssignUsersToConvertedIssue(o),type:mB.error}),r({name:"draft_convert_dropped_assignee",context:o.length,memexProjectItemId:i.id}));let d=Mj(i),c=MC(i);d&&c&&e?.()}},[a,t,r,e]),{perform:l,status:i}=b6({request:n}),s=(0,uq.useCallback)(async(e,t)=>{await l({memexProjectItem:e,repositoryId:t.id})},[l]);return{start:s,status:i}},MI=({isOpen:e,anchorRef:t,renderAnchor:r=()=>(0,uO.jsx)("div",{}),showPrompt:a=!1,onOpenChange:n,onSuccess:l,item:i,promptOptions:s={title:fE.draftConvertPromptTitle,description:fE.draftConvertPromptDescription}})=>{let o=(0,uq.useRef)(null),d=(0,uq.useRef)(null),[c,u]=(0,uq.useState)(""),[m,p]=(0,uq.useState)(!1),[f,h]=(0,uq.useState)(a),[g,x]=(0,uq.useState)([]),[y,b]=(0,uq.useState)([]),v=(0,uq.useRef)(),{suggestRepositories:w}=Cb(),{start:j}=MS(),C=(0,My.i)(t);(0,Cp.P)({restoreFocusOnCleanUp:!0,initialFocusRef:o,containerRef:d});let k=(0,uq.useCallback)(e=>{n(!1,e)},[n]),S=(0,uq.useCallback)(async e=>{await j(i,e)},[j,i]),I=(0,uq.useCallback)(async()=>{if(y.length)return;p(!0);let e=await w();b(e??[]),p(!1)},[]),N=(0,uq.useCallback)(e=>(""!==c?g:y).find(t=>t.id===e),[c,g,y]);(0,uq.useEffect)(()=>{e&&(u(""),x([]),I())},[I,e]);let _=e=>{u(e),R(e)},T=(0,uq.useCallback)(async e=>{if(""!==e){p(!0);let{repositories:t}=await Ch(e);x(t),p(!1)}else x(y??[])},[y]),R=(0,uq.useCallback)(e=>{v.current&&v.current.cancel(),v.current=(0,b7.Z)(()=>T(e),200),v.current()},[T]),E=e=>{if(e?.id){let t=N(e.id);t&&(S(t),l?.(t))}},D=()=>{k("click-outside")},P=(""!==c?g:y).filter(e=>!e.isArchived&&e.hasIssues),A=P.map(e=>({...e,text:e.name,leadingVisual:()=>Cv({repository:e}),selectionVariant:"single",descriptionVariant:"block",selected:void 0,onAction:(t,r)=>{r.preventDefault(),E(e),n(!1,"convert-confirmation")}}));return f?(0,uO.jsx)(EH.w,{anchorRef:C,renderAnchor:r,open:e,overlayProps:{onEscape:D,onClickOutside:D},width:"small",children:(0,uO.jsx)(mF.Z,{onClick:e=>e.stopPropagation(),children:(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"stretch",m:2},children:(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>h(!1),...(0,mp.f)("draft-prompt-convert-to-issue"),children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,uO.jsx)(mO.Z,{sx:{display:"flex",fontSize:14,fontWeight:"bold",p:0},children:s.title}),(0,uO.jsx)(mO.Z,{sx:{display:"flex",fontSize:12,p:0,color:"fg.muted"},children:s.description})]}),(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(mM.LZ3,{})})]})})})}):(0,uO.jsx)(Cf.b,{placeholderText:fE.repoPickerFilterPlaceholder,open:e,anchorRef:C,renderAnchor:r,onOpenChange:n,loading:m,selected:void 0,filterValue:c,items:A,showItemDividers:!0,onFilterChange:_,onSelectedChange:E,overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"small",onClickOutside:D,...(0,mp.f)("repo-picker-repo-list")}})};MI.displayName="RepoPicker";let MN=({item:e})=>{let{tasklist_block:t,memex_tracked_by_items:r}=g9(),{closePane:a,hasUnsavedChanges:n}=bJ(),{postStats:l}=bM(),{addToast:i}=m7(),{items:s}=bt(),{removeChildIssues:o}=IU(),{createMemexItem:d}=_8(),{reloadSidePanelMetadata:c}=RM(),[u,m]=yY(),{hasWritePermissions:p}=yI(),f=yk().projectLimits.projectItemLimit,h=e.getUrl(),[g,x]=(0,uq.useState)(!1),y=(0,f6.N)(),b=async()=>!n||await y({...fE.sidePanelCloseConfirmation,confirmButtonType:"danger"}),[v,w]=(0,uq.useState)(!1),j=(0,uq.useRef)(null),C=()=>{b()&&w(!0)},k=()=>{l({name:hN,ui:hS,memexProjectItemId:e.id})},S=(0,uq.useMemo)(()=>s.find(t=>t.itemId()===e.itemId()&&t.contentType===e.contentType),[s,e]),I=!!S,N=(0,uq.useRef)(!1);(0,uq.useLayoutEffect)(()=>{let t=document.querySelector(`[data-hovercard-subject-tag="issue:${e.itemId()}"]`)||document.querySelector(`[data-board-card-id="${e.itemId()}"]`);N.current&&t&&(N.current=!1,"scrollIntoViewIfNeeded"in t&&"function"==typeof t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded(!1):t.scrollIntoView({block:"nearest",behavior:"smooth"}),S&&m(e=>(e.set(yW,hk.ISSUE),e.set(yH,S.id.toString()),e)))});let _=(0,uq.useCallback)(async()=>{if(s.length+1>f){i({message:`Adding this item will exceed the ${f} project item limit`,type:mB.error});return}x(!0);try{await d({contentType:mA.DraftIssue,content:{title:h}}),o([e.itemId()]),c(),N.current=!0}catch(e){i({message:"An error has occurred when trying to 'Add to project'",type:mB.error})}x(!1)},[s.length,f,i,d,h,o,e,c]),{openArchiveConfirmationDialog:T}=D5(void 0,void 0,void 0,()=>a({force:!0})),R=()=>{b()&&I&&T([S.id],hS)},{openRemoveConfirmationDialog:E}=D7(void 0,void 0,void 0,()=>a({force:!0})),D=()=>{I&&E([S.id],hS)},P=[],A=e instanceof DraftIssueModel&&p;return A&&P.push((0,uO.jsx)(M_,{onConvert:C,ref:j},"convert")),t&&r&&p&&h&&!I&&e.isHierarchy&&P.push((0,uO.jsx)(MT,{onAddToProject:_,loading:g},"addToProject")),h&&P.push((0,uO.jsx)(MR,{itemUrl:h,onClick:()=>l({name:ga})},"open"),(0,uO.jsx)(ME,{itemUrl:h},"copy")),I&&(P.push((0,uO.jsx)(MD,{inProjectUrl:window.location.href},"copyInProjectLink")),p&&P.push((0,uO.jsx)(MP,{onArchive:R},"archive"),(0,uO.jsx)(MA,{onDelete:D},"delete"))),P.length>0?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(Ia.S,{"aria-label":"Actions",children:[(0,uO.jsx)(Ia.S.Divider,{}),P]}),A?(0,uO.jsx)(MI,{anchorRef:j,isOpen:v,item:e,onOpenChange:w,onSuccess:k},"repoPicker"):null]}):null},M_=(0,uq.forwardRef)(({onConvert:e},t)=>(0,uO.jsxs)(Ia.S.Item,{onSelect:e,ref:t,...(0,mp.f)("side-pane-convert-to-issue"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.hEv,{})}),"Convert to issue"]}));M_.displayName="ConvertToIssueAction";let MT=({onAddToProject:e,loading:t})=>(0,uO.jsxs)(Ia.S.Item,{onSelect:e,disabled:t,...(0,mp.f)("side-pane-add-to-project-action"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.wl8,{})}),"Add to project"]});MT.displayName="AddToProjectAction";let MR=({itemUrl:e,onClick:t})=>(0,uO.jsxs)(Ia.S.LinkItem,{target:"_blank",href:e,onClick:t,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.Pfi,{})}),"Open in new tab"]}),ME=({itemUrl:e})=>{let[t,r]=(0,uq.useState)(!1),a=m2(()=>r(!1),2e3),n=()=>{navigator.clipboard.writeText(e),r(!0),a()};return(0,uO.jsxs)(Ia.S.Item,{onSelect:n,...(0,mp.f)("copy-link-action"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:t?(0,uO.jsx)(mL.Z,{icon:mM.nQG,sx:{color:"success.fg"}}):(0,uO.jsx)(mM.TIy,{})}),t?(0,uO.jsx)(mO.Z,{sx:{fontWeight:"bold",color:"success.fg"},children:"Copied!"}):"Copy link"]})},MD=({inProjectUrl:e})=>{let[t,r]=(0,uq.useState)(!1),a=m2(()=>r(!1),2e3),n=()=>{navigator.clipboard.writeText(e),r(!0),a()};return(0,uO.jsxs)(Ia.S.Item,{onSelect:n,...(0,mp.f)("copy-in-project-link-action"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:t?(0,uO.jsx)(mL.Z,{icon:mM.nQG,sx:{color:"success.fg"}}):(0,uO.jsx)(mM.TIy,{})}),t?(0,uO.jsx)(mO.Z,{sx:{fontWeight:"bold",color:"success.fg"},children:"Copied!"}):"Copy link in project"]})},MP=({onArchive:e})=>(0,uO.jsxs)(Ia.S.Item,{onSelect:e,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.rKT,{})}),"Archive"]}),MA=({onDelete:e})=>(0,uO.jsxs)(Ia.S.Item,{onSelect:e,variant:"danger",...(0,mp.f)("side-pane-delete-action"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete from project"]});try{(aS=MN).displayName||(aS.displayName="SidePanelSidebarActions")}catch{}try{(aI=MR).displayName||(aI.displayName="OpenInNewTabAction")}catch{}try{(aN=ME).displayName||(aN.displayName="CopyUrlAction")}catch{}try{(a_=MD).displayName||(a_.displayName="CopyInProjectUrlAction")}catch{}try{(aT=MP).displayName||(aT.displayName="ArchiveAction")}catch{}try{(aR=MA).displayName||(aR.displayName="DeleteAction")}catch{}let MM=({item:e,breakpoint:t})=>(0,uO.jsxs)(mF.Z,{sx:{borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:t(["0","0","1px","1px"]),borderTopWidth:t(["1px","1px","0","0"]),borderStyle:"solid",borderColor:"border.muted",width:t(["100%","100%","33%","33%"]),maxWidth:t(["","","300px","400px"]),minWidth:t(["","","280px","400px"])},children:[(0,uO.jsx)(MZ,{item:e}),(0,uO.jsx)(MN,{item:e})]}),ML=new Set([mP.Labels,mP.Assignees,mP.Milestone]),MF=e=>"number"!=typeof e&&ML.has(e),MZ=({item:e})=>{let t=(0,uq.useRef)(null),{allColumns:r}=CB(),{sidePanelMetadata:a}=RM(),{memex_sidepanel_tracking_fields:n}=g9(),l=(0,uq.useMemo)(()=>{let t=new Map,a=bp(e.contentType,r);return a.map(r=>({content:bx(r,t,e),field:r}))},[r,e]),i=(0,uq.useMemo)(()=>{let e=l.reduce((e,t)=>(bm(t.field)&&n||(MF(t.field.id)?e[0].push(t):a.projectItemId&&e[1].push(t)),e),[[],[]]);return e.flat()},[l,n,a.projectItemId]),s=(0,uq.useCallback)(e=>{if("Enter"===e.key){e.stopPropagation();let r=t.current?.querySelectorAll("button, input");if(!r?.length)return;let a=Array.from(r).indexOf(e.target),n=r[a+1];n?.focus()}},[]);return(0,uO.jsxs)("section",{children:[(0,uO.jsx)(kr,{as:"h3",children:"Properties"}),(0,uO.jsx)(PD,{listRef:t,onKeyDown:s,children:i.map(t=>(0,uO.jsx)(Mx,{metadata:a,item:e,content:t.content,field:t.field},t.field.id))})]})};try{(aE=MM).displayName||(aE.displayName="SidePanelSidebar")}catch{}try{(aD=ML).displayName||(aD.displayName="UNIVERSAL_FIELDS")}catch{}try{(aP=MZ).displayName||(aP.displayName="SidePanelSidebarContent")}catch{}let MO=(0,uq.memo)(function({sidePanelState:e}){let{memex_new_issue_viewer:t}=g9();switch(e.type){case hk.ISSUE:if(t&&"Issue"===e.item.contentType){let t=e.item.getItemIdentifier();return t?(0,uO.jsx)(D9,{...t,url:e.item.getUrl(),itemId:e.item.id}):null}return(0,uO.jsx)(RA,{contentType:e.item.contentType,repositoryId:e.item.ownerId(),itemId:e.item.itemId(),memexItemId:e.item.memexItemId?.(),children:(0,uO.jsx)(M$,{item:e.item})});case hk.INFO:return(0,uO.jsx)(MB,{});case hk.BULK_ADD:return(0,uO.jsx)(Mz,{targetRepository:e.targetRepository,query:e.query,newItemAttributes:e.newItemAttributes});default:xE(e)}}),MB=(0,uq.memo)(function(){let{postStats:e}=bM(),{titleHtml:t}=f3(),{description:r}=f3(),{hasWritePermissions:a}=yI(),[,n]=Rh(),[,l]=Rh(),i=(0,uq.useCallback)(t=>{e({name:t?h4:h3,ui:h6})},[e]),s=(0,uq.useCallback)(t=>{e({name:t?h9:h8,ui:ge})},[e]);return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",backgroundColor:"canvas.default",width:"100%",overflowY:"auto",height:"100%"},children:[(0,uO.jsxs)(mF.Z,{sx:{mt:4,mx:[3,"",4]},children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"row-reverse"},children:[(0,uO.jsx)(DR,{}),(0,uO.jsx)(mF.Z,{sx:{flex:1}}),(0,uO.jsx)(jc,{sx:{fontWeight:"600",fontSize:2,wordBreak:"break-word"},children:t})]}),(0,uO.jsx)(ED,{onSaveStats:i,setHasUnsavedChanges:n,hideLabel:!0})]}),!a&&r||a?(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"column",flex:"auto",borderTop:"1px solid",borderColor:"border.muted",p:[3,"",4],mt:3,overflowY:"auto"},children:(0,uO.jsx)(EI,{onSaveStats:s,setHasUnsavedChanges:l,hideLabel:!0})}):null]})}),MV=(0,uq.memo)(function({item:e,supportsComments:t,isLoading:r}){let a=(0,uq.useRef)(null),n=e.itemId();(0,uq.useLayoutEffect)(()=>{a.current&&Rp(a.current)},[n]);let l=Rf(a.current);return(0,uO.jsxs)(mF.Z,{ref:a,sx:{display:"flex",flex:"auto",flexDirection:l(["column","column","row","row"]),backgroundColor:"canvas.default",justifyContent:"stretch",overflowY:"auto"},children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flex:"auto",flexDirection:"column",width:l(["100%","100%","66%","66%"]),mx:"auto"},children:[(0,uO.jsx)(E6,{item:e,isLoading:r,fullHeight:!t}),(0,uO.jsx)(DU,{itemURL:e.getUrl()})]}),(0,uO.jsx)(MM,{item:e,breakpoint:l})]})}),M$=(0,uq.memo)(function({item:e}){let[t,r]=(0,uq.useState)("details"),{tasklist_block:a}=g9(),{sidePanelMetadata:{comments:n},isLoading:l}=RM(),i=a&&e.contentType===mA.Issue;return(0,uO.jsxs)(mF.Z,{sx:{position:"relative",backgroundColor:"canvas.default",height:"100%",width:"100%",flexGrow:1,zIndex:2,display:"flex",flexDirection:"column"},children:[(0,uO.jsx)(D_,{item:e,isLoading:l,showBreadcrumbs:i,showTabs:!1,selectedTab:t,onTabChange:r}),(0,uO.jsx)(MV,{item:e,supportsComments:void 0!==n,isLoading:l})]})}),Mz=(0,uq.memo)(function({targetRepository:e,query:t,newItemAttributes:r}){return(0,uO.jsx)(vs,{query:t,selectedRepository:e,children:(0,uO.jsx)(DM,{targetRepository:e,newItemAttributes:r})})});try{(aA=MO).displayName||(aA.displayName="SidePanelContent")}catch{}try{(aM=MB).displayName||(aM.displayName="SidePanelMemexInfoContent")}catch{}try{(aL=MV).displayName||(aL.displayName="SidePanelItemDetails")}catch{}try{(aF=MV).displayName||(aF.displayName="SidePanelItemDetails")}catch{}try{(aZ=M$).displayName||(aZ.displayName="SidePanelItemContent")}catch{}try{(aO=Mz).displayName||(aO.displayName="SidePanelMemexBulkAddContent")}catch{}let MU=(0,uq.memo)(function({mainAppContent:e}){let{closePane:t,openPaneBulkAdd:r,sidePanelState:a,isPaneOpened:n,supportedItemTypes:l,pinned:i,containerRef:s,closeButtonRef:o}=bJ(),{isProjectViewRoute:d}=kd();mm(()=>d&&a?.type!==hk.BULK_ADD?["a","Add items",gs,()=>r(hZ)]:null,[d,a,r]);let c=(n&&a&&(a.type!==hk.ISSUE||l.has(a.item.contentType)))??!1,u=a&&(0,uO.jsx)(mF.Z,{ref:s,sx:{display:"contents"},children:(0,uO.jsx)(MO,{sidePanelState:a})}),m=Mq(a);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(MH,{open:c&&i,mainAppContent:e,label:m,closeButtonRef:o,children:c&&i&&u}),(0,uO.jsx)(MG,{open:c&&!i,label:m,onClose:t,contentType:a?.type,children:c&&!i&&u})]})}),MW=(...e)=>{for(let{current:t}of e)if(t&&document.body.contains(t)){t.focus();return}},MH=(0,uq.memo)(function({mainAppContent:e,children:t,open:r,label:a,closeButtonRef:n}){let{postStats:l}=bM(),i=Rm(),s=(0,uq.useRef)(null),o=(0,uq.useRef)(null),d=(0,uq.useRef)(null),c=(0,uq.useCallback)(e=>{let t=e.relatedTarget,r=e.currentTarget,a=e.target;a instanceof HTMLElement&&(o.current=a),!r.contains(t)&&t instanceof HTMLElement&&(s.current=t,MW(o))},[]);return Rd(r,s),(0,Rs.K)(["F6"],e=>{e.preventDefault(),d.current?.contains(document.activeElement)?(MW(s),l({name:"region_focus",context:"target: main"})):(MW(o,n),l({name:"region_focus",context:"target: side panel"}))},{ctrlKey:!0,triggerWhenInputElementHasFocus:!0,triggerWhenPortalIsActive:!1}),(0,uO.jsxs)(Ro.X,{containerWidth:"full",padding:"none",columnGap:"none",rowGap:"none",sx:{width:"100%",isolation:"isolate",height:`calc(100vh - ${i}px)`,"& > div":{height:"100%"}},children:[(0,uO.jsx)(Ro.X.Content,{sx:{isolation:"isolate",minHeight:"50vh"},children:(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:e})}),(0,uO.jsx)(Ro.X.Pane,{sticky:!0,resizable:!0,hidden:!r,width:"large",widthStorageKey:"projects.sidePanelWidth",sx:{"& > :nth-child(2)":{width:"3px",zIndex:5,"& > [role='separator']":{inset:"0 -3px"}},"& > :nth-child(3)":{"--pane-min-width":"clamp(350px, 33vw, 500px)","--pane-max-width-diff":"clamp(350px, 33vw, 1000px)"}},divider:"line",children:(0,uO.jsx)(mF.Z,{as:"aside","aria-label":a,sx:{overflow:"hidden",isolation:"isolate"},onFocus:c,ref:d,children:t})})]})}),MG=(0,uq.memo)(function({children:e,open:t,label:r,onClose:a,contentType:n}){let l=Rm(),i=(0,uq.useRef)(null),s=(0,uq.useRef)(),o=(0,uq.useMemo)(()=>{switch(n){case hk.ISSUE:return s.current="min(90%, 1280px)";case hk.INFO:return s.current="400px";case hk.BULK_ADD:return s.current="60%";default:return s.current}},[n]),d=(0,uq.useCallback)(e=>{let t=!1;e.target&&e.target instanceof Element&&(t=e.target.classList.contains("js-site-search-field"));let r=0===document.querySelectorAll(".omnibar-picker.visible").length;r&&!t&&a()},[a]),c=(0,uq.useCallback)(e=>{let t=kE(e);t!==k_.ESCAPE&&Object.values(k_).includes(t)&&e.stopPropagation()},[]);return(0,uO.jsx)(Ri,{open:t,onClose:d,returnFocusRef:i,topOffset:l,onKeyDown:c,width:o,"aria-label":r,defaultCloseElement:"first-child",children:e})});function Mq(e){let t=[fE.sidePanelRegionNameLabel];switch(e?.type){case hk.INFO:t.push(fE.sidePanelProjectInfoLabel);break;case hk.BULK_ADD:t.push(fE.sidePanelBulkAddLabel);break;case hk.ISSUE:t.push(fE.itemType(e.item.contentType),e.item.getTitle(!0))}return t.join(": ")}try{(aB=MU).displayName||(aB.displayName="SidePanel")}catch{}try{(aV=MH).displayName||(aV.displayName="DockedSidePanel")}catch{}try{(a$=MG).displayName||(a$.displayName="OverlaySidePanel")}catch{}async function MK(){let e=f9("memex-custom-templates-api-data"),{data:t}=await hh(e.url);return t}let MQ=(0,yJ.r)({primaryKey:"org-templates",queryFn:()=>MK()});async function MY(e){let{memex_skip_json_parsing_if_invalid_response_and_content_found:t}=ho(),r=f9("memex-template-api-data"),{data:a}=await hx(r.url,{method:"POST",body:e},t);return a}function MX(){let{resolvedColorScheme:e}=(0,uz.Fg)(),t=e?.startsWith("dark");return t?"Dark":"Light"}function MJ(e,t){let r=MX(),a=yk().mediaUrls,n=a?.[e]?.[`${t}${r}`];return n?encodeURI(n.toString()):""}let M0={table:"table",board:"board",roadmap:"roadmap",feature:"feature",backlog:"backlog",template:"template"},M1={layout:"layout",functionality:"functionality",org_templates:"org_templates"},M2=()=>{let e=f3(),{setProject:t}=TI(),r=(0,uq.useCallback)(async r=>{if(r=r.trim(),e.title===r||0===r.length)return;let a=await RZ({title:r});t(a.memexProject)},[e.title,t]);return{updateTitle:r}};async function M5(e){let t=f8("memex-view-create-api-data"),{data:r}=await hh(t.url,{method:"POST",body:e,token:t.token});return r}async function M3(e){let t=f8("memex-view-delete-api-data"),{data:r}=await hh(t.url,{method:"DELETE",body:e,token:t.token});return r}async function M4(e){let t=f8("memex-view-update-api-data"),{data:r}=await hh(t.url,{method:"PUT",body:e,token:t.token});return r}let M6=({setCurrentViewNumber:e,addView:t})=>{let r=(0,uq.useCallback)(async r=>{ID();let a=await M5(r);return t(a.view),e(a.view.number),a.view},[t,e]),a=b6({request:r});return a},M7=()=>{let e=(0,uq.useCallback)(async e=>{ID();let t=await M4(e);return t.view},[]),t=b6({request:e});return t},M8=({setCurrentViewNumber:e,updateView:t})=>{let r=(0,uq.useCallback)(async r=>{ID();let{sliceValue:a,...n}=r.view;r.view=n;let l=await M4(r);return a&&(l.view.sliceValue=a),t(l.view),e(l.view.number),l.view},[t,e]),a=b6({request:r});return a},M9=({deleteView:e})=>{let t=(0,uq.useCallback)(async t=>{ID(),await M3(t),e(t.viewNumber)},[e]),r=b6({request:t});return r},Le=()=>{let{viewStateDispatch:e,viewsMap:t}=bP(),r=M7(),{memex_table_without_limits:a}=g9(),{updateTitle:n}=M2(),l=b6({request:async e=>{await MY({template:e})},rollback:e=>{e&&e()},showErrorToast:!0}),i=(0,uq.useCallback)(async({selectedTemplate:e,title:t,rollback:r})=>{await Promise.all([l.perform(e,r),n(t)])},[l,n]),s=(0,uq.useCallback)(async({title:e})=>{await n(e)},[n]),o=(0,uq.useCallback)(async({title:a})=>{let l=t[1];(0,u0.Z)(l,"view must exist");let i={...l.serverViewState,layout:_Z.Board};await Promise.all([r.perform({viewNumber:l.number,view:ht(i,_B)}),n(a)]),"succeeded"===r.status.current.status&&e({type:kc.UpdateView,view:i})},[n,r,e,t]),d=(0,uq.useCallback)(async({title:a})=>{let l=t[1];(0,u0.Z)(l,"view must exist");let i={...l.serverViewState,layout:_Z.Roadmap};await Promise.all([r.perform({viewNumber:l.number,view:ht(i,_B)}),n(a)]),"succeeded"===r.status.current.status&&e({type:kc.UpdateView,view:i})},[n,r,e,t]),c=(0,uq.useMemo)(()=>[{key:M0.table,groupKey:M1.layout,title:"Table",icon:mM.$eq,action:s,template:void 0},{key:M0.board,groupKey:M1.layout,title:"Board",icon:mM.Rg1,action:o,template:void 0,disabled:a},{key:M0.roadmap,groupKey:M1.layout,title:"Roadmap",icon:mM.Bjy,action:d,template:void 0,disabled:a}],[o,d,s,a]),u=[{key:M1.layout,groupTitle:"Start from scratch",items:c},{key:M1.functionality,groupTitle:"Project templates",items:[{key:M0.backlog,groupKey:M1.functionality,title:"Team backlog",icon:mM.t0Z,action:i,template:void 0},{key:M0.feature,groupKey:M1.functionality,title:"Feature",icon:mM.oEX,action:i,template:void 0}]}];return u};function Lt(){let{setAllWorkflows:e}=w2(),{setProject:t}=TI(),{updateMemexItems:r}=TN(),{findLoadedFieldIds:a}=TC(),{updateColumns:n}=TS(),{updateViewServerStates:l}=bP(),{updateChartConfigurations:i}=Tj(),{perform:s,status:o}=b6({request:(0,uq.useCallback)(e=>{let t=IA(e);return t},[]),showErrorToast:!1}),d=(0,uq.useCallback)(async()=>{if(await s({visibleFields:[...a()]}),"succeeded"===o.current.status){let{memexProject:a,memexProjectItems:s,memexProjectAllColumns:d,memexViews:c,memexWorkflows:u,memexWorkflowConfigurations:m,memexCharts:p}=o.current.data;t(a),r(s),n(d),l(c),e(m,u),i(p)}},[a,s,o,e,t,i,n,r,l]);return d}let Lr=(0,uq.createContext)(null),La=(0,uq.memo)(function({children:e}){let[t,r]=(0,uq.useState)(!0),[a,n]=(0,uq.useState)(!1),{showTemplateDialog:l}=yk(),i=(0,uq.useMemo)(()=>({showTemplateDialog:l,isTemplatesDialogOpen:t,setIsTemplatesDialogOpen:r,isModalDismissed:a,setIsModalDismissed:n}),[a,l,t]);return(0,uO.jsx)(Lr.Provider,{value:i,children:e})});try{(az=Lr).displayName||(az.displayName="TemplateDialogContext")}catch{}try{(aU=La).displayName||(aU.displayName="TemplateDialogStateProvider")}catch{}let Ln=()=>{let e=(0,uq.useContext)(Lr);if(!e)throw Error("useTemplateDialog must be used within a TemplateDialogStateProvider");return e},Ll={[mD.Assignees]:{icon:mM.t0Z,text:"Assignees"},[mD.SingleSelect]:{icon:mM.FBI,text:"Single select",sortedAscendingDescription:`(${fE.sortSingleSelectAscending})`,sortedDescendingDescription:`(${fE.sortSingleSelectDescending})`},[mD.Title]:{icon:mM.ASI,text:"Title"},[mD.Number]:{icon:mM.yEv,text:"Number",sortedAscendingDescription:`(${fE.sortNumbersAscending})`,sortedDescendingDescription:`(${fE.sortNumbersDescending})`},[mD.Labels]:{icon:mM.lO_,text:"Labels"},[mD.Repository]:{icon:mM.H0r,text:"Repository"},[mD.Iteration]:{icon:mM.H9J,text:"Iteration"},[mD.Milestone]:{icon:mM.K37,text:"Milestone"},[mD.Date]:{icon:mM.Que,text:"Date",sortedAscendingDescription:`(${fE.sortDatesAscending})`,sortedDescendingDescription:`(${fE.sortDatesDescending})`},[mD.LinkedPullRequests]:{icon:mM.UWO,text:"Linked pull requests"},[mD.Reviewers]:{icon:mM.t0Z,text:"Reviewers"},[mD.Text]:{icon:mM.R1h,text:"Text"},[mD.Tracks]:{icon:mM.nsG,text:"Tracks"},[mD.TrackedBy]:{icon:mM.yMN,text:"Tracked by"}},Li=e=>Ll[e].icon,Ls=e=>Ll[e].text,Lo=e=>Ll[e].sortedAscendingDescription??`(${fE.sortStringsAscending})`,Ld=e=>Ll[e].sortedDescendingDescription??`(${fE.sortStringsDescending})`;var Lc=r(96721);function Lu({items:e,label:t="Search",onSelect:r,selectedItem:a={text:"",id:0}}){let n=e=>{if(!Array.isArray(e))return;let t=e.filter(function(e){if(e?.id)return a.id!==e.id}),n=t[0]?t[0]:{text:"",id:0};r(n)},[l,i]=(0,uq.useState)(""),s=e=>{String(e.target?.value)&&i(e.target.value)},o=e=>e.text.toLowerCase().includes(l.toLowerCase());return(0,uO.jsx)(Ia.S.Item,{sx:{":hover":{":not([aria-disabled])":{backgroundColor:"transparent"}}},children:(0,uO.jsxs)(Cc.Z,{children:[(0,uO.jsx)(Cc.Z.Label,{visuallyHidden:!0,id:"autocompleteSearch",children:t}),(0,uO.jsxs)(Lc.Z,{children:[(0,uO.jsx)(Lc.Z.Input,{placeholder:t,value:a.text,onChange:s,leadingVisual:mM.W1M,sx:{width:"100%"}}),(0,uO.jsx)(Lc.Z.Overlay,{children:(0,uO.jsx)(Lc.Z.Menu,{items:e,selectedItemIds:[a.id],"aria-labelledby":"autocompleteSearch",onSelectedChange:n,filterFn:o})})]})]})})}try{(aW=Lu).displayName||(aW.displayName="AutocompleteSearch")}catch{}function Lm(e){return"table"===e?{title:"New table",description:"Start with a powerful spreadsheet style table to filter, sort and group your issues and pull requests. Easily switch to a board or roadmap layout at any time."}:"board"===e?{title:"New board",description:"Start with a board to spread your issues and pull requests across customizable columns. Easily switch to a table or roadmap layout at any time."}:"roadmap"===e?{title:"Roadmap",description:"Start with a roadmap for a high-level visualization of your project over time. Easily switch to a table or board layout at any time."}:"backlog"===e?{title:"Team backlog",description:"Define and plan your team's backlog using a task board and custom fields for item priority and size."}:"feature"===e?{title:"Feature",description:"Plan and track an individual feature across one week iterations, while staying up-to-date on work in progress with linked pull requests. "}:{title:"",description:""}}let Lp=({children:e})=>(0,uO.jsx)(LC,{children:e}),Lf=({footerButtons:e})=>(0,uO.jsx)(Lk,{children:(0,uO.jsx)(RV.V.Buttons,{buttons:e??[]})});function Lh(){let[e,t]=(0,uq.useState)(!1);return(0,uq.useEffect)(()=>{t(!0)},[]),e}let Lg=()=>{let e,t;let{isOrganization:r}=yk(),{title:a}=f3(),[n,l]=(0,uq.useState)(a),i=Le(),{postStats:s}=bM(),{data:o=null}=MQ({enabled:r}),{isTemplatesDialogOpen:d,setIsTemplatesDialogOpen:c,showTemplateDialog:u,setIsModalDismissed:m}=Ln(),[p,f]=(0,uq.useState)(i[0].items[0]),[h,g]=(0,uq.useState)(!1),x=Lt(),y=async()=>{let e=i.find(e=>e.key===p.groupKey),t=e?.items.find(e=>e.key===p.key);void 0!==t&&(g(!0),await t.action({selectedTemplate:p.key,rollback:()=>c(!1),title:n}),await x(),g(!1),c(!1),m(!0),p.groupKey===M1.org_templates?s({name:gn,context:JSON.stringify({template:"org_templates",template_project_title:p.template?.projectTitle,template_project_number:p.template?.projectNumber}),ui:"template_dialog"}):s({name:gn,context:JSON.stringify({template:p.key}),ui:"template_dialog"}))},b=()=>{s({name:"templates_cancel"}),c(!1),m(!0)},v=e=>{f(e),e.groupKey===M1.org_templates&&s({name:"custom_template_select",context:JSON.stringify({template:"org_templates",template_project_title:e.template?.projectTitle,template_project_number:e.template?.projectNumber}),ui:"template_dialog"})},w=MJ("projectTemplateDialog",p.key),j=ER(),[C,k]=(0,uq.useState)({text:"",id:0}),[S,I]=(0,uq.useState)(!1),N=(0,uq.useMemo)(()=>o?.templates?o.templates.map(e=>({text:e.projectTitle,id:e.projectNumber})):[],[o?.templates]),_=e=>{if(e.id>0){I(!0);let t=i.find(e=>e.key===M1.org_templates),r=t?.items.find(t=>t.key===e.id.toString());r&&v(r)}else I(!1);return k(e),e},T=Lh();if(!u)return null;function R(e){return o?.templates.filter(function(t){if(t.projectNumber===e)return t})}function E({selectedItemId:e}){let t=R(e),{updateTitle:a}=M2(),n=b6({request:async e=>{await MY({template:e})},rollback:e=>{e&&e()},showErrorToast:!0}),l=(0,uq.useCallback)(async function(e){await Promise.all([n.perform(e.selectedTemplate,e.rollback),a(e.title)])},[n,a]);if(!r||!o)return null;let s=o.templates;t&&t.length>0&&(s=t);let d={key:M1.org_templates,groupTitle:"Organization Templates",items:s.map(e=>({key:e.projectNumber.toString(),groupKey:M1.org_templates,title:e.projectTitle,icon:mM.pXO,template:e,action:l}))};return i.push(d),(0,uO.jsx)(Ia.S,{children:(0,uO.jsxs)(LS,{title:d.groupTitle,sx:{maxHeight:"300px",overflowY:"auto",overflowX:"hidden"},children:[T?(0,uO.jsx)(Lu,{items:N,label:"Search Templates",onSelect:_,selectedItem:C}):null,d.items.map(e=>{let t=p.template&&e.template&&p.template.projectNumber===e.template.projectNumber;return(0,uO.jsxs)(LI,{className:t?"selected":"",onSelect:()=>v(e),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.pXO,{})}),(0,uO.jsx)(Cz.Z,{inline:!0,title:e.template?.projectTitle||"",sx:{maxWidth:"100%"},children:e.template?.projectTitle})]},e.template?.projectNumber)}),S?(0,uO.jsxs)(Ia.S.Item,{sx:{color:"accent.fg"},onSelect:()=>{_({text:"",id:0})},children:[(0,uO.jsx)(Ia.S.LeadingVisual,{sx:{color:"inherit"},children:(0,uO.jsx)(mM.b0D,{})}),"Clear Search"]}):null]},d.groupTitle)})}return p.groupKey===M1.org_templates?e=p.template?p.template.projectTitle:"?":(e=Lm(p.key).title,t=Lm(p.key).description),(0,uO.jsx)(uO.Fragment,{children:d&&(0,uO.jsx)(RV.V,{role:"alertdialog",onClose:b,title:"Select a template",renderBody:Lp,renderFooter:Lf,sx:{width:["100%","960px"]},footerButtons:[{content:(0,uO.jsx)("span",{...(0,mp.f)("template-dialog-button"),children:h?"Loading template...":"Create"}),onClick:y,buttonType:"primary",disabled:h}],children:(0,uO.jsxs)(Lv,{children:[(0,uO.jsxs)(Lw,{children:[(0,uO.jsx)(Ia.S,{children:i.map(e=>(0,uO.jsx)(LS,{title:e.groupTitle,children:e.items.map(e=>{let t=e.icon,r=p.key===e.key;return(0,uO.jsxs)(LI,{className:r?"selected":"",disabled:e.disabled,onSelect:()=>v(e),...(0,mp.f)(`template-dialog-action-item-${e.key}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(t,{})}),fa(e.title)]},e.key)})},e.groupTitle))}),(0,uO.jsx)(E,{selectedItemId:C.id})]}),(0,uO.jsxs)(Lj,{children:[(0,uO.jsx)(Cn.Z,{sx:{mb:2},children:e}),(0,uO.jsxs)(Cc.Z,{sx:{width:"100%"},children:[(0,uO.jsx)(Cc.Z.Label,{children:"Project name"}),(0,uO.jsx)(E_.Z,{...j,sx:{width:"100%"},children:(0,uO.jsx)(k4.Z,{sx:{width:"100%"},autoComplete:"off",placeholder:e,value:n,onChange:e=>l(e.target.value),id:"memexTitleInput"})})]}),p.groupKey!==M1.org_templates&&w&&(0,uO.jsx)("img",{...(0,mp.f)("template-dialog-image"),src:w,alt:t,width:"100%"}),p.groupKey===M1.org_templates&&p.template&&(0,uO.jsxs)(uO.Fragment,{children:[p.template.projectViews.length>0&&(0,uO.jsxs)(Lx,{children:[(0,uO.jsxs)(mO.Z,{as:"h4",sx:{width:"100%"},children:["Views",(0,uO.jsx)(k$.Z,{sx:{marginLeft:"5px",verticalAlign:"text-top"},children:p.template.projectViews.length})]}),(0,uO.jsx)(Ly,{children:p.template.projectViews.map(e=>{let t=_K(e.viewType);return(0,uO.jsxs)(Lb,{children:[" ",(0,uO.jsx)(t,{})," ",e.name]},e.name)})})]}),p.template.projectFields.length>0&&(0,uO.jsxs)(Lx,{children:[(0,uO.jsxs)(mO.Z,{as:"h4",sx:{width:"100%"},children:["Fields",(0,uO.jsx)(k$.Z,{sx:{marginLeft:"5px",verticalAlign:"text-top"},children:p.template.projectFields.length})]}),(0,uO.jsx)(Ly,{children:p.template.projectFields.map(e=>{let t=Li(e.dataType);return(0,uO.jsxs)(Lb,{children:[(0,uO.jsx)(t,{})," ",e.name]},e.name)})})]}),p.template.projectWorkflows.length>0&&(0,uO.jsxs)(Lx,{children:[(0,uO.jsxs)(mO.Z,{as:"h4",sx:{width:"100%"},children:["Workflows",(0,uO.jsx)(k$.Z,{sx:{marginLeft:"5px",verticalAlign:"text-top"},children:p.template.projectWorkflows.length})]}),(0,uO.jsx)(Ly,{children:p.template.projectWorkflows.map(e=>{let t=vA(e.triggerType);return(0,uO.jsxs)(Lb,{children:[(0,uO.jsx)(t,{})," ",e.name]},e.name)})})]})]}),t&&(0,uO.jsx)(mO.Z,{as:"p",sx:{mt:2},children:t})]})]})})})},Lx=(0,uJ.ZP)(mF.Z)`
  background: ${(0,uG.U2)("colors.canvas.inset")};
  padding: 8px 16px 16px;
  border-radius: 4px;
`,Ly=uJ.ZP.ul`
  display: flex;
  flex-wrap: wrap;
  padding-left: 0;
  list-style: none;
  margin-left: -${(0,uG.U2)("space.2")};
  clip-path: inset(0 0 0 1px);
`,Lb=uJ.ZP.li`
  padding: 0 ${(0,uG.U2)("space.2")};
  border-left: 1px ${(0,uG.U2)("colors.border.default")} solid;
`,Lv=(0,uJ.ZP)(mF.Z)`
  display: flex;
  flex-direction: row;
`,Lw=(0,uJ.ZP)(mF.Z)`
  min-width: 160px;
  white-space: nowrap;
  width: 30%;
  box-shadow: 1px 0 0 ${(0,uG.U2)("colors.border.default")};
`,Lj=(0,uJ.ZP)(mF.Z)`
  display: flex;
  flex-direction: column;
  gap: ${(0,uG.U2)("space.1")};
  width: 70%;
  min-height: 544px;
  padding-left: ${(0,uG.U2)("space.4")};
  padding-right: ${(0,uG.U2)("space.4")};
  padding-bottom: ${(0,uG.U2)("space.2")};
  padding-top: ${(0,uG.U2)("space.2")};
`,LC=(0,uJ.ZP)(mF.Z)`
  flex-direction: row;
  overflow: auto;
`,Lk=(0,uJ.ZP)(mF.Z)`
  display: flex;
  justify-content: flex-end;
  padding: ${(0,uG.U2)("space.3")};
  padding-right: ${(0,uG.U2)("space.4")};
  box-shadow: 0 -1px 0 ${(0,uG.U2)("colors.border.default")};

  button > * {
    pointer-events: none;
  }
`,LS=(0,uJ.ZP)(Ia.S.Group)`
  &:not(:last-child) {
    margin-bottom: ${(0,uG.U2)("space.3")};
  }
`,LI=(0,uJ.ZP)(Ia.S.Item)`
  position: relative;
  margin-bottom: ${(0,uG.U2)("space.2")};
  margin-left: 12px;

  &.selected {
    background-color: ${(0,uG.U2)("colors.neutral.muted")};
  }

  &.selected:after {
    content: '';
    position: absolute;
    top: calc(50% - 12px);
    left: -${(0,uG.U2)("space.2")};
    width: ${(0,uG.U2)("space.1")};
    height: 24px;
    background-color: ${(0,uG.U2)("colors.accent.emphasis")};
    border-radius: 6px;
  }
`;try{(aH=Lp).displayName||(aH.displayName="TemplateDialogBody")}catch{}try{(aG=Lf).displayName||(aG.displayName="TemplateDialogFooter")}catch{}try{(aq=Lg).displayName||(aq.displayName="TemplateDialog")}catch{}try{(aK=OrgTemplates).displayName||(aK.displayName="OrgTemplates")}catch{}try{(aQ=ViewIcon).displayName||(aQ.displayName="ViewIcon")}catch{}try{(aY=FieldIcon).displayName||(aY.displayName="FieldIcon")}catch{}try{(aX=WorkflowIcon).displayName||(aX.displayName="WorkflowIcon")}catch{}try{(aJ=Lx).displayName||(aJ.displayName="TemplateInfoBox")}catch{}try{(a0=Lv).displayName||(a0.displayName="ContentContainer")}catch{}try{(a1=Lw).displayName||(a1.displayName="SelectionPanelParent")}catch{}try{(a2=Lj).displayName||(a2.displayName="InfoPanelParent")}catch{}try{(a5=LC).displayName||(a5.displayName="StyledTemplateDialogBody")}catch{}try{(a3=Lk).displayName||(a3.displayName="StyledTemplateDialogFooter")}catch{}try{(a4=LS).displayName||(a4.displayName="StyledActionListGroup")}catch{}try{(a6=LI).displayName||(a6.displayName="StyledActionItem")}catch{}function LN(){let{isDotcomRuntime:e}=yk(),{isPublicProject:t}=TV(),{isOrganization:r,projectLimits:a}=yk(),{memex_insights:n,memex_insights_chart_view:l,memex_charts_basic_public:i,memex_charts_basic_private:s,memex_charts_basic_allow:o,memex_insights_limited_private:d,memex_insights_limited_public:c,memex_insights_basic_private:u,memex_insights_basic_public:m}=g9(),{hasWritePermissions:p}=yI(),f=n&&r&&e,h=f||o||t?i:s,g=h?Number.MAX_VALUE:a.limitedChartsLimit,x=t?c:d,y=t?m:u;return{isInsightsEnabled:f,isInsightsChartViewEnabled:p&&(f||l)&&e,hasUnlimitedSavedCharts:h,savedChartsLimit:g,isInsightsPreview:x||f&&!x&&!y,isInsightsEligible:y}}let L_=()=>{let{memex_find_in_project:e}=g9(),{findValue:t,setFindValue:r,hideInput:a,visible:n,inputRef:l}=IN();return e&&n?(0,uO.jsx)(mF.Z,{sx:{backgroundColor:"canvas.default",boxShadow:k3("shadows.overlay.shadow"),borderRadius:2,position:"absolute",zIndex:2,top:"100%",right:[3,4,5]},children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",p:2},onKeyDown:e=>{"Escape"===e.key&&a()},children:[(0,uO.jsx)(k4.Z,{leadingVisual:mM.W1M,ref:l,type:"text",value:t,onChange:e=>{r(e.target.value)},size:"small",...(0,mp.f)("find-in-project-input")}),(0,uO.jsx)(kF.h,{variant:"invisible","aria-label":"Clear search",sx:{px:3},onClick:a,icon:mM.b0D})]})}):null};try{(a7=L_).displayName||(a7.displayName="FindInProjectInput")}catch{}let LT=(0,uq.memo)(function(){let{getChartLinkTo:e}=Tj(),{postStats:t}=bM(),r=(0,uq.useCallback)(()=>{t({name:"insights_view_open"})},[t]),a=(0,uq.useRef)(null),[n,l]=kL({contentRef:a,"aria-label":fA.insightsButton,direction:"sw",anchorSide:"outside-bottom"});return(0,uO.jsxs)(jI.z,{ref:a,to:e(0).url,onClick:r,sx:{px:2},...(0,mp.f)("project-insights-button"),"aria-label":fA.insightsButton,as:yK,...n,children:[(0,uO.jsx)(mL.Z,{icon:mM.RIw}),l]})}),LR=(0,uq.memo)(function(){let{openPaneInfo:e}=bJ(),{postStats:t}=bM(),{memex_pinned_side_panel:r}=g9(),a=(0,uq.useRef)(null),[n,l]=kL({contentRef:a,"aria-label":fA.projectDescriptionButton,direction:"sw",anchorSide:"outside-bottom"});return(0,uO.jsxs)(jI.z,{ref:a,onClick:()=>{t({name:"description_show",ui:h6}),e()},sx:{px:2},"aria-label":fA.projectDescriptionButton,...(0,mp.f)("project-memex-info-button"),...n,children:[(0,uO.jsx)(mL.Z,{icon:r?mM.szr:mM.cN4}),l]},"project-description-button")}),LE=(0,uq.memo)(function(){let{projectNumber:e}=b9(),{feedbackLink:t,copyProjectPartialUrl:r}=yk(),{memex_automation_enabled:a,memex_templates_workflows_and_drafts:n}=g9(),[l,i]=(0,uq.useState)(!1),{postStats:s}=bM(),{hasWritePermissions:o,isLoggedIn:d,canCopyAsTemplate:c}=yI(),u=(0,uq.useCallback)(()=>{i(e=>!e)},[]),m=(0,uq.useCallback)(()=>{u(),s({name:"feedback_open",ui:h7})},[s,u]),p=(0,uq.useCallback)(()=>{u(),s({name:"docs_open",ui:h7})},[s,u]),f=(0,uq.useCallback)(()=>{u(),s({name:"changelog_open",ui:h7})},[s,u]),h=(0,uq.useCallback)(()=>{u(),s({name:"workflows_open"})},[s,u]),g=(0,uq.useCallback)(()=>{s({name:gl,ui:h7})},[s]),x=(0,uq.useCallback)(()=>{s({name:gi,ui:h7})},[s]),y=(0,uq.useMemo)(()=>{let l=[];return o&&l.push(a&&(0,uO.jsx)(LM,{to:mb.generatePath(),icon:mM.DWj,text:"Workflows",onClick:h,testId:"automation-settings-button"},"workflows"),(0,uO.jsx)(LM,{to:mI.generatePath(),icon:mM.rKT,text:"Archived items",onClick:u,testId:"archive-navigation-button"},"archive"),(0,uO.jsx)(LM,{to:mw.generatePath(),icon:mM.UG6,text:"Settings",onClick:u,testId:"project-settings-button"},"settings")),d&&(l.push((0,uO.jsx)(jI.z,{role:"menuitem",variant:"invisible",id:`topmenu-copy-project-dialog-${e}`,"data-show-dialog-id":`copy-project-dialog-${e}`,sx:{color:"fg.default",ml:2,px:2,width:"92%",fontWeight:"normal",textAlign:"left",'&& [data-component="buttonContent"]':{flex:0},'&& [data-component="leadingVisual"]':{color:"inherit"}},block:!0,leadingIcon:mM.TIy,onClick:g,children:(0,uO.jsx)(mO.Z,{children:"Make a copy"})},"topMenuCopyProjectButton"),(0,uO.jsx)("include-fragment",{src:encodeURI(r)},"topMenuCopyProject")),c&&n&&l.push((0,uO.jsx)(jI.z,{role:"menuitem",variant:"invisible",id:`topmenu-copy-as-template-dialog-${e}`,"data-show-dialog-id":`copy-as-template-dialog-${e}`,sx:{color:"fg.default",ml:2,px:2,width:"92%",fontWeight:"normal",textAlign:"left",'&& [data-component="buttonContent"]':{flex:0}},block:!0,leadingIcon:mM.NAN,onClick:x,...(0,mp.f)("copy-as-template-button"),children:(0,uO.jsx)(mO.Z,{children:"Copy as template"})},"topMenuCopyAsTemplateButton"),(0,uO.jsx)("include-fragment",{src:encodeURI(`${r}?copy_as_template=true`)},"topMenuCopyAsTemplate"))),l.length&&l.push((0,uO.jsx)(In.P.Divider,{},"divider-write-permissions")),l.push((0,uO.jsxs)(Ia.S.Group,{title:"GitHub projects",variant:"subtle",children:[(0,uO.jsx)(LM,{href:"https://github.blog/changelog/label/issues/",icon:mM.WCv,text:"What\u2019s new",onClick:f,testId:"whats-new-link"},"new"),(0,uO.jsx)(LM,{href:t,icon:mM.qtd,text:"Give feedback",onClick:m,testId:"feedback-link"},"feedback"),(0,uO.jsx)(LM,{href:"https://docs.github.com/en/issues/trying-out-the-new-projects-experience",icon:mM.vJ3,text:"GitHub Docs",onClick:p,testId:"docs-link"},"docs")]},"title-github-projects")),l},[o,d,f,t,m,p,a,h,u,e,g,x,r,c,n]),b=(0,uq.useRef)(null),[v,w]=kL({contentRef:b,"aria-label":fA.viewMoreOptions,direction:"sw",anchorSide:"outside-bottom",open:!l&&void 0});return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(jI.z,{ref:b,...(0,mp.f)("project-menu-button"),sx:{px:2},...v,onClick:()=>i(e=>!e),"aria-label":fA.viewMoreOptions,children:[(0,uO.jsx)(mL.Z,{icon:mM.Ui8}),w]}),(0,uO.jsx)(In.P,{anchorRef:b,open:l,onOpenChange:i,children:(0,uO.jsx)(In.P.Overlay,{children:(0,uO.jsx)(Ia.S,{children:y})})},"project-menu")]})}),LD={flexShrink:0},LP=(0,uq.memo)(function({isProjectPath:e}){let{description:t,shortDescription:r}=f3(),{isInsightsChartViewEnabled:a}=LN(),{hasWritePermissions:n}=yI();return(0,uO.jsxs)(DL.Z,{sx:LD,children:[a?(0,uO.jsx)(LT,{}):null,e&&(t||r||n)?(0,uO.jsx)(LR,{}):null,(0,uO.jsx)(LE,{})]})}),LA=(0,uq.memo)(function(){let{title:e}=f3(),{projectOwner:t}=yk(),{postStats:r}=bM(),a=f8("memex-copy-project-api-data"),n=(0,uq.useCallback)(()=>{r({name:gl,ui:"use_this_template_ui"})},[r]);return(0,uO.jsxs)(mF.Z,{as:"form",method:"post",action:a.url,sx:{justifyItems:"center",display:"flex",alignItems:"center",gap:2},children:[(0,uO.jsx)("input",{type:"hidden",name:"authenticity_token",value:a.token}),(0,uO.jsx)("input",{type:"hidden",name:"owner",value:t?.login}),(0,uO.jsx)("input",{type:"hidden",name:"memex_project_copy[title]",value:`[COPY] ${e}`}),(0,uO.jsx)("input",{type:"hidden",name:"memex_project_copy[include_draft_issues]",value:"on"}),(0,uO.jsx)(jI.z,{type:"submit",size:"medium",variant:"primary",...(0,mp.f)("projects-memex-use-this-tempalte"),"aria-label":"Use this template",onClick:n,children:"Use this template"})]})}),LM=({text:e,icon:t,testId:r,onClick:a,to:n,href:l})=>{let i=(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mL.Z,{icon:t,sx:{color:"fg.default",mr:2}}),(0,uO.jsx)(mO.Z,{sx:{color:"fg.default"},children:e})]});return n?(0,uO.jsx)(Ia.S.LinkItem,{role:"menuitem",as:yK,to:n,onClick:a,...(0,mp.f)(r),children:i}):(0,uO.jsx)(Ia.S.LinkItem,{role:"menuitem",href:l,target:"_blank",onClick:a,...(0,mp.f)(r),children:i})},LL={display:"flex",flexShrink:0,mt:0,px:[3,4,5],py:2,bg:"canvas.inset",alignItems:"flex-start",position:"relative",justifyContent:"flex-end",borderBottom:"none",flexWrap:"wrap-reverse"},LF={...LL,borderBottom:"1px solid",borderColor:"border.subtle"},LZ={justifyItems:"center",display:"flex",alignItems:"center",gap:2},LO=(0,uq.memo)(function({children:e,isProjectPath:t=!1}){let{isTemplate:r}=TV(),{isOrganization:a}=yk();return(0,uO.jsxs)(mF.Z,{role:"navigation","aria-label":"Project navigation",sx:t?LL:LF,children:[e,(0,uO.jsx)("div",{style:{flex:1}}),(0,uO.jsxs)(mF.Z,{sx:LZ,children:[(0,uO.jsx)(T0,{}),(0,uO.jsx)(LP,{isProjectPath:t}),a&&r?(0,uO.jsx)(LA,{}):null]}),(0,uO.jsx)(L_,{})]})});try{(a8=LT).displayName||(a8.displayName="InsightsNavigationButton")}catch{}try{(a9=LR).displayName||(a9.displayName="ProjectDescriptionButton")}catch{}try{(ne=LE).displayName||(ne.displayName="SettingsOverflowMenu")}catch{}try{(nt=LP).displayName||(nt.displayName="ProjectNavigationButtons")}catch{}try{(nr=LA).displayName||(nr.displayName="UseTemplateButton")}catch{}try{(na=LM).displayName||(na.displayName="CustomLink")}catch{}try{(nn=Content).displayName||(nn.displayName="Content")}catch{}try{(nl=LO).displayName||(nl.displayName="TopBar")}catch{}let LB=e=>(0,uO.jsxs)(mF.Z,{sx:{...e.sx||{},fontSize:1},children:[(0,uO.jsx)(EL.Z,{variant:"success",children:"Beta"})," ",(0,uO.jsx)(w3.Z,{href:e.feedbackUrl,muted:!0,target:"_blank",onClick:e=>{e.stopPropagation()},children:"Give feedback"})]});try{(ni=LB).displayName||(ni.displayName="BetaIndicator")}catch{}let LV="settings-project-name",L$=()=>{let{hasWritePermissions:e}=yI(),{shortDescriptionHtml:t,titleHtml:r}=f3(),{isPublicProject:a,isClosed:n,isTemplate:l}=TV(),i=yq(),s=a?"Public":"Private",o=()=>{i(mw.generatePath()),setTimeout(()=>document.getElementById(LV)?.focus())},d=()=>a&&l?mM.pXO:a?mM.n9J:mM.mBM;return(0,uO.jsxs)(mF.Z,{children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,gap:1,pr:2,'&:not(:focus-within):not(:hover) > [aria-label="Edit project name"]':{clipPath:"circle(0)"},cursor:e?"pointer":"default"},onClick:e?o:void 0,children:[n?(0,uO.jsx)(Lz,{}):null,(0,uO.jsx)(mL.Z,{icon:d(),sx:{color:"fg.muted"}}),(0,uO.jsx)(jc,{as:"h1",sx:{fontSize:3,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",my:0},children:r}),l?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(EL.Z,{variant:"secondary",children:[" ",s," template "]}),(0,uO.jsx)(LB,{feedbackUrl:"https://github.com/orgs/community/discussions/54576"})]}):null,e&&(0,uO.jsx)(kF.h,{icon:mM.vdY,variant:"invisible",size:"small",onClick:o,"aria-label":"Edit project name",sx:{color:"fg.default"}})]}),l&&(0,uO.jsx)(mF.Z,{children:(0,uO.jsx)(jc,{as:"div",className:"color-fg-muted",children:t})})]})},Lz=()=>(0,uO.jsx)(EL.Z,{variant:"done",...(0,mp.f)("closed-project-label"),sx:{color:"fg.onEmphasis",backgroundColor:"done.emphasis"},children:"Closed"});try{(ns=L$).displayName||(ns.displayName="MemexTitle")}catch{}try{(no=Lz).displayName||(no.displayName="ClosedLabel")}catch{}let LU=({title:e})=>{let{returnToViewLinkTo:t}=bP();return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"center"},children:[(0,uO.jsx)(yK,{to:t,"aria-label":"Return to project view",children:(0,uO.jsx)(mL.Z,{icon:mM.Y4O,sx:{color:"fg.muted",verticalAlign:"middle",mr:2},size:24})}),(0,uO.jsx)(Cn.Z,{as:"h1",sx:{fontSize:3,color:"fg.default"},children:e})]})};try{(nd=LU).displayName||(nd.displayName="RouteTitle")}catch{}let LW=(0,uq.memo)(function(){let{postStats:e}=bM(),t=(0,uQ.TH)(),r=(0,uq.useRef)(null),a=t.pathname;return(0,uq.useEffect)(()=>{let t=r.current;if(a!==t){let r=m_(a),n={currentPath:a,previousPath:t,currentBestMatchRoute:r?r.path:"<unknown_route>"};e({name:"path_change",context:JSON.stringify(n)})}r.current=a},[a,e]),null});try{(nc=LW).displayName||(nc.displayName="TrackPathChanges")}catch{}let LH=(0,uq.createContext)(null),LG=()=>{let e=(0,uq.useContext)(LH);if(!e)throw Error("useAggregationSettings must be used within a AggregationSettingsContext");return e},Lq=(0,uq.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=bP(),{allColumns:a}=CB(),n=(0,uq.useCallback)((e,t,a)=>{r({type:kc.AddFieldAggregation,viewNumber:e,fieldOperation:t,column:a})},[r]),l=(0,uq.useCallback)((e,t,a)=>{r({type:kc.RemoveFieldAggregation,viewNumber:e,fieldOperation:t,column:a})},[r]),i=(0,uq.useCallback)(e=>{r({type:kc.ToggleItemsCount,viewNumber:e})},[r]),s=(0,uq.useCallback)(e=>{let r=[],n=a.filter(e=>e.dataType===mD.Number).map(e=>e.id),l={};for(let a of t?.localViewStateDeserialized.aggregationSettings.sum??[]){let t={name:a.name,sum:0};for(let r of e){let e=r.columns,i=e[a.id],s=n.indexOf(a.id);l[a.name]=s,t.sum+=i?.value??0}r.push(t)}return r.sort((e,t)=>(l[e.name]??0)-(l[t.name]??0))},[t?.localViewStateDeserialized.aggregationSettings.sum,a]);return(0,uO.jsx)(LH.Provider,{value:(0,uq.useMemo)(()=>({hideItemsCount:!!t?.localViewStateDeserialized.aggregationSettings.hideItemsCount,sum:t?.localViewStateDeserialized.aggregationSettings.sum??[],toggleItemsCount:i,addFieldAggregation:n,removeFieldAggregation:l,isAggregationSettingsDirty:t?.isAggregationSettingsDirty??!1,getAggregatesForItems:s}),[t?.localViewStateDeserialized.aggregationSettings.hideItemsCount,t?.localViewStateDeserialized.aggregationSettings.sum,t?.isAggregationSettingsDirty,i,n,l,s]),children:e})});try{(nu=Lq).displayName||(nu.displayName="AggregationSettingsProvider")}catch{}var LK=r(66501),LQ=r(44544);let LY=(0,LQ.Z)("localStorage"),LX="projects.collapsedGroups",LJ=()=>{let e=LY.getItem(LX);if(!e)return{};try{let t=JSON.parse(e),r="object"==typeof t&&null!==t;if(r)return t;return LY.removeItem(LX),{}}catch(e){return LY.removeItem(LX),{}}},L0=e=>{let t=(0,LK.Z)(e,e=>{let t=(0,LK.Z)(e,e=>0!==e.length);return 0!==Object.keys(t).length});0===Object.keys(t).length?LY.removeItem(LX):LY.setItem(LX,JSON.stringify(t))},L1=()=>{let{projectNumber:e}=b9(),[t,r]=(0,uq.useState)(()=>{let t=LJ();return t[e]??{}});return(0,uq.useEffect)(()=>{let r=LJ();L0({...r,[e]:t})},[e,t]),[t,r]},L2=[],L5=(0,uq.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=bP(),[a,n]=L1(),l=t?.number??-1,i=(0,uq.useCallback)((e,t)=>{r({type:kc.SetHorizontalGroupedBy,viewNumber:e,column:t}),n(e=>({...e,[l]:[]}))},[r,n,l]),s=(0,uq.useCallback)(e=>{r({type:kc.ClearHorizontalGroupedBy,viewNumber:e})},[r]),o=(0,uq.useCallback)(e=>{n(t=>{let r=t[l]??[],a=r.includes(e);return a?{...t,[l]:r.filter(t=>t!==e)}:{...t,[l]:[...r,e]}})},[l,n]);return(0,uO.jsx)(NT.Provider,{value:(0,uq.useMemo)(()=>({groupedByColumnId:t?.localViewStateDeserialized.horizontalGroupByColumns[0]?.id,groupedByColumn:t?.localViewStateDeserialized.horizontalGroupByColumns[0],setGroupedBy:i,clearGroupedBy:s,isGroupedByDirty:t?.isHorizontalGroupedByDirty??!1,collapsedGroups:a[l]??L2,toggleGroupCollapsed:o}),[s,t?.isHorizontalGroupedByDirty,t?.localViewStateDeserialized.horizontalGroupByColumns,i,a,o,l]),children:e})});try{(nm=L5).displayName||(nm.displayName="HorizontalGroupedByProvider")}catch{}function L3(e){return e===_z.Roadmap||e===_z.Table}function L4(e){return e===_Z.Roadmap||e===_Z.Table}function L6(e,t){let r=_G(e);if(!L3(r))throw Error("Column widths can only be applied to table or roadmap views");return t[r]?.columnWidths??{}}function L7(e,t,r){let a=_G(t);if(!L3(a))throw Error("Column widths can only be applied to table or roadmap views");return{...e,layoutSettings:{...e.layoutSettings,[a]:{...e.layoutSettings[a],columnWidths:{...r}}}}}function L8(e){return e!==_V&&(g5(e)||g1(e))}function L9(e){return"none"!==e&&"number"==typeof e}function Fe(e){return!!(e&&e.dateFields&&e.dateFields.length>0)}let Ft=_$.Month;function Fr(e){return e?.roadmap?.zoomLevel??Ft}function Fa(e){return[e[0]||_V,e[1]||_V]}function Fn(e){return e.map(t=>{let{startDate:r,endDate:a}=gI({startDate:t.startDate,duration:t.duration});return`${t.title}: ${f_(r,a,e.length>1?"MMM d":"EEE, MMM d")}`}).join(", ")}var Fl=r(111);function Fi(e){let t=(0,uq.useRef)(null),r=(0,uq.useRef)(null),a=(0,uq.useRef)(null),n=(0,uq.useRef)({x:e.bufferX??[0,0],y:e.bufferY??[0,0]}),l="x"===e.axis,i="y"===e.axis,s=(0,uq.useRef)(null),o=e.maxBufferX??300,d=e.maxBufferY??200,c=e.deadZoneRatioX??.1,u=e.deadZoneRatioY??.1,m=(0,uq.useMemo)(()=>(0,Fl.Z)(()=>{let t=e.scrollRef?.current;if(!t)return;let r=t.getBoundingClientRect(),a=Math.min(r.width/2-r.width*c/2,o),l=Math.min(r.height/2-r.height*u/2,d);n.current={x:e.bufferX??[a,a],y:e.bufferY??[l,l]}},50),[e.scrollRef,e.bufferX,e.bufferY,c,o,u,d]);(0,uq.useEffect)(()=>((void 0===e.bufferX||void 0===e.bufferY)&&(m(),addEventListener("resize",m)),()=>{removeEventListener("resize",m)}),[e.bufferX,e.bufferY,m]),(0,uq.useEffect)(()=>{(void 0!==e.bufferX||void 0!==e.bufferY)&&(n.current={x:e.bufferX??[0,0],y:e.bufferY??[0,0]})},[e.bufferX,e.bufferY]);let p=(0,uq.useCallback)(()=>{t.current&&cancelAnimationFrame(t.current),t.current=null,r.current=null,a.current=null},[]),f=(0,uq.useCallback)(()=>{let n=e.scrollRef?.current;n&&(r.current&&!l&&(n.scrollTop+=r.current*e.strength),a.current&&!i&&(n.scrollLeft+=a.current*e.strength),t.current=requestAnimationFrame(f))},[l,i,e.scrollRef,e.strength]),h=(0,uq.useCallback)(e=>{t.current&&0===e.button&&(p(),s.current=null)},[p]),g=(0,uq.useCallback)(e=>{0===e.button&&(s.current={x:e.clientX,y:e.clientY})},[s]),x=(0,uq.useCallback)(l=>{let i=e.scrollRef?.current,o=e?.mouseMoveThresholdX??15,d=e?.mouseMoveThresholdY??15;if(!e.active||!i||!s.current){p();return}let c=i.getBoundingClientRect();a.current=Fs({mousePos:l.clientX,containerStart:c.left,containerEnd:c.right,ease:e.ease,buffer:n.current.x,mouseOrigin:s.current.x,mouseMoveThreshold:o}),r.current=Fs({mousePos:l.clientY,containerStart:c.top,containerEnd:c.bottom,ease:e.ease,buffer:n.current.y,mouseOrigin:s.current.y,mouseMoveThreshold:d}),null==r.current&&null==a.current&&p(),t.current||f()},[e.active,e.ease,e.scrollRef,p,f,e.mouseMoveThresholdX,e.mouseMoveThresholdY]);(0,uq.useEffect)(()=>(addEventListener("mousemove",x),addEventListener("mouseup",h),addEventListener("mousedown",g),()=>{removeEventListener("mousemove",x),removeEventListener("mouseup",h),removeEventListener("mousedown",g)}),[x,h,g])}function Fs({mousePos:e,containerStart:t,containerEnd:r,ease:a,buffer:n,mouseOrigin:l,mouseMoveThreshold:i}){let s=Array.isArray(n)?n[0]:n,o=Array.isArray(n)?n[1]:n,d=t+s,c=r-o;return Math.abs(e-l)<i?null:e<d&&e<l?Fo(-((d-Math.max(e-i,t))/s),a):e>c&&e>l?Fo((Math.min(e-i,r)-c)/o,a):null}function Fo(e,t){return t?e<0?-t(-e):t(e):e}function Fd(e,t){let r=(0,uq.useRef)(!1);(0,uq.useEffect)(()=>{let a=Boolean(t);return a?(document.body.classList.add(e),r.current=!0):(r.current&&document.body.classList.remove(e),r.current=!1),()=>{r.current&&document.body.classList.remove(e),r.current=!1}},[e,t])}let Fc=(0,uq.createContext)({}),Fu=(0,uq.memo)(function(e){let[t,r]=(0,uq.useState)({isDragging:!1,autoScroll:!0});Fd("is-dragging",t.isDragging),Fi({active:t.isDragging&&(t.autoScroll??!0),axis:e.scrollAxis,scrollRef:e.scrollRef,strength:20,bufferX:e.bufferX??[20,20],bufferY:e.bufferY??[20,20],ease:Fm});let a=(0,uq.useMemo)(()=>({dragState:t,setDragState:r,scrollRef:e.scrollRef}),[t,e.scrollRef]);return(0,uO.jsx)(Fc.Provider,{value:a,children:e.children})});function Fm(e){return Math.pow(e,5)}function Fp(){let{dragState:e,setDragState:t}=(0,uq.useContext)(Fc);return[e,t]}let Ff={};function Fh(e=Ff){let[t,r]=Fp(),[a,n]=(0,uq.useState)(!1),l=(0,uq.useCallback)(()=>{n(!1)},[]),i=(0,uq.useCallback)(t=>{l(),r(t=>({...t,isDragging:!0,autoScroll:e.autoScroll})),e.onDragStart&&e.onDragStart(t)},[e,r,l]),s=(0,uq.useCallback)(t=>{0!==t.button&&(r(t=>({...t,isDragging:!1,autoScroll:e.autoScroll})),e.onDragEnd&&e.onDragEnd(t))},[e,r]),o=(0,uq.useCallback)(t=>{e.onDrag&&e.onDrag(t)},[e]),d=(0,uq.useCallback)(t=>{0===t.button&&(r(t=>({...t,isDragging:!1,autoScroll:e.autoScroll})),e.onDragEnd&&e.onDragEnd(t))},[e,r]);(0,uq.useEffect)(()=>(a?(addEventListener("mousemove",i),addEventListener("mouseup",l)):(removeEventListener("mousemove",i),removeEventListener("mouseup",l)),()=>{removeEventListener("mousemove",i),removeEventListener("mouseup",l)}),[i,a,l]),(0,uq.useEffect)(()=>(t.isDragging?(addEventListener("mousedown",s),addEventListener("mousemove",o),addEventListener("mouseup",d)):(removeEventListener("mousedown",s),removeEventListener("mousemove",o),removeEventListener("mouseup",d)),()=>{removeEventListener("mousedown",s),removeEventListener("mousemove",o),removeEventListener("mouseup",d)}),[t.isDragging,s,o,d]);let{disabled:c,onMouseDown:u}=e,m=(0,uq.useCallback)(e=>{0!==e.nativeEvent.button||e.defaultPrevented||c||(n(!0),u&&u(e))},[u,c]);return{props:{onMouseDown:m}}}function Fg(e={}){let[t]=Fp(),{onDragEnter:r,onDragMove:a,onDragLeave:n,onDrop:l}=e,i=(0,uq.useCallback)(e=>{t.isDragging&&r&&r(e)},[t.isDragging,r]),s=(0,uq.useCallback)(e=>{t.isDragging&&a&&a(e)},[t.isDragging,a]),o=(0,uq.useCallback)(e=>{t.isDragging&&n&&n(e)},[t.isDragging,n]),d=(0,uq.useCallback)(e=>{0===e.nativeEvent.button&&t.isDragging&&l&&l(e)},[t.isDragging,l]);return{props:{onMouseEnter:i,onMouseMove:s,onMouseLeave:o,onMouseUp:d}}}try{(np=Fc).displayName||(np.displayName="Context")}catch{}try{(nf=SomethingDraggable).displayName||(nf.displayName="SomethingDraggable")}catch{}try{(nh=SomethingDroppable).displayName||(nh.displayName="SomethingDroppable")}catch{}try{(ng=Fu).displayName||(ng.displayName="DragAndDropWithEventsProvider")}catch{}let Fx={ErrorToast:"error-toast",ConfirmDialog:"confirm-dialog",Alert:"alert"},Fy={Success:"success",Failure:"failure",Pending:"pending"},Fb=(e,t)=>(0,uO.jsxs)(uO.Fragment,{children:["Please create the ",(0,uO.jsx)("code",{children:e.title})," milestone in the"," ",(0,uO.jsx)("a",{href:`${t.url}/milestones`,children:t.nameWithOwner})," repository before adding to this milestone group."]}),Fv=async(e,t)=>{if(!t)return{status:Fy.Success};let r={itemId:e.id,columnId:mP.Milestone};if(e.contentType===mA.DraftIssue)return{status:Fy.Failure,action:Fx.Alert,alertOptions:fO.Milestone.Alerts.NeedsConversion,stats:{...r,status:h$.FAILURE}};if(e.columns.Milestone&&e.columns.Milestone.id===t.id)return{status:Fy.Success};let a=await Ne({memexProjectItemId:e.id}),n=a.suggestions.find(e=>e.title===t.title);return n?{status:Fy.Success,stats:{...r,status:h$.SUCCESS},updateColumnActionOverride:{dataType:mD.Milestone,value:n}}:{status:Fy.Failure,action:Fx.Alert,alertOptions:{...fO.Milestone.Alerts.NeedsTransfer,content:Fb(t,gc(e.columns.Repository))},stats:{...r,status:h$.FAILURE}}},Fw=e=>(0,uO.jsxs)("div",{children:["You can transfer this issue to a different repository from the\xa0",(0,uO.jsx)(w3.Z,{target:"_blank",href:e,children:"issue page"}),"."]}),Fj=(e,t)=>{if(!t)return{status:Fy.Success};let r={itemId:e.id,columnId:mP.Repository,status:h$.FAILURE};return e.contentType===mA.DraftIssue?{status:Fy.Failure,action:Fx.Alert,alertOptions:fO.Repository.Alerts.NeedsConversion,stats:r}:e.contentType===mA.PullRequest?{status:Fy.Failure,action:Fx.Alert,alertOptions:fO.Repository.Alerts.CannotTransferPulls,stats:r}:e.contentType===mA.Issue&&e.columns.Repository?.nameWithOwner!==t.nameWithOwner&&e.content&&"url"in e.content?{status:Fy.Failure,action:Fx.Alert,alertOptions:{...fO.Repository.Alerts.IssueNeedsTransfer,content:Fw(e.content.url)},stats:r}:{status:Fy.Success}},FC=(e,t)=>t.length>0&&(e.contentType===mA.DraftIssue||e.contentType===mA.PullRequest)?{status:Fy.Failure,action:Fx.ErrorToast,toastOptions:fq.Toasts.DraftAndPullsNotSupported,stats:{status:h$.FAILURE,itemId:e.id,columnId:mP.TrackedBy}}:(e.columns[mP.TrackedBy]?.length??0)>1&&0===t.length?{status:Fy.Pending,action:Fx.ConfirmDialog,confirmOptions:fq.moveMultipleTrackedByNoTrackedWarning}:{status:Fy.Success};async function Fk(e,t){switch(t.dataType){case mD.Repository:return Fj(e,t.value);case mD.Milestone:return await Fv(e,t.value);case mD.TrackedBy:return FC(e,t.value)}return{status:Fy.Success}}var FS=r(81941);let FI={fontSize:1,p:3,pt:0,color:"fg.muted",flexGrow:1},FN={display:"flex",m:3,mt:0,button:{fontSize:1,flex:"1 1 0",py:"5px",px:3}},F_={backgroundColor:"unset",p:2,display:"flex",flexDirection:"row",color:"fg.default"},FT={fontSize:3,fontWeight:"bold",py:"6px",px:2,flexGrow:1},FR=({children:e})=>(0,uO.jsx)(mF.Z,{sx:FI,children:e}),FE=({footerButtons:e})=>(0,uO.jsx)(mF.Z,{sx:FN,children:(0,uO.jsx)(RV.V.Buttons,{buttons:e??[]})}),FD=({title:e,onClose:t,dialogLabelId:r})=>{let a=(0,uq.useCallback)(()=>{t("close-button")},[t]);return(0,uO.jsxs)(FS.Z,{sx:F_,children:[(0,uO.jsx)(FS.Z.Item,{sx:FT,id:r,children:e}),(0,uO.jsx)(RV.V.CloseButton,{onClose:a})]})},FP=({children:e,confirmButtonContent:t="OK",onClose:r,title:a})=>{let n=(0,uq.useCallback)(()=>{r("confirm")},[r]),l={content:t,onClick:n};return(0,uO.jsx)(RV.V,{title:a,role:"alertdialog",width:"medium",onClose:r,footerButtons:[l],renderBody:FR,renderFooter:FE,renderHeader:FD,children:e})};try{(nx=FR).displayName||(nx.displayName="SingleConfirmBody")}catch{}try{(ny=FE).displayName||(ny.displayName="SingleConfirmFooter")}catch{}try{(nb=FD).displayName||(nb.displayName="SingleConfirmHeader")}catch{}try{(nv=FP).displayName||(nv.displayName="AlertDialog")}catch{}function FA(e,{content:t,...r}){return new Promise(a=>{let n=document.createElement("div"),l=(0,uV.s)(n),i=e=>{l.unmount(),a("confirm"===e)};l.render((0,uO.jsx)(uq.StrictMode,{children:(0,uO.jsx)(uz.ZP,{...e,children:(0,uO.jsx)(uU.Z,{display:"contents",children:(0,uO.jsx)(FP,{...r,onClose:i,children:t})})})}))})}let FM=()=>{let{theme:e,colorMode:t,dayScheme:r,nightScheme:a}=(0,uz.Fg)();return(0,uq.useCallback)(n=>{let l={theme:e,colorMode:t,dayScheme:r,nightScheme:a};return FA(l,n)},[e,t,r,a])},FL=(0,uq.createContext)(null),FF=e=>{let[t,r]=(0,uq.useState)(!1);(0,uq.useEffect)(()=>{let e=e=>{r(e.ctrlKey)};return window.addEventListener("mousedown",e),window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousedown",e),window.removeEventListener("mousemove",e)}}),(0,uq.useEffect)(()=>{let e=e=>{r(e.ctrlKey)};return window.addEventListener("keydown",e),window.addEventListener("keyup",e),()=>{window.removeEventListener("keydown",e),window.addEventListener("keyup",e)}});let a=(0,uq.useMemo)(()=>({ctrlKey:t}),[t]);return(0,uO.jsx)(FL.Provider,{value:a,children:e.children})},FZ=()=>{let e=(0,uq.useContext)(FL);if(!e)throw Error("useKeyPress can only be accessed from a KeyPressProvider component");return e};try{(nw=FL).displayName||(nw.displayName="KeyPress")}catch{}let FO="row-drag-handle",FB="add-column";function FV(e){return e.id===FO}function F$(e){return e.id===FB}let Fz={title:fE.cannotEditTitle,content:fE.cannotEditItemContent,confirmButtonContent:fE.confirmDialog},FU=e=>"overItemGroup"in e&&void 0!==e.overItemGroup,FW=e=>"overItem"in e&&void 0!==e.overItem,FH=e=>{let t=e;if(FU(t)){let{movingItemGroup:e,overItemGroup:r,...a}=t;e.value===r.value&&(t=FW(a)?a:void 0)}if(t&&FW(t)){let{overItem:e,side:r,...a}=t;t.movingItem.id===e.id&&(t=FU(a)?a:void 0)}return t},FG=()=>{let{updateAndReorderItem:e}=Py(),t=FM(),r=(0,f6.N)(),{addToast:a}=m7(),{postStats:n}=bM(),{sorts:l,clearSortedBy:i}=NO(),s=_M(),{navigationDispatch:o}=x3(),d=(0,uq.useCallback)(()=>s.flatRows.filter(e=>!e.isGrouped).map(e=>({id:e.original.id})),[s]),c=(0,uq.useCallback)(e=>{if(void 0!==e&&e>-1){let t=s.rows[e];t&&o(x0(t.id,FO))}},[s,o]),u=(0,uq.useCallback)((e,t,r)=>{n({name:"item_drag_and_drop",context:e,memexProjectItemId:t,memexProjectColumnId:r})},[n]),m=(0,uq.useCallback)(e=>pO(e)?t(Fz):pZ(e)?a({message:e.message,type:mB.error}):void 0,[t,a]),p=(0,uq.useCallback)(async(t,r)=>{try{let a=await e(t,r,{visibleItems:d()});c&&c(a)}catch(e){return m(e)}},[d,c,e,m]),{memex_group_by_multi_value_changes:f}=g9(),{ctrlKey:h}=FZ(),g=(0,uq.useCallback)(e=>{if(!FW(e)){let t=s.groupedRows?.find(t=>t.groupedValue===e.overItemGroup.value)?.subRows.at(-1);return t?{overItemId:t.original.id,side:Px.Bottom}:void 0}for(let t of l){let r=N4(t.column);if(0!==r(e.movingItem,e.overItem,void 0,!0)){if(!FU(e)){let e={text:fE.cannotReorderForSortAction,handleClick:()=>i()};a({message:fE.cannotReorderForSortMessage,type:mB.warning,action:e})}return}}return{overItemId:e.overItem.id,side:e.side}},[a,i,l,s.groupedRows]),x=(0,uq.useCallback)(async e=>{if(!FU(e))return;let n=N9(e.overItemGroup.sourceObject,e.movingItem.columns,{memex_group_by_multi_value_changes:f,ctrlKeyPressed:h},e.movingItemGroup.sourceObject),l=await Fk(e.movingItem,n);if(l.stats&&u(l.stats.status,l.stats.itemId,l.stats.columnId),l.updateColumnActionOverride&&(n=Object.assign({},n,l.updateColumnActionOverride)),l.status===Fy.Failure&&l.action===Fx.Alert)await t(l.alertOptions);else if(l.status===Fy.Failure&&l.action===Fx.ErrorToast)a(l.toastOptions);else if(l.status!==Fy.Pending||await r(l.confirmOptions))return n},[a,t,r,h,f,u]);return(0,uq.useCallback)(async e=>{let t=FH(e);if(!t)return;let r=await x(t);if(FU(t)&&!r)return;let a=g(t);(a||r)&&await p(t.movingItem.id,{reorderData:a,updateColumnAction:r})},[x,g,p])},Fq=e=>void 0!==e&&"itemId"in e&&void 0!==e.itemId,FK={SET_MOVING_ROW:"useRowDragDrop.setMovingRow",SET_HIGHLIGHTED_ROW:"useRowDragDrop.setHighlightedRow"};function FQ(e){return{type:FK.SET_MOVING_ROW,movingRow:e}}function FY(e){return{type:FK.SET_HIGHLIGHTED_ROW,rowId:e}}var FX=r(24319);let FJ=()=>(0,uO.jsx)(FX.u,{keys:"delete"}),F0=()=>kR()?null:(0,uO.jsx)(FX.u,{keys:"e"});function F1(e,t={memex_tracked_by_drag_drop:!1}){return!e||e.dataType===mD.TrackedBy&&!!t.memex_tracked_by_drag_drop||e.dataType!==mD.TrackedBy}let F2=(0,uq.forwardRef)(function({ranking:e},t){return(0,uO.jsx)(mF.Z,{ref:t,sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"fg.muted",paddingLeft:3},children:e})});try{(nj=F2).displayName||(nj.displayName="TableRankingCell")}catch{}let F5={paddingLeft:"12px"},F3={display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden",padding:"12px",position:"relative"},F4=(0,uq.forwardRef)((e,t)=>{let{sx:r,editing:a,disallowSelection:n,...l}=e,i=_A(),s=a?F5:{},o={...F3,height:`${i}px`,...r,userSelect:n?"none":"auto",...s};return(0,uO.jsx)(mF.Z,{ref:t,sx:o,...l})});F4.displayName="BaseCell";var F6=r(94184),F7=r.n(F6);let F8=Math.floor(44.4),F9=Math.floor(14.8);var Ze=r(16100);function Zt(e){if(e===mD.LinkedPullRequests||e===mD.Reviewers||e===mD.Tracks||e===mD.TrackedBy||e===mD.Repository||e===mD.Title)return!0}function Zr(e,t){if(t===mD.LinkedPullRequests||t===mD.Reviewers||t===mD.Tracks||t===mD.TrackedBy)return!1;switch(e){case mA.RedactedItem:return!1;case mA.DraftIssue:return!0;case mA.Issue:case mA.PullRequest:return t!==mD.Repository}}async function Za(e){let t=f9("memex-item-update-bulk-api-data"),{data:r}=await hx(t.url,{method:"PUT",body:e});return r}let Zn=()=>{let{setColumnValue:e}=IL(),{setItemData:t}=bR(),{findMemexItem:r}=IO(),{postStats:a}=bM(),n=(0,Ph.U)(async n=>{let l=[],i=[];for(let{itemId:t,update:a}of n){let n=r(t);if(!n)continue;i.push({itemId:t,update:bn(a,n)});let s=vr(a);e(n,s);let o=vl(a);o&&l.push({id:n.id,memexProjectColumnValues:[o]})}try{ID(),a({name:"bulk_column_value_update",ui:"shortcut",context:l.length,memexProjectColumnId:l[0]?.memexProjectColumnValues[0]?.memexProjectColumnId});let{memexProjectItems:e}=await Za({memexProjectItems:l});for(let r of e)t(r);return i}catch(t){for(let{itemId:t,update:a}of i){let n=r(t);n&&e(n,vr(a))}throw t}}),l=(0,uq.useCallback)(async(e,t)=>{let r=e.map(e=>({itemId:e.id,update:t})),a=await n(r);return async()=>{a!==Ph.x&&await n(a)}},[n]);return{bulkUpdateColumnValues:l}},Zl=()=>{let{bulkUpdateColumnValues:e}=Zn(),{addToast:t,removeToast:r}=m7(),a=(0,Ph.U)(r),n=kq(),l=(0,Ph.U)(()=>n?.lastAction?.revert("bulk_action_toast"));return async(r,i,s=1===r.length?fD.updateItem:fD.updateItems,o)=>{if(r.length>50){t({message:"Error updating items: Cannot update more than 50 items at once",type:"error"});return}try{void 0!==o&&Pj(r,i,o);let d=await e(r,i);if(r.length>1&&i.dataType!==mD.Repository){let e=t({message:`${r.length} items updated`,type:"success",action:{text:"Undo",handleClick:n?l:d},keepAlive:!0});n?.registerAction({revert:()=>{d(),a(e)},description:s})}else n?.registerAction({revert:d,description:s})}catch(e){if(e instanceof api_error_ApiError&&!e.message.includes("not valid JSON"))throw t({message:`Error updating items: ${e.message}`,type:"error"}),e;if(e instanceof api_error_ApiError&&e.status&&e.status>=500)t({message:"Something went wrong, please try again.",type:"error"});else if(e instanceof UpdateValidationError)t({message:e.message,type:"warning"});else throw e}}},Zi={DESELECT_ALL_ROWS:"useDeselectAllRows.deselectAllRows"},Zs=Object.values(Zi),Zo=e=>Zs.includes(e.type),Zd=()=>({type:Zi.DESELECT_ALL_ROWS}),Zc=e=>{e.stateReducers.push(Zm)};Zc.pluginName="useDeselectAllRows";let Zu={},Zm=(e,t)=>{let r;return Zo(t)?t.type===Zi.DESELECT_ALL_ROWS?(r={...e,selectedRowIds:Zu},fl(e,r))?e:r:void 0:e},Zp={EMPTY:{columnId:null,rowIds:new Set,rangeReferenceId:null,isMaximumExceeded:!1},isEqual:(e,t)=>e===t||e.columnId===t.columnId&&e.rangeReferenceId===t.rangeReferenceId&&fk(e.rowIds,t.rowIds)},Zf=(e,t)=>{let r=Math.min(e,t),a=Array.from({length:Math.abs(e-t)+1},(e,t)=>r+t);return e<=t?a:a.reverse()},Zh=[],Zg=(e,{columnId:t,affectedRowIds:r=Zh,mode:a,keepRangeReference:n=!1})=>{let l;if(null===t)return Zp.EMPTY;let i=e.columnId!==t?Zp.EMPTY:e,s=Array.isArray(r)?r:r?.(i),o=n?e.rangeReferenceId:s.at(-1)??e.rangeReferenceId;switch(a){case"toggle":l=fC(i.rowIds,new Set(s));break;case"replace":l=new Set(s);break;case"add":l=new Set([...i.rowIds,...s])}let d={columnId:t,rowIds:l,rangeReferenceId:o,isMaximumExceeded:l.size>50};return Zp.isEqual(d,e)?e:d},Zx=(0,uq.createContext)(Zp.EMPTY),Zy=(0,uq.createContext)(null),Zb=(0,uq.createContext)(null),Zv=(0,uq.memo)(function(e){let[t,r]=(0,uq.useReducer)(Zg,Zp.EMPTY),a=_M(),n=m1(x5().state.focus),l=(0,uq.useCallback)(e=>a.flatRows.findIndex(t=>t.original.id===e),[a]),i=(0,uq.useCallback)(e=>a.flatRows[e]?.original.id,[a]),s=(0,uq.useCallback)(()=>{let e=n.current;return e&&xG(e)?a.rowsById[e.details.y]?.cells.find(t=>t.column?.id===e.details.x):void 0},[n,a]),o=(0,uq.useCallback)((e,t,r)=>{let a=s(),n=l(r),o=null!==t?l(t):a?.column.id===e?l(a.row.original.id):n;return Zf(o,n).map(e=>i(e)).filter(fm)},[l,i,s]),d=(0,uq.useCallback)(()=>a.flatRows.map(e=>e.original.id),[a]),c=(0,uq.useCallback)(e=>i(l(e)-1)??e,[l,i]),u=(0,uq.useCallback)(e=>i(l(e)+1)??e,[l,i]),m=(0,uq.useMemo)(()=>({select:(e,t)=>r({columnId:e.column.id,mode:t,affectedRowIds:({columnId:r})=>{let a=s();return("toggle"===t||"add"===t)&&null===r&&a?[a.row.original.id,e.row.original.id]:[e.row.original.id]}}),selectRange:(e,t)=>r({columnId:e.column.id,mode:t,affectedRowIds:({rangeReferenceId:t})=>o(e.column.id,t,e.row.original.id),keepRangeReference:!0}),clearSelection:()=>r({columnId:null,mode:"replace"}),expandSelectionUp:e=>r({columnId:e.column.id,mode:"add",affectedRowIds:[e.row.original.id,c(e.row.original.id)]}),expandSelectionDown:e=>r({columnId:e.column.id,mode:"add",affectedRowIds:[e.row.original.id,u(e.row.original.id)]}),selectColumn:e=>r({affectedRowIds:d(),columnId:e,mode:"replace"})}),[o,c,u,d,s]),p=_D();return(0,uq.useEffect)(()=>{t.rowIds.size>0&&p(Zd())},[p,t]),(0,uO.jsx)(Zy.Provider,{value:m,children:(0,uO.jsx)(Zx.Provider,{value:t,children:(0,uO.jsxs)(Zb.Provider,{value:t.rowIds.size>0,children:[e.children,(0,uO.jsx)(kr,{"aria-live":"polite","aria-relevant":"additions removals",children:t.isMaximumExceeded&&fE.selectionMaximumExceeded(50)})]})})})}),Zw=()=>(0,uq.useContext)(Zx),Zj=()=>(0,uq.useContext)(Zy),ZC=e=>{let t=Zw();return t.columnId===e.column.id&&t.rowIds.has(e.row.original.id)},Zk=()=>(0,uq.useContext)(Zb),ZS=()=>{let{rowIds:e}=Zw(),t=_M();return(0,uq.useCallback)(()=>Array.from(e).map(e=>t.flatRows.find(t=>t.original.id===e)).filter(e=>void 0!==e&&e.original.contentType!==mA.RedactedItem),[e,t])},ZI=()=>{let e=Zw(),t=_M();return null!==e.columnId?t.visibleColumns.find(t=>t.id===e.columnId):null};try{(nC=Zx).displayName||(nC.displayName="SelectionStateContext")}catch{}try{(nk=Zy).displayName||(nk.displayName="SelectionMethodsContext")}catch{}try{(nS=Zb).displayName||(nS.displayName="SelectionAreCellsBulkSelectedContext")}catch{}try{(nI=Zv).displayName||(nI.displayName="TableCellBulkSelectionProvider")}catch{}let ZN=()=>{let e=Zw(),t=Zk(),r=ZS(),a=Zl();return(0,uq.useCallback)(async n=>{if(!t||!e.columnId)return;let l=r(),[i,...s]="as-selected"===n?l:l.sort((e,t)=>e.index-t.index),o=i?.cells.find(t=>t.column.id===e.columnId);if(!o)return;let d=bl(o);d&&a(s.map(e=>e.original),d,fD.fillCells,o.row.original.contentRepositoryId)},[a,r,t,e.columnId])},Z_=(0,uq.createContext)({isDragging:!1}),ZT=(0,uq.memo)(function({children:e}){let[t,r]=(0,uq.useState)(!1),a=ZN(),n=(0,Ph.U)(()=>{a("as-selected"),r(!1)});(0,uq.useEffect)(()=>(t&&document.addEventListener("mouseup",n),()=>document.removeEventListener("mouseup",n)),[t,n]);let l=(0,uq.useCallback)(()=>r(!0),[]),i=Zj();if(!i)throw Error("`TableDragToFillProvider` requires `TableCellBulkSelectionProvider` as an ancestor");return(0,uO.jsx)(Z_.Provider,{value:(0,uq.useMemo)(()=>({isDragging:t,onFillStart:l}),[t,l]),children:e})}),ZR=e=>{let{isDragging:t,onFillStart:r}=(0,uq.useContext)(Z_),a=Zw(),n=Array.from(a.rowIds),l=t&&a.columnId===e.column.id&&n[0]===e.row.original.id,i=t&&a.columnId===e.column.id&&n.at(-1)===e.row.original.id,s=(0,uq.useCallback)(t=>{t.metaKey||t.ctrlKey||t.shiftKey||r?.(e.column.id,e.row.index)},[e,r]),o=ZD(e),d=(0,uq.useCallback)(e=>{e.stopPropagation(),o()},[o]);return r?{isFillSourceCell:l,isFillLastCell:i,onFillHandleMousedown:s,onFillHandleDoubleClick:d}:null},ZE=(e,t)=>{let r=t.id;return!e.original.columns[r]},ZD=e=>{let t=_M(),r=Zj(),a=ZN(),n=(0,Ph.U)(a);return(0,uq.useCallback)(()=>{let a=e.row,l=e.column.columnModel;if(!r||!l||ZE(a,l))return;let i=t.flatRows,s=i.slice(a.index+1),o=s.findIndex(e=>e.original.contentType===mA.RedactedItem||!ZE(e,l)||a.groupedValue!==e.groupedValue),d=-1===o?i.length-1:o+a.index;if(d===a.index)return;let c=i[d]?.cells.find(t=>t.column.id===e.column.id);c&&(r.select(e,"replace"),r.selectRange(c,"replace"),setTimeout(()=>n("down")))},[r,e,n,t.flatRows])};try{(nN=Z_).displayName||(nN.displayName="DragToFillContext")}catch{}try{(n_=ZT).displayName||(n_.displayName="TableDragToFillProvider")}catch{}function ZP(e,t){return t&&xG(t)&&t.details.y===e.row.id&&t.details.x===e.column.id?{isFocused:!0,isEditing:Boolean(t.details.meta.editing),isSuspended:Boolean(t.details.meta.suspended),replaceContents:Boolean(t.details.meta.replaceContents)}:{isFocused:!1,isEditing:!1,isSuspended:!1,replaceContents:!1}}let ZA=(...e)=>new Blob(e,{type:hu.HTML}),ZM=(...e)=>new Blob(e,{type:hu.Text}),ZL=(...e)=>"undefined"==typeof ClipboardItem?null:new ClipboardItem(Object.fromEntries(e.map(e=>[e.type,e])));function ZF(e){if(void 0===navigator.clipboard?.writeText)throw Error("Copying is not supported in this browser");return navigator.clipboard.writeText(e)}function ZZ(e,t=p8(e)){let r=ZL(ZA(e),ZM(t));return r&&void 0!==navigator.clipboard?.write?navigator.clipboard.write([r]):ZF(t)}let ZO=(0,uq.createContext)(null),ZB=()=>{let e=(0,uq.useContext)(ZO);if(!e)throw Error("useVisibleFields must be used within a ViewProvider");return e};function ZV(e){switch(e.dataType){case mD.Assignees:return{id:mP.Assignees,dataType:e.dataType};case mD.Date:return{id:e.id,dataType:e.dataType};case mD.Iteration:{let t=gR(e);return{id:e.id,dataType:e.dataType,allIterations:t}}case mD.Labels:return{id:mP.Labels,dataType:e.dataType};case mD.LinkedPullRequests:return{id:mP.LinkedPullRequests,dataType:e.dataType};case mD.Milestone:return{id:mP.Milestone,dataType:e.dataType};case mD.Number:return{id:e.id,dataType:e.dataType};case mD.Repository:return{id:mP.Repository,dataType:e.dataType};case mD.Reviewers:return{id:mP.Reviewers,dataType:e.dataType};case mD.SingleSelect:if(pG(e.id)||e.id===mP.Status){let t=e.settings.options||[];return{id:e.id,dataType:e.dataType,options:t}}return null;case mD.Text:return{id:e.id,dataType:e.dataType};case mD.Title:return{id:mP.Title,dataType:e.dataType};case mD.Tracks:return{id:mP.Tracks,dataType:e.dataType};case mD.TrackedBy:return{id:mP.TrackedBy,dataType:e.dataType};default:xE(e)}}function Z$(e,t){let r;t.contentRepositoryId&&(r=t.contentRepositoryId);let a=ZV(e);if(a)return{repositoryId:r,column:a,row:t}}let Zz=(e,t)=>{let r=Z$(e,t);if(!r)return;let a=ZW(r);if(a)return{...a,columnId:r.column.id,itemId:r.row.id}},ZU=(e,t)=>e.filter(e=>e.contentType!==mA.RedactedItem).map(e=>t.map(t=>Zz(t,e))),ZW=e=>{let{column:t,row:r}=e;switch(t.dataType){case mD.Title:{let e=r.columns[mP.Title];if(!e||e.contentType===mA.RedactedItem)return;let t=js(e.value.title.html),a=r.getUrl(),n=a?`<a href="${a}">${t}</a>`:t;return{text:e.value.title.raw,dataType:mD.Title,value:{title:e.value.title},html:n}}case mD.Assignees:{let e=r.columns.Assignees;if(r.contentType===mA.RedactedItem||!e||0===e.length)return;return{text:e.map(e=>e.login).join(", "),dataType:mD.Assignees,value:e,repositoryId:r.contentRepositoryId}}case mD.Labels:{if(r.contentType===mA.DraftIssue||r.contentType===mA.RedactedItem)return;let e=r.columns.Labels;if(!e||0===e.length)return;return{text:e.map(e=>e.name).join(", "),dataType:mD.Labels,value:e,repositoryId:r.contentRepositoryId,html:e.map(e=>js(e.nameHtml)).join(", ")}}case mD.Milestone:{if(r.contentType===mA.DraftIssue||r.contentType===mA.RedactedItem)return;let e=r.columns.Milestone;if(!e)return;return{text:e.title,dataType:mD.Milestone,value:e,repositoryId:r.contentRepositoryId,html:`<a href="${e.url}">${e.title}</a>`}}case mD.Repository:{let e=r.columns.Repository;if(!e)return;return{text:e.nameWithOwner,dataType:mD.Repository,value:e,html:`<a href="${e.url}">${e.nameWithOwner}</a>`}}case mD.Tracks:{let e=r.columns.Tracks;if(!e||0===e.total)return;return{text:fE.progressCount({percent:p7(e),total:e.total}),dataType:mD.Tracks,value:e}}case mD.TrackedBy:{let e=r.columns["Tracked by"];if(!e||0===e.length)return;return{text:e.map(xD).join(", "),dataType:mD.TrackedBy,value:e||[],html:e.map(e=>`<a href="${e.url}">${xD(e)}</a>`).join(", ")}}case mD.Text:{let e=r.columns[t.id],a=pU(e);if(!a)return;return{text:a.raw,dataType:mD.Text,value:a,html:js(a.html)}}case mD.Number:{let e=r.columns[t.id],a=pW(e);if(!a)return;return{text:a.value.toString(),dataType:mD.Number,value:a}}case mD.Date:{let e=r.columns[t.id],a=pY(e),n=pQ(e);if(!a||!n)return;return{text:a,dataType:mD.Date,value:n}}case mD.Iteration:{let e=r.columns[t.id],a=e?.id,n=t.allIterations.find(e=>e.id===a);if(!n||!e)return;return{text:n.title,dataType:mD.Iteration,value:e,html:js(n.titleHtml)}}case mD.SingleSelect:{let e=r.columns[t.id],a=e?.id,n=t.options.find(e=>e.id===a),l=pH(e);if(!n||!l)return;return{text:n.name,dataType:mD.SingleSelect,value:l,html:js(n.nameHtml)}}case mD.Reviewers:{let e=r.columns.Reviewers;if(!e||0===e.length)return;return{text:e.map(e=>e.reviewer.name).join(", "),dataType:mD.Reviewers,value:e||[]}}case mD.LinkedPullRequests:{let e=r.columns["Linked pull requests"];if(!e||0===e.length)return;return{text:e.map(e=>`#${e.number}`).join(", "),dataType:mD.LinkedPullRequests,value:e,html:e.map(e=>`<a href="${e.url}">#${e.number}</a>`).join(", ")}}default:xE(t)}},ZH=(e="")=>e.includes("	")?`"${e.replaceAll('"','""')}"`:e,ZG=(e,t)=>{if(0===e.length)return;let r=t?[t.map(e=>ZH(e)).join("	")]:[];return[...r,...e.map(e=>e.map(e=>ZH(e?.text)).join("	"))].join("\n")},Zq=e=>e?.html??js(e?.text??""),ZK=(e,t)=>{if(0===e.length)return;let r=Z5(e);if(r)return Zq(r);let a=t?`
<thead><tr>${t.map(e=>`<th>${e}</th>`).join("")}</tr></thead>`:"",n=`<tbody>
${e.map(e=>`<tr>${e.map(e=>`<td>${Zq(e)}</td>`).join("")}</tr>`).join("\n")}
</tbody>`;return`<table>${a}
${n}
</table>`},ZQ=class PasteValidationFailure extends Error{},ZY=class DataTypeMismatchFailure extends ZQ{constructor(){super(fE.unableToPasteMismatchedDataTypes)}},ZX=(e,t)=>{switch(t.dataType){case mD.Assignees:{if("string"==typeof e)return;if(e.dataType!==mD.Assignees)throw new ZY;let t=e.value;return{dataType:mD.Assignees,value:t}}case mD.Date:{if("string"==typeof e)return;if(e.dataType!==mD.Date)throw new ZY;let r=e.value;return{dataType:mD.Date,memexProjectColumnId:t.id,value:{value:r.value}}}case mD.Iteration:{if("string"==typeof e)return;let r=null;if(e.dataType===mD.Iteration&&e.columnId===t.id){let t=e.value;r=t.id}else if(e.dataType===mD.Text){let a=e.value;if(!t)throw new ZY;let n=a.raw.trim().toLowerCase(),l=gR(t).find(e=>e.title.trim().toLowerCase()===n);if(!l)throw new ZQ(fE.iterationNotFound);r=l.id}if(!r)throw new ZY;return{dataType:mD.Iteration,memexProjectColumnId:t.id,value:{id:r}}}case mD.Labels:{if("string"==typeof e)return;if(e.dataType!==mD.Labels)throw new ZY;let t=e.value,r={dataType:mD.Labels,value:t};return r}case mD.Milestone:{if("string"==typeof e)return;if(e.dataType!==mD.Milestone)throw new ZY;let t=e.value;if(!t)throw new ZY;return{dataType:mD.Milestone,value:t}}case mD.Number:{let r=null;if("string"==typeof e){if(!e||isNaN(r=parseFloat(e)))return}else if(e.dataType===mD.Number){let t=e.value;r=t.value}else if(e.dataType===mD.Text&&(!e.text||isNaN(r=parseFloat(e.text))))throw new ZY;if(null===r)return;return{dataType:mD.Number,memexProjectColumnId:t.id,value:{value:r}}}case mD.SingleSelect:{if("string"==typeof e)return;let r=null;if(e.dataType===mD.SingleSelect&&e.columnId===t.id){let t=e.value;r=t.id}else if(e.dataType===mD.Text){let a=e.value,n=t.settings.options,l=a.raw.trim().toLowerCase(),i=n.find(e=>e.name.trim().toLowerCase()===l);if(!i)throw new ZY;r=i.id}if(!r)throw new ZY;return{dataType:mD.SingleSelect,memexProjectColumnId:t.id,value:{id:r}}}case mD.Text:return{dataType:mD.Text,memexProjectColumnId:t.id,value:"string"==typeof e?e:e.text}}},ZJ={UPDATE_CLIPBOARD:"UPDATE_CLIPBOARD",CLEAR_CLIPBOARD:"CLEAR_CLIPBOARD"},Z0={type:"empty"},Z1=(e,t)=>{switch(t.type){case ZJ.CLEAR_CLIPBOARD:return Z0;case ZJ.UPDATE_CLIPBOARD:return{type:"populated",value:t.state};default:return e}},Z2=e=>(0,uq.useReducer)(Z1,e),Z5=e=>{if(1!==e.length)return;let t=gc(e[0]);if(t?.length===1)return gc(t[0])},Z3=()=>{let e=(0,uq.createContext)({state:Z0,clipboardDispatch:()=>void 0});e.displayName="CopyPaste";let t=(0,uq.memo)(function({children:t}){let[r,a]=Z2(Z0),n=(0,uq.useMemo)(()=>({state:r,clipboardDispatch:a}),[r,a]);return(0,uO.jsx)(e.Provider,{value:n,children:t})}),r=()=>{let{state:t,clipboardDispatch:r}=(0,uq.useContext)(e),{visibleFields:a}=ZB(),{addToast:n}=m7(),l=(0,uq.useCallback)(()=>{r({type:ZJ.CLEAR_CLIPBOARD})},[r]),i=Zl(),s=(0,uq.useCallback)(async(e,a)=>{let l="";try{l=await navigator.clipboard.readText()}catch(e){}let s=t,o=!1;if("empty"===t.type&&(o=!!l),"populated"===t.type&&(o=!!l&&l!==ZG(t.value)),o&&(s={type:"populated",value:[[{dataType:"text",text:l,value:{raw:l,html:l}}]]},r({type:ZJ.CLEAR_CLIPBOARD})),"empty"===s.type)return;let d=0===a.length?[e.row.original]:a,c=Z5(s.value);if(!c)return;let u=c.dataType&&c.columnId?c:c.text,m=e.column.columnModel;if(!u||!m)return;let p="object"==typeof u&&"repositoryId"in u?u.repositoryId:void 0;try{let e=ZX(u,m);e&&await i(d,e,fD.paste,p)}catch(e){if(e instanceof ZQ)n({message:e.message,type:"warning"});else throw e}},[n,i,t,r]),o=(0,uq.useCallback)(e=>{if("empty"===t.type)return;let r=Z5(t.value);return r?.columnId?.toString()===e.column.id&&r.itemId===e.row.original.id},[t]),d=(0,uq.useCallback)((e,{withHeaders:t=!1,selectedFields:r=a}={})=>{let n=t?r.map(e=>e.name):void 0,l=ZU(e,r);return ZG(l,n)},[a]),c=(0,uq.useCallback)(async(e,{withHeaders:t=!1,selectedFields:l=a}={})=>{let i=t?l.map(e=>e.name):void 0,s=ZU(e,l),o=ZG(s,i)??"",d=ZK(s,i)??"";try{(o||d)&&await ZZ(d,o),r({type:ZJ.UPDATE_CLIPBOARD,state:s})}catch(e){n({message:"Could not copy items. Please check the page permissions and try again.",type:"error",keepAlive:!1})}},[n,a,r]);return{paste:s,clearClipboard:l,isCellCopySource:o,copyItems:c,itemsToCsv:d}};return{CopyPasteContext:e,CopyPasteProvider:t,useCopyPaste:r}},{CopyPasteProvider:Z4,useCopyPaste:Z6}=Z3();try{(nT=Z4).displayName||(nT.displayName="CopyPasteProvider")}catch{}function Z7(e){return`TableColumnHeader{id: ${e}}`}function Z8(e){return`TableRow{id: ${e}}`}function Z9(e,t){return`TableCell{row: ${e}, column: ${t}}`}function Oe(e){e.stopPropagation(),e.preventDefault()}function Ot(e,t){t===k_.META_ARROW_LEFT||t===k_.META_ARROW_RIGHT||t===k_.ARROW_LEFT||t===k_.ARROW_RIGHT?e.stopPropagation():Oe(e)}function Or(e,t){let r=Oa(t);return r.action&&e(r.action),r}function Oa(e){let t=kE(e),r=null;switch(t){case k_.META_HOME:r=xt({y:xi.First,x:xi.First,focusType:xl.Focus});break;case k_.SHIFT_ARROW_UP:case k_.SHIFT_ARROW_DOWN:break;case k_.ARROW_UP:r=xt({y:xi.Previous,focusType:xl.Focus});break;case k_.META_ARROW_UP:r=xt({y:xi.First,focusType:xl.Focus});break;case k_.ARROW_DOWN:r=xt({y:xi.Next,focusType:xl.Focus});break;case k_.META_ARROW_DOWN:r=xt({y:xi.Last,focusType:xl.Focus});break;case k_.ARROW_LEFT:r=xt({x:xi.Previous,focusType:xl.Focus});break;case k_.META_ARROW_LEFT:r=xt({x:xi.First,focusType:xl.Focus});break;case k_.ARROW_RIGHT:r=xt({x:xi.Next,focusType:xl.Focus});break;case k_.META_ARROW_RIGHT:r=xt({x:xi.Last,focusType:xl.Focus});break;case k_.META_END:r=xt({x:xi.Last,y:xi.Last,focusType:xl.Focus})}return{keyAsShortcut:t,action:r}}let On={Up:"up",Down:"down"};function Ol(){let e=Zl(),{addToast:t}=m7(),r=(0,uq.useCallback)(async(r,a)=>{if(!r.columnModel){t({type:"error",message:"You cannot delete this"});return}let n=a.map(e=>e.original),{dataType:l}=r.columnModel,i=pB(r.id);switch(l){case mD.Assignees:{let t={columnValue:{dataType:mD.Assignees,value:[]}};return e(n,t.columnValue,fD.delete)}case mD.Labels:{let t={columnValue:{dataType:mD.Labels,value:[]}};return e(n,t.columnValue,fD.delete)}case mD.Milestone:{let t={columnValue:{dataType:mD.Milestone,value:void 0}};return e(n,t.columnValue,fD.delete)}case mD.Text:case mD.Number:case mD.Date:case mD.Iteration:if(pG(i))return e(n,{dataType:l,memexProjectColumnId:i,value:void 0},fD.delete);break;case mD.SingleSelect:if(i===mP.Status||pG(i))return e(n,{memexProjectColumnId:i,dataType:l,value:void 0},fD.delete);break;case mD.LinkedPullRequests:t({type:"error",message:"Linked pull requests cannot be deleted"});break;case mD.Title:case mD.Repository:case mD.Reviewers:case mD.Tracks:case mD.TrackedBy:t({type:"error",message:`${l.slice(0,1).toUpperCase()+l.slice(1)} cannot be deleted`});break;default:xE(l)}},[e,t]);return{clearColumnValue:r}}let Oi=()=>{let e=Zj(),t=_D();return(0,uq.useCallback)(()=>{e?.clearSelection(),t(Zd())},[e,t])},Os=e=>void 0!==e&&e.isSelected&&e.original.contentType!==mA.RedactedItem,Oo=(e,t,r)=>{let a=Os(e),n=!1,l=!1;if(a){let r=t.filter(e=>!e.isGrouped),a=r.findIndex(t=>t.id===e.id);n=Os(r[a-1]),l=Os(r[a+1])}let i=!1,s=!1;if(r&&a)for(let t of r){let r=t.subRows.findIndex(t=>t.id===e.id);if(0===r&&(i=!0),r===t.subRows.length-1&&(s=!0),i||s)break}return{beforeSelected:n,afterSelected:l,firstInGroup:i,lastInGroup:s}},Od=[];function Oc(e,t=Od){let{navigationDispatch:r,stateRef:a}=x3(),{flatRows:n,selectedFlatRows:l}=_M(),[i,s]=(0,uq.useState)(null),[o,d]=(0,uq.useState)(null),{findMemexItem:c,findMemexItemIndex:u}=IO(),m=Zj(),p=_D();(0,uq.useEffect)(()=>{l.length>0&&m?.clearSelection()},[l,m]);let f=(0,uq.useCallback)(t=>{let r=n.filter(e=>null!=e.toggleRowSelected),a=r.findIndex(e=>e.id===t),l=r.findIndex(t=>t.id===e.id),i=[];if(l<a?i=r.slice(l,a+1):l>a&&(i=r.slice(a,l+1)),i.length)for(let e of(p(Zd()),i))e.toggleRowSelected(!0)},[n,e.id,p]),h=(0,uq.useCallback)((e,t)=>{let r=l.filter(e=>!e.isGrouped);if(0===r.length)return;let a=n.filter(e=>!e.isGrouped),i=[],s=gc(r[0]),o=a.findIndex(e=>e.id===s.id),d=gc(r[r.length-1]),c=a.findIndex(e=>e.id===d.id),u=a.findIndex(e=>e.id===t.id);if(1===r.length)e===On.Up?i=a.slice(o-1,o+1):e===On.Down&&(i=a.slice(o,o+2));else if(u<c)e===On.Up?i=a.slice(o,c):e===On.Down&&(i=a.slice(o,c+2));else if(e===On.Up){if(0===o)return;i=a.slice(o-1,u+1)}else e===On.Down&&(i=a.slice(o+1,u+1));if(i.length)for(let e of(p(Zd()),i))e.toggleRowSelected(!0)},[n,l,p]),g=(0,uq.useCallback)(a=>{if(t.some(e=>e.current===a.target)){if(fh(a)){e.toggleRowSelected();let t=e.cells[1];t&&r(x0(e.id,t.column.id,!1))}else if(l.length&&a.shiftKey&&i?.focus?.type==="coordinate"){let{x:e,y:t}=i.focus.details;f(t),r(x0(t,e,!1))}else{p(Zd()),e.toggleRowSelected(!0);let t=e.cells[1];t&&r(x0(e.id,t.column.id,!1))}}},[t,l.length,i?.focus?.type,i?.focus?.details,e,r,f,p]),x=(0,uq.useCallback)(()=>{if(a.current?.focus?.type==="coordinate"){s(a.current);let{y:e}=a.current.focus.details,t=n.findIndex(t=>t.id===e);d(t)}},[n,a]),y=(0,uq.useCallback)(()=>{if(null!==o&&o>-1){let e=n.filter(e=>void 0!==c(e.original.id)&&e.cells.length>1),t=e.length-1,a=e[o>t?t:o];if(a){let e=u(a.original.id),t=a.cells[1];t&&r(x0(`${e}`,t.column.id,!1))}else r(xQ())}},[c,n,u,o,r]);return{onRowClick:g,onRowMouseDown:x,focusLastRowIndex:y,expandRowSelectionInDirection:h}}let Ou=(e,t,r,a=!1,n=!1,l=!1)=>{let i=(0,uq.useRef)(null),s=(0,uq.useRef)(null),{stateRef:o,navigationDispatch:d}=x3(),c=(0,uq.useRef)(!1),{toggleAllRowsSelected:u,selectedFlatRows:m,flatRows:p}=_M(),{hasWritePermissions:f}=yI(),{copyItems:h,paste:g}=Z6(),{findMemexItem:x,findMemexItemIndex:y}=IO(),{expandRowSelectionInDirection:b}=Oc(e.row),v=_D(),{openPane:w}=b0(),j=Zj(),C=null!==j,k=C&&e.column.columnModel&&!Zt(e.column.columnModel.dataType),S=Zk(),I=ZI(),N=ZN(),{clearColumnValue:_}=Ol(),T=Oi(),R=(0,uq.useMemo)(()=>p.findIndex(t=>t.id===e.row.id),[e.row.id,p]),E=(0,uq.useCallback)(()=>{if(-1===R)return;let e=p.filter(e=>void 0!==x(e.original.id)),t=e.length-1,r=R>t?t:R,a=e[r];if(a){let e=y(a.original.id),t=a.cells[1];if(!t)return;d(x0(`${e}`,t.column.id,!1))}else d(xQ())},[p,R,y,x,d]),D=ZS(),P=(0,uq.useCallback)(()=>{T(),E()},[E,T]),{openRemoveConfirmationDialog:A}=D7(void 0,P,E),{openArchiveConfirmationDialog:M}=D5(void 0,P,E),L=(0,uq.useCallback)(()=>{xK(o.current,e.row.id,e.column.id)||d(x0(e.row.id,e.column.id,!1))},[o,e,d]),F=(0,uq.useCallback)(t=>{if(e.column.nonNavigable||t.isPropagationStopped()||t.shiftKey)return;let r=t.target instanceof Node&&s.current?.contains(t.target),n=c.current||r;a&&n?(c.current=!1,d(x0(e.row.id,e.column.id,a)),j?.clearSelection()):e.column.columnModel&&Zt(e.column.columnModel.dataType)&&j?.clearSelection()},[e,a,d,j]),Z=(0,uq.useCallback)(r=>{if(!e.column.nonNavigable){if(C){if(r.shiftKey){j.selectRange(e,fh(r)?"add":"replace"),r.preventDefault();return}fh(r)?j.select(e,"toggle"):j.clearSelection()}t?t&&a&&(c.current=!0):c.current=!1,v(Zd())}},[C,e,t,a,v,j]),O=m.filter(e=>Os(e)),B=(0,uq.useCallback)(t=>{if(FV(e.column)||r)return;let n=kE(t);C&&(n===k_.ARROW_LEFT||n===k_.ARROW_RIGHT)&&j.clearSelection();let l=Or(d,t);if(l.action)v(Zd()),Oe(t);else{switch(n){case k_.ENTER:a&&(d(x2({focusType:xl.Edit})),Oe(t));return;case k_.HOME:d(x2({x:xi.First,focusType:xl.Focus})),v(Zd()),Oe(t);return;case k_.SHIFT_SPACE:f&&(Oe(t),e.row.toggleRowSelected(!0));return;case k_.SPACE:"Title"===e.column.id&&(w(e.row.original),Oe(t));return;case k_.META_ENTER:C&&(j.select(e,"toggle"),Oe(t));return;case k_.SHIFT_ENTER:C&&(j.selectRange(e,"replace"),Oe(t));return;case k_.META_SHIFT_ENTER:C&&(j.selectRange(e,"add"),Oe(t));return;case k_.SHIFT_ARROW_UP:m.length>0?(b(On.Up,e.row),Oe(t)):C&&(j.expandSelectionUp(e),d(x2({y:xi.Previous,focusType:xl.Focus})),Oe(t));return;case k_.SHIFT_ARROW_DOWN:m.length>0?(b(On.Down,e.row),Oe(t)):C&&(j.expandSelectionDown(e),d(x2({y:xi.Next,focusType:xl.Focus})),Oe(t));return;case k_.END:d(x2({x:xi.Last,focusType:xl.Focus})),v(Zd()),Oe(t);return;case k_.META_C:if(e.row.original.contentType!==mA.RedactedItem){if(O.length>0)h(O.map(e=>e.original),{withHeaders:m.length===p.length});else{let t=D().map(e=>e.original);t.length&&I?.columnModel?h(t,{selectedFields:[I.columnModel]}):e.column.columnModel&&h([e.row.original],{selectedFields:[e.column.columnModel]})}t.preventDefault()}return;case k_.META_V:f&&e.row.original.contentType!==mA.RedactedItem&&(g(e,D().sort((e,t)=>e.index-t.index).map(e=>e.original)),t.preventDefault());return;case k_.META_A:m.length===p.length?v(Zd()):m.length>0?u(!0):0===m.length&&e.row.toggleRowSelected(!0),Oe(t);return;case k_.DELETE:case k_.BACKSPACE:if(f&&O.length>0){Oe(t);let e=O.map(e=>e.original.id);A(e,hJ)}else if(a){let r=D();0===r.length&&r.push(e.row),_(e.column,r),Oe(t)}return;case k_.META_D:k&&f&&S&&(Oe(t),N("down"));return;case k_.ARCHIVE:if(O.length&&f&&O.every(e=>DK(e.original.contentType))){Oe(t);let e=O.map(e=>e.original.id);M(e,hJ);return}}if(t.key.match(/^\S$/)&&!Om(t)&&"/"!==t.key){let r=!1!==e.column.typeToEditEnabled;a&&r&&d(x0(e.row.id,e.column.id,!0,!1,!0,t.key)),Oe(t);return}}},[e,r,C,d,j,v,a,f,w,m,b,I,h,p.length,D,g,u,O,A,_,k,S,N,M]),V=(0,uq.useCallback)(t=>{if(1!==t.buttons||!j||e.column.nonNavigable)return;let r=o.current?.focus,a=r&&xG(r)&&!xq(r)?r.details.x:null;e.column.id===a&&j.selectRange(e,fh(t)?"add":"replace")},[j,e,o]),$=(0,uq.useMemo)(()=>({ref:i,onKeyDown:B,onClick:F,onMouseDown:Z,onFocus:L,onMouseEnter:V,tabIndex:e.column.nonNavigable?void 0:0}),[B,F,Z,L,V,e.column.nonNavigable]),z=(0,uq.useMemo)(()=>r?{replaceContents:l,isDisabled:n}:{dropdownRef:s,isDisabled:n},[r,s,l,n]);return{wrapperProps:$,contentsProps:z}};function Om(e){return e.altKey||e.ctrlKey||e.metaKey}function Op({row:e,column:t,...r}){let a=(0,uq.useMemo)(()=>({column:t,row:e}),[t,e]),{state:{focus:n}}=x5(),{isFocused:l,isEditing:i,isSuspended:s,replaceContents:o}=ZP(a,n);return(0,uO.jsx)(Of,{...r,cell:a,isFocused:l,isEditing:i,isSuspended:s,replaceContents:o})}let Of=(0,uq.memo)(function({rowId:e,focusCellElement:t,isDragging:r,styles:a,children:n,getCellProps:l,render:i,cell:s,className:o,sx:d,isFocused:c,isEditing:u,isSuspended:m,replaceContents:p}){let{isReadonly:f,hasWritePermissions:h}=yI(),g=Zk(),x=Zw(),y=Zj(),{columnModel:b}=s.column,v=b?b.id:s.column.id,{validationMessage:w,validationMessageId:j}=_x(s.row.id,v),C=ZR(s),k=(0,uq.useMemo)(()=>s.column.columnModel&&Zr(s.row.original.contentType,s.column.columnModel.dataType)&&h,[s.column.columnModel,s.row.original.contentType,h]),S=(0,uq.useMemo)(()=>f&&s.column.id===mP.Title?s.row.original.contentType===mA.RedactedItem:!k,[s.column.id,s.row.original.contentType,k,f]),I=(0,uq.useMemo)(()=>s.column.columnModel&&Zt(s.column.columnModel.dataType),[s.column.columnModel]),{wrapperProps:N,contentsProps:_}=Ou(s,c,u,k,S,p),T=ZC(s),{isCellCopySource:R}=Z6();(0,uq.useLayoutEffect)(()=>{let e=N.ref.current;e&&c&&!u&&!u&&t(e,s.column.id,{isSuspended:m})},[u,N.ref,t,m,s.column.id,c]);let E=FV(s.column),D=F7()({hoverable:!r,"is-focused":c&&!E,"is-selected":T,"is-disabled-selected":T&&(S||I||x.isMaximumExceeded),"is-copy-source":C?.isFillSourceCell||R(s),"is-editing":u,"is-invalid":c&&u&&!!w,draggable:E,"is-dragging":r,"cursor-not-allowed":!f&&!k,"is-first-row":0===s.row.index},o),P=F$(s.column)?1:"unset",A=l({style:(0,uq.useMemo)(()=>({flexGrow:P,overflowX:E?"visible":"unset",whiteSpace:"nowrap",minWidth:s.column.width,...a}),[s.column.width,P,E,a]),className:D,role:"gridcell"});return(0,uO.jsxs)(Oh,{"aria-selected":T&&!S,...N,...A,...(0,mp.f)(Z9(void 0!==e?e:s.row.id,s.column.columnModel?.name||s.column.id)),sx:d,"data-test-cell-is-focused":c||void 0,"data-test-cell-is-editing":u||void 0,"data-test-cell-is-suspended":m||void 0,children:[i(u?"CellEditor":"Cell",_),j&&(0,uO.jsx)(Ze.v,{id:j,message:w}),n,C&&(c&&null!==y&&!I&&!S&&!g||C.isFillLastCell)&&(0,uO.jsx)(Og,{onMouseDown:C.onFillHandleMousedown,onDoubleClick:C.onFillHandleDoubleClick})]})});Op.displayName="TableCell";let Oh=uJ.ZP.div`
  scroll-margin-top: 35px; /* Account for sticky header */
  scroll-margin-bottom: 64px; /* Account for sticky footer */
  cursor: default;
  border-left: 1px solid ${(0,uG.U2)("colors.border.muted")};
  border-bottom: 1px solid ${(0,uG.U2)("colors.border.muted")};
  outline: none;

  &:first-of-type {
    border-left: none;
  }

  &:nth-of-type(2) {
    border-left: none;
  }

  &:last-child {
    border-right: none;
  }

  .row-highlight &.hoverable:hover {
    background-color: unset;
  }

  &.is-selected {
    position: relative;
    overflow-x: visible !important;
    overflow-y: visible;
    background-color: ${(0,uG.U2)("colors.accent.subtle")};

    :before {
      content: '';
      position: absolute;
      width: calc(100%);
      height: calc(100%);
      border: 1px solid ${(0,uG.U2)("colors.accent.emphasis")};
      left: -1px;
      top: -1px;
      z-index: 0;
      pointer-events: none;
    }
  }

  &.is-focused,
  &.is-copy-source {
    position: relative;
    overflow-x: visible !important;
    overflow-y: visible;

    :before {
      content: '';
      position: absolute;
      width: calc(100% - 2px);
      height: calc(100% - 2px);
      border-radius: 2px;
      left: -1px;
      top: -1px;
      z-index: 0;
      pointer-events: none;
      border-width: 2px;
      border-color: ${(0,uG.U2)("colors.accent.emphasis")};
    }
  }

  &.is-focused:before {
    border-style: solid;
    box-shadow: inset -3px 0 0 0 ${(0,uG.U2)("colors.canvas.default")},
      inset 0 -3px 0 0 ${(0,uG.U2)("colors.canvas.default")}, inset 3px 0 0 0 ${(0,uG.U2)("colors.canvas.default")},
      inset 0 3px 0 0 ${(0,uG.U2)("colors.canvas.default")}, ${(0,uG.U2)("shadows.shadow.medium")};
  }

  &.is-copy-source:before {
    border-style: dotted;
  }

  &.is-copy-source.is-focused:before {
    border-style: dashed;
  }

  &.is-focused.is-first-row {
    :before {
      top: 0px;
      height: calc(100% - 3px);
    }
  }

  &.is-focused.is-editing {
    background-color: ${(0,uG.U2)("colors.canvas.default")};
    :before {
      box-shadow: inset -3px 0 0 0 ${(0,uG.U2)("colors.canvas.default")},
        inset 0 -3px 0 0 ${(0,uG.U2)("colors.canvas.default")}, inset 3px 0 0 0 ${(0,uG.U2)("colors.canvas.default")},
        inset 0 3px 0 0 ${(0,uG.U2)("colors.canvas.default")}, ${(0,uG.U2)("shadows.shadow.medium")};
    }

    :after {
      display: none;
    }
  }

  &.is-focused.is-invalid {
    :before {
      border-color: ${(0,uG.U2)("colors.danger.fg")};
    }
  }

  &.is-focused.cursor-not-allowed:before {
    border-color: ${(0,uG.U2)("colors.fg.subtle")};
    box-shadow: none;
  }

  &.cursor-not-allowed {
    cursor: not-allowed;
  }

  &.is-disabled-selected {
    :before {
      border-color: ${(0,uG.U2)("colors.fg.subtle")};
    }
  }

  &.draggable {
    cursor: grab;
    user-select: none;
  }

  &.draggable:active,
  &.is-dragging {
    cursor: grabbing;
    user-select: none;
  }

  .reveal-link-icon {
    visibility: hidden;
  }

  &:hover .reveal-link-icon {
    visibility: visible;
  }

  ${mZ.Z}
`,Og=(0,uq.memo)(({onMouseDown:e,onDoubleClick:t})=>(0,uO.jsx)(mF.Z,{"aria-hidden":!0,onMouseDown:e,onDoubleClick:t,onClick:e=>e.stopPropagation(),sx:{position:"absolute",bg:"accent.emphasis",cursor:"crosshair",border:"1px solid",borderColor:"fg.onEmphasis",borderRadius:"2px",boxSizing:"border-box",height:"12px",width:"12px",bottom:"-6px",right:"-6px",boxShadow:"shadow.medium",zIndex:2},...(0,mp.f)("table-cell-fill-handle")}));Og.displayName="FillerHandle";try{(nR=Of).displayName||(nR.displayName="InnerTableCell")}catch{}let Ox=uJ.ZP.div`
  display: flex;
  background-color: ${(0,uG.U2)("colors.canvas.default")};

  &.row-highlight {
    position: relative;
    background-color: ${(0,uG.U2)("colors.accent.subtle")};
    box-shadow: 0 0 0 1px ${(0,uG.U2)("colors.accent.emphasis")};

    > * {
      border-bottom: transparent;
    }
  }

  &.row-selected {
    position: relative;
    background-color: ${(0,uG.U2)("colors.accent.subtle")};

    &.selection-top-edge {
      box-shadow: 0 -1px 0 0 ${(0,uG.U2)("colors.accent.emphasis")};

      &.selection-bottom-edge {
        box-shadow: 0 0 0 1px ${(0,uG.U2)("colors.accent.emphasis")};
      }
    }

    &.selection-bottom-edge {
      box-shadow: 0 1px 0 0 ${(0,uG.U2)("colors.accent.emphasis")};
    }
  }

  &.hoverable:not(.is-focused):hover {
    background-color: ${(0,uG.U2)("colors.canvas.subtle")};

    .table-row-dropdown-caret {
      opacity: 1;
    }
  }

  &.hoverable:hover .menu-trigger,
  &.hoverable:focus .menu-trigger {
    opacity: 1;
  }

  ${mZ.Z}
`,Oy=(0,uq.createContext)(0),Ob={height:"37px",width:"100%",flexShrink:0},Ov=(0,uq.memo)(function(e){_T();let[t]=Fp(),{flatRows:r,groupedRows:a}=_M();e.data.prepareRow(e.row);let n=Os(e.row),{beforeSelected:l,afterSelected:i,firstInGroup:s,lastInGroup:o}=(0,uq.useMemo)(()=>Oo(e.row,r,a),[r,a,e.row]),d=F7()({hoverable:!t.isDragging,"row-selected":n,"selection-top-edge":n&&(!l||s),"selection-bottom-edge":n&&(!i||o)});return(0,uO.jsx)(Oy.Provider,{value:e.index+1,children:(0,uO.jsx)(Ox,{...e.row.getRowProps({className:d}),...(0,mp.f)(Z8(e.row.id)),style:Ob,"data-test-row-is-selected":n,"data-hovercard-subject-tag":y3(e.row.original),children:e.row.cells.map(r=>(0,uO.jsx)(Op,{row:r.row,column:r.column,render:r.render,getCellProps:r.getCellProps,focusCellElement:e.data.focusCellElement,isDragging:t.isDragging},r.column.id))})})});Ov.displayName="TableRow";try{(nE=Oy).displayName||(nE.displayName="RowNumberContext")}catch{}let Ow={SET_ROW_MENU_OPEN:"useRowMenuShortcut.setRowMenuOpen"},Oj=Object.values(Ow),OC=e=>Oj.includes(e.type),Ok=e=>({type:Ow.SET_ROW_MENU_OPEN,origin:e}),OS=e=>{e.stateReducers.push(OI)};OS.pluginName="useRowMenuShortcut";let OI=(e,t)=>{let r;return OC(t)?t.type===Ow.SET_ROW_MENU_OPEN?(r={...e,rowMenuShortcutOrigin:t.origin},fl(e,r))?e:r:void 0:e},ON={position:"relative",overflow:"visible",userSelect:"none",WebkitUserSelect:"none"},O_=e=>{for(let t of e)t.isSelected||t.toggleRowSelected()},OT=e=>{for(let t of e)t.isSelected&&t.toggleRowSelected()},OR=()=>{let{allColumns:e}=_M(),{memex_tracked_by_drag_drop:t}=g9(),r=e.filter(e=>e.canGroupBy&&e.isVisible&&e.columnModel&&e.isGrouped),a=e.find(e=>e.columnModel?.dataType===mD.TrackedBy),n=a&&a.isGrouped&&!a.isVisible,l=r[0]?.columnModel;return{groupedColumnModel:l,canReorder:n?t:F1(l,{memex_tracked_by_drag_drop:t})}},OE={position:"absolute",right:"30px",left:"5px",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,width:"18px",height:"18px","&:focus":{opacity:1}};function OD({column:e,row:t}){let r=_D(),a=_M(),{selectedFlatRows:n}=a,l=Oi(),{navigationDispatch:i}=x3(),s=_L(),{postStats:o}=bM(),{contentType:d}=t.original,c=(0,uq.useContext)(Oy),[u,m]=(0,uq.useState)(!1),[p,f]=(0,uq.useState)(!1),h=(0,uq.useRef)(null),g=(0,uq.useRef)(!1),{canReorder:x}=OR(),{hasWritePermissions:y}=yI(),b=(0,uq.useRef)(null),v=(0,uq.useRef)(null),w=(0,uq.useMemo)(()=>[b,v],[b,v]),{onRowClick:j,onRowMouseDown:C,focusLastRowIndex:k}=Oc(t,w),S=(0,uq.useMemo)(()=>n.filter(e=>Os(e)),[n]),I=(0,uq.useCallback)(()=>{if(!u){let e=_t(a,t);r(FQ({id:t.id,itemId:t.original.id,group:e})),r(FY(t.original.id)),l()}},[u,a,t,r,l]),N=(0,uq.useCallback)(()=>{r(FQ(null))},[r]),_=(0,uq.useCallback)(()=>{s&&i(xr(s)),r(Ok())},[s,r,i]),T=(0,uq.useCallback)(()=>{(0,w8.flushSync)(()=>{i(x1()),m(!0)}),h.current&&h.current.focus()},[i]),R=(0,uq.useCallback)(()=>{h.current&&h.current.blur(),g.current||_(),m(!1)},[g,_,m]),E=(0,uq.useCallback)(e=>e?T():R(),[T,R]),D=(0,uq.useCallback)(()=>{g.current=!0;let e=-1!==S.findIndex(e=>e.id===t.id);e?O_(S):(OT(S),O_([t]))},[t,S]),P=(0,uq.useCallback)(()=>{g.current=!1,R(),k()},[R,k]),A=(0,uq.useCallback)(()=>{g.current=!1,_(),r(Zd()),k()},[r,_,k]);(0,uq.useEffect)(()=>{s?.details.y===t.id&&d!==mA.RedactedItem&&E(!0)},[t.id,E,s?.details.y,d]);let{openRemoveConfirmationDialog:M}=D7(D,A,P),{openArchiveConfirmationDialog:L}=D5(D,A,P),F=(0,uq.useCallback)(()=>{M([t.original.id],hX)},[M,t.original.id]),Z=(0,uq.useCallback)(()=>{L([t.original.id],hX)},[L,t.original.id]),O=(0,uq.useCallback)(()=>{let e=S.map(e=>e.original.id);L(e,hX)},[L,S]),B=(0,uq.useCallback)(()=>{let e=S.map(e=>e.original.id);M(e,hX)},[M,S]),{props:V}=Fh({onDragStart:I,onDragEnd:N,onMouseDown:C}),$=Os(t),z=$&&S.length>1,U=S.every(e=>DK(e.original.contentType))&&DK(d)&&y,W=(0,uq.useCallback)(()=>{let e=t.original.id;o({name:hN,ui:hI,memexProjectItemId:e})},[o,t]),H=(0,uq.useMemo)(()=>d!==mA.RedactedItem&&y?x?{...V,draggable:!0,onDragStart:e=>e.preventDefault(),style:ON,onClick:j}:{...V,style:{...ON,cursor:"default"},onMouseDown:void 0,onClick:void 0}:{style:{...ON,cursor:"default"},title:"Reordering this item is disabled",onClick:j,onMouseDown:void 0},[x,d,y,j,V]);return FV(e)?(0,uO.jsxs)(F4,{...H,sx:{pr:1},...(0,mp.f)("row-dragger"),ref:b,children:[(0,uO.jsx)(F2,{ranking:c,ref:v}),y&&d!==mA.RedactedItem&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(In.P,{open:u,onOpenChange:E,children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsx)(kF.h,{icon:mM.AS7,"aria-label":"Row actions",className:"menu-trigger",tabIndex:-1,block:!0,sx:OE,...(0,mp.f)("row-menu-trigger")})}),(0,uO.jsx)(In.P.Overlay,{...(0,mp.f)("row-menu"),children:(0,uO.jsxs)(Ia.S,{children:[z||d!==mA.DraftIssue?null:(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>f(!0),...(0,mp.f)("row-menu-convert-to-issue"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.hEv,{})}),"Convert to issue"]}),U?(0,uO.jsx)(uO.Fragment,{children:z?(0,uO.jsxs)(Ia.S.Item,{onSelect:O,...(0,mp.f)("row-menu-archive-multiple"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.rKT,{})}),"Archive ",S.length," items",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(F0,{})})]}):(0,uO.jsxs)(Ia.S.Item,{onSelect:Z,...(0,mp.f)("row-menu-archive"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.rKT,{})}),"Archive",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(F0,{})})]})}):null,z?(0,uO.jsxs)(Ia.S.Item,{variant:"danger",onSelect:B,...(0,mp.f)("row-menu-delete-multiple"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete ",S.length," selected items from project",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(FJ,{})})]}):(0,uO.jsxs)(Ia.S.Item,{variant:"danger",onSelect:F,...(0,mp.f)("row-menu-delete"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete from project",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(FJ,{})})]})]})})]}),(0,uO.jsx)(MI,{anchorRef:b,isOpen:p,item:t.original,onOpenChange:e=>f(e),onSuccess:W,...(0,mp.f)("row-menu-repo-picker")})]})]}):null}let OP=(0,uq.memo)(OD);try{(nD=OD).displayName||(nD.displayName="RowDragger")}catch{}let OA=Object.values(FK);function OM(e){return OA.includes(e.type)}let OL={Header:"",id:FO,width:60,canSort:!1,nonNavigable:!0,canBeShifted:!1,canReorder:!1,Cell:e=>(0,uO.jsx)(OP,{column:e.column,row:e.row}),CellEditor:e=>(0,uO.jsx)(OP,{column:e.column,row:e.row})};function OF(e){let t=[OL,...e];return t}let OZ=e=>{e.useOptions.push(OO),e.getRowProps.push(OV),e.stateReducers.push(OB),e.columns.unshift(OF)};function OO(e){return{...e,initialState:{...e.initialState,highlightedRowId:null}}}OZ.pluginName="useRowDragDrop";let OB=(e,t)=>{let r;if(!OM(t))return e;switch(t.type){case FK.SET_HIGHLIGHTED_ROW:if(r={...e,highlightedRowId:t.rowId},fl(e,r))return e;return r;case FK.SET_MOVING_ROW:if(r={...e,movingRow:t.movingRow},(0,CR.Z)(e.movingRow,r.movingRow))return e;return r}},OV=(e,t)=>{let{instance:r,row:a}=t,n=_P(),l=(0,uq.useMemo)(()=>n===a.original.id?"row-highlight":"",[a,n]),i=(0,uq.useCallback)(()=>{let{movingRow:e}=r.state;if(!e)return;let t=e.over?.group?{group:e.over.group}:void 0;r.dispatch(FQ({...e,over:t}))},[r]),s=(0,uq.useCallback)(e=>{let{movingRow:t}=r.state;if(!t)return;let n=e.currentTarget.clientHeight,l=e.clientY-e.currentTarget.getBoundingClientRect().top,i=l>n/2?"bottom":"top",s=_t(r,a);r.dispatch(FQ({...t,over:{id:a.id,itemId:a.original.id,side:i,group:s}}))},[r,a]),o=(0,uq.useCallback)(async()=>{r.state.movingRow||r.dispatch(FY(null))},[r]),d=(0,uq.useCallback)(e=>{let t=r.flatRows.filter(e=>!e.isGrouped);return gc(t.find(t=>t.original.id===e)).original},[r.flatRows]),c=FG(),u=(0,uq.useCallback)(async()=>{let{movingRow:e}=r.state,t=e?.over;if(!e||!Fq(t))return;let a=d(e.itemId),n=d(t.itemId);r.dispatch(FQ(null)),await c({movingItem:a,movingItemGroup:e.group,overItemGroup:t.group,overItem:n,side:t.side})},[r,d,c]),{props:m}=Fg({onDragMove:s,onDrop:u,onDragLeave:i});return[e,{className:l,onClick:o,...m}]},O$=({metadata:e,isCollapsed:t})=>{let{movingRow:r}=_T(),{toggleGroupCollapsed:a}=NR(),n=_M(),l=FG(),i=r?.over?.group?.value===e.value&&r?.group?.value!==e.value,s=m2(()=>a(e.value),500);(0,uq.useEffect)(()=>{if(i&&t){let e=s();return()=>e.cancel()}},[i,t,s]);let o=(0,uq.useCallback)(()=>{n.state.movingRow&&n.dispatch(FQ({...n.state.movingRow,over:{group:e}}))},[n,e]),d=(0,uq.useCallback)(()=>{n.state.movingRow&&n.dispatch(FQ({...n.state.movingRow,over:void 0}))},[n]),c=(0,uq.useCallback)(async()=>{let r=n.state.movingRow,i=r?.over;if(!r||!i||Fq(i))return;let s=n.flatRows.filter(e=>!e.isGrouped).find(e=>e.original.id===r.itemId),o=s?.original;o&&r.group&&(t&&a(e.value),n.dispatch(FQ(null)),await l({movingItem:o,movingItemGroup:r.group,overItemGroup:e}))},[l,n,e,t,a]),{props:u}=Fg({onDragEnter:o,onDragLeave:d,onDrop:c});return{isDraggedOver:i,containerProps:u}};function Oz(){let{allColumnsRef:e}=j2(),t=e.current.find(e=>e.dataType===mD.Title),r=(0,uq.useCallback)(()=>{let[t,r]=e.current.reduce((e,t)=>(g5(t)?gc(e[0]).push(t.databaseId):g1(t)&&gc(e[1]).push(t.databaseId),e),[[],[]]);return t?.length?Fa(t):r?.length?[r[0]??_V,r[0]??_V]:Fa([])},[e]),a=(0,uq.useCallback)((e,a)=>{let n=t&&L6(_Z.Roadmap,e)[t.databaseId],l=t?{[t.databaseId]:n??350}:{},i={...e.roadmap?.columnWidths??{},...l};return a?{columnWidths:i}:e.roadmap?.dateFields||e.roadmap?.zoomLevel?{...e.roadmap,columnWidths:i}:{dateFields:r(),zoomLevel:Fr(e),columnWidths:i}},[r,t]);return(0,uq.useMemo)(()=>({getRoadmapSettingsOrDefaults:a}),[a])}let OU=(0,uq.createContext)(null),OW=(0,uq.createContext)(null),OH=()=>{let e=(0,uq.useContext)(OU);if(!e)throw Error("useRoadmapSettings must be used within a RoadmapSettingsContext");return e},OG=()=>{let e=(0,uq.useContext)(OW);if(!e)throw Error("useRoadmapSessionSettings must be used within a RoadmapSessionSettingsContext");return e},Oq=(0,uq.createContext)(null),OK=()=>{let e=(0,uq.useContext)(Oq);return(0,u0.Z)(null!=e,"useRoadmapTableWidth must be used within a RoadmapTableWidthContext"),e},OQ=(0,uq.createContext)(null),OY=()=>{let e=(0,uq.useContext)(OQ);return(0,u0.Z)(null!=e,"useRoadmapTotalFixedColumnWidth must be used within a RoadmapTotalFixedColumnWidthContext"),e},OX=(0,uq.createContext)(null),OJ=()=>{let e=(0,uq.useContext)(OX);return(0,u0.Z)(null!=e,"useRoadmapZoomLevel must be used within a RoadmapZoomLevelContext"),e},O0=(0,uq.createContext)(null),O1=()=>{let e=(0,uq.useContext)(O0);return(0,u0.Z)(null!=e,"useRoadmapSetZoomLevel must be used within a RoadmapSetZoomLevelContext"),e};function O2(){let e=(0,uq.useCallback)(e=>({columnWidths:e.table?.columnWidths??{}}),[]);return(0,uq.useMemo)(()=>({getTableSettingsOrDefaults:e}),[e])}function O5(){let{getRoadmapSettingsOrDefaults:e}=Oz(),{getTableSettingsOrDefaults:t}=O2(),r=(0,uq.useCallback)((r,a=!1)=>({...r,roadmap:e(r,a),table:t(r)}),[e,t]),a=(0,uq.useCallback)((e,t)=>{let a=t.localViewState.layout;if(a===e||a!==_Z.Roadmap&&e!==_Z.Roadmap)return;let n=a===_Z.Roadmap&&!Fe(t.serverViewState.layoutSettings.roadmap)&&Fe(t.localViewState.layoutSettings.roadmap);return r(t.localViewState.layoutSettings,n)},[r]);return(0,uq.useMemo)(()=>({getNextLayoutSettings:a,getLayoutSettingsWithDefaults:r}),[a,r])}let O3=()=>{let{findColumn:e}=Tk(),{currentView:t,viewStateDispatch:r}=bP(),{getLayoutSettingsWithDefaults:a}=O5(),n=M7(),l=(0,uq.useCallback)(r=>{let n=e(r);if(n){let e=t?.localViewState&&a(t?.localViewState.layoutSettings);if(e){let r=L6(t.localViewState.layout,e),a=r?.[n.databaseId.toString()];if(a)return a}}return n?.settings.width??void 0},[e,a,t]),i=(0,uq.useCallback)(async(a,i)=>{let s=e(a);if(!s||l(a)===i)return;let o=t?.number;if(!o)return;let d=_G(t.localViewState.layout);if(!L3(d))return;let{layout:c}=t.localViewState,u=L6(c,t.localViewState.layoutSettings),m={...u,[s.databaseId.toString()]:i},p=L7(t.serverViewState,c,m);r({type:kc.SetColumnWidths,viewType:d,viewNumber:o,columnWidths:m}),ID(),await n.perform({viewNumber:t.number,view:ht(p,_B)}),"failed"===n.status.current.status&&r({type:kc.SetColumnWidths,viewType:d,viewNumber:o,columnWidths:u})},[l,e,t,n,r]);return{updateWidth:i,getWidth:l}},O4=(0,LQ.Z)("localStorage"),O6=(0,uq.createContext)(null),O7={roadmapTruncateTitles:"Truncate titles",roadmapShowDateFields:"Show date fields"};function O8(e,t,r){let a=O4.getItem(`projects.${e}`),[n,l]=(0,uq.useReducer)(O9,t,()=>void 0!==r?r:a?"true"===a:t),{postStats:i}=bM(),s=(0,uq.useCallback)(()=>{l({type:"toggle",name:e}),i({name:"user_settings_edit",context:JSON.stringify({name:e,enabled:!n})})},[n,e,i]),o=O7[e],d=(0,uq.useMemo)(()=>({name:e,enabled:n,toggleEnabled:s,label:o}),[e,n,s,o]);return d}function O9(e,t){if("toggle"===t.type)return O4.setItem(`projects.${t.name}`,String(!e)),!e;throw Error(`Unknown action type: ${t.type}`)}function Be({children:e}){let t=O8("roadmapTruncateTitles",!1),r=O8("roadmapShowDateFields",!1);return(0,uO.jsx)(O6.Provider,{value:(0,uq.useMemo)(()=>({roadmapTruncateTitles:t,roadmapShowDateFields:r}),[r,t]),children:e})}let Bt=()=>{let e=(0,uq.useContext)(O6);return(0,u0.Z)(null!==e,"useUserSettings must be used within a UserSettingsProvider"),e};try{(nP=O6).displayName||(nP.displayName="UserSettingsContext")}catch{}try{(nA=Be).displayName||(nA.displayName="UserSettingsProvider")}catch{}let Br=[],Ba=(0,uq.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=bP(),{allColumns:a}=CB(),n=(0,uq.useCallback)((e,t)=>{r({type:kc.SetRoadmapDateFields,viewNumber:e,dateFields:t})},[r]),l=(0,uq.useCallback)((e,t)=>{r({type:kc.ToggleRoadmapMarkerFields,viewNumber:e,field:t})},[r]),i=(0,uq.useMemo)(()=>t?.localViewState?.layout===_Z.Roadmap&&t.localViewStateDeserialized.layoutSettings?.roadmap?.dateFields?.length?Fa(t.localViewStateDeserialized.layoutSettings.roadmap.dateFields):Fa([]),[t]),s=(0,uq.useMemo)(()=>i.length>0&&void 0===t?.serverViewState.layoutSettings.roadmap,[t?.serverViewState.layoutSettings.roadmap,i.length]),[o,d]=(0,uq.useState)({}),c=(0,uq.useMemo)(()=>o[t?.id??0]??!1,[t?.id,o]),u=(0,uq.useCallback)(()=>{t?.id&&!c&&d({...o,[t.id]:!0})},[t?.id,c,o]),m=(0,uq.useMemo)(()=>t?.localViewState?.layout!==_Z.Roadmap?new Map:a.reduce((e,t)=>{if(g1(t)){let r=gR(t),a=r.reduce((e,t)=>{let{id:r,startDate:a,duration:n}=t,l=gN({startDate:a,duration:n}),i={...t,start:l.startDate,end:l.endDate};return e.set(r,i),e},new Map);e.set(t.id,a)}return e},new Map),[a,t]),p=(0,uq.useCallback)((e,t)=>{let r=i[t];if(!r||"none"===r)return{date:void 0,iteration:void 0};let a=e[r.id];if(!a)return{date:void 0,iteration:void 0};if(g5(r))return{date:pQ(a)?.value,iteration:void 0};if(g1(r)&&"id"in a){let e=m.get(r.id);if(e){let r=e.get(a.id);if(r){let e=0===t?r.start:r.end;return{date:e,iteration:r}}}}return{date:void 0,iteration:void 0}},[i,m]),f=(0,uq.useCallback)(e=>{if(!i.length)return{start:void 0,end:void 0};let t=p(e,0),r=p(e,1);return{start:t.date,startIteration:t.iteration,end:r.date,endIteration:r.iteration}},[p,i]),h=(0,uq.useMemo)(()=>Fr(t?.localViewState?.layoutSettings),[t]),g=(0,uq.useCallback)((e,t)=>{r({type:kc.SetRoadmapZoomLevel,viewNumber:e,zoomLevel:t})},[r]),{getWidth:x,updateWidth:y}=O3(),{hasWritePermissions:b}=yI(),v=t&&L4(t.localViewState.layout),w=a.find(e=>e.dataType===mD.Title)?.id,[j,C]=(0,uq.useState)(new Map),k=(0,uq.useCallback)(e=>{t&&b&&C(r=>new Map(r).set(t.number,e))},[t,b]),{roadmapShowDateFields:S}=Bt(),I=S.enabled,N=i[0]!==_V,_=i[1]!==_V,T=I&&(N||_)?N&&_&&i[0]!==i[1]?2:1:0,R=(t?.number&&j.get(t.number))??(w&&v?x(w):void 0)??650,E=120*T+60,D=(0,uq.useCallback)(e=>{if(!w)throw Error("Title column not found");if(b)return k(null),y(w,e)},[b,w,k,y]),P=t?.localViewStateDeserialized?.layoutSettings.roadmap?.markerFields??Br;return(0,uO.jsx)(O0.Provider,{value:g,children:(0,uO.jsx)(OX.Provider,{value:h,children:(0,uO.jsx)(Oq.Provider,{value:R+E,children:(0,uO.jsx)(OQ.Provider,{value:E,children:(0,uO.jsx)(OU.Provider,{value:(0,uq.useMemo)(()=>({dateFields:i,markerFields:P,areDateFieldsDefault:s,setDateFields:n,toggleMarkerField:l,isRoadmapMarkerFieldsDirty:t?.isRoadmapMarkerFieldsDirty??!1,isRoadmapDateFieldsDirty:t?.isRoadmapDateFieldsDirty??!1,isRoadmapZoomLevelDirty:t?.isRoadmapZoomLevelDirty??!1,getTimeSpanFromColumnData:f,titleColumnWidth:R,updateTitleColumnWidth:D,updateLocalTitleColumnWidth:k,showDateFields:I}),[i,P,s,n,l,t?.isRoadmapMarkerFieldsDirty,t?.isRoadmapDateFieldsDirty,t?.isRoadmapZoomLevelDirty,f,R,D,k,I]),children:(0,uO.jsx)(OW.Provider,{value:(0,uq.useMemo)(()=>({isDateFieldsPopoverDisabled:c,disableDateFieldsPopover:u}),[c,u]),children:e})})})})})})});try{(nM=Ba).displayName||(nM.displayName="RoadmapSettingsProvider")}catch{}let Bn=(0,uq.createContext)(null),Bl=()=>{let e=(0,uq.useContext)(Bn);if(!e)throw Error("useSliceBy must be used within a ViewProvider");return e},Bi=(0,uq.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=bP(),a=(0,uq.useCallback)((e,t)=>{r({type:kc.SetSliceValue,value:t,viewNumber:e})},[r]),n=(0,uq.useCallback)((e,t)=>{r({type:kc.SetSliceValue,value:"",viewNumber:e}),r({type:kc.SetSliceBy,column:t,viewNumber:e})},[r]),l=(0,uq.useCallback)(e=>{r({type:kc.SetSliceValue,value:"",viewNumber:e}),r({type:kc.ClearSliceBy,viewNumber:e})},[r]);return(0,uO.jsx)(Bn.Provider,{value:(0,uq.useMemo)(()=>({sliceField:t?.localViewStateDeserialized.sliceBy?.field??null,setSliceField:n,clearSliceField:l,isSliceByDirty:t?.isSliceByDirty??!1,sliceValue:t?.localViewStateDeserialized.sliceValue??null,setSliceValue:a}),[t?.localViewStateDeserialized.sliceBy?.field,t?.isSliceByDirty,n,l,t?.localViewStateDeserialized.sliceValue,a]),children:e})});try{(nL=Bi).displayName||(nL.displayName="SliceByProvider")}catch{}let Bs=e=>{switch(e){case"asc":return"desc";case"desc":return null;case null:return"asc"}},Bo=e=>{switch(e){case 0:return"primary";case 1:return"secondary";default:return`no. ${e+1}`}},Bd=[],Bc=(0,uq.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=bP(),{memex_sort_multiple:a}=g9(),n=t?.number,l=t?.localViewStateDeserialized.sortByColumnsAndDirections??Bd,i=a?l:l.slice(0,1),s=(0,uq.useCallback)((...e)=>{void 0!==n&&r({type:kc.SetSortedBy,sorts:e,viewNumber:n})},[n,r]),o=(0,uq.useCallback)((e=0)=>{void 0!==n&&r({type:kc.SetSortedBy,sorts:i.slice(0,e),viewNumber:n})},[n,r,i]),d=(0,uq.useCallback)(e=>i.find(t=>t.column.id===e.id),[i]),c=(0,uq.useCallback)((e,t,r)=>{let a=i.findIndex(t=>t.column.id===e.id);if(a===r&&null!==t){let a=[...i];a.splice(r,1,{column:e,direction:t}),s(...a)}else{let n=i.slice(0,-1===a?r:Math.min(a,r));null!==t&&n.push({column:e,direction:t}),s(...n)}},[s,i]);return(0,uO.jsx)(NZ.Provider,{value:(0,uq.useMemo)(()=>({sorts:i,isSorted:i.length>0,setSortedBy:s,clearSortedBy:o,isSortedByDirty:t?.isSortedByDirty??!1,setColumnSort:c,getColumnSort:d}),[o,t?.isSortedByDirty,d,c,s,i]),children:e})});try{(nF=Bc).displayName||(nF.displayName="SortedByProvider")}catch{}let Bu=(0,uq.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=bP(),a=(0,uq.useCallback)((e,t)=>{r({type:kc.SetVerticalGroupedBy,viewNumber:e,column:t})},[r]);return(0,uO.jsx)(NM.Provider,{value:(0,uq.useMemo)(()=>({groupedByColumnId:t?.localViewStateDeserialized.verticalGroupByColumns[0]?.id,groupedByColumn:t?.localViewStateDeserialized.verticalGroupByColumns[0],setGroupedBy:a,isGroupedByDirty:t?.isVerticalGroupedByDirty??!1}),[t?.isVerticalGroupedByDirty,t?.localViewStateDeserialized.verticalGroupByColumns,a]),children:e})});try{(nZ=Bu).displayName||(nZ.displayName="VerticalGroupedByProvider")}catch{}async function Bm(e){let t=f8("memex-columns-get-api-data"),r=new URL(t.url,window.location.origin);for(let t of e.memexProjectColumnIds)r.searchParams.append("columnIds[]",`${t}`);let{data:a}=await hh(r);return a}let Bp=()=>{let{loadedFieldIdsRef:e}=j2(),t=(0,uq.useCallback)(t=>e.current.has(t),[e]);return{hasColumnData:t}},Bf=[mP.Repository],Bh=[mP.Title,mP.Assignees,mP.Status,...Bf],Bg=[...Bf],Bx=[];function By(){let{findMissingColumnIds:e}=BC(),{loadColumnsWithItemColumnValues:t}=Bk(),[r,a]=(0,uq.useState)(Bx),n=(0,uq.useCallback)(t=>{let r=e(t);a(e=>{let t=r.filter(t=>!e.includes(t));return 0===t.length?e:[...new Set([...e,...r])]})},[e]),l=(0,uq.useCallback)(async e=>{await t(e),a(Bx)},[t]),{perform:i}=b6({request:l});return(0,uq.useEffect)(()=>{r.length>0?i(r):a(Bx)},[r,e,i]),{missingFieldIds:r,addPotentiallyMissingFieldIds:n}}function Bb(){let{findFilterableFieldByName:e}=CV(),t=(0,uq.useCallback)(function(t){let r=new Set,{fieldFilters:a}=wd(t),n=t=>{let a=e(t);a&&r.add(a.id)};for(let e of a){let t=e[0],r=e[1];if(wu(t)&&(t=t.slice(1)),wc(t))for(let e of r)n(e);else n(t)}return r},[e]);return{getFieldIdsFromFilter:t}}let Bv=e=>{let{findMissingColumnIds:t}=BC(),{getFieldIdsFromFilter:r}=Bb(),{missingFieldIds:a,addPotentiallyMissingFieldIds:n}=By();return(0,uq.useEffect)(()=>{if(!e)return;let a=t(Bw(e,r));n(a)},[n,e,t,r]),a};function Bw(e,t){let{localViewStateDeserialized:{visibleFields:r,viewType:a,filter:n,verticalGroupByColumns:l,horizontalGroupByColumns:i,aggregationSettings:s,sortByColumnsAndDirections:o,sliceBy:d}}=e,c=new Set(r.map(e=>e.id).concat(a!==_z.Table?Bh:Bg));for(let e of l)e.id!==mP.Status&&c.add(e.id);for(let e of i)c.add(e.id);for(let e of s.sum)c.add(e.id);for(let e of o)c.add(e.column.id);d.field?.id&&(c.add(d.field.id),d.field.id===mP.TrackedBy&&c.add(mP.Tracks));let u=d.filter?t(d.filter):[],m=t(n);return Array.from(new Set([...c,...m,...u]))}function Bj(e,t){let{findMissingColumnIds:r}=BC(),{findColumnByDatabaseId:a}=j5(),{loadColumnsWithItemColumnValues:n}=Bk(),{perform:l}=b6({request:n});return(0,uq.useEffect)(()=>{let t=new Set(Object.values(e).map(e=>{let t=[...e.localViewState.verticalGroupBy||[],...e.localViewState.groupBy,...e.localViewState.sortBy.map(e=>e[0])];return e.localViewState.layout===_Z.Roadmap&&Fe(e.localViewState.layoutSettings.roadmap)&&t.push(...e.localViewState.layoutSettings.roadmap.dateFields.filter(L9)),t}).flat()),n=fu([...t].map(e=>a(e)?.id)),i=r(n);0!==i.length&&l(i)},[a,r,l,e]),Bv(t)}let BC=()=>{let{hasColumnData:e}=Bp(),t=(0,uq.useCallback)(t=>{let r=[...new Set(t).add(mP.Status)];return r.filter(t=>!e(t))},[e]);return{findMissingColumnIds:t}},Bk=()=>{let{updateAllColumnValues:e}=A3(),{addToast:t}=m7(),r=(0,uq.useCallback)(async r=>{if(0===r.length)return;let a=[];await Promise.allSettled(r.map(async t=>{let r=await Bm({memexProjectColumnIds:[t]});for(let t of r.memexProjectColumns){e(t);let r=t.partialFailures;r&&a.push(r.message)}})),a&&a.length>0&&t({message:a.join(", "),type:mB.warning,keepAlive:!0})},[t,e]);return{loadColumnsWithItemColumnValues:r}};function BS(e){let{getFieldIdsFromFilter:t}=Bb(),{missingFieldIds:r,addPotentiallyMissingFieldIds:a}=By(),{findColumnByDatabaseId:n}=j5(),[l,i]=(0,uq.useState)(!0);return(0,uq.useEffect)(()=>{let r=t(e.filter),s=new Set;if("number"==typeof e.xAxis.dataSource.column){let t=e.xAxis.dataSource.column,a=n(t);a?r.add(a.id):s.add(t)}if(e.xAxis.groupBy){let t=e.xAxis.groupBy.column,a=n(t);a?r.add(a.id):s.add(t)}if(e.yAxis.aggregate.columns)for(let t of e.yAxis.aggregate.columns){let e=n(t);e?r.add(e.id):s.add(t)}i(0===s.size),l&&r.size>0&&a([...r])},[a,e.filter,e.xAxis.dataSource.column,e.xAxis.groupBy,e.yAxis.aggregate.columns,n,t,i,l]),(0,uq.useMemo)(()=>({isLoading:r.length>0,isValid:l,missingFieldIds:r}),[r,l])}function BI(e,t=""){if(!e)throw Error("Must provide a view to get a url for");let r=new URLSearchParams(t),{memex_pivot_panel:a}=ho();if(e.isViewTypeDirty?r.set(yR,e.localViewStateDeserialized.viewType):r.delete(yR),e.isFilterDirty?r.set(yT,e.localViewStateDeserialized.filter):r.delete(yT),e.isSortedByDirty){let[t]=e.localViewStateDeserialized.sortByColumnsAndDirections;if(t){let{column:e,direction:a}=t;e?(r.set(y_,"desc"===a?"desc":"asc"),r.set(yN,`${e.id}`)):(r.set(y_,""),r.set(yN,""))}else r.set(y_,""),r.set(yN,"")}else r.delete(y_),r.delete(yN);if(e.isHorizontalGroupedByDirty){let[t]=e.localViewStateDeserialized.horizontalGroupByColumns;t?r.set(yE,`${t.id}`):r.set(yE,"")}else r.delete(yE);if(e.isVerticalGroupedByDirty){let[t]=e.localViewStateDeserialized.verticalGroupByColumns;t?r.set(yD,`${t.id}`):r.set(yD,"")}else r.delete(yD);if(e.isVisibleFieldsDirty){let t=e.localViewStateDeserialized.visibleFields;t.length>0?r.set(yP,JSON.stringify(t.map(e=>e.id))):r.set(yP,"")}else r.delete(yP);if(e.isAggregationSettingsDirty){let{sum:t,hideItemsCount:a}=e.localViewStateDeserialized.aggregationSettings;t.length>0?r.set(yM,JSON.stringify(t.map(e=>e.id))):r.set(yM,""),r.set(yA,JSON.stringify(!!a))}else r.delete(yM),r.delete(yA);if(a&&e.isSliceByDirty){let t=e.localViewStateDeserialized.sliceBy;t.field?r.set(yL,`${t.field.id}`):r.set(yL,"")}else r.delete(yL);if(a&&e.localViewStateDeserialized.sliceValue){let t=`${e.localViewStateDeserialized.sliceValue}`;r.set(yF,t)}else r.delete(yF);return{pathname:my.generatePath({viewNumber:e.localViewStateDeserialized.number}),search:r.toString()}}function BN(e,t){return e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}function B_(e,t){return e.length!==t.length||JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())}function BT({serverViewState:e,localViewState:t}){let r=e.layout!==t.layout,a=BN(e.groupBy,t.groupBy),n=BN(e.verticalGroupBy||[],t.verticalGroupBy||[]),l=e.sortBy.length!==t.sortBy.length||JSON.stringify(e.sortBy)!==JSON.stringify(t.sortBy),i=e.filter?.trim()!==t.filter?.trim(),s=BN(e.visibleFields,t.visibleFields),o=!!t.aggregationSettings?.hideItemsCount,d=!!e.aggregationSettings?.hideItemsCount,c=o!==d||BN(t.aggregationSettings?.sum||[],e.aggregationSettings?.sum||[]),u=BN(Fa(t.layoutSettings?.roadmap?.dateFields??[]),Fa(e.layoutSettings?.roadmap?.dateFields??[])),m=B_(t.layoutSettings?.roadmap?.markerFields??[],e.layoutSettings?.roadmap?.markerFields??[]),p=(t.layoutSettings?.roadmap?.zoomLevel||_$.Month)!==(e.layoutSettings?.roadmap?.zoomLevel||_$.Month),f=t.sliceBy?.field!==e.sliceBy?.field,h=t.sliceBy?.filter!==e.sliceBy?.filter;return{isViewTypeDirty:r,isHorizontalGroupedByDirty:a,isVerticalGroupedByDirty:n,isSortedByDirty:l,isFilterDirty:i,isVisibleFieldsDirty:s,isAggregationSettingsDirty:c,isRoadmapDateFieldsDirty:u,isRoadmapZoomLevelDirty:p,isRoadmapMarkerFieldsDirty:m,isSliceByDirty:f,isSliceByFilterDirty:h,isViewStateDirty:i||a||n||l||r||s||c||u||p||m||f||h}}var BR=r(52064);let BE=(0,LQ.Z)("sessionStorage");function BD(e){return BE.getItem(_5(e))}function BP(e,t){return BE.setItem(_5(e),t)}let BA=Symbol("effects"),BM=(e,t)=>(r,a)=>{let{[BA]:n,...l}=r,i=e(l,a);return{...i,[BA]:n.concat([()=>t(i,r,a)])}},BL=e=>{let t=e[BA];(0,uq.useEffect)(()=>{if(!t)return;let e=[];for(;t.length>0;){let r=t.shift();if(r&&"function"==typeof r){let t=r();t&&"function"==typeof t&&e.push(t)}}return()=>{for(let t of e)t&&t()}},[t])};function BF(){let{findColumnByDatabaseId:e}=j5(),{findColumn:t}=Tk();return(0,uq.useCallback)(function(r){let a;let n=fu(r.groupBy.map(t=>e(t))),l=fu((r.verticalGroupBy||[]).map(t=>e(t)));if(0===l.length){let e=t("Status");e&&l.push(e)}let i=fu(r.sortBy.map(([t,r])=>{let a=e(t);if(a&&r)return{column:a,direction:r}})),s=r.sliceBy?.field?{field:e(r.sliceBy.field),filter:r.sliceBy.filter??""}:{field:void 0,filter:""};{let t=new Set(fu(r.visibleFields.map(t=>e(t))));for(let e of i)t.add(e.column);a=Array.from(t)}let o=r.aggregationSettings?.sum??[],d=new Set(fu(o.map(t=>e(t))));return{id:r.id,number:r.number,name:r.name,filter:r.filter??"",viewType:_G(r.layout),horizontalGroupByColumns:n,verticalGroupByColumns:l,sortByColumnsAndDirections:i,visibleFields:a,createdAt:r.createdAt,updatedAt:r.updatedAt,aggregationSettings:{hideItemsCount:r.aggregationSettings?.hideItemsCount??!1,sum:Array.from(d)},layoutSettings:{...r.layoutSettings,roadmap:r.layoutSettings.roadmap?{...r.layoutSettings.roadmap,markerFields:fu((r.layoutSettings.roadmap.markerFields??[]).map(t=>e(t))),dateFields:fu((r.layoutSettings.roadmap.dateFields??[]).map(t=>t===_V?t:e(t)))}:void 0},sliceBy:s,sliceValue:r.sliceValue}},[e,t])}function BZ(){let e=yq(),t=(0,uQ.TH)(),{isProjectViewRoute:r}=kd();return(0,uq.useCallback)((a,{replace:n})=>{if(!a||!r)return;let l=BI(a,t.search);(l.pathname!==t.pathname||l.search!==t.search.slice(1))&&e(l,{replace:n})},[t.search,t.pathname,r,e])}function BO(e,t){if(e===t)return e;let r=BB(e)&&BB(t);if(r||BV(e)&&BV(t)){let a=r?e.length:Object.keys(e).length,n=r?t:Object.keys(t),l=n.length,i=r?[]:{},s=0;for(let a=0;a<l;a++){let l=r?a:n[a];i[l]=BO(e[l],t[l]),i[l]===e[l]&&s++}return a===l&&s===a?e:i}return t}function BB(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function BV(e){if(!B$(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!!(B$(r)&&Bz(r))}function B$(e){return"[object Object]"===Object.prototype.toString.call(e)}function Bz(e){return Object.prototype.hasOwnProperty.call(e,"isPrototypeOf")}let BU=(e,t)=>{if(t.type===kc.RemoveField){let r=new Set(e);return r.has(t.column.databaseId)?(r.delete(t.column.databaseId),Array.from(r)):e}return e},BW=(e,t)=>{switch(t.type){case kc.RemoveField:case kc.HideField:{let r=e.findIndex(([e])=>e!==t.column.databaseId);if(-1===r)return e;return e.filter(([e])=>e!==t.column.databaseId)}default:return e}},BH=(e,t)=>{switch(t.type){case kc.ShowField:{let r=new Set(e);if(r.has(t.column.databaseId))return e;return r.add(t.column.databaseId),Array.from(r)}case kc.RemoveField:case kc.HideField:{let r=new Set(e);if(!r.has(t.column.databaseId))return e;return r.delete(t.column.databaseId),Array.from(r)}case kc.MoveField:{let r=e.findIndex(e=>e===t.column.databaseId);if(r===t.newPosition)return e;let a=[...e];return -1!==r&&a.splice(r,1),a.splice(t.newPosition,0,t.column.databaseId),a}case kc.AddField:{let r=new Set(e);if(r.has(t.column.databaseId))return e;return r.add(t.column.databaseId),Array.from(r)}default:return e}},BG=(e,t,r)=>{let a=new Set(e);return a.has(r)?(a.delete(r),Array.from(a)):e},Bq=(e,t)=>{switch(t.type){case kc.ToggleItemsCount:return{...e,hideItemsCount:!e?.hideItemsCount};case kc.RemoveField:{if(!e)return e;let{hideItemsCount:r,...a}=e;for(let e of Object.keys(a)){let r=e;a[r]=BG(a[r]??[],r,t.column.databaseId)}return{hideItemsCount:r,...a}}case kc.RemoveFieldAggregation:{let r=e?.[t.fieldOperation]??[];return{...e,[t.fieldOperation]:BG(r,t.fieldOperation,t.column.databaseId)}}case kc.AddFieldAggregation:{let r=e?.[t.fieldOperation]??[],a=new Set(r);if(a.has(t.column.databaseId))return e;return a.add(t.column.databaseId),{...e,[t.fieldOperation]:Array.from(a)}}default:return e}},BK=(e,t)=>t.type===kc.UpdateBoardColumnLimit?e?.columnLimits?.[t.columnDatabaseId]?.[t.optionId]===t.limit?e:{...e,columnLimits:{...e?.columnLimits,[t.columnDatabaseId]:{...e?.columnLimits?.[t.columnDatabaseId],[t.optionId]:t.limit}}}:e,BQ=(e,t)=>{switch(t.type){case kc.ToggleRoadmapMarkerFields:{let r=new Set(e.roadmap?.markerFields),a=new Set(r);if(a.has(t.field.databaseId)?a.delete(t.field.databaseId):a.add(t.field.databaseId),a.size===r.size)return e;return{...e,roadmap:{...e.roadmap,markerFields:[...a]}}}case kc.SetRoadmapDateFields:return{...e,roadmap:{...e.roadmap,dateFields:t.dateFields.map(e=>"none"===e?"none":e.databaseId)}};case kc.SetRoadmapZoomLevel:return{...e,roadmap:{...e.roadmap,zoomLevel:t.zoomLevel}};case kc.UpdateBoardColumnLimit:{let r=BK(e.board,t);if(r===e.board)return e;return{...e,board:BK(e.board,t)}}case kc.SetColumnWidths:return{...e,[t.viewType]:{...e[t.viewType],columnWidths:{...t.columnWidths}}};default:return e}},BY=(e,t)=>{switch(t.type){case kc.SetFilter:if(e.filter===t.filter)return e;return{...e,filter:t.filter};case kc.SetHorizontalGroupedBy:{let r=[t.column.databaseId];if((0,CR.Z)(r,e.groupBy))return e;return{...e,groupBy:r}}case kc.SetVerticalGroupedBy:{let r=[t.column.databaseId];if((0,CR.Z)(r,e.verticalGroupBy))return e;return{...e,verticalGroupBy:r}}case kc.SetSortedBy:if((0,CR.Z)(t.sorts,e.sortBy))return e;return{...e,sortBy:t.sorts.map(({column:e,direction:t})=>[e.databaseId,t])};case kc.ClearHorizontalGroupedBy:if(0===e.groupBy.length)return e;return{...e,groupBy:[]};case kc.SetSliceBy:return{...e,sliceBy:{field:t.column.databaseId,filter:""}};case kc.ClearSliceBy:if(!e.sliceBy.field&&!e.sliceBy.filter)return e;return{...e,sliceBy:{}};case kc.SetSliceValue:return{...e,sliceValue:t.value};case kc.SetSliceByFilter:return{...e,sliceBy:{...e.sliceBy,filter:t.filter??""}};case kc.SetViewType:return{...e,layout:_q(t.viewType),layoutSettings:{...t.layoutSettings?t.layoutSettings:e.layoutSettings}};case kc.ShowField:return{...e,visibleFields:BH(e.visibleFields,t)};case kc.HideField:{let r=new Set(e.visibleFields);if(!r.has(t.column.databaseId))return e;return r.delete(t.column.databaseId),{...e,visibleFields:BH(e.visibleFields,t),groupBy:BU(e.groupBy,t),sortBy:BW(e.sortBy,t)}}case kc.ToggleField:{let r=new Set(e.visibleFields);if(r.has(t.column.databaseId))return BY(e,{type:kc.HideField,column:t.column,viewNumber:t.viewNumber});return BY(e,{type:kc.ShowField,column:t.column,viewNumber:t.viewNumber,position:t.position})}case kc.MoveField:return{...e,visibleFields:BH(e.visibleFields,t)};case kc.SaveViewName:if(e.name===t.name)return e;return{...e,name:t.name};case kc.AddField:return{...e,visibleFields:BH(e.visibleFields,t)};case kc.RemoveField:return{...e,visibleFields:BH(e.visibleFields,t),groupBy:BU(e.groupBy,t),sortBy:BW(e.sortBy,t)};case kc.UpdateView:{let r={...t.view,filter:t.view.filter??"",aggregationSettings:t.view.aggregationSettings??_O()};if((0,CR.Z)(r,e))return e;return r}case kc.ToggleItemsCount:case kc.AddFieldAggregation:case kc.RemoveFieldAggregation:{let r=Bq(e.aggregationSettings,t);if((0,CR.Z)(r,e.aggregationSettings))return e;return{...e,aggregationSettings:Bq(e.aggregationSettings,t)}}case kc.UpdateBoardColumnLimit:case kc.SetColumnWidths:case kc.ToggleRoadmapMarkerFields:case kc.SetRoadmapDateFields:case kc.SetRoadmapZoomLevel:{let r=BQ(e.layoutSettings,t);if((0,CR.Z)(r,e.layoutSettings))return e;return{...e,layoutSettings:r}}default:return e}},BX=(e,t)=>{switch(t.type){case kc.MoveField:case kc.ToggleField:case kc.HideField:case kc.ShowField:case kc.SetViewType:case kc.SetSortedBy:case kc.SetHorizontalGroupedBy:case kc.ClearHorizontalGroupedBy:case kc.SetVerticalGroupedBy:case kc.SetFilter:case kc.ToggleItemsCount:case kc.AddFieldAggregation:case kc.RemoveFieldAggregation:case kc.SetRoadmapDateFields:case kc.ToggleRoadmapMarkerFields:case kc.SetRoadmapZoomLevel:case kc.SetSliceBy:case kc.ClearSliceBy:case kc.SetSliceValue:case kc.SetSliceByFilter:case kc.SetColumnWidths:{let r=BY(e.localViewState,t);if((0,CR.Z)(r,e.localViewState))return e;return{...e,localViewState:r}}case kc.UpdateBoardColumnLimit:return{...e,localViewState:BY(e.localViewState,t),serverViewState:BY(e.serverViewState,t)};case kc.ResetViewState:{let t={id:e.serverViewState.id,name:e.serverViewState.name,number:e.serverViewState.number,serverViewState:e.serverViewState,localViewState:e.serverViewState};if((0,CR.Z)(t,e))return e;return t}case kc.RemoveField:case kc.UpdateView:case kc.AddField:return{id:e.serverViewState.id,name:e.serverViewState.name,number:e.serverViewState.number,serverViewState:BY(e.serverViewState,t),localViewState:BY(e.localViewState,t)};case kc.SaveViewName:return{id:e.serverViewState.id,name:t.name,number:e.serverViewState.number,serverViewState:BY(e.serverViewState,t),localViewState:BY(e.localViewState,t)};case kc.SetLocalViewState:if((0,CR.Z)(t.localViewState,e.localViewState))return e;return{...e,localViewState:t.localViewState};default:return e}},BJ=(e,t)=>{switch(t.type){case kc.SetViewServerStates:{let r=Object.fromEntries(t.viewStates.map(t=>{let r;let a={...t,filter:t.filter??"",aggregationSettings:t.aggregationSettings??_O()},n=e[t.number];if(!n||(0,CR.Z)(n.localViewState,n.serverViewState))r=a;else{let{layout:e}=a;if(n.localViewState.layout===e&&L4(e)){let t=L6(e,a.layoutSettings);r=Object.keys(t).length>0?L7(n.localViewState,e,t):n.localViewState}else r=n.localViewState}return[t.number,{id:t.id,number:t.number,name:t.name,localViewState:r,serverViewState:a}]}));for(let t of Object.values(e))r[t.number]||(r[t.number]={...t,isDeleted:!0});return r}case kc.UpdateView:{let r=e[t.view.number];if(!r)return e;return{...e,[t.view.number]:BX(r,t)}}case kc.AddField:case kc.SaveViewName:case kc.MoveField:case kc.ToggleField:case kc.HideField:case kc.ShowField:case kc.SetViewType:case kc.SetSortedBy:case kc.SetHorizontalGroupedBy:case kc.ClearHorizontalGroupedBy:case kc.SetVerticalGroupedBy:case kc.SetFilter:case kc.ResetViewState:case kc.ToggleItemsCount:case kc.AddFieldAggregation:case kc.RemoveFieldAggregation:case kc.SetRoadmapDateFields:case kc.ToggleRoadmapMarkerFields:case kc.SetRoadmapZoomLevel:case kc.SetSliceBy:case kc.ClearSliceBy:case kc.SetSliceValue:case kc.SetSliceByFilter:case kc.SetColumnWidths:case kc.UpdateBoardColumnLimit:{let r=e[t.viewNumber];if(!r)return e;let a=BX(r,t);if((0,CR.Z)(a,r))return e;return{...e,[t.viewNumber]:a}}case kc.AddView:{let r={...t.view,filter:t.view.filter??"",aggregationSettings:t.view.aggregationSettings??_O()};return{...e,[t.view.number]:{id:r.id,name:r.name,number:r.number,serverViewState:r,localViewState:r}}}case kc.RemoveField:return Object.entries(e).reduce((e,[r,a])=>(e[Number(r)]=BX(a,t),e),{});case kc.DeleteView:{let{[t.viewNumber]:r,...a}=e;return a}case kc.SetLocalViewState:{let r=e[t.viewNumber];if(!r)return e;let a=BX(r,t);if((0,CR.Z)(a,r))return e;return{...e,[t.viewNumber]:a}}case kc.SetViews:return t.views;default:return e}},B0=(e,t)=>{switch(t.type){case kc.AddView:return{...e,views:BJ(e.views,t),currentViewNumber:t.view.number,viewsOrder:[...e.viewsOrder||[],t.view.number]};case kc.SetViewServerStates:{let r=BJ(e.views,t);return{...e,views:r,viewsOrder:t.viewStates.map(e=>e.number)}}case kc.SetLocalViewState:case kc.RemoveField:case kc.UpdateView:case kc.AddField:case kc.SaveViewName:case kc.MoveField:case kc.ToggleField:case kc.HideField:case kc.ShowField:case kc.SetViewType:case kc.SetHorizontalGroupedBy:case kc.SetVerticalGroupedBy:case kc.SetSortedBy:case kc.ClearHorizontalGroupedBy:case kc.SetFilter:case kc.ResetViewState:case kc.ToggleItemsCount:case kc.AddFieldAggregation:case kc.RemoveFieldAggregation:case kc.SetRoadmapDateFields:case kc.ToggleRoadmapMarkerFields:case kc.SetRoadmapZoomLevel:case kc.SetSliceBy:case kc.ClearSliceBy:case kc.SetSliceValue:case kc.SetSliceByFilter:case kc.SetColumnWidths:case kc.UpdateBoardColumnLimit:{let r=e.currentViewNumber;return"currentViewNumber"in t&&void 0!==t.currentViewNumber&&(r=t.currentViewNumber),{...e,views:BJ(e.views,t),currentViewNumber:r}}case kc.SetState:return{...e,...t.state};case kc.DeleteView:{let r;let a=Object.keys(e.views).map(e=>parseInt(e,10)).indexOf(t.viewNumber),n=BJ(e.views,t),l=Object.keys(n).map(e=>parseInt(e,10));return r=l.length>a?a:a-1,{...e,views:n,currentViewNumber:l[r],viewsOrder:(e.viewsOrder??[]).filter(e=>e!==t.viewNumber)}}case kc.SetViews:return{...e,views:BJ(e.views,t),currentViewNumber:t.currentViewNumber??e.currentViewNumber};case kc.GoToViewNumber:return{...e,currentViewNumber:t.viewNumber};case kc.ReorderView:{let r=(e.viewsOrder??[]).filter(e=>e!==t.viewNumber);if(!t.prevViewNumber)return{...e,viewsOrder:[...r,t.viewNumber]};let a=r.indexOf(t.prevViewNumber);return{...e,viewsOrder:[...r.slice(0,a),t.viewNumber,...r.slice(a)]}}default:xE(t)}},B1=(e,t)=>BO(e,B0(e,t)),B2=Symbol("historyAction");function B5(e){for(let t of[my,mx])if(t.matchFullPath(e))return!0;return!1}let B3=()=>{let{findColumn:e}=Tk(),t=BF(),{getLayoutSettingsWithDefaults:r}=O5(),{memex_pivot_panel:a}=g9(),n=(0,uq.useCallback)(({initialViewData:t})=>{let n=B5(window.location.pathname)?new URLSearchParams(window.location.search):new URLSearchParams,l=n.get(yE),i=n.get(yD),s=n.get(yN),o=n.get(yT),d=n.get(yP),c=n.get(yR),u=n.get(yA),m=n.get(yM),p=n.get(yL),f=n.get(yF),h={...t,filter:t.filter??"",aggregationSettings:t.aggregationSettings||_O()},g=(0,BR.Z)(h);if(null!=l){let t=e(l);t?g.groupBy=[t.databaseId]:g.groupBy=[]}if(null!=i){let t=e(i);t?g.verticalGroupBy=[t.databaseId]:g.verticalGroupBy=[]}if(null!=s){let t=e(s);if(t){let e=n.get(y_)??"asc";g.sortBy=[[t.databaseId,"desc"===e?"desc":"asc"]]}else g.sortBy=[]}if(null!=o&&(g.filter=o),null!=d)try{let t=JSON.parse(d);if(Array.isArray(t)){let r=fu(t.map(t=>e(t)?.databaseId));g.visibleFields=r}}catch(e){}if(a&&null!=p){let t=e(p);t&&(g.sliceBy={field:t.databaseId,filter:""})}if(a&&f&&(g.sliceValue=f),c&&Object.values(_z).includes(c)){let e=c===_z.Roadmap,t=c===_z.Board||c===_z.Table;e&&g.layout!==_Z.Roadmap&&c===_z.Roadmap&&(g.layoutSettings=r(g.layoutSettings)),(t||e)&&(g.layout=_q(c))}if(g.layout===_Z.Board||g.layout===_Z.Table&&g.groupBy.length>0){if(null!=u)try{let e=JSON.parse(u);"boolean"==typeof e&&(g.aggregationSettings.hideItemsCount=e)}catch(e){}if(null!=m)try{let t=JSON.parse(m);if(Array.isArray(t)){let r=fu(t.map(t=>e(t)?.databaseId));g.aggregationSettings.sum=r}}catch(e){}}return g},[e,r,a]),l=BZ(),i=(0,uq.useCallback)(e=>({...e,localViewStateDeserialized:t(e.localViewState),...BT(e)}),[t]),s=(0,uq.useCallback)((e,{currentViewNumber:t,sessionStorageViews:r})=>{let a={};for(let l of e){let e;let i={...l,filter:l.filter??"",aggregationSettings:l.aggregationSettings||_O()};if(l.number===t)e=n({initialViewData:i});else if(r?.[l.number]){let t=r[l.number];(0,u0.Z)(t,"session view data is defined"),e={...t,aggregationSettings:t.aggregationSettings??l.aggregationSettings??{}}}else e=i;a[l.number]={id:i.id,name:i.name,number:i.number,serverViewState:i,localViewState:e}}return a},[n]),o=(0,uq.useMemo)(()=>BM(B1,(e,t,{[B2]:r})=>{let a="number"==typeof e.currentViewNumber?e.views[e.currentViewNumber]:void 0;a&&r?.navigate!==!1&&l(i(a),{replace:r?.replace})}),[i,l]),[d,c]=(0,uq.useReducer)(o,null,function(){let e=mT("memex-views")??[],t=my.matchFullPath(window.location.pathname),r=t&&t.params.viewNumber?parseInt(t.params.viewNumber,10):e[0]?.number,a=e.find(e=>e.number===r),n=s(e,{currentViewNumber:a?.number,sessionStorageViews:B7()}),l=e.map(e=>e.number);return a?{views:n,currentViewNumber:a.number,viewsOrder:l,[BA]:[]}:{views:n,currentViewNumber:void 0,viewsOrder:l,[BA]:[]}});BL(d);let u=(0,uq.useCallback)(e=>{c({type:kc.SetLocalViewState,localViewState:n({initialViewData:e}),viewNumber:e.number,currentViewNumber:e.number,[B2]:{navigate:!1}})},[n]),m=(0,uq.useCallback)((e,t)=>{c({views:s(e,{currentViewNumber:d.currentViewNumber}),currentViewNumber:t,type:kc.SetViews})},[s,d.currentViewNumber]);(0,uq.useEffect)(()=>{function e(){let e=my.matchFullPath(window.location.pathname);if(!e?.params.viewNumber){let e=Object.keys(d.views).map(e=>parseInt(e,10)),t=d.views[Math.min(...e)];t&&u(t.serverViewState);return}let t=parseInt(e.params.viewNumber,10),r=d.views[t];r?u(r.serverViewState):c({type:kc.GoToViewNumber,viewNumber:void 0,[B2]:{navigate:!1}})}return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[u,d.views]);let p=(0,uq.useMemo)(()=>{let e=(d.viewsOrder??[]).reduce((e,t,r)=>({...e,[t]:r}),{});return Object.values(d.views).map(e=>({...e,...BT(e)})).sort((t,r)=>(e[t.number]??0)-(e[r.number]??0))},[d.views,d.viewsOrder]);(0,uq.useEffect)(()=>{let e=Object.fromEntries(Object.entries(d.views).map(([e,t])=>[e,t.localViewState]));B8(e)},[d.views]);let f=null!=d.currentViewNumber?d.views[d.currentViewNumber]:void 0,h=(0,uq.useMemo)(()=>{if(f)return i(f)},[f,i]);return{currentView:h,viewsMap:d.views,views:p,viewStateDispatch:c,setViews:m}};function B4(e){for(let t of Object.values(e))try{_G(t.layout)}catch(e){if(e instanceof EnumValueError)return!1}return!0}let B6="memex-views";function B7(){let e=BD(B6);if(!e)return null;let t=JSON.parse(e);return B4(t)?t:null}function B8(e){return BP(B6,JSON.stringify(e))}function B9({children:e}){let t=yq(),{postStats:r}=bM(),{currentView:a,views:n,viewsMap:l,viewStateDispatch:i}=B3(),{hasWritePermissions:s}=yI(),o=Bj(n,a),d=(0,uq.useCallback)((e,t)=>{i({type:kc.ReorderView,viewNumber:e,prevViewNumber:t})},[i]),c=(0,uq.useCallback)((e,t)=>{i({type:kc.GoToViewNumber,viewNumber:e}),t&&r({name:"view_open",memexProjectViewNumber:e,...t})},[r,i]),u=(0,uq.useCallback)(e=>{i({type:kc.AddView,view:e})},[i]),m=(0,uq.useCallback)(e=>{i({type:kc.UpdateView,view:e})},[i]),p=(0,uq.useCallback)(e=>{i({type:kc.DeleteView,viewNumber:e})},[i]),f=(0,uq.useCallback)(e=>{i({type:kc.SetViewServerStates,viewStates:e})},[i]),h=M6({setCurrentViewNumber:c,addView:u,updateView:m,deleteView:p}),g=(0,uq.useCallback)((e,t)=>{if("loading"===h.status.current.status)return;let n=h.perform({view:e});return r({name:"view_create",memexProjectViewNumber:a?.number,context:e.layout?_G(e.layout):_z.Table,...t}),n},[h,a?.number,r]),x=M8({setCurrentViewNumber:c,addView:u,updateView:m,deleteView:p}),y=M9({setCurrentViewNumber:c,addView:u,updateView:m,deleteView:p}),b=M7(),v=(0,uq.useCallback)((e,t)=>{i({type:kc.ResetViewState,viewNumber:e}),t&&r({name:"view_reset",memexProjectViewNumber:e,...t})},[r,i]),w=(0,uq.useCallback)(e=>{a&&a.isDeleted?p(a.number):a&&v(a.number),c(e)},[p,v,c,a]),j=M6({setCurrentViewNumber:w,addView:u,updateView:m,deleteView:p}),C=(0,uq.useCallback)(async(e,t,a)=>{let n=l[e];if(n&&!n.isDeleted&&t!==n.name){let l=ht(n.serverViewState,_B);await b.perform({viewNumber:n.number,view:{...l,name:t,filter:n.serverViewState.filter??""}}),r({name:"view_rename",memexProjectViewNumber:e,...a}),"succeeded"===b.status.current.status&&i({type:kc.SaveViewName,viewNumber:e,name:t})}},[l,b,i,r]),k=(0,uq.useCallback)(async(e,t)=>{let a=l[e];if(!a||a.isDeleted)return;let n=ht(a.localViewState,_B),i=x.perform({viewNumber:e,view:n});r({name:"view_save",memexProjectViewNumber:e,...t}),await i},[l,x,r]),S=(0,uq.useCallback)(async(e,t,a)=>{let n=l[e];if(!n)throw Error("No view found");if(Object.keys(l).length>42)return;let i=BT(n),s=ht(n.localViewState,[..._B,"name"]);return r(i.isViewStateDirty?{name:"view_save_as_new",memexProjectViewNumber:e,...a}:{name:"view_duplicate",memexProjectViewNumber:e,...a}),j.perform({view:{...s,name:t}})},[l,j,r]),I=(0,f6.N)(),N=(0,uq.useCallback)(async(e,t,a)=>{let n=await I({title:"Delete view?",content:"Are you sure you want to delete this view?",confirmButtonContent:"Delete",confirmButtonType:"danger"}),i=l[e];if(n){if(i?.isDeleted){p(e),a?.();return}await y.perform({viewNumber:e}),r({name:"view_delete",memexProjectViewNumber:e,...t}),a?.()}},[I,l,y,r,p]),{isProjectViewRoute:_}=kd(),T=(0,uq.useCallback)(async(e,t,r,a)=>{let n=l[e];if(!n||n.isDeleted)return;let i=ht(n.serverViewState,_B);d(e,r);try{await b.perform({viewNumber:e,view:{...i,previousMemexProjectViewId:t}})}catch(t){d(e,a)}},[l,b,d]),R=m1(a);(0,uq.useEffect)(function(){if(_)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){let{current:t}=R;t&&t.isViewStateDirty&&!t.isDeleted&&kE(e)===k_.META_S&&(e.preventDefault(),k(t.number,{ui:"keyboard shortcut"}))}},[R,_,k]),mm(()=>{if(!a)return null;let e=[];return(_&&a.isViewStateDirty&&!a.isDeleted&&(s&&e.push(["s","Save view","views_save",()=>k(a.number,{ui:hZ})]),e.push(["r","Reset view","views_reset",()=>v(a.number,{ui:hZ})])),n.length>1&&(_&&s&&e.push(["d","Delete view","views_delete",()=>N(a.number,{ui:hZ})]),e.push(["g","Go to view...",n.reduce((e,r,n)=>(_&&r.number===a.number||e.push([`${n}`,`Go to ${r.name}`,"views_change",()=>{c(r.number,{ui:hZ}),_||t(my.generatePath({viewNumber:r.number}))}]),e),[])])),_&&n.length<42&&s&&(e.push(["n","New view","views_create",()=>g({},{ui:hZ})]),e.push(["c",fE.duplicateView({isDirty:a.isViewStateDirty}),"views_duplicate",()=>S(a.number,void 0,{ui:hZ})])),0===e.length)?null:["v","View options...",e]},[g,a,N,S,s,_,t,v,k,c,n]);let{getFieldIdsFromFilter:E}=Bb(),D=(0,uq.useMemo)(()=>{if(!a)return!0;if(0===o.length)return!1;let e=E(a.localViewStateDeserialized.filter),t=o.some(t=>e.has(t)),r=Boolean(o.find(e=>a.localViewStateDeserialized.horizontalGroupByColumns.some(t=>t.id===e))),n=Boolean(o.find(e=>a.localViewStateDeserialized.verticalGroupByColumns.some(t=>t.id===e&&t.id!==mP.Status))),l=Boolean(o.find(e=>a.localViewStateDeserialized.sortByColumnsAndDirections.some(t=>t.column.id===e)));return t||r||l||n},[a,E,o]),P=(0,uq.useMemo)(()=>a?BI(a):mx.generatePath(),[a]);return(0,uO.jsx)(bD.Provider,{value:(0,uq.useMemo)(()=>({views:n,viewsMap:l,viewStateDispatch:i,createView:h,currentView:a,duplicateCurrentViewState:S,setCurrentViewNumber:c,updateView:x,updateViewPriority:T,saveCurrentViewState:k,destroyView:y,isViewStateDirty:a?.isViewStateDirty??!1,resetViewState:v,createNewDefaultView:g,destroyCurrentView:N,renameView:C,missingRequiredColumnData:D,returnToViewLinkTo:P,updateViewServerStates:f}),[g,h,a,N,y,S,C,v,k,c,x,T,i,n,l,D,P,f]),children:e})}try{(nO=B9).displayName||(nO.displayName="ViewProvider")}catch{}let Ve=(0,uq.memo)(function({children:e}){let{viewStateDispatch:t,currentView:r}=bP(),{getNextLayoutSettings:a}=O5(),{postStats:n}=bM(),l=(0,uq.useCallback)((e,r,l)=>{t({type:kc.SetViewType,viewType:r,viewNumber:e.number,layoutSettings:a(_q(r),e)}),n({name:hB,ui:l,context:r})},[n,t,a]),{isProjectViewRoute:i}=kd();return mm(()=>{if(!i||!r)return null;let e={[_z.Table]:["t","Switch layout: Table","view.table",()=>l(r,_z.Table,"command palette")],[_z.Board]:["b","Switch layout: Board","view.board",()=>l(r,_z.Board,"command palette")],[_z.Roadmap]:["r","Switch layout: Roadmap","view.roadmap",()=>l(r,_z.Roadmap,"command palette")],[_z.List]:null},t=Object.entries(e).reduce((e,[t,a])=>(t!==r.localViewStateDeserialized.viewType&&null!==a&&e.push(a),e),[]);return["y","Switch layout...",t]},[r,i,l]),(0,uO.jsx)(_Q.Provider,{value:(0,uq.useMemo)(()=>({isViewTypeDirty:r?.isViewTypeDirty??!1,setViewType:l,viewType:r?.localViewStateDeserialized.viewType??_z.Table}),[r?.isViewTypeDirty,r?.localViewStateDeserialized.viewType,l]),children:e})});try{(nB=Ve).displayName||(nB.displayName="ViewTypeProvider")}catch{}async function Vt(e){let t=f8("memex-column-delete-api-data");await hh(t.url,{method:"DELETE",body:e,token:t.token})}let Vr=()=>{let{setAllColumns:e,allColumnsRef:t}=j2(),{findColumn:r}=Tk(),a=(0,uq.useCallback)(async a=>{let n=r(a);if(n&&n.userDefined){let r=t.current.filter(e=>e.id!==n.id);e(r),ID(),await Vt({memexProjectColumnId:n.id})}},[t,e,r]);return{destroyColumn:a}},Va=(0,uq.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=bP(),{postStats:a}=bM(),{destroyColumn:n}=Vr(),l=(0,uq.useCallback)(e=>(r({type:kc.RemoveField,column:e}),n(e.id.toString())),[n,r]),i=(0,uq.useCallback)((e,t)=>{r({type:kc.ShowField,viewNumber:e,column:t})},[r]),s=(0,uq.useCallback)((e,t)=>{r({type:kc.HideField,viewNumber:e,column:t})},[r]),o=(0,uq.useCallback)(e=>!!t&&Boolean(t.localViewStateDeserialized.visibleFields.find(t=>t.id===e.id)),[t]),d=(0,uq.useCallback)((e,t,n,l=hL)=>{a({name:o(t)?hF:"field_show",ui:l,memexProjectColumnId:t.id}),r({type:kc.ToggleField,viewNumber:e,column:t,position:n})},[o,a,r]),c=(0,uq.useCallback)((e,t,n,l=hL)=>{a({name:"field_move",context:`position: ${n}`,memexProjectColumnId:t.id,ui:l}),r({type:kc.MoveField,viewNumber:e,column:t,newPosition:n})},[r,a]);return(0,uO.jsx)(ZO.Provider,{value:(0,uq.useMemo)(()=>({visibleFields:t?.localViewStateDeserialized.visibleFields??[],isVisibleFieldsDirty:t?.isVisibleFieldsDirty??!1,isFieldVisible:o,showField:i,hideField:s,moveField:c,toggleField:d,removeField:l}),[t?.isVisibleFieldsDirty,t?.localViewStateDeserialized.visibleFields,s,o,c,l,i,d]),children:e})});try{(nV=Va).displayName||(nV.displayName="VisibleFieldsProvider")}catch{}let Vn=(0,uq.memo)(function({children:e}){return(0,uO.jsx)(B9,{children:(0,uO.jsx)(Ve,{children:(0,uO.jsx)(kf,{config:ku,children:(0,uO.jsx)(Va,{children:(0,uO.jsx)(Bi,{children:(0,uO.jsx)(L5,{children:(0,uO.jsx)(Bu,{children:(0,uO.jsx)(Bc,{children:(0,uO.jsx)(Lq,{children:(0,uO.jsx)(Be,{children:(0,uO.jsx)(Ba,{children:(0,uO.jsx)(bK,{children:e})})})})})})})})})})})})});try{(n$=Vn).displayName||(n$.displayName="ViewsProvider")}catch{}let Vl={ADMIN:"ADMIN",WRITE:"WRITE",DEFAULT:"DEFAULT"},Vi=(e=Vl.DEFAULT)=>{let{hasAdminPermissions:t,hasWritePermissions:r}=yI();switch(e){case Vl.ADMIN:return t;case Vl.WRITE:return r;case Vl.DEFAULT:return t||r}};function Vs(e,t){return e?t:null}function Vo(e){let{isDotcomRuntime:t}=yk();return Vs(t,e)}function Vd(e){let{memex_automation_enabled:t}=ho();return Vs(t,e)}function Vc(e,t){return Vs(Vi(e),t)}function Vu(e){return Vc(Vl.DEFAULT,e)}function Vm(e){return Vc(Vl.ADMIN,e)}async function Vp(e){let t=f9("memex-item-unarchive-api-data"),{memex_skip_json_parsing_if_invalid_response_and_content_found:r}=ho(),{data:a}=await hx(t.url,{method:"PUT",body:e},r);return a}let Vf=(0,uq.createContext)(null),Vh=(0,uq.createContext)(null),Vg=(0,uq.createContext)(null),Vx=(0,uq.createContext)(null),Vy=(0,uq.createContext)(null);async function Vb(e){let t=f9("memex-archived-items-get-api-data"),r=new URL(t.url,window.location.origin);void 0!==e.perPage&&r.searchParams.set("per_page",e.perPage.toString()),e.visibleFields&&r.searchParams.set(yP,JSON.stringify(e.visibleFields));let{data:a}=await hh(r);return a}function Vv({initialFields:e}){let[t,r]=(0,uq.useState)(new Set(e)),[a,n]=(0,uq.useState)(new Set),{getFieldIdsFromFilter:l}=Bb(),i=(0,uq.useCallback)(e=>{let a=Array.from(l(e)),n=a.filter(e=>!t.has(e));n.length>0&&r(e=>new Set([...Array.from(e),...n]))},[l,t]),s=(0,uq.useCallback)(e=>{n(t=>new Set([...Array.from(t),...e]))},[]),o=(0,uq.useMemo)(()=>(0,CR.Z)(t,a),[t,a]),d=(0,uq.useMemo)(()=>Array.from(a),[a]),c=(0,uq.useMemo)(()=>Array.from(t),[t]);return(0,uq.useMemo)(()=>({loadedFields:d,requiredFields:c,addRequiredFieldsFromFilter:i,markFieldsAsLoaded:s,hasAllFieldsLoaded:o}),[i,o,d,s,c])}function Vw({filter:e}){let t=je(()=>new Map),[r,a]=(0,uq.useState)("idle"),[n,l]=(0,uq.useState)(null),[i,s]=(0,uq.useState)(!1),o=(0,uW.NL)(),{requiredFields:d,hasAllFieldsLoaded:c,addRequiredFieldsFromFilter:u,markFieldsAsLoaded:m}=Vv({initialFields:[mP.Title]}),p=(0,uq.useCallback)(async e=>{try{a("loading");let{memexProjectItems:r,totalCount:n}=await Vb({visibleFields:e,perPage:i?1e4:500});for(let i of(m(e),l({archivedItems:r.map(e=>y2(e)),totalCount:n}),a("idle"),r))t.current.set(i.id,i)}catch(e){a("error")}},[t,i,m]),f=(0,uq.useCallback)(async()=>{try{s(!1),a("loading");let{memexProjectItems:e,totalCount:r}=await Vb({visibleFields:d,perPage:1e4}),n=e.map(e=>y2(e));for(let i of(l({archivedItems:n,totalCount:r}),a("idle"),s(!0),e))t.current.set(i.id,i);return n}catch(e){a("error")}},[t,d]),h=(0,uq.useCallback)(e=>{for(let r of e){let e=t.current.get(r);if(e){let{archived:t,...r}=e;bb(o,y2(r))}t.current.delete(r)}l(t=>t?.archivedItems&&t.totalCount?{...t,totalCount:t.totalCount-e.length,archivedItems:t.archivedItems.filter(t=>!e.includes(t.id))}:t)},[t,o]),g=(0,uq.useCallback)(e=>{bC(o,e.map(e=>e.id)),l(t=>t?.archivedItems&&t.totalCount?{...t,totalCount:t.totalCount+e.length,archivedItems:[...e,...t.archivedItems].sort((e,t)=>DQ({id:e.id,archivedAt:e.archived.archivedAt},{id:t.id,archivedAt:t.archived.archivedAt}))}:t)},[o]);return(0,uq.useEffect)(()=>{c||"idle"!==r||p(d)},[c,p,d,r]),(0,uq.useEffect)(()=>{u(e)},[u,e]),{state:n,status:r,optimisticRemoveItems:h,optimisticRollbackRemoveItems:g,loadAllItemsStatus:r,loadAllItems:f}}function Vj({children:e}){let[t,r]=(0,uq.useState)([]),{itemMatchesFilterQuery:a}=ks(),[n,l]=(0,uq.useState)(""),i=Iy(n.trim()),{state:s,optimisticRemoveItems:o,optimisticRollbackRemoveItems:d,loadAllItems:c,loadAllItemsStatus:u}=Vw({filter:i}),m=(0,uq.useCallback)(()=>{r([])},[]),p=(0,uq.useCallback)(e=>{let a=t.some(t=>t.id===e);if(a)r(t.filter(t=>t.id!==e));else{let t=s?.archivedItems?.find(t=>t.id===e);if(t?.contentType===mA.RedactedItem)return;t&&r(e=>[...e,t])}},[s?.archivedItems,t]),f=(0,uq.useCallback)(e=>{r(V_(e))},[]),h=(0,uq.useCallback)(e=>{let a=V_(e),n=t.length===a.length;n?r([]):r(a)},[t.length]),g=(0,uq.useMemo)(()=>new Set(t.map(e=>e.id)),[t]),x=(0,uq.useCallback)(e=>g.has(e),[g]),y=(0,uq.useCallback)(e=>{o(e),r(t=>t.filter(t=>!e.includes(t.id)))},[o]),{openRemoveConfirmationDialog:b}=D7(void 0,y),v=(0,uq.useCallback)(()=>{b(t.map(e=>e.id),"archive page bulk action menu")},[b,t]),w=(0,uq.useCallback)((e,t)=>{b(e,t)},[b]),j=(0,uq.useCallback)(async e=>{let t=new Set(e.map(e=>e.id));o(Array.from(t)),r(e=>e.filter(e=>!t.has(e.id))),await Vp({memexProjectItemIds:Array.from(t)})},[o]),C=(0,uq.useCallback)(async e=>{d(e)},[d]),k=b6({request:j,rollback:C}),S=(0,uq.useMemo)(()=>i?s?.archivedItems?.filter(e=>a(e,wD(i)))??[]:s?.archivedItems??[],[i,s?.archivedItems,a]),I=(0,uq.useMemo)(()=>V_(S),[S]);return(0,uq.useEffect)(()=>{i&&m()},[m,i]),(0,uO.jsx)(Vf.Provider,{value:(0,uq.useMemo)(()=>({archivedItems:s?.archivedItems,totalCount:s?.totalCount,loaded:null!==s,filteredItems:S,loadAllItemsStatus:u,loadAllItems:c}),[S,c,u,s]),children:(0,uO.jsx)(Vh.Provider,{value:(0,uq.useMemo)(()=>({filteredItems:S,filterValue:n,deferredFilterValue:i,setFilterValue:l}),[i,n,S,l]),children:(0,uO.jsx)(Vy.Provider,{value:(0,uq.useMemo)(()=>({selectedItems:t,selectableItems:I,selectItem:p,selectAllItems:f,toggleSelectAllItems:h,isSelected:x,clearSelectedItems:m}),[m,x,f,p,I,t,h]),children:(0,uO.jsx)(Vg.Provider,{value:(0,uq.useMemo)(()=>({restoreItemsRequest:k}),[k]),children:(0,uO.jsx)(Vx.Provider,{value:(0,uq.useMemo)(()=>({removeAllSelectedItems:v,removeItems:w}),[v,w]),children:e})})})})})}let VC=()=>{let e=(0,uq.useContext)(Vf);if(null===e)throw Error("useArchiveItems must be used within an ArchivedItemsContext");return e},Vk=()=>{let e=(0,uq.useContext)(Vg);if(null===e)throw Error("useRestoreArchiveItems must be used within an RestoreArchiveItemsContext");return e},VS=()=>{let e=(0,uq.useContext)(Vy);if(null===e)throw Error("useSelectArchiveItems must be used within an SelectArchiveItemsContext");return e},VI=()=>{let e=(0,uq.useContext)(Vx);if(null===e)throw Error("useRemoveArchiveItems must be used within an RemoveArchiveItemsContext");return e},VN=()=>{let e=(0,uq.useContext)(Vh);if(null===e)throw Error("useFilterArchiveItems must be used within an FilterArchiveItemsContext");return e},V_=e=>e.filter(e=>e.contentType!==mA.RedactedItem);try{(nz=Vj).displayName||(nz.displayName="ArchivedItemsProvider")}catch{}function VT({children:e}){return(0,uO.jsx)(mF.Z,{sx:{marginTop:3,bg:"canvas.subtle",border:"1px solid",borderColor:"border.default",borderTopLeftRadius:6,borderTopRightRadius:6},children:(0,uO.jsx)(mF.Z,{sx:{p:2,pl:4,pr:3,display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"50px"},children:e})})}try{(nU=VT).displayName||(nU.displayName="ArchiveHeaderWrapper")}catch{}function VR({projectItemLimit:e,canBulkRestore:t}){let{hasWritePermissions:r}=yI(),{archivedItems:a,loaded:n,loadAllItemsStatus:l,loadAllItems:i,totalCount:s}=VC(),{selectedItems:o,selectableItems:d,selectAllItems:c,toggleSelectAllItems:u}=VS(),{removeAllSelectedItems:m}=VI(),{restoreItemsRequest:p}=Vk(),{deferredFilterValue:f}=VN(),{itemMatchesFilterQuery:h}=ks(),{setArchiveStatus:g}=vh(),x=(0,uq.useCallback)(async()=>{await p.perform(o,o),g()},[p,o,g]),y=(0,uq.useCallback)(()=>{u(d)},[u,d]),b=o.length===d.length&&d.length>0,v=0===o.length,w=o.length>0,j=!!a&&a.length>0,C=!!a&&!!s&&s>a.length,{primaryText:k,secondaryText:S,loadAllText:I,loadAllAction:N}=(0,uq.useMemo)(()=>{let e="loaded"===l||!C;return a&&s?e||w||f?!e&&w?{primaryText:`${o.length.toLocaleString()} selected`,secondaryText:"Only selecting results from most recently archived",loadAllText:"Select all",loadAllAction:async()=>{let e=await i();e&&c(e.filter(e=>h(e,wD(f))))}}:!e&&Boolean(f)?{primaryText:`${d.length.toLocaleString()} archived ${1===d.length?"item":"items"}`,secondaryText:"Only filtering on most recently archived",loadAllText:"Filter on all",loadAllAction:i}:e&&Boolean(f)?{primaryText:`${d.length.toLocaleString()} archived ${1===d.length?"item":"items"}`}:e&&w?{primaryText:`${o.length.toLocaleString()} selected`}:{primaryText:`${s.toLocaleString()} archived ${1===s?"item":"items"}`}:{primaryText:"Most recently archived",secondaryText:`of ${s.toLocaleString()} archived items`,loadAllText:"Show all",loadAllAction:i}:{primaryText:"0 archived items"}},[l,C,a,s,w,f,i,o.length,c,h,d.length]),_="loading"===l;return(0,uO.jsxs)(VT,{children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(mF.Z,{children:j?(0,uO.jsx)(w6.Z,{sx:{mr:3},onChange:y,"aria-label":"Toggle select all items",disabled:_||!r,...b||v?{checked:b}:{indeterminate:!0}}):null}),(0,uO.jsxs)(mF.Z,{children:[k?(0,uO.jsx)(mO.Z,{sx:{fontWeight:"bold"},children:k}):null,n&&j?(0,uO.jsxs)(mF.Z,{children:[S?(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted",mr:2},children:S}):null,I?(0,uO.jsx)(w3.Z,{as:"button",onClick:N,disabled:_,sx:{color:_?"primer.fg.disabled":void 0,"&&":{cursor:_?"default":"pointer"}},children:I}):null]}):null]})]}),n&&"loading"===l?(0,uO.jsx)(w4.Z,{size:"small"}):w?(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,uO.jsx)(jI.z,{leadingIcon:mM.XHJ,variant:"danger",size:"small",onClick:m,children:"Delete from project"}),(0,uO.jsx)(jI.z,{size:"small",onClick:x,disabled:!t,children:t?"Restore":(0,uO.jsx)(kK.Z,{"aria-label":`This will exceed the ${e} project item limit`,children:"Restore unavailable"})})]}):null]})}try{(nW=VR).displayName||(nW.displayName="ArchiveHeader")}catch{}let VE={Found:"found",Empty:"empty",Loading:"loading"};function VD(e){return{state:VE.Found,value:e}}let VP={state:VE.Loading},VA={state:VE.Empty};function VM(e){return"loading"===e.state}function VL(e){return"empty"===e.state}function VF(e){return"found"===e.state}let VZ=(0,uq.memo)(function({titleColumn:e}){if(!VF(e)||!e)return null;switch(e.value.contentType){case mA.RedactedItem:return(0,uO.jsx)(mM.mBM,{"aria-label":"Redacted item"});case mA.DraftIssue:return(0,uO.jsx)(mL.Z,{icon:mM.aNF,sx:{color:"fg.muted"},"aria-label":"Draft issue"});case mA.Issue:case mA.PullRequest:return(0,uO.jsx)(jg,{title:e.value});default:xE(e.value)}});try{(nH=VZ).displayName||(nH.displayName="MemexItemIcon")}catch{}var VO=r(70697);let VB={color:"fg.default",overflow:"hidden",textAlign:"left",whiteSpace:"nowrap",textDecoration:"none",textOverflow:"ellipsis","&.is-disabled":{color:"fg.muted"},"&:hover":{color:"accent.fg"}};function VV({model:e,currentValue:t,isDisabled:r,openPane:a,onHover:n}){let l=(0,uq.useRef)(null),{safeSetTimeout:i,safeClearTimeout:s}=(0,VO.Z)(),o=(0,uq.useRef)(void 0);IC(l);let d=(0,uq.useCallback)(t=>{!a||e instanceof RedactedItemModel||t.currentTarget instanceof Element&&"A"===t.currentTarget.tagName&&(t.metaKey||t.ctrlKey)||(a(e),t.preventDefault(),t.stopPropagation())},[e,a]),c=VF(t)?p3(t.value):"",u=(0,uq.useCallback)(()=>{o.current=n?i(()=>{n()},10):void 0},[n,i]);switch(e.contentType){case mA.RedactedItem:return(0,uO.jsx)(PN,{ref:l,isDisabled:r,children:c});case mA.DraftIssue:return(0,uO.jsx)(PN,{ref:l,sx:{"&:hover":{color:"accent.fg",cursor:"pointer",textDecoration:"underline"}},dangerousHtml:c,onClick:d,isDisabled:r});case mA.PullRequest:case mA.Issue:return(0,uO.jsx)(w3.Z,{sx:VB,ref:l,onMouseEnter:u,onMouseLeave:()=>o.current&&s(o.current),target:"_blank",rel:"noreferrer",href:e.content.url,className:r?"is-disabled":void 0,onClick:e.contentType===mA.Issue?d:void 0,tabIndex:-1,children:(0,uO.jsx)(jc,{children:c})});default:xE(e)}}try{(nG=VV).displayName||(nG.displayName="InteractiveItemTitle")}catch{}let V$=(0,uq.memo)(function({archivedItem:e,columnData:t,canRestore:r,projectItemLimit:a}){let{hasWritePermissions:n}=yI(),{restoreItemsRequest:l}=Vk(),{setArchiveStatus:i}=vh(),s=(0,uq.useCallback)(async()=>{let t=[e];await l.perform(t,t),i()},[e,l,i]),{selectItem:o,isSelected:d}=VS(),c=(0,uq.useCallback)(()=>{o(e.id)},[e,o]),{removeItems:u}=VI(),m=(0,uq.useCallback)(()=>{u([e.id],"archive page row action menu")},[e.id,u]),p=`item-title-${e.id}`,f=t.Title,h=f?VD(f):VA,g=p4(f),x=e.contentType===mA.RedactedItem,y=x||!n;return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mF.Z,{as:"label",sx:{pl:4,pt:2},children:(0,uO.jsx)(w6.Z,{sx:{alignSelf:"start"},"aria-labelledby":p,checked:!y&&d(e.id),onChange:y?void 0:c,disabled:y})}),(0,uO.jsx)(mF.Z,{sx:{pt:2,pl:3},children:(0,uO.jsx)(VZ,{titleColumn:h})}),(0,uO.jsxs)(mF.Z,{sx:{p:2,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[(0,uO.jsxs)(mF.Z,{id:p,sx:{display:"flex",alignItems:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[(0,uO.jsx)(VV,{model:e,currentValue:h}),pG(g)&&(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,ml:2,display:"flex"},children:(0,uO.jsxs)(mO.Z,{sx:{color:"fg.muted"},children:[" #",g]})})]}),(0,uO.jsxs)(mF.Z,{sx:{color:"fg.muted",fontSize:0},children:["archived ",(0,uO.jsx)(EM.Z,{datetime:e.archived.archivedAt}),!x&&e.archived?.archivedBy?(0,uO.jsxs)(uO.Fragment,{children:[" by ",(0,uO.jsx)(mO.Z,{as:"span",sx:{color:"fg.default"},children:e.archived.archivedBy.login})]}):null]})]}),(0,uO.jsx)(mF.Z,{sx:{display:"flex",alignItems:"center",mr:3},children:y?null:(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsx)(kF.h,{icon:mM.Ui8,variant:"invisible","aria-label":"Open item actions",sx:{color:"fg.default"}})}),(0,uO.jsx)(In.P.Overlay,{children:(0,uO.jsxs)(Ia.S,{children:[(0,uO.jsxs)(Ia.S.Item,{onSelect:s,disabled:!r,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.F_y,{})}),r?"Restore":(0,uO.jsxs)(uO.Fragment,{children:["Restore unavailable",(0,uO.jsxs)(Ia.S.Description,{variant:"block",children:["This will exceed the ",a," project item limit"]})]})]}),(0,uO.jsxs)(Ia.S.Item,{onSelect:m,variant:"danger",children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete from project"]})]})})]})})]})});try{(nq=V$).displayName||(nq.displayName="ArchiveItem")}catch{}let Vz=(0,uq.memo)(function(){return(0,uO.jsxs)(w7,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:[(0,uO.jsx)(mL.Z,{icon:mM.rKT,size:30,sx:{color:"fg.muted"}}),(0,uO.jsx)(mO.Z,{as:"h2",children:"There aren't any archived items"}),(0,uO.jsx)(mO.Z,{as:"p",sx:{color:"fg.muted"},children:"Archive items from a project view and they'll be shown here."})]})}),VU=(0,uq.memo)(function(){return(0,uO.jsxs)(w7,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:[(0,uO.jsx)(mL.Z,{icon:mM.rKT,size:30,sx:{color:"fg.muted"}}),(0,uO.jsx)(mO.Z,{as:"h2",children:"No results matched your filter"})]})}),VW=(0,uq.memo)(function(){return(0,uO.jsx)(w7,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:(0,uO.jsx)(w4.Z,{})})});try{(nK=Vz).displayName||(nK.displayName="NoArchivedItems")}catch{}try{(nQ=VU).displayName||(nQ.displayName="NoFilteredItems")}catch{}try{(nY=VW).displayName||(nY.displayName="Loader")}catch{}let VH={borderBottom:"1px solid",borderColor:"border.default","&:last-child":{borderBottom:"none"},display:"grid",gridTemplateColumns:"auto auto 1fr auto",flexShrink:0},VG=(0,uq.memo)(function({children:e}){let t=(0,uq.useRef)(null),{isVisible:r,size:a}=ja({ref:t});return(0,uO.jsx)(mF.Z,{style:(0,uq.useMemo)(()=>({height:r?"unset":a,flexShrink:0}),[r,a]),ref:t,as:"li",sx:VH,children:r?e:null})});try{(nX=VG).displayName||(nX.displayName="ArchiveListItem")}catch{}let Vq={listStyleType:"none",display:"flex",flexDirection:"column",border:"1px solid",borderTop:0,borderColor:"border.default",borderRadius:6,borderTopRightRadius:0,borderTopLeftRadius:0,contentVisibility:"auto",m:0},VK=(0,uq.memo)(function({filteredItems:e,loaded:t,hasArchive:r,renderItem:a,sx:n}){return(0,uO.jsx)(mF.Z,{as:"ul",sx:{...Vq,...n},...(0,mp.f)("archived-item-list"),children:t?r?0===e.length?(0,uO.jsx)("li",{children:(0,uO.jsx)(VU,{})}):(0,uO.jsx)(jr,{rootRef:null,sizeEstimate:55,children:e.map(e=>(0,uO.jsx)(VG,{children:a(e)},e.id))}):(0,uO.jsx)("li",{children:(0,uO.jsx)(Vz,{})}):(0,uO.jsx)(mF.Z,{as:"li",...(0,mp.f)("archived-item-loader"),children:(0,uO.jsx)(VW,{})})})});try{(nJ=VK).displayName||(nJ.displayName="ArchiveList")}catch{}let VQ=[];function VY(){let{archivedItems:e,loaded:t}=VC(),{filterValue:r,setFilterValue:a,filteredItems:n}=VN(),{selectedItems:l}=VS(),{items:i}=bt(),s=yk().projectLimits.projectItemLimit,o=l.length+i.length>s,d=i.length+1>s,c=(0,uq.useCallback)(e=>(0,uO.jsx)(V$,{archivedItem:e,columnData:e.columns,canRestore:!d,projectItemLimit:s}),[s,d]),u=(0,uq.useMemo)(()=>({items:e??VQ}),[e]),m=(0,uq.useRef)(null);return(0,uO.jsx)(Ro.X,{sx:{pt:4},containerWidth:"large",rowGap:"condensed",children:(0,uO.jsxs)(Ro.X.Content,{children:[(0,uO.jsxs)(mF.Z,{sx:{position:"sticky",top:-2,pt:5,mt:-5,backgroundColor:"canvas.default",zIndex:1},children:[(0,uO.jsx)(kv.Provider,{value:u,children:(0,uO.jsx)(SE,{inputRef:m,height:40,value:r,onChange:(0,uq.useCallback)(e=>a(e.target.value),[a]),onClearButtonClick:(0,uq.useCallback)(()=>{a("")},[a]),filterCount:r.trim()?n.length:void 0,setValueFromSuggestion:a,hideSaveButton:!0,hideResetChangesButton:!0})}),(0,uO.jsx)(VR,{projectItemLimit:s,canBulkRestore:!o})]}),(0,uO.jsx)(VK,{filteredItems:n,loaded:t,hasArchive:!!e&&e.length>0,renderItem:c})]})})}try{(n0=VY).displayName||(n0.displayName="ArchiveView")}catch{}async function VX(e={}){let t=f8("memex-paginated-archived-items-get-api-data"),r=new URL(t.url,window.location.origin);e.after&&r.searchParams.set("after",e.after),e.q&&r.searchParams.set("q",e.q);let{data:a}=await hh(r);return a}let VJ=(0,yJ.r)({primaryKey:"archivedItems",queryFn:async({queryKey:[e,{after:t,q:r}]})=>VX({after:t,q:r}),keepPreviousData:!0,staleTime:6e4,refetchOnMount:"always"}),V0=e=>{let{nodes:t,...r}=e;return{...r,itemModels:e.nodes.map(e=>y2(e))}},V1=(e={})=>VJ({variables:e,select:V0}),V2=()=>{let e=(0,uW.NL)(),t=(0,_4.c)({mutationFn:D3,onSuccess:async t=>{t&&"job"in t&&await hy(t.job.url,{headers:{accept:"application/json"}});let r=VJ.getKey();e.invalidateQueries(r)}});return t()},V5=()=>{let e=(0,uW.NL)(),t=(0,_4.c)({mutationFn:Vp,onSuccess:async t=>{t&&"job"in t&&await hy(t.job.url,{headers:{accept:"application/json"}});let r=VJ.getKey();e.invalidateQueries(r)}});return t()};function V3(){let{addToast:e}=m7();return(0,uq.useCallback)(t=>{e({type:"error",message:t instanceof api_error_ApiError?t.message:fE.genericErrorMessage})},[e])}let V4=(e,t)=>({type:"SET_NEXT_CURSOR",nextCursor:e,currentPageItemCount:t}),V6=()=>({type:"SET_PREVIOUS_CURSOR"}),V7=e=>({type:"SET_ITEM_SELECTION",itemSelection:e}),V8=(e,t)=>{switch(t.type){case"SET_NEXT_CURSOR":{let r=e.previousCursors[e.previousCursors.length-1],a=e.previousCursors.concat({cursor:e.currentCursor,previousPagesItemCount:(r?r.previousPagesItemCount:0)+t.currentPageItemCount});return{...e,previousCursors:a,currentCursor:t.nextCursor,itemSelection:"all_on_server"===e.itemSelection?"all_on_server":[]}}case"SET_PREVIOUS_CURSOR":{let t=[...e.previousCursors],r=t.pop();return{...e,previousCursors:t,currentCursor:r?.cursor,itemSelection:"all_on_server"===e.itemSelection?"all_on_server":[]}}case"SET_DEBOUNCED_FILTER_VALUE":return{...e,debouncedFilterValue:t.debouncedFilterValue,previousCursors:[],currentCursor:void 0,itemSelection:[]};case"SET_ITEM_SELECTION":return{...e,itemSelection:t.itemSelection};default:return e}},V9={currentCursor:void 0,previousCursors:[],debouncedFilterValue:"",itemSelection:[]};var $e=r(24036),$t=r(47614),$r=r(7691),$a=r(3399);let SingleSelectFilterProvider=class SingleSelectFilterProvider extends EventTarget{handleEvent(e){let t=e.parsedQuery.at(-1);t&&((""!==t.value||this.priority<=$t.$G)&&"filter"!==t.type&&!e.parsedQuery.some(e=>"filter"===e.type&&e.filter===this.value)&&((0,Ps.CD)(t.value,this.name)||(0,Ps.CD)(t.value,this.value))&&this.dispatchEvent(new Event("show")),"filter"===t.type&&t.filter===this.value&&this.filterValues.map(e=>{if(!e)return;let r=e.charAt(0).toUpperCase()+e.slice(1);e.indexOf(" ")>-1&&(e=`${e}`),this.emitSuggestion(this.value,e,r,t.value,$t.C0,void 0)}))}emitSuggestion(e,t,r,a,n,l){(!a||(0,Ps.CD)(a,t))&&(a&&(n-=(0,Ps.Gs)(a,t)),this.dispatchEvent(new $a.L2({filter:e,value:t,name:r,priority:n,icon:l})))}constructor(e,{name:t,value:r,priority:a,icon:n},l){super(),this.type="filter",this.name=t,this.singularItemName=t,this.value=r,this.priority=a,this.icon=n,this.filterValues=l,e.addEventListener("query",this),e.attachProvider(this)}};function $n(e,t){let r=wb(t.name),a={name:t.name,value:r,priority:4,description:`Filter for ${t.name}`,icon:$a.zi.SingleSelect},n=t.settings.options.map(e=>e.name.replaceAll("-"," "));new SingleSelectFilterProvider(e,{...a,name:`Exclude ${t.name}`,icon:$a.zi.Not,value:`-${a.value}`,priority:$t.C0},n),new SingleSelectFilterProvider(e,a,n)}let $l=[{filter:{name:"Is",value:"is",icon:$a.zi.Apps,description:'Filter for "issues" or "pull requests", or items that are "open", "closed", "merged", or "draft"',priority:3},values:[{value:"issue",description:"Issues only",priority:1,icon:$a.zi.Issue},{value:"pr",description:"Pull Requests only",priority:2,icon:$a.zi.PullRequest,name:"Pull Request"},{value:"open",description:"Items with open state",priority:3,icon:$a.zi.Issue},{value:"closed",description:"Items with closed state",priority:4,icon:$a.zi.IssueClosed},{value:"merged",description:"Items with merged state",priority:5,icon:$a.zi.Merged},{value:"draft",description:"Items with draft state",priority:6,icon:$a.zi.Draft}]}],$i={name:"No",value:"no",icon:$a.zi.No,description:"Fields without values",priority:2},$s=[$t.T_.assignee],$o=(0,uq.forwardRef)(({onChange:e,value:t},r)=>{let{loggedInUser:a}=yk(),{allColumnsRef:n}=j2(),l=(0,uq.useRef)(null);(0,CJ.z)(r,l);let i=(0,uq.useCallback)(e=>{e.stopPropagation();let t=e.target;$l.map(e=>(0,$r.Eg)(e.filter,t,e.values));let r=[{value:"assignee",description:"Items without an assignee",priority:1,icon:$a.zi.No,name:"Assignee"}];for(let e of n.current)"singleSelect"===e.dataType&&($n(t,e),r.push({value:wb(e.name),description:`Items without a '${e.name}' value`,priority:r.length+1,icon:$a.zi.No,name:e.name}));(0,$r.Eg)($i,t,r),$s.map(e=>(0,$r.Z6)(e,t,a?.login??"",a?.avatarUrl??""))},[n,a?.avatarUrl,a?.login]),s=(0,uq.useCallback)(t=>{e(t.target.value)},[e]);return(0,uO.jsx)($e.z,{inputRef:l,label:fE.filterByKeyboardOrByField,id:"archive-query-builder",onChange:s,inputValue:t,placeholder:fE.filterByKeyboardOrByField,onRequestProvider:i,...(0,mp.f)("filter-bar-input")})});function $d({children:e}){return(0,uO.jsx)(mF.Z,{sx:{bg:"canvas.subtle",border:"1px solid",borderColor:"border.default",borderBottomLeftRadius:6,borderBottomRightRadius:6},children:(0,uO.jsx)(mF.Z,{sx:{p:2,pl:4,pr:3,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"50px"},children:e})})}function $c({hasResults:e,onFetchNextPage:t,onFetchPreviousPage:r,mutationIsLoading:a}){if(!e)return null;let n=r&&!a,l=t&&!a;return(0,uO.jsx)($d,{children:(0,uO.jsx)(mF.Z,{sx:{display:"flex"},children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,uO.jsxs)(jI.z,{disabled:!n,onClick:r,children:[n&&(0,uO.jsx)(mL.Z,{icon:mM.wyc})," Previous"]}),(0,uO.jsxs)(jI.z,{disabled:!l,onClick:t,children:["Next ",l&&(0,uO.jsx)(mL.Z,{icon:mM.XCv})]})]})})})}$o.displayName="ArchiveQueryBuilder";try{(n1=$d).displayName||(n1.displayName="ArchiveFooterWrapper")}catch{}try{(n2=$c).displayName||(n2.displayName="PaginatedArchiveFooter")}catch{}function $u({projectItemLimit:e,canBulkRestore:t,loading:r,filteredItemCount:a,itemSelection:n,hasSelectedAllItemsInPage:l,hasMoreItemsOnServer:i,onToggleSelectAll:s,onRestoreSelectedItems:o,onRemoveSelectedItems:d,selectMatchingItemsOnServer:c,totalCount:u,previousPagesItemCount:m,removeIsMutating:p,restoreIsMutating:f}){let{hasWritePermissions:h}=yI();return(0,uO.jsxs)(VT,{children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(mF.Z,{children:a>0?(0,uO.jsx)(w6.Z,{sx:{mr:3},onChange:h?s:void 0,"aria-label":"Toggle select all items",disabled:!h||f||p,...n&&!l?{indeterminate:!0}:{checked:l}}):null}),(0,uO.jsx)(mF.Z,{children:(0,uO.jsx)($h,{itemSelection:n,selectMatchingItemsOnServer:i&&l&&"all_on_server"!==n?c:void 0,totalCount:u,previousPagesItemCount:m,countForCurrentPage:a,loading:r,disabled:f||p})})]}),(0,uO.jsx)($p,{projectItemLimit:e,canBulkRestore:t,itemSelection:n,onRestoreSelectedItems:o,onRemoveSelectedItems:d,restoreIsMutating:f,removeIsMutating:p})]})}function $m(e,t){return e&&"all_on_server"!==t&&t<=10}function $p({projectItemLimit:e,canBulkRestore:t,itemSelection:r,onRestoreSelectedItems:a,onRemoveSelectedItems:n,restoreIsMutating:l,removeIsMutating:i}){if(r){let s=l||i,o=$m(i,r),d=$m(l,r);return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,uO.jsx)(jI.z,{leadingIcon:o?$f:mM.XHJ,variant:"danger",size:"small",onClick:n,disabled:s,"aria-label":o?"Deleting items from project...":void 0,children:"Delete from project"}),(0,uO.jsx)(jI.z,{leadingIcon:d?$f:void 0,size:"small",onClick:a,disabled:!t||s,"aria-label":d?"Restoring items in project...":void 0,children:t?"Restore":(0,uO.jsx)(kK.Z,{"aria-label":`This will exceed the ${e} project item limit`,children:"Restore unavailable"})})]})}return null}function $f(){return(0,uO.jsx)(w4.Z,{size:"small"})}function $h({itemSelection:e,selectMatchingItemsOnServer:t,totalCount:r,previousPagesItemCount:a,countForCurrentPage:n,loading:l,disabled:i}){return l?(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,uO.jsx)(mO.Z,{sx:{fontWeight:"bold",marginRight:2},children:"Loading..."}),(0,uO.jsx)(w4.Z,{size:"small"})]}):e?(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,uO.jsx)(mO.Z,{sx:{fontWeight:"bold"},children:"all_on_server"===e?fQ.allSelectedMatchingItems(r):fQ.selectedItems(e)}),t&&(0,uO.jsx)(w3.Z,{disabled:i,sx:{ml:2},as:"button",onClick:t,children:fQ.selectAllMatchingItems(r)})]}):(0,uO.jsx)(mF.Z,{children:(0,uO.jsx)(mO.Z,{sx:{fontWeight:"bold"},children:0===n?fQ.noArchivedItems:fQ.itemCount(1+a,n+a,r)})})}try{(n5=$u).displayName||(n5.displayName="PaginatedArchiveHeader")}catch{}try{(n3=$p).displayName||(n3.displayName="ArchiveHeaderBulkActions")}catch{}try{(n4=$f).displayName||(n4.displayName="SmallSpinner")}catch{}try{(n6=$h).displayName||(n6.displayName="ArchiveHeaderTitle")}catch{}let $g=(0,uq.memo)(function({archivedItem:e,columnData:t,canRestore:r,projectItemLimit:a,isSelected:n,onToggleSelection:l,onRestoreItems:i,onRemoveItems:s,mutationLoading:o}){let{hasWritePermissions:d}=yI(),c=e.contentType===mA.RedactedItem,u=c||!d,m=`item-title-${e.id}`,p=t.Title,f=p?VD(p):VA,h=p4(p),g=(0,uq.useCallback)(()=>{i({memexProjectItemIds:[e.id]})},[i,e.id]),x=(0,uq.useCallback)(()=>{s({memexProjectItemIds:[e.id]})},[s,e.id]);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mF.Z,{as:"label",sx:{pl:4,pt:2},children:(0,uO.jsx)(w6.Z,{sx:{alignSelf:"start"},"aria-labelledby":m,checked:!u&&n,onChange:u?void 0:l,disabled:u||o})}),(0,uO.jsx)(mF.Z,{sx:{pt:2,pl:3},children:(0,uO.jsx)(VZ,{titleColumn:f})}),(0,uO.jsxs)(mF.Z,{sx:{p:2,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[(0,uO.jsxs)(mF.Z,{id:m,sx:{display:"flex",alignItems:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[(0,uO.jsx)(VV,{model:e,currentValue:f}),pG(h)&&(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,ml:2,display:"flex"},children:(0,uO.jsxs)(mO.Z,{sx:{color:"fg.muted"},children:[" #",h]})})]}),(0,uO.jsxs)(mF.Z,{sx:{color:"fg.muted",fontSize:0},children:["archived ",(0,uO.jsx)(EM.Z,{datetime:e.archived.archivedAt}),!c&&e.archived?.archivedBy?(0,uO.jsxs)(uO.Fragment,{children:[" by ",(0,uO.jsx)(mO.Z,{as:"span",sx:{color:"fg.default"},children:e.archived.archivedBy.login})]}):null]})]}),(0,uO.jsx)(mF.Z,{sx:{display:"flex",alignItems:"center",mr:3},children:u||o?null:(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsx)(kF.h,{icon:mM.Ui8,variant:"invisible","aria-label":"Open item actions",sx:{color:"fg.default"}})}),(0,uO.jsx)(In.P.Overlay,{children:(0,uO.jsxs)(Ia.S,{children:[(0,uO.jsxs)(Ia.S.Item,{onSelect:g,disabled:!r,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.F_y,{})}),r?"Restore":(0,uO.jsxs)(uO.Fragment,{children:["Restore unavailable",(0,uO.jsxs)(Ia.S.Description,{variant:"block",children:["This will exceed the ",a," project item limit"]})]})]}),(0,uO.jsxs)(Ia.S.Item,{onSelect:x,variant:"danger",children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete from project"]})]})})]})})]})});try{(n7=$g).displayName||(n7.displayName="PaginatedArchiveItem")}catch{}let $x=({headerText:e})=>(0,uO.jsx)(T1.Z,{open:!0,caret:"bottom",sx:{position:"fixed",display:"flex",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",top:0,left:0},children:(0,uO.jsxs)(T1.Z.Content,{sx:{margin:"auto",paddingTop:"25px",width:"320px",height:"200px","&::before":{content:"none !important"},"&::after":{content:"none !important"}},children:[(0,uO.jsx)(Cn.Z,{sx:{fontSize:3,mb:4},children:e}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,uO.jsx)(w4.Z,{}),(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted",mt:3,px:2},children:"This may take some time. This dialog will close when the job is complete."})]})]})});try{(n8=$x).displayName||(n8.displayName="PaginatedArchiveMutationInProgressDialog")}catch{}let $y=e=>({filteredItems:e?.itemModels??[],hasNextPage:e?.pageInfo.hasNextPage??!1,endCursor:e?.pageInfo.endCursor,totalCount:e?.totalCount??{value:0,isApproximate:!1}});function $b(){let[e,t]=(0,uq.useReducer)(V8,V9),{data:r,isInitialLoading:a,isFetching:n}=V1({after:e.currentCursor,q:e.debouncedFilterValue}),{filteredItems:l,hasNextPage:i,endCursor:s,totalCount:o}=$y(r),d=e.previousCursors.length>0,c=(0,uq.useMemo)(()=>"all_on_server"===e.itemSelection?"all_on_server":new Set(e.itemSelection),[e.itemSelection]),u=(0,uq.useMemo)(()=>l.filter(e=>e.contentType!==mA.RedactedItem).map(e=>e.id),[l]),m=(0,uq.useCallback)(()=>{"all_on_server"===c||u.length===c.size?t(V7([])):t(V7(u))},[u,c]),p=(0,uq.useCallback)(()=>{t(V7("all_on_server"))},[]),{items:f}=bt(),h=yk().projectLimits.projectItemLimit,g=f.length+1<=h,x=$v(h,c,f,o.value),y=(0,uq.useCallback)(e=>{if("all_on_server"===c)t(V7(u.filter(t=>t!==e.id)));else{let r=new Set(c);r.has(e.id)?r.delete(e.id):r.add(e.id),t(V7(Array.from(r)))}},[u,c]),b=V3(),{setArchiveStatus:v}=vh(),{mutate:w,isLoading:j}=V5(),C=(0,uq.useCallback)(async r=>{w(r,{onSuccess:()=>{if("all_on_server"===e.itemSelection||e.itemSelection.length===u.length)t(V7([]));else{let a="memexProjectItemIds"in r?r.memexProjectItemIds:[];t(V7(e.itemSelection.filter(e=>!a.includes(e))))}v()},onError:b})},[b,w,u.length,v,e.itemSelection]),k=(0,uq.useCallback)(()=>{"all_on_server"===c?C({q:e.debouncedFilterValue}):C({memexProjectItemIds:Array.from(c)})},[C,c,e.debouncedFilterValue]),{mutate:S,isLoading:I}=V2(),{confirmRemoveItems:N}=D8(),_=(0,uq.useCallback)(async r=>{let a,n=[];"memexProjectItemIds"in r?n=r.memexProjectItemIds:a=fQ.deleteAllMatchingItemsConfirmation,await N(n,a?{content:a}:void 0)&&S(r,{onSuccess:()=>{"all_on_server"===e.itemSelection||e.itemSelection.length===u.length?t(V7([])):t(V7(e.itemSelection.filter(e=>!n.includes(e)))),v()},onError:b})},[N,b,S,u.length,v,e.itemSelection]),T=(0,uq.useCallback)(()=>{"all_on_server"===c?_({q:e.debouncedFilterValue}):_({memexProjectItemIds:Array.from(c)})},[_,c,e.debouncedFilterValue]),R=(0,uq.useCallback)(e=>(0,uO.jsx)($g,{archivedItem:e,columnData:e.columns,canRestore:g,projectItemLimit:h,isSelected:"all_on_server"===c||c.has(e.id),onToggleSelection:()=>y(e),onRestoreItems:C,onRemoveItems:_,mutationLoading:j||I}),[g,_,C,y,h,I,j,c]),[E,D]=(0,uq.useState)(""),P=S5(e=>t({type:"SET_DEBOUNCED_FILTER_VALUE",debouncedFilterValue:e}),225),A=(0,uq.useCallback)(e=>{D(e),P(e)},[P]),M=(0,uq.useRef)(null),L=l.length>0||!!e.debouncedFilterValue,F=e.previousCursors[e.previousCursors.length-1],Z=F?F.previousPagesItemCount:0,O=(j||I)&&("all_on_server"===c||c.size>10),B=yk().archiveAlphaFeedbackLink;return(0,uO.jsxs)(Ro.X,{sx:{pt:4},containerWidth:"large",rowGap:"condensed",children:[(0,uO.jsx)(Ro.X.Header,{children:(0,uO.jsxs)(vd.Z,{children:[fQ.noLimitsBannerMessage,B&&(0,uO.jsxs)(uO.Fragment,{children:[fQ.noLimitsBannerFeedback,(0,uO.jsx)(w3.Z,{href:B,target:"_blank",rel:"noreferrer",children:fQ.noLimitsBannerFeedbackLinkText})]})]})}),(0,uO.jsxs)(Ro.X.Content,{children:[(0,uO.jsxs)(mF.Z,{sx:{position:"sticky",top:-2,pt:3,mt:-3,backgroundColor:"canvas.default",zIndex:1},children:[(0,uO.jsx)($o,{ref:M,onChange:e=>A(e),value:E}),(0,uO.jsx)($u,{canBulkRestore:x,projectItemLimit:h,loading:n,restoreIsMutating:j,removeIsMutating:I,filteredItemCount:l.length,itemSelection:"all_on_server"===c?"all_on_server":c.size,hasSelectedAllItemsInPage:"all_on_server"===c||c.size===u.length,hasMoreItemsOnServer:i||d,onToggleSelectAll:m,onRestoreSelectedItems:k,onRemoveSelectedItems:T,selectMatchingItemsOnServer:p,totalCount:o,previousPagesItemCount:Z})]}),(0,uO.jsx)(VK,{filteredItems:l,loaded:!a,hasArchive:L,renderItem:R,sx:l.length>0?{borderRadius:0,borderBottom:0}:void 0}),(0,uO.jsx)($c,{hasResults:l.length>0,onFetchNextPage:i&&s?()=>t(V4(s,l.length)):void 0,onFetchPreviousPage:d?()=>t(V6()):void 0,mutationIsLoading:I||j}),O&&(0,uO.jsx)($x,{headerText:j?"Restoring items...":"Deleting items..."})]})]})}function $v(e,t,r,a){return"all_on_server"===t?r.length+a<e:r.length+t.size<=e}try{(n9=$b).displayName||(n9.displayName="PaginatedArchiveView")}catch{}function $w(){b2();let{memex_paginated_archive:e}=g9();return e?(0,uO.jsx)(b5,{...(0,mp.f)("paginated-archive-page"),sx:{scrollbarGutter:"stable both-edges",mb:0},children:(0,uO.jsx)($b,{})}):(0,uO.jsx)(b5,{...(0,mp.f)("archive-page"),sx:{scrollbarGutter:"stable both-edges",mb:0},children:(0,uO.jsx)(Vj,{children:(0,uO.jsx)(VY,{})})})}try{(le=$w).displayName||(le.displayName="ArchivePage")}catch{}function $j({localVersion:e,serverVersion:t}){let r=e.configuration,a=t.configuration,n=r.filter.trim()!==a.filter.trim(),l=r.type!==a.type,i=r.xAxis.dataSource.column!==a.xAxis.dataSource.column,s=r.xAxis.dataSource.sortOrder!==a.xAxis.dataSource.sortOrder,o=r.xAxis.groupBy?.column!==a.xAxis.groupBy?.column,d=r.xAxis.groupBy?.sortOrder!==a.xAxis.groupBy?.sortOrder,c=i||s||o||d,u=r.yAxis.aggregate.operation!==a.yAxis.aggregate.operation,m=!(0,CR.Z)(r.yAxis.aggregate.columns,a.yAxis.aggregate.columns),p=r.time?.period!==a.time?.period,f=r.time?.startDate!==a.time?.startDate,h=r.time?.endDate!==a.time?.endDate,g=p||f||h,x=l||c||u||m;return{isXAxisColumnDirty:i,isXAxisGroupByColumnDirty:o,isXAxisGroupBySortOrderDirty:d,isXAxisDirty:c,isYAxisAggregateOperationDirty:u,isYAxisAggregateColumnsDirty:m,isFilterDirty:n,isConfigurationDirty:x,isTimePeriodDirty:g,isDirty:x||n||g}}function $C(e){return"time"===e.localVersion.configuration.xAxis.dataSource.column}function $k(e){return e.number<=0}function $S(e){let t=new URLSearchParams(e);return t.delete(yR),t.delete(y$),t.delete(yV),t.delete(yz),t.delete(yU),t}function $I(e){let t=new URLSearchParams(e);return t.delete(yT),t.delete(yR),t.delete(y$),t.delete(yV),t.delete(yz),t.delete(yU),t.delete(yZ),t.delete(yO),t.delete(yB),t}let $N={bar:"bar",column:"column",line:"line","stacked-area":"stacked-area","stacked-bar":"stacked-bar","stacked-column":"stacked-column"};function $_(e){return e in $N}let $T={sum:"sum",count:"count",max:"max",min:"min",avg:"avg"};function $R(e){return e in $T}let $E=(0,uq.createContext)(null);function $D(){let e=(0,uq.useContext)($E);if(null===e)throw Error("useCharts can only be used inside a ChartStateProvider");return e}let $P=(0,uq.createContext)(null),$A=(0,uq.memo)(function({children:e}){let[t,r]=(0,uq.useState)(!1),[a,n]=(0,uq.useState)(!1),l=(0,uq.useRef)(0),i=(0,uq.useCallback)(()=>{clearTimeout(l.current),n(!1),r(!0)},[]),s=(0,uq.useCallback)(()=>{n(!0),l.current=window.setTimeout(()=>{r(!1),n(!1)},300)},[]),o=(0,uq.useMemo)(()=>({openPane:i,closePane:s,isClosing:a,isOpen:t}),[i,s,a,t]);return(0,uO.jsx)($P.Provider,{value:o,children:e})}),$M=()=>{let e=(0,uq.useContext)($P);if(null===e)throw Error("useInsightsConfigurationPane must be used within a InsightsConfigurationPaneProvider");return e};try{(lt=$P).displayName||(lt.displayName="InsightsConfigurationPaneContext")}catch{}try{(lr=$A).displayName||(lr.displayName="InsightsConfigurationPaneProvider")}catch{}function $L(e){let t=e.localVersion.configuration.filter,r=e.serverVersion.configuration.filter,{updateLocalChartConfiguration:a}=$D(),n=(0,EA.Z)(),[l,i]=yY(),s=(0,uq.useRef)(null),o=(0,uq.useRef)(!1);(0,uq.useEffect)(()=>()=>{s.current&&window.clearTimeout(s.current)},[]);let[d,c]=(0,uq.useState)(()=>l.get(yT)??t),u=(0,uq.useCallback)((t,r={immediate:!1})=>{function d(){let n=new URLSearchParams(l);t===e.serverVersion.configuration.filter?n.delete(yT):n.set(yT,t),a(e.number,{filter:t}),i(n,{replace:r.replace})}c(t),r.skipNextSyncFromExternalChange&&(o.current=!0),s.current&&window.clearTimeout(s.current),r.immediate?d():s.current=window.setTimeout(()=>{n()&&d()},200)},[l,e.serverVersion.configuration.filter,e.number,a,i,n]),m=m1(u);(0,uq.useEffect)(function(){if(o.current)o.current=!1;else{let e=new URLSearchParams(window.location.search);m.current(e.get(yT)??t,{immediate:!0,replace:!0})}},[t,m,e.number]);let p=(0,uq.useCallback)(()=>{m.current(r,{immediate:!0})},[r,m]);return{localFilterValue:d,setLocalFilterValueAndSyncToQueryParam:u,resetFilter:p,setLocalFilterValue:c}}function $F(e){let t=Iy(e),{items:r}=bt(),{itemMatchesFilterQuery:a}=ks(),n=(0,uq.useMemo)(()=>{let e=Boolean(t.trim());return e?r.filter(e=>a(e,wD(t))):null},[t,r,a]);return{filteredItems:n}}function $Z(e){let{localFilterValue:t,setLocalFilterValueAndSyncToQueryParam:r,resetFilter:a}=$L(e),{filteredItems:n}=$F(t),l=(0,uq.useRef)(null),i=t.trim(),s=(0,uq.useMemo)(()=>i?()=>{r("",{immediate:!0,skipNextSyncFromExternalChange:!0})}:void 0,[i,r]),o=(0,uq.useCallback)(e=>r(e,{immediate:!0,skipNextSyncFromExternalChange:!0}),[r]),d=(0,uq.useCallback)(e=>{r(e.target.value,{immediate:!1,skipNextSyncFromExternalChange:!0})},[r]);return{chart:e,filteredItems:n,filterValue:t,handleFilterValueChange:d,onClearButtonClick:s,setValueFromSuggestion:o,resetFilter:a,inputRef:l}}var $O=r(50480);let $B=["2W","1M","3M","max","custom"],$V=(e,t)=>{let r=e.get(yZ);return r&&$B.includes(r)?r:t?.period??"2W"},$$=e=>{let t=/^\d{4}-\d{2}-\d{2}$/;return!!e&&t.test(e)},$z=(e,t)=>{let r=$V(e,t),a={period:r};if("custom"===r){let r=e.get(yO)??t?.startDate,n=e.get(yB)??t?.endDate;$$(r)&&$$(n)?(a.startDate=r,a.endDate=n):a.period=t?.period??"2W"}return a};function $U(e){let t=$C(e),[r]=yY(),{time:a}=e.localVersion.configuration,{period:n,startDate:l,endDate:i}=$z(r,a),{updateLocalChartConfiguration:s}=$D();return(0,uq.useEffect)(()=>{t&&"custom"!==n&&s(e.number,{time:{period:n}})},[e.number,t,n,s]),(0,uq.useEffect)(()=>{t&&l&&i&&s(e.number,{time:{period:"custom",startDate:l,endDate:i}})},[e.number,t,l,i,s]),{endDate:i,period:n,startDate:l}}let $W=["line","stacked-area"],$H=(e,t)=>{let r=new Date;if(r.setDate(r.getDate()-1),new Date(e)>r)return 0;let a=new Date,n=(new Date(t).getTime()-a.getTime())/864e5;return Math.max(Math.ceil(n),0)};function $G(e){let{startDate:t,endDate:r,period:a}=$U(e),{memex_insights_forecasting:n}=g9();if(!n)return 0;let l=e.localVersion.configuration.type;return $W.includes(l)&&t&&r&&"custom"===a?$H(t,r):0}function $q(e,t){let r=$O.o3.fillMissing(e.rows),a=new Date;a.setDate(a.getDate()-42);let n=vV(a.toISOString()),l=r.filter(e=>vV(e[0])>=n),i=$O.Yw.N.forecastAndAppend(l,t,{}).series,s=[...new Set([...r,...i])];return{...e,rows:s}}var $K=r(73418);function $Q(e,t,r){"undefined"==typeof window||window.customElements.get(e)||window.customElements.define(e,t,r)}function $Y({tagName:e,elementClass:t,events:r}){return $Q(e,t),(0,$K.L)({tagName:e,elementClass:t,react:uK,events:r,displayName:e})}let $X="bar-chart-memex-insights",$J=$Y({tagName:$X,elementClass:$O.bR});try{(la=$J).displayName||(la.displayName="BarChart")}catch{}let $0="column-chart-memex-insights",$1=$Y({tagName:$0,elementClass:$O.yi});try{(ln=$1).displayName||(ln.displayName="ColumnChart")}catch{}let $2="insights-query-element-memex-with-opaque-error",$5=e=>e.setAttribute("error",""),$3=class InsightsQueryWithOpaqueError extends $O.YI{constructor(...e){super(...e),this.renderError=(e,t)=>{super.renderError(e,t,{chartCallback:$5})}}},$4=$Y({tagName:$2,elementClass:$3}),$6=(0,uq.forwardRef)(function(e,t){let r=(0,uq.useRef)(null);(0,uq.useImperativeHandle)(t,()=>r.current);let a=(0,uq.useRef)(null);return(0,uq.useEffect)(()=>{let e=!0,t=r.current;return async function(){await window.customElements.whenDefined($2),a.current=window.setTimeout(()=>{t&&e&&t.executeQuery()})}(),()=>{e=!1,a.current&&window.clearTimeout(a.current)}},[e.authUrl,e.apiUrl,e.query,e.autoRender,e.options]),(0,uO.jsx)($4,{...e,ref:r})});try{(ll=$4).displayName||(ll.displayName="ReactInsightsQuery")}catch{}try{(li=$6).displayName||(li.displayName="AutoExecutingInsightsQuery")}catch{}try{(ls=$6).displayName||(ls.displayName="AutoExecutingInsightsQuery")}catch{}let $7="line-chart-memex-insights",$8=$Y({tagName:$7,elementClass:$O.KB});try{(lo=$8).displayName||(lo.displayName="LineChart")}catch{}let $9="stacked-area-chart-memex-insights",ze=$Y({tagName:$9,elementClass:$O.nf});try{(ld=ze).displayName||(ld.displayName="StackedAreaChart")}catch{}function zt(e,t){switch(e.dataType){case mD.SingleSelect:{let r=t[e.id]?.id,a=e.settings.options?.find(e=>e.id===r);return a?.name?[a.name]:[`${fE.noSuggestion} ${e.name}`]}case mD.Milestone:return t[mP.Milestone]?.title;case mD.Repository:return t[mP.Repository]?.nameWithOwner;case mD.Date:{let r=t[e.id];return pY(r)}case mD.Number:{let r=t[e.id];return r?.value.toString()}case mD.Labels:return t.Labels?.map(e=>e.name);case mD.LinkedPullRequests:return t[mP.LinkedPullRequests]?.map(e=>e.number.toString());case mD.Assignees:return t[mP.Assignees]?.map(e=>e.login);case mD.Reviewers:return t[mP.Reviewers]?.map(e=>e.reviewer.name);case mD.Iteration:{let r=t[e.id]?.id,a=gR(e),n=a.find(e=>e.id===r);return n?.title}default:throw Error(`${e.dataType} column is not a supported chart data type`)}}function zr(e,t){let r=zt(e,t);return r&&0!==r.length?Array.isArray(r)?r:[r]:[`${fE.noSuggestion} ${e.name}`]}function za(e,t,r){t!==r?e.set(yT,t):e.delete(yT)}function zn(e,t,r){t===r?e.delete(yR):e.set(yR,t)}function zl(e,t,r){(0,CR.Z)(t,r)?(e.delete(y$),e.delete(yV)):(e.set(y$,`${t.dataSource.column}`),e.set(yV,t.groupBy?`${t.groupBy.column}`:""))}function zi(e,t,r){(0,CR.Z)(t,r)?(e.delete(yU),e.delete(yz)):(e.set(yU,t.aggregate.operation),e.set(yz,t.aggregate.columns?t.aggregate.columns.join(","):""))}function zs(e,t,r){!t||(0,CR.Z)(t,r)?(e.delete(yZ),e.delete(yO),e.delete(yB)):"custom"===t.period?(e.set(yZ,t.period),e.set(yO,t.startDate||""),e.set(yB,t.endDate||"")):(e.set(yZ,t.period),e.delete(yO),e.delete(yB))}function zo(){let{hasUnlimitedSavedCharts:e}=LN(),t=(0,uq.useCallback)(t=>{let r=t.localVersion.configuration,a=t.serverVersion.configuration,n=new URLSearchParams;return e&&(zn(n,r.type,a.type),zl(n,r.xAxis,a.xAxis),zi(n,r.yAxis,a.yAxis)),za(n,r.filter,a.filter),zs(n,r.time,a.time),n},[e]);return{getChartLinkParameters:t}}function zd(){let[e]=yY(),{hasUnlimitedSavedCharts:t}=LN(),r=(0,uq.useCallback)((r,a)=>{let n=a.serverVersion.configuration,l=new URLSearchParams(e);return t&&(r.type&&zn(l,r.type,n.type),r.xAxis&&zl(l,r.xAxis,n.xAxis),r.yAxis&&zi(l,r.yAxis,n.yAxis)),"string"==typeof r.filter&&za(l,r.filter,n.filter),zs(l,r.time,n.time),l},[t,e]);return{getNextSearchParamsForConfigurationUpdate:r}}function zc(e){let[t,r]=yY(),{getNextSearchParamsForConfigurationUpdate:a}=zd(),n=(0,uq.useCallback)((n,{replace:l=!1}={})=>{let i=a(n,e);t.toString()!==i.toString()&&r(i,{replace:l})},[a,e,t,r]);return(0,uq.useMemo)(()=>({setNextChartParams:n}),[n])}let zu={flex:1,gridTemplateColumns:"min-content 1fr min-content",textAlign:"left",width:"100%","[data-component=buttonContent]":{flex:0}},zm={width:"353px"},zp={success:mM.kD1,error:mM.enX,warning:mM.enX},zf={success:"success.fg",error:"danger.fg",warning:"attention.fg"},zh=({children:e,validationStatus:t,sx:r})=>{let a=t?zp[t]:void 0,n=t?zf[t]:void 0;return(0,uO.jsxs)(mO.Z,{sx:{marginTop:2,alignItems:"center",color:n,display:"flex",a:{color:"currentColor",textDecoration:"underline"},...r,fontSize:0},children:[a&&(0,uO.jsx)(mF.Z,{as:"span",sx:{display:"flex",mr:1},children:(0,uO.jsx)(a,{size:12,fill:"currentColor"})}),(0,uO.jsx)("span",{children:e})]})};try{(lc=zh).displayName||(lc.displayName="Validation")}catch{}let zg=e=>"count"!==e,zx=new Set([mD.Number]),zy=(e,t)=>`${fU.operationLabel[e]} ${t}`,zb={count:{label:zy("count","items"),type:"count"},sum:{label:zy("sum","a field"),type:"sum"},avg:{label:zy("avg","a field"),type:"avg"},min:{label:zy("min","a field"),type:"min"},max:{label:zy("max","a field"),type:"max"}},zv=Object.values(zb),zw=(e,t)=>e?.field.name??(t?fU.invalidFieldLabel:"None");function zj({chart:e}){let{setNextChartParams:t}=zc(e),{allColumns:r}=CB(),{updateLocalChartConfiguration:a}=$D(),n=(0,uq.useMemo)(()=>r.filter(e=>zx.has(e.dataType)).map(e=>({label:e.name,icon:Li(e.dataType),field:e})),[r]),l=(0,uq.useCallback)(r=>{let l={operation:r.type,columns:"count"===r.type?void 0:n[0]?.field.databaseId?[n[0].field.databaseId]:void 0},i={yAxis:{...e.localVersion.configuration.yAxis,aggregate:l}};a(e.number,i),t(i)},[n,e.localVersion.configuration.yAxis,e.number,t,a]),i=(0,uq.useCallback)(r=>{let n={yAxis:{...e.localVersion.configuration.yAxis,aggregate:{...e.localVersion.configuration.yAxis.aggregate,columns:r}}};a(e.number,n),t(n)},[e.localVersion.configuration.yAxis,e.number,t,a]),s=e.localVersion.configuration.yAxis.aggregate.columns||[],o=n.find(e=>s.includes(e.field.databaseId)),d=!o&&s.length>0,c=(0,uO.jsx)(zh,{validationStatus:"error",children:fU.invalidFieldErrorMessage}),u=zw(o,d),m=zb[e.localVersion.configuration.yAxis.aggregate.operation];return(0,uO.jsxs)(mF.Z,{sx:{mb:4},children:[(0,uO.jsx)(mO.Z,{as:"label",sx:{display:"flex",mb:2},children:"Y-axis"}),(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Button,{"aria-label":"Select Y-axis",sx:zu,children:m?.label??"None"}),(0,uO.jsx)(In.P.Overlay,{sx:zm,children:(0,uO.jsx)(Ia.S,{selectionVariant:"single",...(0,mp.f)("chart-y-axis-list"),children:zv.map((e,t)=>(0,uO.jsx)(Ia.S.Item,{selected:m?.type===e.type,onSelect:()=>l(e),disabled:zg(e.type)&&0===n.length,children:e.label},t))})})]}),m&&zg(m.type)?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Button,{"aria-label":"Select Y-axis field",sx:{...zu,mt:3,...d?{borderColor:"danger.emphasis"}:{}},leadingIcon:o?.icon,disabled:0===n.length,children:u}),(0,uO.jsx)(In.P.Overlay,{sx:zm,children:(0,uO.jsx)(Ia.S,{selectionVariant:"single",...(0,mp.f)("chart-y-axis-field-list"),children:n.map((e,t)=>(0,uO.jsxs)(Ia.S.Item,{selected:o?.field.databaseId===e.field.databaseId,onSelect:()=>i([e.field.databaseId]),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(e.icon,{})}),e.field.name]},t))})})]}),d?c:null]}):null]})}try{(lu=zj).displayName||(lu.displayName="YAxisSelector")}catch{}function zC({memexChartOperation:e,values:t}){switch(e){case"sum":return t.reduce((e,t)=>e+t,0);case"avg":return 0===t.length?null:t.reduce((e,t)=>e+t,0)/t.length;case"min":return 0===t.length?null:Math.min(...t);case"max":return 0===t.length?null:Math.max(...t);default:throw Error(`Unknown memex chart operation: ${e}`)}}function zk({items:e,xAxisColumnModel:t,yAxisColumnModel:r,groupByColumnModel:a,memexChartOperation:n}){let l=new Map;for(let n of e){let e=n.columns,i=zr(t,e),s=parseFloat(gc(zr(r,e)[0]));for(let t of i){let r=l.get(t)??new Map;l.get(t)||l.set(t,r);let n=zr(a,e);for(let e of n){let t=r.get(e)??[];isNaN(s)||t.push(s),r.set(e,t)}}}let i=[];for(let[e,t]of l)for(let[r,a]of t)a.length>0&&i.push([e,zC({memexChartOperation:n,values:a}),r]);return i}function zS({items:e,xAxisColumnModel:t,yAxisColumnModel:r,memexChartOperation:a}){let n=new Map;for(let a of e){let e=a.columns,l=zr(t,e),i=parseFloat(gc(zr(r,e)[0]));for(let e of l){let t=n.get(e)||[];isNaN(i)||t.push(i),n.set(e,t)}}let l=[];for(let[e,t]of n)t.length>0&&l.push([e,zC({memexChartOperation:a,values:t})]);return l}function zI(e,t){let r={};for(let a of e){let e=zr(t,a.columns);for(let t of e)void 0===r[t]&&(r[t]=0),r[t]+=1}let a=[];for(let e of Object.keys(r))a.push([e,gc(r[e])]);return a}function zN(e,t,r){let a={};for(let n of e){let e=zr(t,n.columns);for(let t of e){void 0===a[t]&&(a[t]={});let e=zr(r,n.columns);for(let r of e)a[t]?.[r]===void 0&&(gc(a[t])[r]=0),gc(a[t])[r]+=1}}let n=[];for(let e of Object.keys(a))for(let t of Object.keys(gc(a[e])))n.push([e,gc(gc(a[e])[t]),t]);return n}function z_(e,t,r,a){let n=[{name:e?.name||"Unknown",dataType:"nvarchar"}];return t&&a&&"count"!==a?n.push({name:zy(a,t.name),dataType:"int"}):n.push({name:"Count",dataType:"int"}),r&&n.push({name:r.name||"Unknown",dataType:"nvarchar"}),n}function zT(e,t){let{items:r}=bt(),{findColumnByDatabaseId:a}=j5(),n=e.xAxis.dataSource.column,l=e.xAxis.groupBy?.column,i=e.yAxis.aggregate?.columns?.[0],s=pG(n)?a(n):void 0,o=pG(l)?a(l):void 0,d=pG(i)?a(i):void 0,c=z_(s,d,o,e.yAxis.aggregate.operation),u=zR({items:null===t?r:t,xAxisColumnModel:s,yAxisColumnModel:d,groupByColumnModel:o,yAxisAggregate:e.yAxis.aggregate});return{series:{columns:c,rows:u,isSensitive:!1}}}function zR({items:e,xAxisColumnModel:t,yAxisColumnModel:r,groupByColumnModel:a,yAxisAggregate:n}){if(!t)return[];let l=N4(t),i=l?e.slice().sort((e,t)=>{let r=l(e,t,!1);if(0===r&&a){let n=a?N4(a):void 0,l=n?.(e,t,!1)??r;return l}return r}):e.slice();return"count"!==n.operation&&r?a?zk({items:i,xAxisColumnModel:t,yAxisColumnModel:r,groupByColumnModel:a,memexChartOperation:n.operation}):zS({items:i,xAxisColumnModel:t,yAxisColumnModel:r,memexChartOperation:n.operation}):a?zN(i,t,a):zI(i,t)}function zE({chartType:e,isLoading:t,series:r,...a}){switch(e){case"stacked-area":return(0,uO.jsx)(ze,{...a,series:r,loading:t});case"line":return(0,uO.jsx)($8,{...a,series:r,loading:t});case"column":case"stacked-column":return(0,uO.jsx)($1,{...a,series:r,loading:t,chartStacked:"stacked-column"===e});case"bar":case"stacked-bar":return(0,uO.jsx)($J,{...a,series:r,loading:t,chartStacked:"stacked-bar"===e});default:xE(e)}}try{(lm=zE).displayName||(lm.displayName="ChartByType")}catch{}let zD=(0,uq.memo)(function({configuration:e,filteredItems:t,isLoading:r}){let{series:a}=zT(e,t);return(0,uO.jsx)(zE,{chartType:e.type,isLoading:r,series:a})});try{(lp=zD).displayName||(lp.displayName="CurrentInsightsChart")}catch{}let zP=({icon:e,heading:t,content:r,children:a,...n})=>(0,uO.jsx)(mF.Z,{sx:{backgroundColor:e=>`${e.colors.canvas.subtle}`,maxWidth:(0,uG.U2)("sizes.large"),mx:"auto",display:"flex",flexDirection:"column",gap:"24px",borderRadius:"6px",p:5},...n,children:(0,uO.jsx)(Ct,{icon:e,heading:t,content:r,children:a})});try{(lf=zP).displayName||(lf.displayName="BaseChartError")}catch{}let zA=()=>(0,uO.jsx)(zP,{heading:"This chart configuration is no longer valid",content:"A required field may have been deleted. You will need to delete and re-create this chart."});try{(lh=zA).displayName||(lh.displayName="ChartErrorFallback")}catch{}let zM=()=>{let{openPane:e}=$M();return(0,uO.jsx)(zP,{...(0,mp.f)("chart-invalid-config-error"),heading:"This chart configuration is no longer valid",content:"A required field may have been deleted. Update the configuration or delete the chart.",children:(0,uO.jsx)(jI.z,{sx:{mt:2},onClick:e,children:"Update configuration"})})};try{(lg=zM).displayName||(lg.displayName="InvalidConfigError")}catch{}let zL=()=>(0,uO.jsx)(zP,{icon:mM.KHo,heading:"This insight chart no longer exists",content:"Select another chart to view insights"});try{(lx=zL).displayName||(lx.displayName="MissingChartError")}catch{}let zF=(e,t,r)=>{switch(e){case"max":return new URLSearchParams({period:"max"});case"2W":return new URLSearchParams({period:"2W"});case"1M":return new URLSearchParams({period:"1M"});case"3M":return new URLSearchParams({period:"3M"});case"custom":return new URLSearchParams({period:"custom",start_date:t??"",end_date:r??""});default:xE(e)}},zZ=(e,t,r)=>{let a=new Date;switch(a.setDate(a.getDate()-42),e){case"max":return new URLSearchParams({period:"max"});case"3M":return new URLSearchParams({period:"3M"});case"custom":if(t&&new Date(t)<a)return new URLSearchParams({period:"custom",start_date:t,end_date:r??""});return new URLSearchParams({period:"custom",start_date:vV(a.toISOString()),end_date:r??""});default:return new URLSearchParams({period:"custom",start_date:vV(a.toISOString()),end_date:r??""})}};async function zO(e,t,r,a,n){let l=`${f9("memex-insights-query-api-data").url}?`;r?l+=zZ(t,a,n):l+=zF(t,a,n);let{data:i}=await hh(l,{method:"POST",body:{options:e}});return i}function zB(e,t,r){let a=[...e];switch(t){case"2W":{let e=new Date;e.setDate(e.getDate()-14);let t=vV(e.toISOString());return a.filter(e=>vV(e[0])>=t)}case"1M":{let e=new Date;e.setMonth(e.getMonth()-1);let t=vV(e.toISOString());return a.filter(e=>vV(e[0])>=t)}case"3M":{let e=new Date;e.setMonth(e.getMonth()-3);let t=vV(e.toISOString());return a.filter(e=>vV(e[0])>=t)}case"custom":if(!r)return a;return a.filter(e=>e[0]>=r);case"max":return a;default:xE(t)}}let zV=(0,yJ.r)({primaryKey:"insights-query",queryFn:async({queryKey:[e,{options:t,period:r,getExtendedDataForForecasting:a,startDate:n,endDate:l}]})=>zO(t,r,a,n,l)}),z$=(0,uq.memo)(function({options:e,period:t,startDate:r,endDate:a,forecasting:n,chartType:l,getExtendedDataForForecasting:i}){let{isLoading:s,data:o}=zV({variables:{options:e,period:t,getExtendedDataForForecasting:i,startDate:r,endDate:a},select:(0,uq.useMemo)(()=>e=>{if(0===n)return e.data;let a=$q(e.data,n).rows,l=zB(a,t,r);return{...e.data,rows:l}},[n,t,r])}),d=(0,uq.useMemo)(()=>0===n?{}:{"forecast-startdate":new Date().toISOString()},[n]);return!s&&o?(0,uO.jsx)(zE,{chartType:l,isLoading:!1,series:o,...d}):(0,uO.jsx)(ze,{loading:!0})});try{(ly=z$).displayName||(ly.displayName="InsightsChartBuilder")}catch{}function zz(e){switch(e){case"stacked-area":return $9;case"bar":return $X;case"line":return $7;case"column":return $0;case"stacked-column":return`${$0} ( chart-stacked )`;case"stacked-bar":return`${$X} ( chart-stacked )`;default:xE(e)}}function zU(e,t,r){let a=e?.xAxis?.groupBy?.column,n=a&&r(a),l=e?.yAxis?.aggregate?.columns?.[0],i=l&&r(l),s={includeArchived:!1};return i&&(s.aggregate={column:i.name,aggregationType:e.yAxis.aggregate.operation}),n&&(s.groupBy={column:n.name,dataType:n.dataType}),t&&(s.projectItemIds=t.map(e=>e.id)),s}let zW=(0,uq.memo)(function({endDate:e,filteredItems:t,isLoading:r,period:a,startDate:n,chart:l,forecasting:i}){let{memex_insights_forecasting_backend:s}=g9(),{findColumnByDatabaseId:o}=j5(),d=l.localVersion.configuration,c=(0,uq.useMemo)(()=>zU(d,t,o),[d,t,o]),u=f9("insights-auth-and-config-api-data").url,m=`${f9("memex-insights-query-api-data").url}?${zF(a,n,e)}`,p=l.localVersion.configuration.type,f=(0,uq.useMemo)(()=>{let e=[`--render ${zz(p)}`];return i>0&&e.push(`(
        data-forecast-type:linear
        data-forecast-buckets-in-future:${i}
      )`),e.join("\n")},[i,p]);return m?t&&0===t.length?(0,uO.jsx)(ze,{series:null}):r?(0,uO.jsx)(ze,{loading:!0}):s?(0,uO.jsx)(z$,{options:c,period:a,startDate:n,endDate:e,forecasting:i,chartType:p,getExtendedDataForForecasting:i>0&&!t}):(0,uO.jsx)($6,{authUrl:u,apiUrl:m,query:f,options:c},f):null});try{(lb=zW).displayName||(lb.displayName="HistoricalInsightsChart")}catch{}let zH=e=>{let{updateChartName:t}=$D(),[r,a]=Eh(e.name),n=(0,uq.useCallback)(()=>{a(e.name)},[e.name,a]),l=(0,uq.useCallback)(async()=>{if($k(e))return;let a=r.trim();a!==e.name&&(a.length?await t.perform({chartNumber:e.number,chart:{name:a}}):n())},[e,r,t,n]);return{chartName:r,setLocalChartName:a,revertChartName:n,saveChartName:l}},zG=({showTooltip:e,text:t="",children:r})=>e?(0,uO.jsx)(kK.Z,{"aria-label":t,direction:"s",align:"right",children:r}):(0,uO.jsx)(uO.Fragment,{children:"children"}),zq=(0,uq.memo)(({chart:e,...t})=>{let{hasWritePermissions:r}=yI(),{chartName:a,setLocalChartName:n,revertChartName:l,saveChartName:i}=zH(e),s=(0,uq.useRef)(null),o=(0,uq.useCallback)(e=>{n(e.target.value)},[n]),d=(0,uq.useCallback)(e=>{switch(e.key){case"Enter":i();break;case"Escape":e.stopPropagation(),l()}},[l,i]),c=Eg(d),u=(0,uq.useCallback)(()=>{s.current?.focus()},[]),m=(0,uq.useCallback)(()=>{document.hasFocus()&&i()},[i]),p=ER();return(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,uO.jsx)(zG,{showTooltip:r,text:"Rename",children:(0,uO.jsx)(mF.Z,{sx:{...r?{"&:focus-within":{boxShadow:"primary.shadow.focus",borderRadius:"2"},"&:hover:not(:focus-within)":{boxShadow:e=>`0 0 0 3px ${e.colors.border.default}`,borderRadius:"2"}}:{},px:1,mx:-1},children:r?(0,uO.jsx)(E_.Z,{...p,children:(0,uO.jsx)(k9,{as:Sa,...t,ref:s,autoComplete:"off",placeholder:fU.addInsightsChartNamePlaceholder,"aria-label":fU.addInsightsChartNamePlaceholder,value:a,onChange:o,onClick:u,onBlur:m,id:"insightsChartNameInput",...c,...(0,mp.f)("insights-chart-name")})}):(0,uO.jsx)(mF.Z,{sx:{fontSize:3,fontWeight:600},...(0,mp.f)("insights-chart-name"),children:a})})})})});zq.displayName="InsightsChartName";try{(lv=zG).displayName||(lv.displayName="ConditionalTooltip")}catch{}let zK=({onResize:e}={})=>{let t=Ru(),r=CD(t??null),a=m1(e);return(0,uq.useLayoutEffect)(()=>{a.current?.(r)},[r,a]),r};function zQ({chart:e,showUpsellDialog:t}){let{canCreateChart:r}=Tj(),{updateLocalChartConfiguration:a,updateChartConfiguration:n,createChartConfiguration:l,resetLocalChangesForChartNumber:i}=$D(),{closePane:s}=$M(),o=yq(),d=$j(e),[c,u]=yY(),m=(0,uq.useCallback)(async()=>{function a(){let e=$I(new URLSearchParams(c));e.toString()!==c.toString()&&u(e,{replace:!0})}$k(e)?r()?(await l.perform({chart:{configuration:e.localVersion.configuration}}),i(e.number),a(),"succeeded"===l.status.current.status&&o(mS.generatePath({insightNumber:l.status.current.data.chart.number}))):t():(await n.perform({chartNumber:e.number,chart:{configuration:e.localVersion.configuration}}),a()),s()},[e,s,c,u,r,l,i,o,t,n]),p=(0,uq.useCallback)(()=>{a(e.number,{...e.serverVersion.configuration,filter:e.localVersion.configuration.filter});let t=$S(new URLSearchParams(c));c.toString()!==t.toString()&&u(t),s()},[e.localVersion.configuration.filter,e.number,e.serverVersion.configuration,s,c,u,a]);return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,uO.jsx)(jI.z,{onClick:p,disabled:!d.isConfigurationDirty,...(0,mp.f)("insights-discard-changes"),children:fE.discardChanges}),(0,uO.jsx)(jI.z,{variant:"primary",onClick:m,disabled:!d.isConfigurationDirty,...(0,mp.f)("insights-save-changes"),children:$k(e)?fE.saveToNewChart:fE.saveChanges})]})}try{(lw=zQ).displayName||(lw.displayName="ActionButtons")}catch{}function zY(){return(0,uO.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,uO.jsxs)("g",{children:[(0,uO.jsx)("line",{x1:"1.75",y1:"0.75",x2:"1.75",y2:"15.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,uO.jsx)("rect",{x:"1",y:"3",width:"9",height:"3",rx:"1.5",fill:"currentColor"}),(0,uO.jsx)("rect",{x:"1",y:"7",width:"13",height:"3",rx:"1.5",fill:"currentColor"}),(0,uO.jsx)("rect",{x:"1",y:"11",width:"6",height:"3",rx:"1.5",fill:"currentColor"})]})})}try{(lj=zY).displayName||(lj.displayName="BarChartIcon")}catch{}function zX(){return(0,uO.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,uO.jsx)("line",{x1:"15.25",y1:"14.25",x2:"0.75",y2:"14.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,uO.jsx)("rect",{x:"2.75",y:"6.75",width:"1.5",height:"7.5",rx:"0.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),(0,uO.jsx)("rect",{x:"6.75",y:"4.75",width:"1.5",height:"9.5",rx:"0.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),(0,uO.jsx)("rect",{x:"10.75",y:"9.75",width:"1.5",height:"4.5",rx:"0.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"})]})}try{(lC=zX).displayName||(lC.displayName="ColumnChartIcon")}catch{}function zJ(){return(0,uO.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,uO.jsx)("path",{d:"M0.75 14.25H0C0 14.6642 0.335786 15 0.75 15L0.75 14.25ZM0.75 13.25L0.281479 12.6643C0.103567 12.8067 0 13.0222 0 13.25H0.75ZM5.75 9.25L6.08541 8.57918L5.6562 8.36457L5.28148 8.66435L5.75 9.25ZM9.75 11.25L9.41459 11.9208C9.67891 12.053 9.99621 12.0176 10.2249 11.8305L9.75 11.25ZM15.25 6.75H16C16 6.46021 15.833 6.19635 15.5712 6.07225C15.3093 5.94815 14.9994 5.98602 14.7751 6.16953L15.25 6.75ZM15.25 14.25V15C15.6642 15 16 14.6642 16 14.25H15.25ZM1.5 14.25V13.25H0V14.25H1.5ZM1.21852 13.8357L6.21852 9.83565L5.28148 8.66435L0.281479 12.6643L1.21852 13.8357ZM5.41459 9.92082L9.41459 11.9208L10.0854 10.5792L6.08541 8.57918L5.41459 9.92082ZM10.2249 11.8305L15.7249 7.33047L14.7751 6.16953L9.27507 10.6695L10.2249 11.8305ZM14.5 6.75V14.25H16V6.75H14.5ZM15.25 13.5H0.75V15H15.25V13.5Z",fill:"currentColor"}),(0,uO.jsx)("path",{d:"M0.281479 8.91435C-0.0419677 9.17311 -0.0944088 9.64507 0.164348 9.96852C0.423106 10.292 0.895075 10.3444 1.21852 10.0857L0.281479 8.91435ZM5.75 5.5L6.08541 4.82918C5.82376 4.69835 5.50991 4.7316 5.28148 4.91435L5.75 5.5ZM9.75 7.5L9.41459 8.17082L9.87424 8.40065L10.2545 8.05496L9.75 7.5ZM15.7545 3.05496C16.061 2.77632 16.0836 2.30199 15.805 1.9955C15.5263 1.689 15.052 1.66641 14.7455 1.94504L15.7545 3.05496ZM1.21852 10.0857L6.21852 6.08565L5.28148 4.91435L0.281479 8.91435L1.21852 10.0857ZM5.41459 6.17082L9.41459 8.17082L10.0854 6.82918L6.08541 4.82918L5.41459 6.17082ZM10.2545 8.05496L15.7545 3.05496L14.7455 1.94504L9.2455 6.94504L10.2545 8.05496Z",fill:"currentColor"})]})}try{(lk=zJ).displayName||(lk.displayName="StackedAreaChartIcon")}catch{}let z0={bar:{label:"Bar",type:"bar",icon:zY},column:{label:"Column",type:"column",icon:zX},line:{label:"Line",type:"line",icon:mM.RIw},"stacked-area":{label:"Stacked area",type:"stacked-area",icon:zJ},"stacked-bar":{label:"Stacked bar",type:"stacked-bar",icon:zY},"stacked-column":{label:"Stacked column",type:"stacked-column",icon:zX}},z1=Object.values(z0);function z2({chart:e}){let{updateLocalChartConfiguration:t}=$D(),{number:r,localVersion:{configuration:{type:a}}}=e,n=z0[a],{setNextChartParams:l}=zc(e),i=(0,uq.useCallback)(e=>{let a={type:e.type};t(r,a),l(a)},[t,r,l]);return(0,uO.jsxs)(mF.Z,{sx:{mb:4},children:[(0,uO.jsx)(mO.Z,{as:"label",sx:{display:"flex",mb:2},children:"Layout"}),(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Button,{"aria-label":"Select layout",leadingIcon:n?.icon,sx:zu,children:n?.label??"None"}),(0,uO.jsx)(In.P.Overlay,{sx:zm,children:(0,uO.jsx)(Ia.S,{selectionVariant:"single",...(0,mp.f)("chart-layout-list"),children:z1.map((e,t)=>(0,uO.jsxs)(Ia.S.Item,{selected:e.type===a,onSelect:()=>i(e),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(e.icon,{})}),e.label]},t))})})]})]})}try{(lS=z2).displayName||(lS.displayName="LayoutSelector")}catch{}let z5=new Set([mD.Iteration,mD.SingleSelect,mD.Milestone,mD.Repository,mD.Labels,mD.Assignees]),z3=new Set([mD.Iteration,mD.SingleSelect,mD.Repository,mD.Labels]),z4=new Set([mD.Milestone,mD.Assignees]),z6=(e,t)=>e?.label??(t?fU.invalidFieldLabel:"None"),z7={borderColor:"danger.emphasis"},z8=e=>({...zu,...e?z7:{}});function z9({chart:e}){let{allColumns:t}=CB(),{findColumnByName:r}=IZ(),{updateLocalChartConfiguration:a}=$D(),{setNextChartParams:n}=zc(e),l=gc(r("Status")),{memex_historical_charts_on_assignees_milestones:i}=g9(),s=(0,uq.useCallback)(t=>{let r={xAxis:{...e.localVersion.configuration.xAxis,dataSource:{column:t.type},groupBy:"time"===t.type?{column:l.databaseId}:void 0},yAxis:"time"===t.type?{aggregate:{operation:"count"}}:e.localVersion.configuration.yAxis};a(e.number,r),n(r)},[l.databaseId,e.localVersion.configuration.xAxis,e.localVersion.configuration.yAxis,e.number,n,a]),o=(0,uq.useCallback)(t=>{if("time"===t)return;let r={xAxis:{...e.localVersion.configuration.xAxis,groupBy:null==t?void 0:{column:t}}};a(e.number,r),n(r)},[e.localVersion.configuration.xAxis,e.number,n,a]),d=(0,uq.useMemo)(()=>t.filter(e=>z5.has(e.dataType)).map(e=>({label:e.name,icon:Li(e.dataType),type:e.databaseId,category:"field"})).concat({label:"Time",type:"time",icon:mM.Que,category:"historical"}).sort((e,t)=>e.label.localeCompare(t.label)),[t]),c=(0,uq.useMemo)(()=>{let e=new Set([...z3,...i?z4:[]]);return t.filter(t=>e.has(t.dataType)).map(e=>({label:e.name,icon:Li(e.dataType),type:e.databaseId,category:"field"})).sort((e,t)=>e.label.localeCompare(t.label))},[t,i]),u=d.find(t=>t.type===e.localVersion.configuration.xAxis.dataSource.column),m=!u&&!!e.localVersion.configuration.xAxis.dataSource.column,p=z6(u,m),f=(0,uq.useMemo)(()=>d.filter(e=>"historical"===e.category),[d]),h=(0,uq.useMemo)(()=>d.filter(e=>"field"===e.category),[d]),g=(0,uq.useMemo)(()=>$C(e)?c:d.filter(e=>!("time"===e.type||e.type===u?.type)),[e,c,u?.type,d]),x=g.find(t=>t.type===e.localVersion.configuration.xAxis.groupBy?.column),y=!x&&!!e.localVersion.configuration.xAxis.groupBy?.column,b=z6(x,y),v=(0,uO.jsx)(zh,{validationStatus:"error",children:fU.invalidFieldErrorMessage}),{isInsightsEnabled:w,isInsightsPreview:j}=LN();return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(mF.Z,{sx:{mb:4},children:[(0,uO.jsx)(mO.Z,{as:"label",sx:{display:"flex",mb:2},children:"X-axis"}),(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Button,{"aria-label":"Select X-axis",leadingIcon:u?.icon,sx:z8(m),children:p}),(0,uO.jsx)(In.P.Overlay,{sx:zm,children:(0,uO.jsxs)(Ia.S,{selectionVariant:"single",...(0,mp.f)("chart-x-axis-list"),children:[w&&(0,uO.jsx)(Ia.S.Group,{title:"Historical",children:f.map((e,t)=>(0,uO.jsxs)(Ia.S.Item,{selected:u?.type===e.type,onSelect:()=>s(e),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(e.icon,{})}),e.label,j&&(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(kK.Z,{"aria-label":"This is a preview feature",direction:"nw",children:(0,uO.jsx)(mM.uOV,{})})})]},t))}),(0,uO.jsx)(Ia.S.Group,{title:w?"Fields":"",children:h.map((e,t)=>(0,uO.jsxs)(Ia.S.Item,{selected:u?.type===e.type,onSelect:()=>s(e),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(e.icon,{})}),e.label]},t))})]})})]}),m?v:null]}),(0,uO.jsxs)(mF.Z,{sx:{mb:4},children:[(0,uO.jsx)(mO.Z,{as:"label",sx:{display:"flex",mb:2},children:"Group by (optional)"}),(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Button,{"aria-label":"Select X-axis group by",leadingIcon:x?.icon,sx:z8(y),children:b}),(0,uO.jsx)(In.P.Overlay,{sx:zm,children:(0,uO.jsxs)(Ia.S,{selectionVariant:"single",...(0,mp.f)("chart-x-axis-group-by-list"),children:[(0,uO.jsx)(Ia.S.Item,{selected:void 0===e.localVersion.configuration.xAxis.groupBy,onSelect:()=>o(null),children:"None"}),g.map((t,r)=>(0,uO.jsxs)(Ia.S.Item,{selected:e.localVersion.configuration.xAxis.groupBy?.column===t.type,onSelect:()=>o(t.type),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(t.icon,{})}),t.label]},r))]})})]}),y?v:null]})]})}try{(lI=z9).displayName||(lI.displayName="XAxisSelector")}catch{}let Ue=({chart:e,showUpsellDialog:t})=>(0,uO.jsxs)("div",{children:[(0,uO.jsxs)(mF.Z,{sx:{px:4},children:[(0,uO.jsx)(z2,{chart:e}),(0,uO.jsx)(z9,{chart:e}),(0,uO.jsx)(zj,{chart:e})]}),(0,uO.jsx)(mF.Z,{sx:{p:4,borderTop:"1px solid",borderColor:"border.default"},children:(0,uO.jsx)(zQ,{chart:e,showUpsellDialog:t})})]}),Ut=({chart:e,showUpsellDialog:t})=>{let r=(0,uq.useRef)(null),a=(0,uq.useRef)(null),{closePane:n,isOpen:l}=$M();return l?(0,uO.jsx)(Rl.Z,{initialFocusRef:a,returnFocusRef:r,onEscape:n,onClickOutside:n,children:(0,uO.jsxs)(Ur,{initialFocusRef:a,children:[(0,uO.jsxs)(mF.Z,{sx:{px:4,py:3,display:"flex",justifyContent:"space-between"},children:[(0,uO.jsx)(Cn.Z,{sx:{fontSize:2},children:"Configure chart"}),(0,uO.jsx)(kF.h,{"aria-label":"Close configuration pane",variant:"invisible",icon:mM.b0D,sx:{px:2},onClick:n,...(0,mp.f)("side-panel-button-close")})]}),(0,uO.jsx)(Ue,{chart:e,showUpsellDialog:t})]})}):null},Ur=({initialFocusRef:e,children:t})=>{let r=zK(),{isClosing:a}=$M(),{containerRef:n}=(0,Cp.P)({disabled:!!a,initialFocusRef:e});return(0,uO.jsx)(mF.Z,{ref:n,sx:{display:"flex",flexDirection:"column",overflow:"hidden",position:"fixed",bottom:"0",right:"0",width:400,height:r.clientHeight,backgroundColor:"canvas.default",boxShadow:"shadow.large",borderLeft:"1px solid",borderColor:"border.default",":focus":{outline:"none"}},tabIndex:-1,...(0,mp.f)("insights-configuration-pane"),children:t})};try{(lN=Ue).displayName||(lN.displayName="InsightsConfigurationPaneForm")}catch{}try{(l_=Ut).displayName||(l_.displayName="InsightsConfigurationPane")}catch{}let Ua=({filteredItems:e,filterValue:t,handleFilterValueChange:r,onClearButtonClick:a,setValueFromSuggestion:n,onSaveChanges:l,onResetChanges:i,inputRef:s,hideSaveButton:o})=>{let{items:d}=bt(),c=(0,uq.useMemo)(()=>({items:d}),[d]);return(0,uO.jsx)(kv.Provider,{value:c,children:(0,uO.jsx)(SE,{inputRef:s,height:"32px",value:t,onChange:r,onClearButtonClick:a,setValueFromSuggestion:n,filterCount:e?e.length:null,onSaveChanges:l,onResetChanges:i,hideSaveButton:o})})};try{(lT=Ua).displayName||(lT.displayName="InsightsFilters")}catch{}function Un(){let[e,t]=(0,uq.useState)(!1),{postStats:r}=bM(),a=(0,uq.useCallback)(()=>{t(!0),r({name:"insights_upsell_dialog_open"})},[r]),n=(0,uq.useCallback)(()=>t(!1),[]),l=(0,uq.useCallback)(()=>e?(0,uO.jsx)(Ul,{hideDialog:n}):null,[n,e]);return{showDialog:a,InsightsUpsellDialog:l}}function Ul({hideDialog:e}){let{savedChartsLimit:t}=LN(),r=MJ("insightsChartLimitDialog","banner"),{postStats:a}=bM();return(0,uO.jsxs)(RV.V,{"aria-labelledby":"insights-chart-limits-dialog-title",onClose:()=>e(),width:"xlarge",role:"alertdialog",renderHeader:()=>(0,uO.jsx)(mF.Z,{sx:{backgroundImage:`url(${r})`,backgroundRepeat:"no-repeat",backgroundPosition:"left",backgroundSize:"100%",height:"142px",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"}}),footerButtons:[{content:fU.upsellDialogCancelButton,onClick:()=>e()},{as:"a",buttonType:"primary",content:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mL.Z,{icon:mM.Pfi,sx:{mr:1}}),fU.upsellDialogUpgradePlanButton]}),href:"https://github.com/pricing",sx:{ml:3},target:"_blank",rel:"noreferrer",onClick:()=>a({name:"insights_upsell_dialog_upgrade_click"})}],children:[(0,uO.jsx)(mO.Z,{id:"insights-chart-limits-dialog-title",sx:{fontSize:4,fontWeight:"bold",my:3,px:3},children:fU.upsellDialogTitle}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",mt:2,px:3},children:[(0,uO.jsx)(mO.Z,{children:fU.planUpgradeText(t)}),(0,uO.jsx)(mO.Z,{sx:{fontWeight:"bold",mt:2},children:fU.upsellDialogSubtitle}),(0,uO.jsx)(Ui,{text:fU.upsellDialogBullet1}),(0,uO.jsx)(Ui,{text:fU.upsellDialogBullet2}),(0,uO.jsx)(Ui,{text:fU.upsellDialogBullet3})]})]})}function Ui({text:e}){return(0,uO.jsxs)(mF.Z,{sx:{mt:2},children:[(0,uO.jsx)(mL.Z,{sx:{mr:2,color:"success.fg"},icon:mM.nQG})," ",(0,uO.jsx)(mO.Z,{children:e})]})}try{(lR=InsightsUpsellDialog).displayName||(lR.displayName="InsightsUpsellDialog")}catch{}try{(lE=Ul).displayName||(lE.displayName="UpsellDialog")}catch{}try{(lD=Ui).displayName||(lD.displayName="UpsellDialogChecklistItem")}catch{}function Us({size:e,color:t}){return`0 0 0 ${e} ${t}`}let Uo=({startDate:e,endDate:t})=>{let[r,a]=yY(),n=(0,uq.useMemo)(()=>{let r=(0,fS.Z)(e??""),a=(0,fS.Z)(t??"");return(0,ps.Z)(r)&&(0,ps.Z)(a)?{from:r,to:a}:null},[t,e]),l=(0,uq.useCallback)(e=>{if(!e)return;let t=new URLSearchParams(r);t.set(yZ,"custom"),t.set(yO,(0,P5.Z)(e.from,{representation:"date"})),t.set(yB,(0,P5.Z)(e.to,{representation:"date"})),a(t)},[a,r]),i=null!==n;return(0,uO.jsx)(P2.Mt,{variant:"range",value:n,onChange:l,placeholder:"Custom range",anchor:({children:e,...t})=>(0,uO.jsxs)(jI.z,{variant:"invisible",sx:{fontWeight:"normal",bg:i?"btn.outline.selectedBg":"transparent",color:i?"btn.outline.selectedText":"fg.default",":hover":{bg:i?"btn.outline.selectedBg":"transparent",boxShadow:e=>Us({size:"1px",color:e.colors.btn.outline.hoverBorder})}},...(0,mp.f)("insight-custom-date-picker"),...t,children:[(0,uO.jsx)(mM.Que,{}),(0,uO.jsx)(mO.Z,{sx:{px:2},children:e}),(0,uO.jsx)(mM.v4q,{})]})})};try{(lP=Uo).displayName||(lP.displayName="InsightCustomDatePicker")}catch{}var Ud=r(68807);let Uc=(0,uq.forwardRef)(function({activeClassName:e,...t},r){return(0,uO.jsx)(yK,{...t,ref:r})}),Uu=(0,uq.forwardRef)(function({activeClassName:e,...t},r){return(0,uO.jsx)(yQ,{...t,ref:r})});try{(lA=LinkWithoutActiveClassNamePassThrough).displayName||(lA.displayName="LinkWithoutActiveClassNamePassThrough")}catch{}try{(lM=Uu).displayName||(lM.displayName="NavLinkWithoutActiveClassName")}catch{}let Um=[{value:"2W"},{value:"1M"},{value:"3M"},{text:"Max",value:"max"}];function Up({periodValue:e,selected:t,children:r}){let a=(0,uQ.TH)(),n=(0,uq.useMemo)(()=>{let t=new URLSearchParams(a.search);return t.set(yZ,e),t.delete(yO),t.delete(yB),{pathname:a.pathname,search:t.toString()}},[e,a.pathname,a.search]);return(0,uO.jsx)(Ud.Z.Link,{as:Uc,to:n,selected:t,sx:{borderRadius:6,px:"10px",fontWeight:400,mr:"4px",minHeight:"30px",border:"none","&:first-of-type":{borderLeft:"none"},...t?{}:{"&:hover":{backgroundColor:"transparent",boxShadow:e=>`${Us({size:"1px",color:e.colors.border.default})}, ${e.shadows.primer.shadow.inset}`}}},children:r},e)}function Uf({period:e}){return(0,uO.jsx)(Ud.Z,{"aria-label":"Main",sx:{"> div:first-child":{marginBottom:0}},children:(0,uO.jsx)(Ud.Z.Links,{children:Um.map((t,r)=>(0,uO.jsx)(Up,{periodValue:t.value,selected:e===t.value||!e&&0===r,children:t.text??t.value},t.value))})})}try{(lL=Up).displayName||(lL.displayName="PeriodNavigationLink")}catch{}try{(lF=Uf).displayName||(lF.displayName="PeriodNavigation")}catch{}let Uh=(0,uq.memo)(function(){let e=(0,uQ.UO)(),{getChartConfigurationByNumber:t}=Tj(),r=t(e.insightNumber?Number(e.insightNumber):0);if(!r)return(0,uO.jsx)(zL,{});let a=(0,uO.jsx)(zA,{});return(0,uO.jsx)(ErrorBoundary,{fallback:a,children:(0,uO.jsx)(Uy,{chart:r})},r.number)}),Ug={minWidth:"100%",minHeight:"200px",aspectRatio:["4/3","4/3","16 / 9"],maxWidth:"100%",[`& ${$2}`]:{width:"100%",display:"block",height:"100%"},[`& ${$X},
    & ${$7},
    & ${$0},
    & ${$9}`]:{width:"100%",display:"block",height:"100%",border:"1px solid",borderColor:"border.default",borderRadius:2,p:5},"& .redaction_msg":{ml:"unset !important"}},Ux={width:"100%",height:"100%"},Uy=(0,uq.memo)(function({chart:e}){let{updateChartConfiguration:t}=$D(),[r,a]=yY(),{filteredItems:n,filterValue:l,handleFilterValueChange:i,onClearButtonClick:s,setValueFromSuggestion:o,resetFilter:d,inputRef:c}=$Z(e),{endDate:u,period:m,startDate:p}=$U(e),f=$G(e),{openPane:h}=$M(),{isLoading:g,isValid:x}=BS(e.localVersion.configuration),y=(0,uq.useCallback)(async()=>{if($k(e))return;await t.perform({chartNumber:e.number,chart:{configuration:{...e.localVersion.configuration,filter:l}}});let n=new URLSearchParams(r);n.delete(yT),a(n,{replace:!0})},[e,l,r,a,t]),b=$j(e),v=$k(e),w=!v,j=$C(e),{InsightsUpsellDialog:C,showDialog:k}=Un();return(0,uO.jsxs)(mF.Z,{sx:{maxWidth:(0,uG.U2)("sizes.large"),mx:"auto",display:"flex",flexDirection:"column",gap:"24px"},children:[(0,uO.jsxs)(Cn.Z,{...(0,mp.f)("insights-header"),as:"h2",sx:{borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:"border.muted",fontSize:4,fontWeight:"normal",pb:2,display:"flex",justifyContent:"space-between"},children:[v?e.name:(0,uO.jsx)(zq,{chart:e}),(0,uO.jsx)(mF.Z,{children:(0,uO.jsx)(jI.z,{leadingIcon:mM.vdY,onClick:h,...(0,mp.f)("insights-configuration-pane-button-open"),children:"Configure"})})]}),e.description?(0,uO.jsxs)(mO.Z,{sx:{fontSize:1},children:[e.description," "]}):null,(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,uO.jsx)(mF.Z,{sx:{width:"100%",mr:j?3:0},children:(0,uO.jsx)(Ua,{inputRef:c,filteredItems:n,filterValue:l,handleFilterValueChange:i,onClearButtonClick:s,setValueFromSuggestion:o,onSaveChanges:w&&b.isFilterDirty?y:void 0,hideSaveButton:!w,onResetChanges:b.isFilterDirty?d:void 0})}),j?(0,uO.jsx)(kK.Z,{"aria-label":"Only project items currently matching filter criteria are charted over time",direction:"sw",wrap:!0,children:(0,uO.jsx)(mL.Z,{icon:mM.szr,sx:{color:"fg.subtle"}})}):null]}),x?(0,uO.jsxs)(uO.Fragment,{children:[j?(0,uO.jsxs)(mF.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,uO.jsx)(Uf,{period:m}),(0,uO.jsx)(Uo,{startDate:p,endDate:u})]}):null,(0,uO.jsx)(mF.Z,{sx:Ug,children:(0,uO.jsx)(mF.Z,{sx:Ux,children:j?(0,uO.jsx)(zW,{chart:e,isLoading:g,filterValue:l,period:m,startDate:p,endDate:u,filteredItems:n,forecasting:f}):(0,uO.jsx)(zD,{configuration:e.localVersion.configuration,isLoading:g,filterValue:l,filteredItems:n})})})]}):(0,uO.jsx)(zM,{}),(0,uO.jsx)(Ut,{chart:e,showUpsellDialog:k}),(0,uO.jsx)(C,{})]})});try{(lZ=Uh).displayName||(lZ.displayName="InsightsChartView")}catch{}try{(lO=Uy).displayName||(lO.displayName="InsightChartContent")}catch{}let Ub={position:"relative"},Uv=(0,uq.memo)(function({children:e,isDirty:t,hideDirtyState:r=!1,...a}){let n=r?{}:{height:"8px",width:"8px",backgroundColor:"accent.emphasis",top:"-1px",right:"-3px",borderRadius:"100%",boxShadow:e=>`0 0 0 2px ${e.colors.canvas.overlay}`,flex:"none",...a.sx},l=(0,uq.useRef)(null),i={...a,title:void 0,ref:l,"aria-label":"Unsaved changes",sx:e?{...n,position:"absolute"}:{...n,position:"relative"}};return e?(0,uO.jsxs)(mF.Z,{className:"dirty-icon-container",sx:Ub,children:[e,t&&(0,uO.jsx)(mF.Z,{...i})]}):t?(0,uO.jsx)(mF.Z,{...i}):null});try{(lB=Uv).displayName||(lB.displayName="PotentiallyDirty")}catch{}let Uw=(0,uq.memo)(function({to:e,isActive:t,children:r,isDirty:a,leadingVisual:n=null,trailingVisual:l=null,...i}){return(0,uO.jsxs)(Ir,{to:e,isActive:t,end:!0,...i,children:[n?(0,uO.jsx)(Ie.$.LeadingVisual,{children:n}):null,(0,uO.jsxs)(mF.Z,{sx:{position:"relative",display:"flex",alignItems:"center",gap:2},children:[r,!t&&a?(0,uO.jsx)(Uv,{isDirty:!0,hideDirtyState:!1,sx:{position:"static"},...(0,mp.f)("my-chart-navigation-item-dirty")}):null]}),l?(0,uO.jsx)(Ie.$.TrailingVisual,{children:l}):null]})});try{(lV=Uw).displayName||(lV.displayName="ChartLink")}catch{}let Uj=({chart:e})=>{let{isDirty:t,isConfigurationDirty:r}=$j(e),[,a]=yY(),[n,l]=(0,uq.useState)(!1),i=(0,uq.useRef)(null),{hasWritePermissions:s}=yI(),{chartName:o,setLocalChartName:d,revertChartName:c,saveChartName:u}=zH(e),{showDialog:m,InsightsUpsellDialog:p}=Un(),f=(0,uq.useCallback)(e=>{l(e),e||u()},[u]),h=(0,uq.useCallback)(e=>{e.target.setSelectionRange(0,e.target.value.length)},[]),g=(0,uq.useCallback)(e=>{e.defaultPrevented||d(e.target.value)},[d]),x=(0,uq.useCallback)(e=>{"Enter"===e.key&&(l(!1),u()),"Escape"===e.key&&(l(!1),c(),e.preventDefault())},[u,c]),y=Eg(x),b=(0,uq.useRef)(null);(0,uq.useEffect)(()=>{!n&&b.current&&(b.current.focus(),b.current=null)},[n]);let{canCreateChart:v}=Tj(),{destroyChartConfiguration:w,createChartConfiguration:j,updateChartConfiguration:C,resetLocalChangesForChartNumber:k}=$D(),S=yq(),I=(0,f6.N)(),{getChartLinkTo:N}=Tj(),_=$k(e),T=!_,R=s&&T,E=(0,uq.useCallback)(async t=>{t.preventDefault(),t.stopPropagation(),!_&&await I({title:"Delete chart?",content:`Are you sure you want to delete "${e.name}"?`,confirmButtonContent:"Delete",confirmButtonType:"danger"})&&(await w.perform(e.number),"succeeded"===w.status.current.status&&S(N(0).url))},[e.name,e.number,_,I,w,N,S]),D=(0,uq.useCallback)(async t=>{t.preventDefault(),t.stopPropagation();let r=e.number;v()?(await j.perform({chart:{configuration:e.localVersion.configuration}}),"succeeded"===j.status.current.status&&S(mS.generatePath({insightNumber:j.status.current.data.chart.number})),k(r)):m()},[v,e.localVersion.configuration,e.number,j,S,k,m]),P=(0,uq.useCallback)(async t=>{t.preventDefault(),t.stopPropagation(),_||(await C.perform({chartNumber:e.number,chart:{configuration:{...e.localVersion.configuration}}}),a($I(new URLSearchParams(window.location.search))))},[e.localVersion.configuration,e.number,_,a,C]),A=(0,uq.useCallback)(async t=>{t.preventDefault(),t.stopPropagation(),k(e.number),a($I(new URLSearchParams(window.location.search)))},[e.number,k,a]),{openPane:M}=$M(),L=ER();return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Uv,{isDirty:t,hideDirtyState:!s,...t?(0,mp.f)("chart-options-dirty"):void 0,children:(0,uO.jsx)(kF.h,{...(0,mp.f)("chart-options-button"),ref:i,"aria-haspopup":"true","aria-expanded":n,icon:mM.AS7,onClick:(0,uq.useCallback)(e=>{e.preventDefault(),l(e=>!e)},[]),sx:{display:"flex",alignItems:"center",justifyContent:"center",ml:1,px:0,py:0,pt:"2px",height:18,width:18,"& svg":{verticalAlign:"top!important"}},"aria-label":"Chart options"})}),(0,uO.jsx)(In.P,{open:n,onOpenChange:f,anchorRef:i,children:(0,uO.jsx)(In.P.Overlay,{sx:{zIndex:3},returnFocusRef:b,width:"medium",children:(0,uO.jsxs)(Ia.S,{children:[R&&(0,uO.jsx)(mF.Z,{as:"li",sx:{listStyleType:"none"},children:(0,uO.jsx)(E_.Z,{...L,sx:{display:"block",px:2},children:(0,uO.jsx)(k4.Z,{value:o,tabIndex:-1,sx:{my:2},"aria-label":"Chart name",placeholder:"Chart name",onClick:e=>{e.preventDefault()},onChange:g,onFocus:h,...y})})}),(0,uO.jsxs)(Ia.S.Item,{onSelect:M,...(0,mp.f)("chart-options-open-configure"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(Uv,{isDirty:r,children:(0,uO.jsx)(mM.vdY,{})})}),"Configure"]}),(0,uO.jsxs)(Ia.S.Item,{onSelect:D,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.cRd,{})}),t?"Save changes to new chart":"Duplicate chart"]}),_?null:(0,uO.jsxs)(Ia.S.Item,{variant:"danger",onSelect:E,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete chart"]}),t?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsxs)(Ia.S.Group,{sx:{"& > ul":{display:"flex"}},children:[s&&T?(0,uO.jsx)(Ia.S.Item,{onSelect:P,...(0,mp.f)("view-options-menu-save-changes-button"),sx:{flex:"auto",color:"accent.fg",borderRight:"1px solid",borderColor:"border.default",borderRadius:0,my:-2,mx:0,py:3,textAlign:"center",fontWeight:"normal","&:hover":{bg:"canvas.inset"}},children:fE.saveChanges}):null,(0,uO.jsx)(Ia.S.Item,{onSelect:A,...(0,mp.f)("chart-options-menu-reset-changes-button"),sx:{flex:"auto",color:"fg.muted",borderRadius:0,my:-2,mx:0,py:3,textAlign:"center",fontWeight:"normal","&:hover":{bg:"canvas.inset"}},children:fE.discardChanges})]})]}):null]})})}),(0,uO.jsx)(p,{})]})};try{(l$=Uj).displayName||(l$.displayName="InsightsChartOptions")}catch{}let UC=(0,uq.memo)(function(){let{getCreateChartRequest:e,canCreateChart:t}=Tj(),{createChartConfiguration:r}=$D(),a=yq(),{showDialog:n,InsightsUpsellDialog:l}=Un();return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(l,{}),(0,uO.jsx)(jI.z,{...(0,mp.f)("add-chart-button"),onClick:(0,uq.useCallback)(async()=>{let l=e();if(t()){if(await r.perform(l),"succeeded"===r.status.current.status){let e=r.status.current.data;a(mS.generatePath({insightNumber:e.chart.number}))}}else n()},[e,t,r,a,n]),sx:{ml:2,mt:2},leadingIcon:mM.pOD,children:fU.sideNavNewChartButton})]})});function Uk(e,t){return e.name.localeCompare(t.name)}let US=({chartConfiguration:e,isActiveChart:t,isInsightsPreview:r})=>(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:[r&&$C(e)?(0,uO.jsx)(kK.Z,{"aria-label":fU.sideNavPreviewFeatureTooltip,direction:"nw",children:(0,uO.jsx)(mM.uOV,{})}):null,t?(0,uO.jsx)(Uj,{chart:e}):null]}),UI=()=>{let e=(0,uQ.UO)(),{chartConfigurations:t,getChartLinkTo:r}=Tj(),{isInsightsPreview:a,isInsightsEnabled:n}=LN(),{postStats:l}=bM(),i=e.insightNumber?Number(e.insightNumber):0,{defaultCharts:s,myCharts:o}=(0,uq.useMemo)(()=>{let[e,r]=gy(Object.values(t),$k);return{defaultCharts:e.sort(Uk),myCharts:r.sort(Uk)}},[t]),d=(0,uq.useCallback)((e,t)=>{l({name:"insights_chart_navigation",context:JSON.stringify({chartNumber:e,...t})})},[l]);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(Ie.$,{sx:{"& > ul":{pt:0}},...(0,mp.f)("insights-side-nav"),children:[(0,uO.jsx)(Ie.$.Group,{title:fU.sideNavDefaultCharts,children:s.map(e=>{let t=0===i,n=$j(e),l=z0[e.localVersion.configuration.type].icon;return(0,uq.createElement)(Uw,{...(0,mp.f)("default-chart-navigation-item"),key:e.number,isDirty:n.isDirty,to:r(e.number).url,isActive:t,leadingVisual:(0,uO.jsx)(l,{}),trailingVisual:(0,uO.jsx)(US,{chartConfiguration:e,isActiveChart:t,isInsightsPreview:a}),onClick:r=>{t?r.preventDefault():d(e.number,e.localVersion.configuration)}},e.name)})}),(0,uO.jsx)(Ie.$.Group,{title:fU.sideNavCustomCharts,children:o.map(e=>{let t=i===e.number,n=$j(e),l=z0[e.localVersion.configuration.type].icon;return(0,uq.createElement)(Uw,{...(0,mp.f)("my-chart-navigation-item"),key:e.number,to:r(e.number).url,isActive:t,isDirty:n.isDirty,leadingVisual:(0,uO.jsx)(l,{}),trailingVisual:(0,uO.jsx)(US,{chartConfiguration:e,isActiveChart:t,isInsightsPreview:a}),onClick:r=>{t?r.preventDefault():d(e.number,e.localVersion.configuration)}},e.name)})})]}),(0,uO.jsx)(mF.Z,{children:(0,uO.jsx)(UC,{})}),a&&n&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ia.S.Divider,{sx:{mt:3}}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",color:"fg.muted",px:3,py:2},children:[(0,uO.jsx)(mF.Z,{sx:{mt:"2px"},children:(0,uO.jsx)(mM.uOV,{})}),(0,uO.jsx)(mF.Z,{sx:{fontSize:1,ml:2},children:fU.sideNavPreviewFeatureText})]})]})]})};try{(lz=UC).displayName||(lz.displayName="AddChartButton")}catch{}try{(lU=US).displayName||(lU.displayName="ChartItemTrailingVisual")}catch{}try{(lW=UI).displayName||(lW.displayName="InsightsSideNav")}catch{}let UN=(0,uq.memo)(function({children:e}){return(0,uO.jsxs)(Ro.X,{containerWidth:"full",sx:{height:"100%",padding:0,m:0,[`& > ${mF.Z}`]:{minHeight:"100%"}},children:[(0,uO.jsx)(Ro.X.Pane,{position:"start",sx:{padding:[3,null,null,4],borderRight:"1px solid",borderColor:"border.subtle"},children:(0,uO.jsx)(UI,{})}),(0,uO.jsx)(Ro.X.Content,{width:"large",sx:{padding:[3,null,null,4]},children:e})]})});try{(lH=UN).displayName||(lH.displayName="InsightsLayout")}catch{}function U_(){return b2(),(0,uO.jsx)(b5,{...(0,mp.f)("insights-page"),children:(0,uO.jsx)($A,{children:(0,uO.jsx)(UN,{children:(0,uO.jsx)(uQ.j3,{})})})})}try{(lG=U_).displayName||(lG.displayName="InsightsPage")}catch{}function UT(e,t){let r=m1(e),a=m1(t);(0,uq.useEffect)(()=>{let e=e=>{document.body.contains(e.target)&&(r.current.some(t=>t.current?.contains(e.target))||a.current())};return addEventListener("click",e,!0),()=>{removeEventListener("click",e,!0)}},[r,a])}async function UR(e){let t=f8("memex-collaborators-api-data"),{data:r}=await hh(t.url,e);return r}async function UE(e){let t=f8("memex-remove-collaborators-api-data"),{data:r}=await hh(t.url,{method:"DELETE",body:e,token:t.token});return r}async function UD({role:e,collaborators:t}){let r=f8("memex-add-collaborators-api-data"),{data:a}=await hh(r.url,{method:"POST",body:{permission:yw.get(e),collaborators:t},token:r.token});return a}async function UP(e){let t=f8("memex-get-organization-access-api-data"),{data:r}=await hh(t.url,e);return{role:r.role??r.permission}}async function UA({role:e}){let t=f8("memex-update-organization-access-api-data");await hh(t.url,{method:"PUT",body:{permission:yw.get(e)},token:t.token})}function UM(e){return"user"===e.actor_type?e.login:e.slug}let UL=e=>`${e.actor_type}/${e.id}`,UF=(0,yJ.r)({primaryKey:"organization-access",queryFn:({signal:e})=>UP({signal:e}),initialData:{role:yy.None}}),UZ=()=>UF({select:(0,uq.useMemo)(()=>e=>yj.get(e.role)??yx.None,[])}),UO=()=>{let e=(0,uW.NL)();return(0,uq.useCallback)(()=>e.prefetchQuery({queryKey:UF.getKey(),queryFn:UF.queryFn}),[e])},UB=()=>{let e=(0,uW.NL)();return(0,Rg.D)({mutationFn:UA,onMutate:({role:t})=>{e.setQueriesData({queryKey:UF.getKey()},{role:yw.get(t)??yy.None})},onSettled:()=>{e.invalidateQueries({queryKey:UF.getKey()})}})},UV=(0,yJ.r)({primaryKey:"all-collaborators",queryFn:({signal:e})=>UR({signal:e})});function U$(e){return new Set(e.collaborators.map(e=>UL(e)))}let Uz=()=>UV({select:U$}),UU=e=>new Map(e.collaborators.map(e=>[UL(e),e])),UW=()=>UV({select:UU}),UH=()=>{let e=(0,uW.NL)();return(0,uq.useCallback)(()=>e.prefetchQuery({queryKey:UV.getKey(),queryFn:UV.queryFn}),[e])},UG=(0,_4.c)({mutationFn:UE}),Uq=()=>{let e=(0,uW.NL)();return UG({onMutate:({collaborators:t})=>{e.setQueriesData({queryKey:UV.getKey()},e=>e?{collaborators:e.collaborators.filter(e=>!t.includes(UL(e)))}:e)},onSettled:()=>{e.invalidateQueries({queryKey:UV.getKey()})}})},UK=(0,_4.c)({mutationFn:UD}),UQ=()=>{let e=(0,uW.NL)();return UK({onMutate:({collaborators:t,role:r})=>{e.setQueriesData({queryKey:UV.getKey()},e=>{if(!e)return e;let a=new Set(t),n={collaborators:e.collaborators.map(e=>a.has(UL(e))?{...e,role:yw.get(r)??yy.None,isUpdated:!0}:e)};return n})},onSettled:()=>{e.invalidateQueries({queryKey:UV.getKey()})}})};async function UY({query:e},t){let r=f8("memex-suggested-collaborators-api-data"),a=new URL(r.url,window.location.origin);a.searchParams.set("q",e);let{data:n}=await hh(a,t);return n}function UX(e,t){return t.query.trim().replace(/^@/,"").length>0}let UJ=(0,yJ.r)({primaryKey:"suggested-collaborators",queryFn:({queryKey:[,e],signal:t})=>UY(e,{signal:t}),enabled:UX}),U0=e=>{let{data:t}=Uz(),r=(0,uq.useCallback)(e=>e.suggestions.map(e=>{if("user"in e){let r="user";return{...e.user,isCollaborator:t?.has(UL({id:e.user.id,actor_type:r}))??!1,actor_type:r}}if("team"in e){let r="team";return{...e.team,isCollaborator:t?.has(UL({id:e.team.id,actor_type:r}))??!1,actor_type:r}}xE(e)}),[t]);return UJ({...e,select:r})};function U1({login:e,id:t,onRemove:r,avatarUrl:a}){return(0,uO.jsxs)(mF.Z,{sx:{m:1,pl:"2px",pr:1,pt:"2px",pb:"2px",display:"flex",borderRadius:"20px",bg:"accent.subtle",flexDirection:"row",alignItems:"center"},...(0,mp.f)(`collaborator-pill-${e}`),children:[(0,uO.jsx)(C$.O,{loading:"lazy",alt:e,src:a,sx:{mr:1}}),(0,uO.jsx)(mO.Z,{sx:{mr:1,color:"accent.fg"},children:e}),(0,uO.jsx)(jI.z,{variant:"invisible",onClick:()=>r(),sx:{p:0,height:"auto"},children:(0,uO.jsx)(mM.b0D,{})})]},t)}try{(lq=U1).displayName||(lq.displayName="CollaboratorPill")}catch{}let U2=({displayName:e,selected:t,onClose:r,role:a,description:n,handleOnClick:l})=>{let i=(0,uq.useCallback)(()=>{l(a)},[l,a]);return(0,uO.jsxs)(Ia.S.Item,{tabIndex:0,selected:t,onClick:i,onKeyDown:e=>{"Enter"===e.key&&(i(),r())},...(0,mp.f)(`collaborators-role-dropdown-item-${a}`),children:[e,(0,uO.jsx)(Ia.S.Description,{variant:"block",children:n})]})},U5=[{value:yx.Admin,displayName:fa(yx.Admin.toString()),description:f$.collaboratorDropDownAdmin},{value:yx.Write,displayName:fa(yx.Write.toString()),description:f$.collaboratorDropDownWrite},{value:yx.Read,displayName:fa(yx.Read.toString()),description:f$.collaboratorDropDownRead}];function U3({align:e="inside-right",roles:t=U5,selectedRoles:r,isOrganizationRole:a=!1,handleOnClick:n,handleDropDownButtonClick:l}){let[i,s]=(0,uq.useState)(!1),o=r.length>1?"Mixed":fa(r[0]??""),d=r.length>0?new Set(r.map(e=>fa(e))):new Set;return(0,uO.jsx)(mF.Z,{sx:{position:"relative"},children:(0,uO.jsxs)(In.P,{open:i,onOpenChange:e=>s(e),...(0,mp.f)("collaborators-role-dropdown"),children:[(0,uO.jsxs)(In.P.Button,{onClick:l,...(0,mp.f)("collaborators-role-dropdown-button"),children:[a?null:(0,uO.jsx)("span",{style:{fontWeight:400},children:"Role: "}),o]}),(0,uO.jsx)(In.P.Overlay,{anchorSide:e,children:(0,uO.jsx)(Ia.S,{selectionVariant:"single",children:t.map(e=>(0,uO.jsx)(U2,{role:e.value,description:e.description,displayName:e.displayName,onClose:()=>s(!1),selected:d.has(e.displayName),handleOnClick:e=>{n(e)}},e.value))})})]})})}try{(lK=U2).displayName||(lK.displayName="CollaboratorRoleDropDownItem")}catch{}try{(lQ=U3).displayName||(lQ.displayName="CollaboratorRoleDropDown")}catch{}let U4=({collaboratorsAddedCount:e,setInvitationRequestState:t})=>{let r=m2(()=>t(Ex.None),5e3);return(0,uq.useEffect)(()=>{r()},[r]),(0,uO.jsxs)(mF.Z,{...(0,mp.f)("success-message"),children:[(0,uO.jsx)(mL.Z,{icon:mM.nQG,sx:{ml:3,color:"success.fg"}}),(0,uO.jsxs)(mO.Z,{children:[" ",e," successfully added "]})]})},U6=()=>(0,uO.jsxs)(mF.Z,{...(0,mp.f)("failure-message"),children:[(0,uO.jsx)(mL.Z,{icon:mM.wNq,sx:{ml:3,color:"danger.fg"}}),(0,uO.jsx)(mO.Z,{children:" Unable to add some users "})]}),U7="add-collaborators-suggestions-list",U8=[],U9=[],We=()=>{let e=(0,uq.useRef)(null),t=(0,uq.useRef)(null),r=(0,uq.useRef)(null),{projectOwner:a}=yk(),[n,l]=(0,uq.useState)(!1),[i,s]=(0,uq.useState)(!1),[o,d]=(0,uq.useState)(yx.Write),[c,u]=(0,uq.useState)(U8),[m,p]=(0,uq.useState)(Ex.None),[f,h]=(0,uq.useState)(""),[g,x]=(0,uq.useState)(""),y=Iy(g.startsWith("@")?g.trim().slice(1):g.trim()),{data:b=U9}=U0({variables:{query:y}});UT([r,e],()=>s(!1));let v=(0,uq.useCallback)(e=>{u(t=>{let r=t.filter(t=>UL(t)!==UL(e));return r.length===t.length?t:r})},[]),w=(0,uq.useCallback)(e=>{let t=new Set(e);u(e=>{let r=[];for(let a of e)t.has(`${UL(a)}`)&&r.push(a);return r})},[u]),j=e=>{let t=b.find(t=>UL(t)===e);t&&u(e=>{let r=e.some(e=>UL(e)===UL(t));return r?e:[...e,t]})},C=t=>{t.isCollaborator||(s(!1),x(""),j(UL(t)),e.current?.focus())},k=(0,uq.useCallback)(({target:e})=>{x(e.value)},[]),S=(0,uq.useCallback)(()=>{s(!0),l(!0)},[s,l]),I=(0,uq.useCallback)(()=>{l(!1)},[l]),N=(0,uq.useCallback)(e=>{if("Backspace"===e.key&&""===g&&c.length>0){let e=c[c.length-1];e&&v(e)}m!==Ex.None&&(p(Ex.None),h(""))},[m,g,c,v]),{addToast:_}=m7(),{mutate:T}=UQ(),R=(0,uq.useCallback)(()=>{if(0!==c.length)return T({role:o,collaborators:c.map(e=>UL(e))},{onSuccess:({failed:e})=>{if(e.length>0)p(Ex.Failed),w(e);else{x("");let e=c.length;h(`${e} ${1===e?"user":"users"}`),p(Ex.Successful),u(U8)}},onError:e=>{_({type:mB.error,message:e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:"Failed to update collaborators"})}})},[_,c,o,T,w]);(0,uq.useLayoutEffect)(()=>{let e=y.startsWith("@")?y.substring(1,y.length):y,t=e.length>0;s(t)},[y]);let E=(0,uq.useCallback)(e=>{v(e),m!==Ex.None&&p(Ex.None)},[p,m,v]),D=a&&"organization"===a.type?f$.addCollaboratorPlaceholderOrgProject:f$.addCollaboratorPlaceholderUserProject,P=b.length>0&&y.length>0&&i;return(0,uO.jsx)(mF.Z,{sx:{flexDirection:"column",flexGrow:1,display:"flex"},...(0,mp.f)("add-collaborators"),children:(0,uO.jsxs)(Cc.Z,{sx:{mb:5,alignItems:"stretch"},children:[(0,uO.jsx)(Cc.Z.Label,{visuallyHidden:!0,children:"Add Collaborators"}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"space-between",my:2},children:[(0,uO.jsx)(Cn.Z,{as:"h3",sx:{fontSize:4,fontWeight:"normal"},children:"Invite collaborators"}),(0,uO.jsx)(mF.Z,{children:(0,uO.jsxs)("div",{"aria-live":"polite",children:[m===Ex.Successful&&(0,uO.jsx)(U4,{setInvitationRequestState:p,collaboratorsAddedCount:f}),m===Ex.Failed&&(0,uO.jsx)(U6,{})]})})]}),(0,uO.jsxs)(mF.Z,{sx:{flexDirection:"row",alignItems:"flex-start",flexWrap:"nowrap",display:"flex"},children:[(0,uO.jsxs)(mF.Z,{ref:t,onClick:()=>e.current?.focus(),sx:{flex:1,width:"100%",display:"flex",boxShadow:n?e=>`0 0 0 2px ${e.colors.accent.fg}`:void 0,flexDirection:"row",borderRadius:2,borderWidth:"1px",borderStyle:"solid",borderColor:n?"accent.emphasis":"border.default"},children:[(0,uO.jsx)(mL.Z,{icon:mM.Tk0,sx:{m:2,color:"fg.muted"}}),(0,uO.jsxs)(mF.Z,{sx:{flexDirection:"row",display:"flex",flex:1,flexWrap:"wrap",cursor:"text"},children:[c.map(e=>{let t=UL(e);return(0,uO.jsx)(U1,{avatarUrl:e.avatarUrl,login:UM(e),id:t,onRemove:()=>E(e)},t)}),(0,uO.jsx)(Sa,{role:"combobox","aria-haspopup":"listbox","aria-expanded":P,"aria-autocomplete":"list","aria-controls":U7,"aria-label":D,style:{flex:1,width:"auto",display:"inline"},autoComplete:"off",value:g,ref:e,onChange:k,onFocus:S,onBlur:I,onKeyDown:N,placeholder:D,id:"add-collaborators-input",...(0,mp.f)("add-collaborators-input")}),P&&(0,uO.jsx)(ka,{testId:U7,listRef:r,controllingElementRef:e,xOriginEdgeAlign:"left",style:{width:"400px"},items:b.map(e=>({renderItem:()=>(0,uO.jsx)(Wt,{suggestion:e}),key:e.id,value:UM(e),asHTML:!0,onSelect:()=>C(e),testId:`collaborator-suggestion-item-${UM(e)}`}))})]})]}),(0,uO.jsx)(mF.Z,{sx:{mx:2},children:(0,uO.jsx)(U3,{selectedRoles:[o],handleOnClick:d})}),(0,uO.jsx)(jI.z,{variant:"primary",onClick:R,...(0,mp.f)("add-collaborators-invite-button"),children:"Invite"})]})]})})};function Wt({suggestion:e}){let t=UM(e);return(0,uO.jsxs)("span",{children:[(0,uO.jsx)(C$.O,{loading:"lazy",alt:t,src:e.avatarUrl,sx:{mr:1}}),(0,uO.jsxs)(mO.Z,{sx:{color:e.isCollaborator?"fg.muted":"fg.default"},children:[e.name," ",(0,uO.jsx)(mO.Z,{sx:{color:"fg.subtle",mx:1},children:t})]}),e.isCollaborator&&(0,uO.jsx)(mO.Z,{sx:{color:"fg.subtle",fontSize:12},children:"\xb7 Already a collaborator"})]})}try{(lY=U4).displayName||(lY.displayName="AddCollaboratorSuccess")}catch{}try{(lX=U6).displayName||(lX.displayName="AddCollaboratorError")}catch{}try{(lJ=We).displayName||(lJ.displayName="AddCollaborators")}catch{}try{(l0=Wt).displayName||(l0.displayName="CollabSuggestionItem")}catch{}let Wr=(0,uq.createContext)(null),Wa=()=>{let e=(0,uq.useContext)(Wr);if(!e)throw Error("useCollaboratorsFilter must be used inside the Provider");return e},Wn={Role:"role",Type:"type"},Wl=({children:e})=>{let t=(0,uq.useMemo)(()=>/(admin|read|write)/gi,[]),r=(0,uq.useMemo)(()=>/(user|team)/gi,[]),a=(0,uq.useCallback)((e,t)=>{let r=RegExp(`\\b${t}:\\b\\S+`,"gi");return e.replace(r,"").replace(/\s\s+/g," ").trim()},[]),[n,l]=(0,uq.useState)(""),[i,s]=(0,uq.useState)([]),[o,d]=(0,uq.useState)(yx.None),[c,u]=(0,uq.useState)(yb.None),m=e=>{d(yx.None),u(yb.None),s(e.split(" ")),l(e)},p=(0,uq.useCallback)(e=>{let a=wd(e);if(a.fieldFilters.length){let n=a.fieldFilters.filter(e=>e[0]===Wn.Role),l=a.fieldFilters.filter(e=>e[0]===Wn.Type),i=!n||1!==n.length,s=!l||1!==l.length;if(i&&s){m(e);return}{let a=!0;if(!i){let e=n[0]?.[1]??"",r=1===e.length&&e[0]?.match(t);r&&(d(e[0]),a=!1)}if(!s){let e=l[0]?.[1],t=e?.length===1&&e[0]?.match(r);t&&(u(e[0]),a=!1)}if(a){m(e);return}}}else d(yx.None),u(yb.None);s(a.searchTokens),l(e)},[t,r]),f=(0,uq.useCallback)((e,l)=>{let i=l===Wn.Role?n.match(t):n.match(r);if((e=e.toLocaleLowerCase())===yx.None||e===yb.None&&l===Wn.Type){p(`${a(n,l)}`);return}if(i&&1===i.length){p(n.replace(i[0],`${e}`));return}let s=n.trimEnd();i&&i.length>1&&(s=`${a(n,l)}`),p(`${s}${s.length?" ":""}${l}:${e}`)},[n,t,r,p,a]),h=(0,uq.useCallback)(e=>{d(e),f(e.toLowerCase(),Wn.Role)},[d,f]),g=(0,uq.useCallback)(e=>{u(e),f(e.toLowerCase(),Wn.Type)},[f,u]),x=(0,uq.useCallback)(e=>{let t=UM(e);if(0===i.length&&o===yx.None&&c===yb.None)return!0;let r=o&&o!==yx.None&&e.role!==yw.get(o.toLowerCase()),a=!!(c&&c!==yb.None&&c!==e.actor_type);return!r&&!a&&(!(i.length>0)||!!t&&vz(i,t.toLowerCase())||!!e.name&&vz(i,e.name.toLowerCase()))},[o,i,c]),y=(0,uq.useMemo)(()=>({query:n,setQuery:p,roleFilter:o,typeFilter:c,setTypeFilter:g,setRoleFilter:h,match:x}),[n,p,o,h,c,g,x]);return(0,uO.jsx)(Wr.Provider,{value:y,children:e})};try{(l1=Wl).displayName||(l1.displayName="CollaboratorsFilterProvider")}catch{}function Wi(e){let t=e.membersCount,r=1===t?`${t} member`:`${t} members`;return`@${e.slug} \u{2022} ${r}`}function Ws(e,t){let r="";return"user"===e.actor_type&&(r=`/${e.login}`),"team"===e.actor_type&&(r=t?`/orgs/${t.login}/teams/${e.slug}`:""),r}function Wo(e,t){return"user"===e.actor_type?`/users/${e.login}/hovercard`:"team"===e.actor_type&&t?.type==="organization"?`/orgs/${t.login}/teams/${e.slug}/hovercard`:void 0}let Wd={padding:3,marginTop:"-1px",borderTopColor:"border.default",borderTopStyle:"solid",borderTopWidth:1,borderRadius:"0 0 6px 6px"},Wc={padding:3,listStyleType:"none",marginTop:"-1px",borderTopColor:"border.muted",borderTopStyle:"solid",borderTopWidth:1},Wu=({collaborator:e,isLastItem:t,isSelected:r,onCheckboxChange:a,onDropDownClick:n,onRemoveButtonClick:l})=>{let{projectOwner:i}=yk(),s=t?Wd:Wc,o=yj.get(e.role)??yx.None,d=e.isUpdated?Wm:mF.Z,c="team"===e.actor_type?Wi(e):UM(e);return(0,uO.jsx)(d,{sx:s,...(0,mp.f)(`collaborators-row-${c}`),children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flex:"auto",alignItems:"center"},children:[(0,uO.jsx)(mF.Z,{sx:{mr:3},children:(0,uO.jsx)("input",{type:"checkbox","aria-label":r?fZ.unselectCollaborator(c):fZ.selectCollaborator(c),checked:r,name:UL(e),onChange:a,...(0,mp.f)(`collaborators-checkbox-${c}`)})}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",flex:"auto"},children:[(0,uO.jsx)(C$.O,{loading:"lazy",alt:c,src:e.avatarUrl,size:32,sx:{mr:3},"data-hovercard-type":e.actor_type,"data-hovercard-url":Wo(e,i)}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,uO.jsx)(w3.Z,{"data-hovercard-type":e.actor_type,"data-hovercard-url":Wo(e,i),sx:{cursor:"pointer",textDecoration:"none",fontWeight:"bold"},href:Ws(e,i),children:e.name}),(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted"},...(0,mp.f)("collaborator-login"),children:c})]})]}),(0,uO.jsx)(U3,{selectedRoles:[o],handleOnClick:t=>n(t,new Set([UL(e)]))}),(0,uO.jsx)(jI.z,{variant:"invisible",onClick:()=>l(new Set([UL(e)])),...(0,mp.f)(`remove-collaborator-${c}`),sx:{color:"fg.muted",border:"1px solid",borderColor:"transparent",boxShadow:"none","&:hover:not([disabled]), &:focus:not([disabled])":{color:"btn.danger.text",border:"1px solid",borderColor:"btn.border"},marginLeft:2},"aria-label":fE.removeTitle,children:fE.removeTitle})]})},e.id)},Wm=(0,uJ.ZP)(mF.Z)`
  animation: fadeOut 2s ease-out;

  @keyframes fadeOut {
    from {
      background: ${(0,uG.U2)("colors.neutral.subtle")};
    }
    to {
      background: ${(0,uG.U2)("colors.canvas.default")};
    }
  }
`,Wp=(0,uq.memo)(Wu);try{(l2=Wu).displayName||(l2.displayName="CollaboratorsListItemComponent")}catch{}try{(l5=Wm).displayName||(l5.displayName="FadedRow")}catch{}try{(l3=Wp).displayName||(l3.displayName="CollaboratorsListItem")}catch{}let Wf=["Read","Write","Admin"],Wh=["User","Team"],Wg=new Map([[yy.Reader,"Read"],[yy.Writer,"Write"],[yy.Admin,"Admin"]]),Wx=new Map,Wy=(0,uq.memo)(function({userCount:e,teamCount:t,showError:r,selectedCollaboratorIds:a,onCheckBoxChange:n,onDropDownItemClick:l,onRemoveButtonClick:i,onDropDownButtonClick:s}){let{data:o=Wx}=UW(),d=new Set;for(let e of a){if(d.size===Wf.length)break;let t=o.get(e);if(t){let e=Wg.get(t.role);e&&d.add(e)}else a.delete(e)}let c=(0,uq.useRef)(null),{typeFilter:u}=Wa(),m=Wb(u,{userCount:e,teamCount:t});(0,uq.useLayoutEffect)(()=>{c.current&&(c.current.indeterminate=0!==a.size&&a.size<m)},[a,m]);let p="";p=1!==e?`${e} members`:`${e} member`,t&&(0===e&&(p=""),p+=(e?", ":"")+(t>1?`${t} teams`:`${t} team`));let f=a.size;return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(mF.Z,{sx:Wv,children:[(0,uO.jsx)(mF.Z,{sx:{display:"flex",alignItems:"center",flex:"1 1 0"},children:(0,uO.jsx)(mF.Z,{sx:{mr:2},children:(0,uO.jsxs)(Cc.Z,{id:"collaborators-checkbox-bulk",children:[(0,uO.jsx)(w6.Z,{name:"collaborators-checkbox-bulk",ref:c,onChange:n,checked:f>0&&f===m,...(0,mp.f)("collaborators-checkbox-bulk")}),(0,uO.jsxs)(Cc.Z.Label,{sx:{color:"fg.muted",fontWeight:"normal"},children:[(0,uO.jsx)(kr,{children:"Select all collaborators. "}),(0,uO.jsx)(mO.Z,{...(0,mp.f)("collaborators-table-counter"),children:f>0?`${f} selected`:p})]})]})})}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,uO.jsx)("div",{"aria-live":"polite",children:f>1&&r&&(0,uO.jsx)(Ww,{})}),(0,uO.jsx)(mF.Z,{...(0,mp.f)("collaborators-header-dropdown"),children:f>1?(0,uO.jsx)(Wj,{selectedRoles:Array.from(d),collaboratorIds:a,onDropDownItemClick:l,onDropDownButtonClick:s}):(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(Wk,{}),(0,uO.jsx)(WS,{})]})}),f>1&&(0,uO.jsx)(jI.z,{sx:{ml:2,"&:hover:not([disabled]), &:focus:not([disabled])":{color:"btn.danger.text"}},onClick:()=>i(a),...(0,mp.f)("collaborators-remove-bulk"),children:fE.removeTitle})]})]}),(0,uO.jsx)(mF.Z,{sx:{p:3},children:(0,uO.jsx)(WC,{})})]})});function Wb(e,t){let r={[yb.User]:t.userCount,[yb.Team]:t.teamCount,[yb.None]:t.userCount+t.teamCount};return r[e]}let Wv={display:"flex",flexWrap:"wrap",alignItems:"center",padding:3,margin:"-1px -1px 0",backgroundColor:"canvas.subtle",borderColor:"border.default",borderStyle:"solid",borderWidth:1,borderTopLeftRadius:2,borderTopRightRadius:2};function Ww(){return(0,uO.jsxs)(mF.Z,{...(0,mp.f)("failure-message"),sx:{mr:2},children:[(0,uO.jsx)(mL.Z,{icon:mM.wNq,sx:{mr:1,color:"danger.fg"}}),(0,uO.jsx)(mO.Z,{children:"Something went wrong"})]})}function Wj(e){return(0,uO.jsx)(U3,{selectedRoles:e.selectedRoles,handleOnClick:t=>e.onDropDownItemClick(t,e.collaboratorIds),handleDropDownButtonClick:e.onDropDownButtonClick,...(0,mp.f)("collaborators-header-role-picker")})}let WC=()=>{let{query:e,setQuery:t}=Wa(),{projectOwner:r}=yk(),[a,n]=Eh(e),l=(0,uq.useRef)(),i=e=>{let r=e.target.value;n(r),l.current&&l.current.cancel(),l.current=(0,b7.Z)(()=>t(r),200),l.current()};return(0,uO.jsx)(mF.Z,{sx:{flex:"1 1 100%"},...(0,mp.f)("filter-collaborators"),children:(0,uO.jsx)(k4.Z,{placeholder:r&&"organization"===r.type?f$.collaboratorFilterPlaceholderOrgProject:f$.collaboratorFilterPlaceholderUserProject,value:a,contrast:!0,onChange:i,...(0,mp.f)("filter-collaborators-input"),sx:{width:"100%"}})})},Wk=()=>{let{typeFilter:e,setTypeFilter:t}=Wa(),[r,a]=(0,uq.useState)(!1),n=(0,uq.useCallback)(e=>{t(e)},[t]),l=(0,uq.useCallback)((e,t)=>{n(t?yb.None:e)},[n]);return(0,uO.jsxs)(In.P,{open:r,onOpenChange:e=>a(e),children:[(0,uO.jsx)(In.P.Button,{...(0,mp.f)("collaborators-header-type-filter-button"),children:(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted"},children:"Type"})}),(0,uO.jsx)(In.P.Overlay,{children:(0,uO.jsx)(Ia.S,{selectionVariant:"single",...(0,mp.f)("collaborators-header-type-filter-menu"),children:Wh.map(t=>(0,uO.jsx)(WI,{onClickHandler:l,onClose:()=>a(!1),value:t,filter:e},t))})})]})},WS=()=>{let{roleFilter:e,setRoleFilter:t}=Wa(),[r,a]=(0,uq.useState)(!1),n=(0,uq.useCallback)(e=>{t(e)},[t]),l=(0,uq.useCallback)((e,t)=>{n(t?yx.None:e)},[n]);return(0,uO.jsxs)(In.P,{open:r,onOpenChange:e=>a(e),children:[(0,uO.jsx)(In.P.Button,{...(0,mp.f)("collaborators-header-role-filter-button"),sx:{ml:2},children:(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted"},children:"Role"})}),(0,uO.jsx)(In.P.Overlay,{children:(0,uO.jsx)(Ia.S,{selectionVariant:"single",...(0,mp.f)("collaborators-header-role-filter-menu"),children:Wf.map(t=>(0,uO.jsx)(WI,{onClickHandler:l,onClose:()=>a(!1),value:t,filter:e},t))})})]})},WI=({filter:e,value:t,onClickHandler:r,onClose:a})=>{let n=(0,uq.useMemo)(()=>t.toLowerCase()===e?.toLowerCase(),[t,e]),l=(0,uq.useCallback)(()=>{r(t,n)},[r,t,n]);return(0,uO.jsx)(Ia.S.Item,{tabIndex:0,onClick:l,onKeyDown:e=>{"Enter"===e.key&&(l(),a())},selected:n,...(0,mp.f)(`filter-${t.toLowerCase()}`),children:t},t)};try{(l4=Wy).displayName||(l4.displayName="CollaboratorsTableHeader")}catch{}try{(l6=Wy).displayName||(l6.displayName="CollaboratorsTableHeader")}catch{}try{(l7=Ww).displayName||(l7.displayName="ErrorMessage")}catch{}try{(l8=Wj).displayName||(l8.displayName="RoleBulkSetDropdown")}catch{}try{(l9=WC).displayName||(l9.displayName="CollaboratorsFilterInput")}catch{}try{(ie=Wk).displayName||(ie.displayName="CollaboratorsFilterTypeDropdown")}catch{}try{(it=WS).displayName||(it.displayName="CollaboratorsFilterRoleDropdown")}catch{}try{(ir=WI).displayName||(ir.displayName="FilterDropdownItem")}catch{}let WN=({allCollaboratorActorIdentifiers:e})=>{let[t,r]=(0,uq.useState)(()=>new Set),a=new Set(t);for(let r of t)e.has(r)||a.delete(r);return a.size!==t.size&&r(a),[t,r]},W_={[yy.Admin]:3,[yy.Writer]:2,[yy.Reader]:1,[yy.None]:0};function WT(e){return e.slice().sort((e,t)=>{let r=W_[t.role]-W_[e.role];if(0!==r)return r;let a=UM(e),n=UM(t);return a.localeCompare(n)})}let WR={collaborators:[]},WE=()=>{let{data:e=WR,isLoading:t,isError:r}=UV(),a=(0,uq.useMemo)(()=>new Set(e.collaborators.map(UL)),[e]),{mutateAsync:n}=Uq(),{mutateAsync:l}=UQ(),i=(0,f6.N)(),[s,o]=(0,uq.useState)(Ex.None),{query:d,match:c}=Wa(),u=(0,uq.useMemo)(()=>e.collaborators.filter(c),[c,e]),[m,p]=WN({allCollaboratorActorIdentifiers:a}),f=(0,uq.useCallback)(async(e,t)=>{let{actorIds:r,role:a}=e,{loggedInUser:n}=yk(),l=`user/${n?.id}`,s=!1;if(n?.id&&(s=r.has(l)),s){if(await i({title:"Remove yourself as admin?",content:"Are you sure you want to remove yourself as Admin? You will lose access to Settings",confirmButtonContent:"Remove",confirmButtonType:"danger"})){let{failed:e}=await t({collaborators:Array.from(r),role:a});if(e.length>0&&r.size>1&&e.includes(l))o(Ex.Failed);else{let e=window.location.pathname.substring(0,window.location.pathname.indexOf("/settings"));window.location.assign(e)}}}else{let{failed:e}=await t({role:a,collaborators:Array.from(r)});e.length>0&&r.size>1&&o(Ex.Failed)}},[i]),h=async e=>{o(Ex.None),await f({actorIds:e},e=>n(e,{onError:e=>{g({type:mB.error,message:e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:"Failed to remove collaborators"})}}))},{addToast:g}=m7(),x=async(e,t)=>{o(Ex.None),await f({role:e,actorIds:t},async({collaborators:e,role:t})=>{if(!t)throw Error("you must specify a Role to assign to the selected collaborators");return l({collaborators:e,role:t},{onError:e=>{g({type:mB.error,message:e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:"Failed to update collaborators"})}})})},y=()=>{o(Ex.None)},b=(0,uq.useCallback)(({target:{name:e,checked:t}})=>{p(r=>{let n=new Set(r);return t&&void 0!==a.has(e)?n.add(e):n.delete(e),n})},[a,p]),v=(0,uq.useCallback)(e=>{e.target.checked?p(new Set(u.map(UL))):p(new Set)},[u,p]),[{length:w},{length:j}]=(0,uq.useMemo)(()=>gy(e.collaborators,e=>"user"===e.actor_type),[e.collaborators]),C=WT(u).map((e,t)=>(0,uO.jsx)(Wp,{collaborator:e,isLastItem:t===u.length-1,isSelected:m.has(UL(e)),onCheckboxChange:b,onDropDownClick:x,onRemoveButtonClick:h},`collaborator-row-${e.id}-${e.role}`));return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Cn.Z,{as:"h3",sx:{mb:2,fontSize:4,fontWeight:"normal"},children:"Manage access"}),(0,uO.jsxs)(mF.Z,{...(0,mp.f)("collaborators-table"),sx:{borderRadius:2,border:"1px solid",borderColor:"border.subtle",bg:"canvas.default"},"data-team-hovercards-enabled":!0,children:[(0,uO.jsx)(Wy,{userCount:w,teamCount:j,selectedCollaboratorIds:m,showError:s===Ex.Failed,onCheckBoxChange:v,onDropDownItemClick:x,onRemoveButtonClick:h,onDropDownButtonClick:y}),t?(0,uO.jsx)(mF.Z,{sx:{justifyContent:"center",my:4,display:"flex"},children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,uO.jsx)(mF.Z,{sx:{mb:2},children:(0,uO.jsx)(w4.Z,{size:"medium"})}),(0,uO.jsx)("span",{children:"Loading collaborators..."})]})}):r?(0,uO.jsx)(WA,{type:WD.Error}):0===C.length?d.length>0?(0,uO.jsx)(WA,{type:WD.Filtering}):(0,uO.jsx)(WA,{type:WD.NoCollaborators}):C]})]})},WD={Error:"error",NoCollaborators:"no-collaborators",Filtering:"filtering"},WP=new Map([[WD.Error,{title:"An error has occurred.",message:"Please try again later."}],[WD.NoCollaborators,{title:"You don't have any collaborators yet.",message:"Add a collaborator to see them here."}],[WD.Filtering,{title:"No collaborators found.",message:"Try to change or remove some filters to see results."}]]);function WA({type:e}){let t=WP.get(e);if(!t)throw Error("invalid blankslate type");return(0,uO.jsxs)(mF.Z,{className:"blankslate",...(0,mp.f)(`collaborators-table-blankslate-${e}`),children:[(0,uO.jsx)("h3",{...(0,mp.f)("collaborators-table-empty-title"),children:t.title}),(0,uO.jsx)("p",{...(0,mp.f)("collaborators-table-empty-message"),children:t.message})]})}let WM=(0,uq.memo)(WE);try{(ia=WE).displayName||(ia.displayName="CollaboratorsTableComponent")}catch{}try{(il=WA).displayName||(il.displayName="BlankSlateMessage")}catch{}try{(ii=WM).displayName||(ii.displayName="CollaboratorsTable")}catch{}let WL=()=>{let{isPublicProject:e}=TV(),{projectOwner:t,isOrganization:r}=yk(),a=t?.name?.toLowerCase(),{data:n=yx.None,error:l,refetch:i,status:s}=UZ(),{mutate:o,status:d}=UB(),c=(0,uq.useRef)(null);return(0,uq.useEffect)(()=>{c.current?.focus()},[]),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexWrap:"wrap"},...(0,mp.f)("privacy-settings"),children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",backgroundColor:"canvas.subtle",borderRadius:2,flex:1,p:3,mr:r?2:0},...(0,mp.f)("privacy-settings-manage-visibility"),children:[(0,uO.jsxs)(mF.Z,{sx:{mb:3},children:[(0,uO.jsxs)(mF.Z,{sx:{mb:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,uO.jsx)(Cn.Z,{as:"h2",sx:{mr:2,fontSize:2,fontWeight:"semibold"},children:e?"Public project":"Private project"}),(0,uO.jsx)(mL.Z,{icon:e?mM.n9J:mM.mBM,sx:{color:"fg.muted"}})]}),(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted"},children:e?"This project is public and visible to anyone.":"Only those with access to this project can view it."})]}),(0,uO.jsx)(mF.Z,{children:(0,uO.jsx)(jI.z,{ref:c,as:yK,to:mw.generatePath(),...(0,mp.f)("privacy-settings-manage-access-link"),children:"Manage"})})]}),r&&(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",backgroundColor:"canvas.subtle",borderRadius:2,flex:1,padding:3},...(0,mp.f)("privacy-settings-organization-access"),children:[(0,uO.jsxs)(mF.Z,{sx:{mb:3},children:[(0,uO.jsxs)(mF.Z,{sx:{mb:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,uO.jsx)(Cn.Z,{as:"h2",sx:{mr:2,fontSize:2,fontWeight:"semibold"},children:"Base role"}),(0,uO.jsx)(mL.Z,{icon:mM.w9Q,sx:{color:"fg.muted"}})]}),(0,uO.jsx)(WF,{owner:a,organizationAccessRole:n})]}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:[l?(0,uO.jsx)(jI.z,{disabled:!0,trailingIcon:mM.AS7,...(0,mp.f)("collaborators-role-dropdown-button"),children:fa(n)}):(0,uO.jsx)(WO,{organizationAccessRole:n,updateOrganizationAccessRole:o}),(0,uO.jsx)("div",{"aria-live":"polite",...(0,mp.f)("org-access-update-status"),children:(0,uO.jsx)(WZ,{orgAccessRoleRequestStatus:s,orgAccessRequestUpdateState:d,refetchOrganizationAccessRole:i})})]})]})]})};function WF({owner:e,organizationAccessRole:t}){return t===yx.Admin?(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted"},children:f$.privacySettingsAdmin}):t===yx.Write?(0,uO.jsxs)(mO.Z,{sx:{color:"fg.muted"},children:["Everyone in the organization can see and edit this project.",(0,uO.jsx)(w3.Z,{rel:"noopener noreferrer",target:"_blank",href:`https://github.com/orgs/${e}/people?query=role%3Aowner`,sx:{mx:1},underline:!0,children:"Owners"}),"are admins of this project."]}):t===yx.Read?(0,uO.jsxs)(mO.Z,{sx:{color:"fg.muted"},children:["Everyone in the organization can see this project.",(0,uO.jsx)(w3.Z,{rel:"noopener noreferrer",target:"_blank",href:`https://github.com/orgs/${e}/people?query=role%3Aowner`,sx:{mx:1},underline:!0,children:"Owners"}),"are admins of this project."]}):(0,uO.jsxs)(mO.Z,{sx:{color:"fg.muted"},children:["Only those with direct access and"," ",(0,uO.jsx)(w3.Z,{rel:"noopener noreferrer",target:"_blank",href:`https://github.com/orgs/${e}/people?query=role%3Aowner`,sx:{mr:1},underline:!0,children:"owners"}),"can see this project. Owners are also admins of this project."]})}function WZ({orgAccessRoleRequestStatus:e,orgAccessRequestUpdateState:t,refetchOrganizationAccessRole:r}){return"error"===t||"error"===e?(0,uO.jsxs)(mF.Z,{...(0,mp.f)("initial-org-access-request-failure-message"),sx:{ml:2},children:[(0,uO.jsx)(mL.Z,{icon:mM.wNq,sx:{mr:1,color:"danger.fg"}}),(0,uO.jsx)(mO.Z,{children:"Something went wrong."})," ",(0,uO.jsx)(w3.Z,{as:"button",onClick:()=>r(),children:"Try again"})]}):"success"===t?(0,uO.jsxs)(mF.Z,{...(0,mp.f)("org-access-request-success-message"),sx:{ml:2},children:[(0,uO.jsx)(mL.Z,{icon:mM.nQG,sx:{mr:1,color:"success.fg"}}),(0,uO.jsx)(mO.Z,{children:"Changes saved"})]}):null}function WO({organizationAccessRole:e,updateOrganizationAccessRole:t}){return(0,uO.jsx)(U3,{align:"inside-left",roles:[...U5,{value:yx.None,displayName:fa(yx.None.toString()),description:f$.collaboratorDropDownNone}],isOrganizationRole:!0,selectedRoles:[e],handleOnClick:r=>{r!==e&&t({role:r})}})}try{(is=WL).displayName||(is.displayName="PrivacySettings")}catch{}try{(io=WF).displayName||(io.displayName="SelectedRoleText")}catch{}try{(id=WZ).displayName||(id.displayName="Status")}catch{}try{(ic=WO).displayName||(ic.displayName="OrgAccessDropdown")}catch{}let WB=()=>{let{hasAdminPermissions:e}=yI();return e?(0,uO.jsxs)(mF.Z,{sx:{flexDirection:"column",flexGrow:1,display:"flex",paddingBottom:5},...(0,mp.f)("access-settings"),children:[(0,uO.jsx)(Cn.Z,{as:"h2",sx:{mb:3,fontSize:4,fontWeight:"normal"},children:"Who has access"}),(0,uO.jsx)(WL,{}),(0,uO.jsx)(We,{}),(0,uO.jsx)(Wl,{children:(0,uO.jsx)(WM,{})})]}):(0,uO.jsx)(mh,{})};try{(iu=WB).displayName||(iu.displayName="AccessSettingsView")}catch{}var WV=r(67747);let W$="data-dnd-drag-id",Wz="data-dnd-drag-type",WU="data-dnd-drop-type";function WW(e,t){return e&&t?{type:"SET_DROP_TARGET",dragID:e,side:t}:{type:"SET_DROP_TARGET",dragID:null,side:null}}function WH(e,t,r,a,n){return{type:"BEGIN_AWAITING_DRAG",dragID:e,dragType:t,dragOffset:r,dragAxis:n??null,dragOrigin:a??null}}function WG(){return{type:"BEGIN_DRAG"}}function Wq(){return{type:"STOP_DRAG"}}function WK(e,t){return{type:"BEGIN_AWAITING_DROP",dropID:e,dropType:t}}function WQ(){return{type:"STOP_AWAITING_DROP"}}function WY(e,t){let r=WX(e,t);return(0,CR.Z)(e,r)?e:r}function WX(e,t){switch(t.type){case"BEGIN_AWAITING_DRAG":return{...e,isDragging:!1,isAwaitingDrag:!0,dragID:t.dragID,dragAxis:t.dragAxis,dragOffset:t.dragOffset,dragType:t.dragType,dragOrigin:t.dragOrigin};case"BEGIN_DRAG":return{...e,isDragging:!0,isAwaitingDrag:!1};case"STOP_DRAG":return{...e,isDragging:!1,isAwaitingDrag:!1,dragID:null,dragType:null,dropID:null,dropType:null};case"BEGIN_AWAITING_DROP":return{...e,dropID:t.dropID,dropType:t.dropType};case"STOP_AWAITING_DROP":return{...e,dropID:null,dropType:null};case"SET_DROP_TARGET":return{...e,dropTarget:t.dragID,dropSide:t.side}}}function WJ(e,t,r=!1){return[...r?["fixed-sash"]:[],"show-sash",`show-sash-${e}`,`show-sash-${t}`]}function W0(e,t,r){requestAnimationFrame(()=>{W1(),e&&t&&e.classList.add(...WJ(t,r))})}function W1(){for(let e of document.querySelectorAll(".show-sash:not(.fixed-sash)"))e.classList.remove("show-sash","show-sash-after","show-sash-before","show-sash-card","show-sash-column","show-sash-view","show-sash-singleSelectItem")}function W2(e){let t=e.dropZone.getBoundingClientRect();return W5(e,t)}function W5(e,t,r=10,a=0){let n;let{point:l,dropType:i,dragAxis:s}=e,o="horizontal"===s?{...l,x:l.x+a}:{...l,y:l.y+a},d=W3(t,o);if(!d&&r<0)return null;if(!d)return W5(e,t,-r,0);if("horizontal"===s){let e=t.top+t.height/2;n=document.elementFromPoint(o.x,e)}else{let e=t.left+t.width/2;n=document.elementFromPoint(e,o.y)}let c=n?.closest(`[${Wz}=${i}]`)??null;if(!c)return W5(e,t,r,a+r);let u=c.getBoundingClientRect(),m="horizontal"===s&&l.x>u.left+u.width/2||"horizontal"!==s&&l.y>u.top+u.height/2?"after":"before";return[c,m]}function W3(e,t){return e.top<t.y&&e.right>t.x&&e.bottom>t.y&&e.left<t.x}let W4=(0,uq.createContext)(null),W6=(0,uq.createContext)(null),W7=(0,uq.createContext)({isDragging:!1,dragType:null}),W8=(0,uq.createContext)(null);function W9(e){let[t,r]=(0,uq.useReducer)(WY,{isDragging:!1,isAwaitingDrag:!1,dragID:null,dragAxis:null,dragOffset:null,dragType:null,dragOrigin:null,dropID:null,dropType:null,dropTarget:null,dropSide:null}),a=(0,uq.useRef)({onDragStart:null,onDragEnd:null}),n=(0,uq.useRef)(t),l=(0,uq.useMemo)(()=>new Map,[]),i=(0,uq.useMemo)(()=>new Map,[]),s=(0,uq.useRef)(null),{onDragStart:o,onDragEnd:d}=a.current,c=(0,uq.useCallback)(()=>{r(Wq()),d&&d();let e=s.current?.element;e&&e.remove(),requestAnimationFrame(()=>{W1()})},[d]),u=(0,uq.useCallback)(()=>{r(WG()),o&&o(),removeEventListener("mousemove",u)},[o]),m=(0,uq.useCallback)(e=>{let r=s.current;r&&requestAnimationFrame(()=>{t.dragAxis&&"vertical"!==t.dragAxis||(r.element.style.top=`${e.clientY-(t.dragOffset?.y??0)}px`),t.dragAxis&&"horizontal"!==t.dragAxis||(r.element.style.left=`${e.clientX-(t.dragOffset?.x??0)}px`)})},[t.dragAxis,t.dragOffset?.x,t.dragOffset?.y]),p=(0,uq.useCallback)(e=>{0===e.button&&c()},[c]);Fd("is-dragging",t.isDragging),(0,uq.useEffect)(()=>{n.current=t},[t]),(0,uq.useEffect)(()=>(t.isAwaitingDrag?(addEventListener("mousemove",u),addEventListener("mouseup",c)):(removeEventListener("mousemove",u),removeEventListener("mouseup",c)),()=>{removeEventListener("mousemove",u),removeEventListener("mouseup",c)}),[u,c,t.isAwaitingDrag]),(0,uq.useEffect)(()=>(t.isDragging&&(addEventListener("mousedown",c),addEventListener("mousemove",m),addEventListener("mouseup",p)),()=>{removeEventListener("mousedown",c),removeEventListener("mousemove",m),removeEventListener("mouseup",p)}),[c,m,p,t.isDragging]);let f=(0,uq.useMemo)(()=>({state:t,stateRef:n,dispatch:r,dragRef:s,dropMap:l,metaMap:i,eventHandlersRef:a}),[l,i,t]),h=(0,uq.useMemo)(()=>({stateRef:n,dispatch:r,dragRef:s,dropMap:l,metaMap:i,eventHandlersRef:a}),[l,i]),g=(0,uq.useMemo)(()=>({isDragging:t.isDragging,dragType:t.isDragging?t.dragType:null}),[t.dragType,t.isDragging]);return(0,uO.jsx)(W4.Provider,{value:f,children:(0,uO.jsx)(W6.Provider,{value:h,children:(0,uO.jsx)(W7.Provider,{value:g,children:(0,uO.jsx)(W8.Provider,{value:t.dropID,children:e.children})})})})}try{(im=W4).displayName||(im.displayName="Context")}catch{}try{(ip=W6).displayName||(ip.displayName="StatelessContext")}catch{}try{(ih=W7).displayName||(ih.displayName="IsDraggingContext")}catch{}try{(ig=W8).displayName||(ig.displayName="DropIDContext")}catch{}try{(ix=W9).displayName||(ix.displayName="DragDropWithIdsContext")}catch{}function He(e){let{dispatch:t,dragRef:r,eventHandlersRef:a}=Hn(),n=(0,uq.useCallback)(n=>{let l=n.nativeEvent.target?.nodeName;if(0!==n.nativeEvent.button||"INPUT"===l||"TEXTAREA"===l||n.defaultPrevented)return;let i=document.activeElement?.nodeName;if("INPUT"!==i&&"TEXTAREA"!==i&&n.preventDefault(),e.dragRef.current&&"card"===e.dragType){let t=e.dragRef.current.getBoundingClientRect(),a=e.dragRef.current,n=a.cloneNode(!0);n.style.position="fixed",n.style.top=`${t.top}px`,n.style.left=`${t.left}px`,n.style.opacity="0.5",n.style.display="none",n.style.zIndex="11",n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.pointerEvents="none",requestAnimationFrame(()=>{let t=e.dragRef.current?.parentElement;t&&t.appendChild(n)}),r.current={element:n,rect:t}}else r.current=null;let s={x:n.clientX-(r.current?.rect.left??0),y:n.clientY-(r.current?.rect.top??0)};a.current={...a.current,onDragStart:e.onDragStart??null,onDragEnd:e.onDragEnd??null},t(WH(e.dragID,e.dragType,s,e.dragOrigin,e.dragAxis))},[t,r,a,e.dragAxis,e.dragID,e.dragOrigin,e.dragRef,e.dragType,e.onDragEnd,e.onDragStart]);return{props:e.disable?{}:{onMouseDown:n}}}function Ht(e){let t=He(e),{metaMap:r}=Hn(),{dragType:a,dragID:n,metadata:l}=e;return(0,uq.useEffect)(()=>(Hl(r,a,n,l),()=>{Hs(r,a,n)}),[n,a,r,l]),{handle:t,props:{[W$]:e.dragID,[Wz]:e.dragType,"data-dnd-drag-index":e.dragIndex,"data-dnd-drag-transform-disable":Boolean(e.disable)}}}function Hr(e){let{stateRef:t,dispatch:r,dragRef:a,dropMap:n,metaMap:l}=Hn(),i=(0,uq.useRef)(null);(0,uq.useEffect)(()=>(n.set(e.dropID,[e.dropType,e.dropRef]),()=>{n.delete(e.dropID)}),[n,e.dropID,e.dropRef,e.dropType]);let{onDragOver:s,disableSash:o}=e,d=(0,uq.useCallback)(n=>{let{dragType:l,dragAxis:d,dropID:c}=t.current;c||e.dropType!==t.current.dropType||requestAnimationFrame(()=>{W1()});let u={x:n.clientX,y:n.clientY};if(i.current=u,l===e.dropType){c!==e.dropID&&r(WK(e.dropID,e.dropType)),s&&s();let t=W2({dropZone:n.currentTarget,point:u,dropType:e.dropType,dragAxis:d});if(!t){r(WW(null));return}let l=gc(t[0].getAttribute(W$));r(WW(l,t[1])),o||W0(t[0],t[1],e.dropType),a.current&&(a.current.element.style.display="block")}},[t,e.dropType,e.dropID,s,r,o,a]),{onDrop:c}=e,u=(0,uq.useCallback)(()=>{let r=t.current,a=r.isDragging&&r.dropID===e.dropID&&r.dropType===e.dropType&&r.dragType===e.dropType;if(a&&c){let e=Hi(l,gc(r.dragType),gc(r.dragID));if(!e)throw Error(`No metadata found for ${r.dragType} ${r.dragID}`);let t=Hi(l,gc(r.dropType),gc(r.dropTarget))??null;c({state:r,dragMetadata:e,dropMetadata:t,side:r.dropSide})}},[l,c,e.dropID,e.dropType,t]),m=(0,uq.useCallback)(a=>{let n=i.current;if(!n)return;let{dragType:l,dragAxis:s,dropID:d}=t.current;if(l===e.dropType){d!==e.dropID&&r(WK(e.dropID,e.dropType));let t=W2({dropZone:a.currentTarget,point:n,dropType:e.dropType,dragAxis:s});if(!t||o)return;W0(t[0],t[1],e.dropType)}},[o,r,e.dropID,e.dropType,t]),p=(0,uq.useCallback)(()=>{let{dropID:a}=t.current;a===e.dropID&&(i.current=null,r(WQ()))},[r,e.dropID,t]);return{props:{onMouseMove:d,onMouseUp:u,onMouseLeave:p,onScroll:m,"data-dnd-drop-id":e.dropID,[WU]:e.dropType}}}function Ha(){let e=(0,uq.useContext)(W7);if(null==e)throw Error("useIsDragging must be used within a DragDropContext");return e}function Hn(){let e=(0,uq.useContext)(W6);if(null==e)throw Error("useStatelessDragDrop must be used within a DragDropContext");return e}function Hl(e,t,r,a){let n=e.get(t);n?n.set(r,a):e.set(t,new Map([[r,a]]))}function Hi(e,t,r){return e.get(t)?.get(r)??null}function Hs(e,t,r){let a=e.get(t);a&&(a.delete(r),0===a.size&&e.delete(t))}function Ho(e={}){let t=(0,uq.useRef)(e.start??0),r=(0,uq.useCallback)(()=>{let e=t.current;return t.current+=1,e},[]);return r}let Hd=[],Hc=({ui:e,column:t,onChangeCallback:r})=>{let[a,n]=Eh(()=>t?.settings.options??Hd),[l,i]=Eh(()=>t?.settings.options??Hd),s=(0,uq.useCallback)(()=>{n(l)},[l,n]),o=(0,uq.useCallback)(()=>{i(a)},[a,i]),{postStats:d}=bM(),c=(0,uq.useCallback)((r,a)=>{d({name:r,ui:e,context:a,memexProjectColumnId:t?.id})},[t?.id,d,e]),u=(0,uq.useCallback)(({dragMetadata:e,dropMetadata:t,side:a})=>{e.id!==t?.id&&(n(r=>{let n=gc(r.find(({id:t})=>t===e.id));return r.reduce((e,r)=>(r.id===n.id||(r.id!==t?.id?e.push(r):"before"===a?e.push(n,r):"after"===a&&e.push(r,n)),e),[])}),r?.(),c("settings_field_order"))},[n,r,c]),m=Ho({start:1}),p=(0,uq.useCallback)(e=>{let t=fo(m(),e,a),l=[...a,t];n(l),c("settings_field_add",`${fE.newOptionsCount}: ${l.length}`),r?.()},[a,m,n,c,r]),f=(0,uq.useCallback)(e=>{n(t=>t.map(t=>t.id===e.id?e:t)),r?.()},[n,r]),h=a.length>1,g=(0,uq.useCallback)(e=>{if(h){let t=a.filter(t=>t.id!==e);n(t),r?.(),c("settings_field_delete",`${fE.newOptionsCount}: ${t.length}`)}},[h,a,n,r,c]);return{options:a,persistedOptions:l,commitMutations:o,revertMutations:s,onDrop:u,canRemoveOption:h,addOption:p,updateOption:f,removeOption:g}};function Hu(e,t,r){let a=new Set(t.map(e=>e.id)),n=new Set("options"in e.settings?e.settings.options.filter(e=>!a.has(e.id)).map(e=>e.id):void 0),l=0;for(let t of r){let r=t[e.id],a=r?.id;n.has(a)&&l++}return l}function Hm(e,t,r){let a=new Set,n=new Set(t.iterations?.map(e=>e.id)),l=new Set(t.completedIterations?.map(e=>e.id));if("configuration"in e.settings){for(let t of e.settings.configuration.iterations)n.has(t.id)||a.add(t.id);for(let t of e.settings.configuration.completedIterations){let e=!l.has(t.id),r=e&&n.has(t.id);e&&!r&&a.add(t.id)}}let i=0;for(let t of r){let r=t[e.id],n=r?.id;a.has(n)&&i++}return i}let Hp=(e,t)=>{let{postStats:r}=bM(),{updateOptions:a}=A4(),{perform:n,status:l}=b6({request:(0,uq.useCallback)(async()=>{await a(e,t),r({name:hG,ui:hq,memexProjectColumnId:e.id})},[e,t,r,a]),showErrorToast:!1});return{updateColumnOptions:n,updateColumnOptionsStatus:l}},Hf=()=>{let e=(0,f6.N)();return(0,uq.useCallback)(async t=>0!==t.values.length&&e({title:fZ.deleteValuesTitle(t.field.dataType,t.values.length),content:(0,uO.jsx)(Hg,{...t}),confirmButtonContent:"Delete",confirmButtonType:"danger"}),[e])},Hh=({children:e})=>(0,uO.jsxs)(vd.Z,{variant:"danger",as:"p",sx:{p:2},children:[(0,uO.jsx)(kr,{children:"Warning: "}),e]}),Hg=({field:e,values:t,affectedItems:r,affectedWorkflows:a})=>{let n=fZ.deleteValuesIntro(e.dataType,e.name,t.length),l=r>0?fZ.deleteValuesAffectedItemsWarning(e.dataType,t.length,r):null,i=a>0?fB.deleteValuesAffectedWorkflowsWarning(e.dataType,t.length,a):null;return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)("p",{children:[n," ",(0,uO.jsx)("strong",{children:fZ.cannotBeUndone})]}),l&&(0,uO.jsx)(Hh,{children:l}),i&&(0,uO.jsx)(Hh,{children:i})]})};try{(iy=Hh).displayName||(iy.displayName="Warning")}catch{}try{(ib=Hg).displayName||(ib.displayName="Content")}catch{}let Hx=({externalColumn:e})=>{let{postStats:t}=bM(),{items:r}=bt(),a=r.map(e=>e.columns),[n,l]=(0,uq.useState)(e),{findLoadedFieldIds:i}=TC(),s=m2(()=>{m(Ex.None),o.current=null},3e3),o=(0,uq.useRef)();if(void 0===n)throw Error("Column is undefined");let d=i().includes(n.id),{loadColumnsWithItemColumnValues:c}=Bk();(0,uq.useEffect)(()=>{d||c([n.id])},[d,n.id,c]);let[u,m]=(0,uq.useState)(Ex.None),p=(0,uq.useCallback)(()=>{T(!0),m(Ex.None)},[m]),{options:f,persistedOptions:h,commitMutations:g,revertMutations:x,onDrop:y,addOption:b,canRemoveOption:v,removeOption:w,updateOption:j}=Hc({column:n,onChangeCallback:p,ui:hq}),{workflowsUsingMissingColumnOption:C}=w2(),k=(0,uq.useMemo)(()=>C(n.databaseId,f.map(e=>e.id)).length,[n.databaseId,f,C]),S=(0,uq.useMemo)(()=>Hu(n,f,a),[n,f,a]),{updateColumnOptions:I,updateColumnOptionsStatus:N}=Hp(n,f),[_,T]=(0,uq.useState)(!1);(0,uq.useEffect)(()=>{_||l(e)},[e,_]);let R=(0,uq.useRef)(fE.genericErrorMessage),E=(0,uq.useCallback)(async()=>{g(),await I(),"succeeded"===N.current.status?(T(!1),m(Ex.Successful),o.current&&o.current.cancel(),o.current=s()):"failed"===N.current.status&&m(Ex.Failed)},[g,s,I,N]),D=Hf(),P=(0,uq.useCallback)(async()=>{let e=k+S>0,r=n.id===mP.Status&&f.every(e=>""===e.name.trim());if(r)R.current=fE.statusFieldEmptyError,m(Ex.Failed);else if(e){S>0&&t({name:"settings_data_loss_single_select_warning",context:JSON.stringify({columnId:n.id,affectedOptionsUsedCount:S})});let e=await D({field:n,values:h.filter(e=>!f.some(t=>t.id===e.id)).map(e=>e.name),affectedItems:S,affectedWorkflows:k});e?(t({name:"settings_data_loss_single_select_save",context:JSON.stringify({columnId:n.id,affectedOptionsUsedCount:S})}),await E()):(t({name:"settings_data_loss_single_select_cancel",context:JSON.stringify({columnId:n.id,affectedOptionsUsedCount:S})}),x(),T(!1),m(Ex.None))}else await E()},[k,S,n,f,D,h,t,E,x]);(0,uq.useEffect)(()=>{_&&P()},[_,P]);let A=(0,uq.useMemo)(()=>h,[h]);return{commitState:u,options:A,onDrop:y,addOption:b,canRemoveOption:v,removeOption:w,updateOption:j,areColumnValuesLoaded:d,optionsChanged:_,saveSingleSelectOptions:P,errorMessage:R}},Hy=({options:e,onAddOption:t,onUpdateOption:r,onRemoveOption:a,canRemoveOption:n,sx:l})=>{let{projectLimits:{singleSelectColumnOptionsLimit:i}}=yk(),s=(0,uq.useRef)(null),o=e.length>=i,d=e=>s.current?.querySelector(`input[data-option-index='${e}']`),c=(r=AH)=>{t(r),setTimeout(()=>d(e.length)?.focus())},[u,m]=(0,uq.useState)(null),p=Rf(u);return(0,uO.jsxs)(mF.Z,{sx:{borderStyle:"solid",borderWidth:p([0,1]),borderColor:"border.default",borderRadius:2,...l},ref:m,children:[(0,uO.jsx)(mF.Z,{as:"ol",ref:s,sx:{listStyle:"none",m:0,p:0},children:e.slice(0,i).map((e,t)=>(0,uO.jsx)(Hw,{option:e,index:t,enableOptionRemoval:n,onRemove:()=>a(e.id),onChange:r,breakpoint:p},e.id))}),(0,uO.jsx)(mF.Z,{sx:{p:p([0,3]),pt:p([2,3])},children:o?(0,uO.jsx)(vd.Z,{variant:"warning",sx:{p:2},children:fE.singleSelectOptionLimitWarning(i)}):(0,uO.jsx)(Hb,{onCreate:c})})]})},Hb=({onCreate:e})=>{let[t,r]=(0,uq.useState)(""),a=""!==t.trim(),n=()=>{a&&(e({...AH,name:RQ(t)}),r(""))},l=e=>{"Enter"===e.key&&(e.preventDefault(),n())},i=Eg(l),s=ER();return(0,uO.jsxs)(mF.Z,{as:"fieldset",sx:{display:"flex",gap:2,border:0,padding:0,margin:0},onSubmit:n,children:[(0,uO.jsx)(kr,{as:"legend",children:"Add option"}),(0,uO.jsxs)(Cc.Z,{sx:{flex:1},children:[(0,uO.jsx)(Cc.Z.Label,{visuallyHidden:!0,children:"Label text"}),(0,uO.jsx)(E_.Z,{...s,sx:{width:"100%"},children:(0,uO.jsx)(k4.Z,{block:!0,value:t,onChange:e=>r(e.target.value),placeholder:"Add option\u2026",autoComplete:"false",...i})})]}),(0,uO.jsx)(jI.z,{onClick:n,disabled:!a,children:"Add"})]})},Hv=(0,uJ.ZP)(mF.Z)`
  position: relative;

  &:after,
  &:before {
    content: '';
    display: none;
    position: absolute;
    left: 0;
    right: 0;
    background-color: ${(0,uG.U2)("colors.accent.emphasis")};
    height: ${(0,uG.U2)("space.1")};
    border: 0;
    border-radius: 6px;
    z-index: 12;
  }

  body.is-dragging &.show-sash-singleSelectItem.show-sash-after {
    &:after {
      display: block;
      bottom: 0;
      transform: translateY(50%);
    }
  }

  body.is-dragging &.show-sash-singleSelectItem.show-sash-before {
    &:before {
      display: block;
      top: 0;
      transform: translateY(-50%);
    }
  }
`;function Hw({option:e,index:t,enableOptionRemoval:r,onRemove:a,onChange:n,breakpoint:l}){let i=(0,uq.useRef)(null),s=(0,uq.useMemo)(()=>({id:e.id}),[e.id]),o=Ht({dragID:e.id,dragType:"singleSelectItem",dragIndex:t,dragRef:i,metadata:s}),[d,c]=(0,uq.useState)(!1),u=(0,uq.useRef)(null);return Rd(d,u),(0,uO.jsxs)(Hv,{as:"li",ref:i,sx:{px:l([0,3]),py:l([1,3]),borderBottomStyle:"solid",borderBottomColor:"border.default",borderBottomWidth:l([0,1]),display:"flex",flexDirection:"row",alignItems:"center"},...o.props,children:[(0,uO.jsx)(mF.Z,{sx:{p:1,color:"fg.muted",cursor:"grab"},...o.handle.props,children:(0,uO.jsx)(mM.T2z,{})}),(0,uO.jsx)(Mr,{option:e}),(0,uO.jsx)(jc,{sx:{flex:1,px:2,color:"fg.subtle",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",m:0},as:"p",children:e.description}),(0,uO.jsx)(kF.h,{icon:mM.vdY,variant:"invisible",size:"small",onClick:()=>c(!0),sx:{color:"fg.muted"},"aria-label":"Edit option",ref:u}),r&&(0,uO.jsx)(kF.h,{icon:mM.b0D,variant:"invisible",size:"small",onClick:a,sx:{color:"fg.muted"},"aria-label":"Remove option"}),d&&(0,uO.jsx)(Ms,{initialOption:e,onCancel:()=>c(!1),onSave:t=>{c(!1),n({...e,...t})}})]},e.id)}try{(iv=Hy).displayName||(iv.displayName="SingleSelectForm")}catch{}try{(iw=Hb).displayName||(iw.displayName="NewItemCreator")}catch{}try{(ij=Hv).displayName||(ij.displayName="BoxWithDropSash")}catch{}try{(iC=Hw).displayName||(iC.displayName="SingleSelectItem")}catch{}let Hj={opacity:0},HC={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0,transition:"opacity 300ms ease-in-out"},exited:{opacity:0},unmounted:{opacity:0}},Hk=({column:e})=>{let{commitState:t,options:r,onDrop:a,addOption:n,canRemoveOption:l,removeOption:i,updateOption:s,errorMessage:o}=Hx({externalColumn:e}),{isDragging:d}=Ha(),c=(0,uq.useRef)(null),u=(0,uq.useRef)(null);Fi({active:d,scrollRef:c,strength:10});let m=Hr({dropID:"singleSelectDrop",dropType:"singleSelectItem",dropRef:c,onDrop:a}),p=t===Ex.Failed?ES:{};return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Cn.Z,{as:"h3",sx:{fontSize:1,mt:4,mb:2},children:"Options"}),(0,uO.jsx)(mF.Z,{ref:c,...m.props,children:(0,uO.jsx)(Hy,{options:r,onAddOption:n,onUpdateOption:s,onRemoveOption:i,canRemoveOption:l,sx:p})}),(0,uO.jsx)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(WV.ZP,{in:t===Ex.Successful,nodeRef:u,timeout:500,children:e=>(0,uO.jsxs)(mO.Z,{sx:{pl:2,mt:2},ref:u,style:{...Hj,...HC[e]},children:[(0,uO.jsx)(Ek,{status:Ex.Successful}),(0,uO.jsx)(mO.Z,{sx:{ml:2},...(0,mp.f)("column-settings-saved-message"),children:"Saved!"})]})}),t===Ex.Failed&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ek,{status:Ex.Failed}),(0,uO.jsx)(mO.Z,{sx:{ml:2},...(0,mp.f)("single-select-options-error-box"),children:o.current})]})]})})]})};try{(ik=Hk).displayName||(ik.displayName="SingleSelectOptions")}catch{}let HS=new Set([mP.Status]);function HI(e){return e.userDefined||HS.has(e.id)}let HN=()=>{let e=(0,uW.NL)(),t=(0,uq.useCallback)(t=>{let r=bj(e).filter(e=>null!=e.columns[t]);return r.length},[e]);return{getCountOfItemsWithColumnValue:t}},H_=()=>{let{updateColumnEntry:e}=TS(),t=(0,uq.useCallback)((t,r)=>!!t.userDefined&&t.name!==r&&(e(jQ({...t,name:r})),!0),[e]),r=(0,uq.useCallback)(async(e,r)=>{t(e,r)&&(ID(),await A2({memexProjectColumnId:e.id,name:r}))},[t]);return{setName:t,updateName:r}},HT=()=>{let{updateColumnValues:e}=A3(),{updateColumnEntry:t}=TS(),r=(0,uq.useCallback)(async(r,a)=>{if(r.dataType!==mD.Iteration)return;let n=r.settings.configuration;if(!n)return;let l=a.iterations||n.iterations,i=a.completedIterations||n.completedIterations,s={duration:n.duration,startDay:n.startDay,...a,iterations:HR(l),completedIterations:HR(i)};ID();let{memexProjectColumn:o}=await A2({memexProjectColumnId:r.id,settings:{configuration:s}});if(o?.settings){let{settings:e}=o;t(jQ({...r,settings:e}))}o&&e(o)},[t,e]);return{updateIterationConfiguration:r}};function HR(e){return e.map(e=>ht(e,["titleHtml"]))}function HE(){let{title:e}=f3(),t=(0,uq.useContext)(bD);return(0,uO.jsxs)(mO.Z,{sx:{ml:2},...(0,mp.f)("column-settings-saved-message"),children:["Changes saved. Return to"," ",t?(0,uO.jsx)(w3.Z,{as:yK,to:t.returnToViewLinkTo,style:{cursor:"pointer"},tabIndex:0,...(0,mp.f)("return-to-project-link"),children:e}):e,"."]})}try{(iS=HE).displayName||(iS.displayName="ColumnSettingsSavedMessage")}catch{}var HD=r(29422);function HP(e,{duration:t,selectedStartDate:r},a){if(e.length<=0)throw Error("A title is required to create iterations");if(a<0)throw Error("Count cannot be a negative number");if(0===a)return{iterations:[],completedIterations:[]};let n=r,l=[],i=[];for(let r=1;r<=a;r++)(0,gp.Z)((0,pl.Z)(n,t),new Date)?i.unshift({title:`${e} ${r}`,startDate:gS(n),duration:t}):l.push({title:`${e} ${r}`,startDate:gS(n),duration:t}),n=(0,pl.Z)(n,t);return{iterations:l,completedIterations:i}}let HA=/[A-Za-z ]*/;function HM(e,t,r,a,n){let l,i;let{iterations:s,completedIterations:o}=e,d=a?gY(a):e.duration,c=gE(e),u=gL(e);if(c.length>0&&u){let e=(0,fS.Z)(u.startDate);l=r??(0,HD.Z)(e,{days:d});let a=u.title.replace(t,"").replace(HA,"").trim(),n=parseInt(a,10);isNaN(n)&&(n=c.length),i=`${t} ${n+1}`}else i=`${t} 1`,l=r??new Date;let m={id:n??"",duration:d,title:i,titleHtml:i,startDate:gS(l)},p=s.slice(),f=o.slice();return(0,gp.Z)((0,pl.Z)(l,d),new Date)?f.unshift(m):p.push(m),a?{iterations:p,completedIterations:f,duration:d}:{iterations:p,completedIterations:f}}function HL(e,{id:t}){return e.filter(e=>e.id!==t)}function HF(e,t){let r=-1!==e.completedIterations.findIndex(e=>e.id===t.id);if(r)return{completedIterations:HL(e.completedIterations,t)};let a=-1!==e.iterations.findIndex(e=>e.id===t.id);return a?{iterations:HL(e.iterations,t)}:{}}function HZ(e,t){let r=gI(e).endDate,a=(0,fS.Z)(t.startDate);return Math.max((0,gg.Z)(r,a)+1,0)}function HO(e,t,r,a){let n=gE(e).sort(gM),l=n.findIndex(({id:e})=>e===t.id);if(-1===l)return{};let i=(0,gg.Z)(gb(t),gb(gc(n[l]))),s=i<0&&r||i>0&&!a?i:0,[o,d]=[n.slice(0,l),n.slice(l+1)],c=[...o,t];for(let e of d){let t=gc(c.at(-1)),r=0===s&&a?HZ(t,e):s;c.push(0!==r?gq(e,r):e)}return gP(c)}function HB(e,t){return HO(e,t,!1,!0)}function HV(e,t,r,a){let n={...t,duration:(0,gg.Z)((0,fS.Z)(a.startDate),(0,fS.Z)(t.startDate))},l={...e,...HO(e,n,!1,!0)},i={...r,startDate:gS((0,pl.Z)(gb(a),1))};return HO(l,i,!0,!1)}let H$="inMemoryIteration",Hz=0,HU=({column:e,fieldName:t,serverConfiguration:r,onUpdate:a})=>{let{postStats:n}=bM(),[l,i]=(0,uq.useState)("active"),[s,o]=(0,uq.useState)(r),[d,c]=(0,uq.useState)(!1),u=(0,uq.useCallback)(e=>{o(e),c(!0)},[]),{items:m}=bt(),p=m.map(e=>e.columns),{findLoadedFieldIds:f}=TC(),h=f().includes(e.id),{loadColumnsWithItemColumnValues:g}=Bk();(0,uq.useEffect)(()=>{h||g([e.id])},[h,e.id,g]);let x=(0,uq.useMemo)(()=>({...s,iterations:HG(s.iterations),completedIterations:HG(s.completedIterations)}),[s]),y=(0,uq.useMemo)(()=>Hm(e,x,p),[e,x,p]),b=Tf(r);(0,uq.useEffect)(()=>{d||r===b||o(r)},[d,r,b]);let v=(0,uq.useMemo)(()=>gF(s),[s]),w=(0,uq.useMemo)(()=>gQ(s.duration),[s.duration]),{perform:j,status:C}=b6({request:(0,uq.useCallback)(async()=>{await a(x)},[x,a]),showErrorToast:!1}),k="active"===l,[S,I]=(0,uq.useState)("idle"),N=(0,uq.useCallback)(async()=>{I("loading"),await j();let e=C.current.status;"failed"!==e&&c(!1),I(e)},[j,C]),_=Hf(),T=(0,uq.useCallback)(async()=>{if(y>0){n({name:"settings_data_loss_iteration_warning",context:JSON.stringify({columnId:e.id,affectedIterationOptionsUsedCount:y})});let t=await _({field:e,values:r.iterations.filter(e=>!s.iterations.some(t=>t.id===e.id)).map(e=>e.title),affectedItems:y,affectedWorkflows:0});t?(n({name:"settings_data_loss_iteration_save",context:JSON.stringify({columnId:e.id,affectedIterationOptionsUsedCount:y})}),await N()):n({name:"settings_data_loss_iteration_cancel",context:JSON.stringify({columnId:e.id,affectedIterationOptionsUsedCount:y})})}else N()},[y,n,e,_,r.iterations,s.iterations,N]),R=(0,uq.useCallback)(e=>{if(0===Object.entries(e).length)return;I("idle");let t={...s,...e};u(t)},[s,u]),E=(0,uq.useCallback)(e=>R(HF(s,e)),[s,R]),D=(0,uq.useCallback)((e,r)=>{let a=HM(s,t,e,r,`${H$}-${++Hz}`);R(a)},[s,t,R]),P=(0,uq.useCallback)(e=>R(HB(s,e)),[s,R]),A=(0,uq.useCallback)(e=>R(HB(s,gq(e,s.duration))),[s,R]),M=(0,uq.useCallback)((e,t,r)=>R(HV(s,e,t,r)),[R,s]),L=(0,uq.useCallback)(()=>{u(r),I("idle")},[r,u]),F=(0,uq.useMemo)(()=>HH(r,s),[r,s]),Z=(0,uq.useMemo)(()=>F.filter(e=>!e.originalIsCompleted&&e.originalIteration?.startDate!==e.localIteration?.startDate).length,[F]);return{allRowData:F,areColumnValuesLoaded:h,hasUnsavedChanges:d,isActiveTab:k,selectedTab:l,setSelectedTab:i,handleRemoveIteration:E,handleCreateIteration:D,handleChangeIteration:P,handleAddBreak:A,handleChangeBreak:M,handleReset:L,handleSaveChanges:T,countPushedActiveIterations:Z,localConfiguration:s,minimumStartDate:v,defaultDuration:w,requestStatus:S}},HW=e=>t=>[t.id,[t,e]];function HH(e,t){let r=new Map([...e.completedIterations.map(HW(!0)),...e.iterations.map(HW(!1))]);return gE(t).sort(gM).map(fw).map(([e,t])=>{let[a,n]=r.get(t.id)??[void 0,void 0],[l]=(e&&r.get(e.id))??[void 0];return{localIteration:t,localPreviousIteration:e,breakExistsBefore:void 0!==e&&gG(e,t),originalIteration:a,originalIsCompleted:n,originalPreviousIteration:l}})}function HG(e){return e.map(e=>e.id.startsWith(H$)?{...e,id:""}:e)}function Hq({onClick:e,removeTopPadding:t}){return(0,uO.jsx)(mF.Z,{sx:{p:2,position:"absolute",left:0,right:0,transform:"translateY(-50%)",display:"flex",alignItems:"center",zIndex:1,justifyContent:"flex-end",pr:"20%","&:not(:hover):not(:focus-within) > :not(:hover)":{opacity:0}},children:(0,uO.jsx)(mF.Z,{sx:{p:3,position:"absolute",pt:t?0:void 0,mt:t?3:void 0},children:(0,uO.jsx)(EL.Z,{sx:{color:"fg.muted",backgroundColor:"canvas.default",cursor:"pointer",":hover":{color:"accent.fg"}},onClick:e,as:"button",type:"button",...(0,mp.f)("add-break-button"),children:"Insert break"})})})}try{(iI=Hq).displayName||(iI.displayName="AddBreakButton")}catch{}var HK=r(59319);let HQ=e=>e,HY=({originalValue:e="",updatedValue:t="",renderUpdatedValue:r=HQ,renderOriginalValue:a=HQ,sx:n,testId:l})=>(0,uO.jsx)(mO.Z,{sx:{mr:2,...n??{}},...l?(0,mp.f)(l):{},children:e===t?(0,uO.jsx)(mO.Z,{children:r(t)}):(0,uO.jsxs)(uO.Fragment,{children:[e&&(0,uO.jsx)(uO.Fragment,{children:(0,uO.jsx)(mO.Z,{as:"del",sx:{color:"fg.subtle",textDecoration:"line-through"},...(0,mp.f)("original-value"),children:a(e)})}),e&&t&&(0,uO.jsx)(mO.Z,{sx:{mr:2},children:" "}),t&&(0,uO.jsx)(mO.Z,{as:"ins",sx:{textDecoration:"none"},...(0,mp.f)("updated-value"),children:r(t)})]})});try{(iN=HY).displayName||(iN.displayName="DiffValue")}catch{}let HX={display:"flex",flexDirection:"row",position:"relative",padding:3};function HJ({onClick:e}){return(0,uO.jsx)(kF.h,{icon:mM.XHJ,sx:{border:"none",boxShadow:"none",minWidth:"16px",p:0,ml:"auto",bg:"transparent",color:"fg.muted",":hover":{bg:"transparent",boxShadow:"none"}},"aria-label":"Remove item",onClick:e,...(0,mp.f)("delete-iteration")})}function H0({value:e,onChange:t}){let[r,a]=Eh(e),n=()=>a(e),l=(0,uq.useRef)(null),i=()=>{let a=RQ(r.trim());a?a!==e&&t?.(a):n()},s=Eg(e=>{if("Enter"===e.key)i();else{if("Escape"!==e.key)return;n()}e.preventDefault(),setTimeout(()=>l.current?.blur(),10)}),o=ER();return(0,uO.jsx)(mF.Z,{onClick:()=>l.current?.focus(),sx:{px:1,ml:-1,display:"inline-block",borderRadius:"2",cursor:"text","&:focus-within":{boxShadow:"primer.shadow.focus"},"&:hover:not(:focus-within)":{boxShadow:e=>`0 0 0 3px ${e.colors.border.default}`}},children:(0,uO.jsx)(E_.Z,{...o,children:(0,uO.jsx)(k9,{as:Sa,autoComplete:"off",value:r,onChange:e=>a(e.target.value),onBlur:i,"aria-label":"Edit iteration name",ref:l,...s,...(0,mp.f)("iteration-title")})})})}function H1({value:e,onChange:t,minDate:r}){let a=e=>{e&&t(gW(e))},n=(0,uq.useMemo)(()=>gU(e),[e]);return(0,uO.jsx)(P2.Mt,{variant:"range",value:n,onChange:a,view:"2-month",minDate:r,confirmation:!0,confirmUnsavedClose:!0,anchor:t=>(0,uO.jsx)(w3.Z,{muted:!0,...t,sx:{color:"inherit"},as:"button","aria-label":"Edit date range",...(0,mp.f)("iteration-or-break-dates"),children:g_(e)})})}function H2({localTitle:e="",originalTitle:t="",localInterval:r,localPreviousInterval:a,originalInterval:n,labelType:l,onRemove:i,onTitleChange:s,onIntervalChange:o,children:d}){let c=e!==t||!(0,CR.Z)(r,n),u=(0,uq.useMemo)(()=>a?(0,pl.Z)((0,fS.Z)(a.startDate),a.duration):(0,HK.Z)(new Date,1),[a]);return(0,uO.jsxs)(mF.Z,{as:"li",sx:{listStyle:"none","&:not(:last-child)":{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"border.muted"}},children:[d,(0,uO.jsxs)(mF.Z,{sx:{...HX,backgroundColor:"break"===l?"canvas.subtle":"canvas.default",boxShadow:e=>c?`2px 0 0 ${e.colors.accent.fg} inset`:void 0},children:[(0,uO.jsx)(Ar,{labelType:l,sx:{pt:e?"2px":void 0}}),(0,uO.jsxs)(mF.Z,{sx:{flexDirection:"column",display:"flex",alignItems:"flex-start",gap:1},children:[(e||t)&&(0,uO.jsx)(mF.Z,{sx:{flexDirection:"row",display:"flex",justifyContent:"space-between"},children:(0,uO.jsx)(HY,{sx:{fontWeight:600,fontSize:2},originalValue:t,updatedValue:e,testId:"iteration-title-diff",renderUpdatedValue:t=>(0,uO.jsx)(H0,{value:e,onChange:s})})}),(0,uO.jsx)(mF.Z,{sx:{flexDirection:"row",display:"flex",justifyContent:"space-between"},children:(0,uO.jsx)(HY,{originalValue:g_(n),updatedValue:g_(r),testId:"iteration-dates-diff",renderOriginalValue:()=>(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mO.Z,{sx:{fontWeight:600},children:gT(n)}),"\xa0\xa0",(0,uO.jsx)(mO.Z,{children:g_(n)})]}),renderUpdatedValue:()=>(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mO.Z,{sx:{fontWeight:600},children:gT(r)}),"\xa0\xa0",(0,uO.jsx)(H1,{value:r,onChange:o,minDate:u})]})})})]}),(0,uO.jsx)(HJ,{onClick:i})]})]})}try{(i_=HJ).displayName||(i_.displayName="DeleteButton")}catch{}try{(iT=H0).displayName||(iT.displayName="TitleInput")}catch{}try{(iR=H1).displayName||(iR.displayName="IntervalDatePicker")}catch{}try{(iE=H2).displayName||(iE.displayName="IterationRowSkeleton")}catch{}function H5({onChange:e,localPreviousIteration:t,localNextIteration:r,originalPreviousIteration:a,originalNextIteration:n}){let l=gH(t,r);if(!l)return(0,uO.jsx)(uO.Fragment,{});let i=gH(a,n);return(0,uO.jsx)(H2,{localInterval:l,originalInterval:i,localPreviousInterval:t,labelType:"break",onRemove:()=>e({...l,duration:0}),onIntervalChange:e})}try{(iD=H5).displayName||(iD.displayName="IterationBreakRow")}catch{}function H3({iteration:e,onRemove:t,onChange:r,originalIsCompleted:a=!1,previousIteration:n,originalIteration:l,children:i}){let s=(0,uq.useMemo)(()=>!(0,CR.Z)(e,l),[e,l]),o=gz(e,s?void 0:a);return(0,uO.jsx)(H2,{localTitle:e.title,originalTitle:l?.title,localInterval:e,originalInterval:l,localPreviousInterval:n,labelType:o,onRemove:t,onTitleChange:t=>r({...e,title:t}),onIntervalChange:t=>r({...e,...t}),children:i})}try{(iP=H3).displayName||(iP.displayName="IterationRow")}catch{}let H4=["days","weeks"];function H6(e){return new Map(H4.map(t=>[t,{children:gX(e,t),key:t,...(0,mp.f)(`duration-${t}-menu-item`)}]))}function H7(e){return Number.isNaN(e)?{isValid:!1}:e<1?{isValid:!1,message:fE.iterationDurationQtyLow(1)}:e>99?{isValid:!1,message:fE.iterationDurationQtyHigh(99)}:{isValid:!0}}function H8(e){switch(e.key){case"e":case"-":case".":case"+":e.preventDefault()}}function H9({value:e,onChange:t,onValidChange:r}){let a=(0,uq.useMemo)(()=>H7(e.quantity),[e.quantity]);(0,uq.useEffect)(()=>r?.(a.isValid),[r,a.isValid]);let n=r=>{let a=r.target.valueAsNumber;t({...e,quantity:a})},l=r=>{r&&t({...e,units:r.key})},i=C0("iteration-duration"),s=C0("duration-quantity-validation-message"),o=(0,uq.useMemo)(()=>{let t=H6(e.quantity);return Array.from(t.values())},[e.quantity]);return(0,uO.jsxs)(mF.Z,{sx:{flexGrow:1,alignItems:"center",display:"flex"},role:"group","aria-label":fE.iterationDurationLabel,"aria-labelledby":i,children:[(0,uO.jsxs)(mF.Z,{sx:{position:"relative"},children:[(0,uO.jsx)(k4.Z,{type:"number",min:1,max:99,step:1,required:!0,value:Number.isNaN(e.quantity)?"":e.quantity,onChange:n,onKeyDown:H8,"aria-invalid":!a.isValid,"aria-describedby":a.message&&s,"aria-label":"Duration quantity",sx:{"&.error":{borderColor:"danger.emphasis",boxShadow:"none"},mr:2,"& > input":{textAlign:"center",pr:.5,pl:.5,width:"5ch"}},className:a.isValid?"":"error",...(0,mp.f)("duration-quantity-input"),id:"duration-quantity-input"}),(0,uO.jsx)(Ze.v,{message:a.message,id:s,testId:"duration-quantity-validation-message"})]}),(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Button,{sx:{flex:1,gridTemplateColumns:"min-content 1fr min-content","[data-component=text]":{textAlign:"left"},"[data-component=buttonContent]":{flex:0}},"aria-label":"Units",...(0,mp.f)("duration-units-button"),children:(0,uO.jsx)(mO.Z,{sx:{flex:1,textAlign:"left"},...(0,mp.f)("duration-units-value"),children:e.units})}),(0,uO.jsx)(In.P.Overlay,{children:(0,uO.jsx)(Ia.S,{selectionVariant:"single",children:o.map(t=>(0,uq.createElement)(Ia.S.Item,{...t,key:t.key,selected:t.key===e.units,onSelect:()=>l(t)}))})})]})]})}try{(iA=H9).displayName||(iA.displayName="IterationDurationInput")}catch{}function Ge({duration:e,onDurationChange:t,startDate:r,onStartDateChange:a,minStartDate:n,onValidChange:l}){let i=e=>{if(!e)throw Error("Start date cannot be null/undefined.");a(e)};return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(Cc.Z,{id:"iteration-start-date",sx:{mb:2},children:[(0,uO.jsx)(Cc.Z.Label,{children:fE.iterationStartDateLabel}),(0,uO.jsx)(P2.Mt,{"aria-label":fE.iterationStartDateLabel,variant:"single",value:r,onChange:i,minDate:n,showTodayButton:!1,anchorSx:{width:"100%",'[data-component="buttonContent"]':{flex:0}}})]}),(0,uO.jsxs)(Cc.Z,{id:"duration-quantity-input",sx:{alignItems:"initial"},children:[(0,uO.jsx)(Cc.Z.Label,{children:fE.iterationDurationLabel}),(0,uO.jsx)(H9,{value:e,onChange:t,onValidChange:l})]})]})}try{(iM=Ge).displayName||(iM.displayName="NewIterationOptions")}catch{}function Gt({onCreate:e,defaultDuration:t,minimumStartDate:r}){let[a,n]=(0,uq.useState)(!1),[l,i]=(0,uq.useState)(!0),[s,o]=(0,uq.useState)(t),[d,c]=(0,uq.useState)(r);(0,uq.useEffect)(()=>c(e=>(0,gp.Z)(e,r)?r:e),[r]);let u=()=>{o(t),c(r),i(!0)},m=()=>{n(!1)},p=()=>{u(),n(!0)},f=t=>{t.preventDefault(),m(),e(d,s)};return(0,uO.jsxs)(DL.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(jI.z,{size:"small",onClick:()=>e(r,t),leadingIcon:mM.pOD,sx:{display:"flex",alignItems:"center"},...(0,mp.f)("add-default-iteration-button"),children:"Add iteration"}),(0,uO.jsx)(EH.w,{renderAnchor:e=>(0,uO.jsx)(jI.z,{trailingIcon:mM.AS7,size:"small",sx:{lineHeight:"22px"},...(0,mp.f)("add-custom-iteration-button"),...e,children:"More options"}),width:"medium",open:a,onOpen:p,onClose:m,focusZoneSettings:{bindKeys:EU.Qw.Tab},align:"end",overlayProps:{...(0,mp.f)("custom-iteration-modal"),"aria-label":"Add new iteration configuration",role:"dialog",sx:{overflow:"visible"}},children:(0,uO.jsxs)("form",{onSubmit:f,children:[(0,uO.jsx)(mF.Z,{sx:{p:3,borderBottom:"1px solid",borderColor:"border.muted"},children:(0,uO.jsx)(Ge,{startDate:d,onStartDateChange:c,duration:s,onDurationChange:o,onValidChange:i,minStartDate:r})}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",justifyContent:"flex-end",p:3,pt:2,pb:2,gap:2},children:[(0,uO.jsx)(jI.z,{size:"small",onClick:m,...(0,mp.f)("cancel-add-custom-iteration"),type:"button",children:"Cancel"}),(0,uO.jsx)(jI.z,{variant:"primary",size:"small",type:"submit",disabled:!l,...(0,mp.f)("save-add-custom-iteration"),children:"Add"})]})]})})]})}try{(iL=Gt).displayName||(iL.displayName="NewIterationModalButton")}catch{}let Gr=(0,uJ.ZP)("button")`
  background: transparent;
  border: none;
  padding: ${(0,uG.U2)("space.3")};
  color: ${e=>e.selected?(0,uG.U2)("colors.fg.default"):e.disabled?(0,uG.U2)("colors.fg.subtle"):(0,uG.U2)("colors.fg.muted")};
  font-weight: ${e=>e.selected?(0,uG.U2)("fontWeights.semibold"):"inherit"};
  cursor: ${e=>e.disabled&&!e.selected?"not-allowed":"pointer"};
`;function Ga({selectedTab:e,setSelectedTab:t,configuration:r,addButtonProps:a,disabled:n=!1,tabpanelId:l}){let i=r.iterations.length,s=r.completedIterations.length;return(0,uO.jsx)(mF.Z,{children:(0,uO.jsxs)(mF.Z,{sx:{...HX,bg:"canvas.subtle",p:0,alignItems:"center"},children:[(0,uO.jsxs)("div",{role:"tablist","aria-disabled":n,children:[(0,uO.jsxs)(Gr,{role:"tab",selected:"active"===e,"aria-controls":"active"===e?l:void 0,...(0,mp.f)("active-iterations"),onClick:()=>{n||t("active")},"aria-label":"Active iterations","aria-disabled":n,disabled:n,children:[(0,uO.jsx)(mL.Z,{icon:mM.T39,sx:{color:"inherit",mr:2},"aria-label":"Active iterations"}),(0,uO.jsxs)(mO.Z,{children:[i," Active"]})]},"active"),(0,uO.jsxs)(Gr,{role:"tab",selected:"completed"===e,"aria-controls":"completed"===e?l:void 0,...(0,mp.f)("completed-iterations"),onClick:()=>{n||t("completed")},"aria-label":"Completed iterations","aria-disabled":n,disabled:n,children:[(0,uO.jsx)(mL.Z,{icon:mM.rKT,sx:{color:"inherit",mr:2},"aria-label":"Completed iterations"}),(0,uO.jsxs)(mO.Z,{children:[s," Completed"]})]},"completed")]}),"active"===e&&(0,uO.jsx)(mF.Z,{sx:{ml:"auto",mr:3},children:(0,uO.jsx)(Gt,{...a})})]})})}try{(iF=Gr).displayName||(iF.displayName="StyledButton")}catch{}try{(iZ=Ga).displayName||(iZ.displayName="IterationsHeader")}catch{}function Gn({isActiveTab:e}){return(0,uO.jsxs)(mF.Z,{sx:{width:"100%",p:6,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,uO.jsx)(mO.Z,{as:"h3",sx:{color:"fg.default"},children:e?fZ.noIterationsTitle:fZ.noCompletedIterationsTitle}),(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted"},children:e?fZ.noIterationsDescription:fZ.noCompletedIterationsDescription})]})}try{(iO=Gn).displayName||(iO.displayName="NoIterationsPlaceholder")}catch{}function Gl({column:e,fieldName:t,serverConfiguration:r,onUpdate:a}){let{allRowData:n,areColumnValuesLoaded:l,hasUnsavedChanges:i,isActiveTab:s,selectedTab:o,setSelectedTab:d,handleRemoveIteration:c,handleCreateIteration:u,handleChangeIteration:m,handleAddBreak:p,handleChangeBreak:f,handleReset:h,handleSaveChanges:g,countPushedActiveIterations:x,localConfiguration:y,minimumStartDate:b,defaultDuration:v,requestStatus:w}=HU({column:e,fieldName:t,serverConfiguration:r,onUpdate:a}),j=(0,uq.useRef)(null),C=y.iterations.length,k=(0,uq.useRef)(C),S=y.completedIterations.length,I=(0,uq.useRef)(S);(0,uq.useEffect)(()=>{j.current&&(C<=k.current&&S<=I.current||j.current.scrollIntoView({behavior:"smooth"}))},[C,S]),(0,uq.useEffect)(()=>{k.current=C,I.current=S});let N=(0,uq.useMemo)(()=>n.filter(({originalIsCompleted:e})=>"completed"===o?e:!e).map(({localIteration:e,localPreviousIteration:t,originalIteration:r,originalIsCompleted:a,originalPreviousIteration:n,breakExistsBefore:l},i)=>(0,uO.jsxs)(uq.Fragment,{children:[l?(0,uO.jsx)(H5,{onChange:r=>f(gc(t),e,r),localNextIteration:e,localPreviousIteration:gc(t),originalNextIteration:r,originalPreviousIteration:n}):null,(0,uO.jsx)(H3,{iteration:e,originalIsCompleted:a,onRemove:()=>c(e),onChange:m,previousIteration:t,originalIteration:r,children:l?null:(0,uO.jsx)(Hq,{onClick:()=>p(e),removeTopPadding:0===i})})]},e.id)),[n,o,p,m,c,f]),_=C0("iteration-field-options");return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(mF.Z,{sx:{width:"100%",borderRadius:"6px",borderColor:"border.default",borderStyle:"solid",borderWidth:"1px",overflow:"hidden",position:"relative",mt:4},children:[(0,uO.jsx)(Ga,{configuration:y,selectedTab:o,setSelectedTab:d,addButtonProps:{minimumStartDate:b,defaultDuration:v,onCreate:u},disabled:i,tabpanelId:_}),(0,uO.jsx)("div",{role:"tabpanel",id:_,children:N.length>0?(0,uO.jsx)(mF.Z,{as:"ol",sx:{p:0},"aria-label":"completed"===o?"Completed iterations":"Active iterations",children:N}):(0,uO.jsx)(Gn,{isActiveTab:s})}),"completed"===o&&x>0&&(0,uO.jsx)(vd.Z,{sx:{border:"none",borderRadius:0},...(0,mp.f)("active-changes-notice"),children:fZ.willPushActiveIterations(x)})]}),(0,uO.jsx)("div",{ref:j}),(0,uO.jsxs)(mF.Z,{sx:{gap:2,my:3,display:"flex",alignItems:"center"},children:[(0,uO.jsx)(jI.z,{variant:"primary",disabled:!i||"loading"===w||!l,onClick:()=>g(),...(0,mp.f)("iteration-field-settings-save"),children:fE.saveChanges}),(0,uO.jsx)(jI.z,{disabled:!i||"loading"===w,onClick:()=>h(),...(0,mp.f)("iteration-field-settings-reset"),children:fE.reset}),(0,uO.jsxs)(mF.Z,{sx:{pl:1},children:[(0,uO.jsx)(Ek,{status:w}),"succeeded"===w?(0,uO.jsx)(HE,{}):"failed"===w?(0,uO.jsx)(mO.Z,{sx:{ml:2},children:fE.genericErrorMessage}):null]})]})]})}try{(iB=Gl).displayName||(iB.displayName="IterationFieldOptions")}catch{}let Gi=({column:e})=>{let{updateIterationConfiguration:t}=HT(),r=(0,uq.useCallback)(async r=>{await t(e,r)},[e,t]);return(0,uO.jsx)(Gl,{column:e,fieldName:e.name,serverConfiguration:e.settings.configuration,onUpdate:r},e.id)};try{(iV=Gi).displayName||(iV.displayName="IterationConfigurationView")}catch{}let Gs=()=>{let{allColumns:e}=CB(),{fieldId:t}=(0,uQ.UO)(),r=yq(),a=(0,uq.useMemo)(()=>e.filter(e=>HI(e)),[e]),n=(0,uq.useMemo)(()=>void 0!==t?a.find(e=>`${e.id}`===t):void 0,[a,t]),{postStats:l}=bM(),{updateName:i}=H_(),s=(0,uq.useCallback)(async e=>{n&&e!==n.name&&(await i(n,e),l({name:"settings_field_rename",ui:"settings",context:`new name: ${e}, original name: ${n.name}`,memexProjectColumnId:n.id}))},[n,l,i]),{localValue:o,isError:d,isSuccess:c,inputProps:u}=Ey({initialValue:n?.name??"",commitFn:s}),m=d?ES:{},p=()=>0===o.length?fE.requiredFieldErrorMessage:fE.genericErrorMessage,f=ER();if(!n)return(0,uO.jsx)(Gc,{});let h=Li(n.dataType);return(0,uO.jsxs)(mF.Z,{sx:{flexDirection:"column",flex:1,display:"flex"},...(0,mp.f)(`column-settings-${n.name}`),children:[(0,uO.jsxs)(Cn.Z,{as:"h2",sx:{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px",fontSize:4,fontWeight:"normal",pb:2,mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.name," field settings",n.userDefined?(0,uO.jsx)(Go,{column:n,numberOfColumns:a.length,onDeleteColumn:()=>{let e=a.findIndex(e=>e.id===n.id);r(mj.generatePath({fieldId:gc(a[Math.max(0,e-1)]).id}),{replace:!0})}}):null]}),(0,uO.jsx)(mF.Z,{sx:{pb:2,mb:2},children:(0,uO.jsxs)(Cc.Z,{children:[(0,uO.jsx)(Cc.Z.Label,{htmlFor:"column-name",children:"Field name"}),n.userDefined?(0,uO.jsx)(uO.Fragment,{children:(0,uO.jsxs)(mF.Z,{sx:{flexDirection:"row",alignItems:"center",flexWrap:"wrap",display:"flex"},children:[(0,uO.jsx)(E_.Z,{...f,sx:{display:"block",width:248,flex:"0 1 248px"},children:(0,uO.jsx)(k4.Z,{id:"column-name",name:"column-name",block:!0,value:o,...u,sx:{...m},...(0,mp.f)("change-column-name-input")},n.id)}),c&&(0,uO.jsx)(EC,{}),d&&(0,uO.jsx)(Ej,{caret:"top-left",message:p()})]})}):(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mF.Z,{sx:{flexDirection:"row",alignItems:"center",flexWrap:"wrap",mb:2,display:"flex"},children:(0,uO.jsx)(k4.Z,{id:"column-name",name:"column-name","aria-describedby":"column-name-description",disabled:!0,sx:{flex:"0 1 248px",...m},value:n.name})}),(0,uO.jsxs)(Cc.Z.Caption,{id:"column-name-description",children:[n.name," fields are created by GitHub and cannot be renamed."]})]})]})}),(0,uO.jsxs)(mF.Z,{children:[(0,uO.jsx)(mF.Z,{sx:{fontWeight:"bold",mb:1},children:"Field type"}),(0,uO.jsx)(jI.z,{leadingIcon:h,disabled:!0,children:Ls(n.dataType)})]}),(0,uO.jsx)(Gd,{column:n})]})},Go=({column:e,numberOfColumns:t,onDeleteColumn:r})=>{let[a,n]=(0,uq.useState)(!1);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(jI.z,{variant:"danger",onClick:()=>n(!0),children:"Delete Field"}),(0,uO.jsx)(Gm,{numberOfColumns:t,columnModel:e,isDialogOpen:a,setIsDialogOpen:n,onDeleteColumn:r})]})},Gd=(0,uq.memo)(function({column:e}){switch(e.dataType){case mD.Iteration:return(0,uO.jsx)(Gi,{column:e});case mD.SingleSelect:return(0,uO.jsx)(W9,{children:(0,uO.jsx)(Hk,{column:e})});default:return null}}),Gc=(0,uq.memo)(function(){return(0,uO.jsxs)(w7,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,my:3},children:[(0,uO.jsx)(mL.Z,{icon:mM.wNq,size:30,sx:{color:"danger.fg"}}),(0,uO.jsx)(mO.Z,{as:"h2",children:"This field no longer exists"}),(0,uO.jsx)(mO.Z,{as:"p",sx:{color:"fg.muted"},children:"Select another field to view settings."})]})}),Gu=({columnModel:e})=>{let{getCountOfItemsWithColumnValue:t}=HN(),r=t(e.id),a=w2().workflows.filter(t=>t.actions.some(t=>t.arguments.fieldId===e.databaseId)).length,n=fE.deleteField(e.name),l=r>0||a>0;if(!l)return(0,uO.jsxs)(uO.Fragment,{children:[n,"."]});let i=r>0,s=a>0,o=(0,uO.jsxs)(uO.Fragment,{children:["and remove its data from"," ",i?(0,uO.jsxs)("strong",{children:[r," ",1!==r?"items":"item"]}):null,i&&s?" and ":null,s?(0,uO.jsxs)("strong",{children:[a," ",1!==a?"workflows":"workflow"]}):null,"."]});return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)("p",{children:[n," ",o]}),(0,uO.jsx)("p",{children:(0,uO.jsx)(mO.Z,{sx:{fontWeight:"bold"},children:"Permanently delete data from this project?"})})]})},Gm=({isDialogOpen:e,columnModel:t,numberOfColumns:r,setIsDialogOpen:a,onDeleteColumn:n})=>{let{currentView:l}=bP(),{removeField:i}=ZB(),{postStats:s}=bM(),{groupedByColumn:o,clearGroupedBy:d}=NR(),c=(0,uq.useCallback)(()=>{let{id:e,name:a,dataType:c}=t,u=l&&o?.id===e;u&&d(l.number),i(t),s({name:"settings_field_delete",ui:"settings",context:`name: ${a}, dataType: ${c}, total fields: ${r}`,memexProjectColumnId:e}),n?.()},[t,n,r,l,o?.id,i,s,d]),u=(0,uq.useCallback)(e=>{a(!1),"confirm"===e&&c()},[c,a]);return e?(0,uO.jsx)(f6.U,{onClose:u,title:fE.deleteFieldDialogTitle,confirmButtonContent:"Delete field and data",confirmButtonType:"danger",children:(0,uO.jsx)(Gu,{columnModel:t})}):null};try{(i$=Gs).displayName||(i$.displayName="ColumnSettingsView")}catch{}try{(iz=Icon).displayName||(iz.displayName="Icon")}catch{}try{(iU=Go).displayName||(iU.displayName="DeleteField")}catch{}try{(iW=Gd).displayName||(iW.displayName="ConfigurationOptions")}catch{}try{(iH=Gc).displayName||(iH.displayName="NoFieldFound")}catch{}try{(iG=Gu).displayName||(iG.displayName="BodyText")}catch{}try{(iq=Gm).displayName||(iq.displayName="DeleteFieldDialog")}catch{}async function Gp(){let e=f9("memex-reindex-items-api-data"),{memex_skip_json_parsing_if_invalid_response_and_content_found:t}=ho(),{data:r}=await hx(e.url,{method:"POST"},t);return r}async function Gf(){ID();let e=f9("memex-delete-api-data"),{memex_skip_json_parsing_if_invalid_response_and_content_found:t}=ho(),{data:r}=await hx(e.url,{method:"DELETE"},t);return r}let Gh=()=>{let{perform:e,status:t}=b6({request:Gf,showErrorToast:!0}),r=(0,uq.useCallback)(async()=>{await e(),"succeeded"===t.current.status&&window.location.assign(t.current.data.redirectUrl)},[e,t]);return{deleteMemex:r,status:t}},Gg=()=>{let{setProject:e}=TI(),t=(0,uq.useCallback)(async t=>{let r=await RZ({closed:t});e(r.memexProject)},[e]);return{toggleMemexClose:t}},Gx=()=>{let{setProject:e}=TI(),t=(0,uq.useCallback)(async t=>{let r=await RZ({public:t});e(r.memexProject)},[e]);return{toggleMemexPublic:t}},Gy=()=>{let e=TV(),{setProject:t}=TI(),r=(0,uq.useCallback)(async r=>{if(e.isTemplate===r)return;let a=await RZ({isTemplate:r});t(a.memexProject)},[e.isTemplate,t]);return{updateIsTemplate:r}},Gb=e=>(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(FD,{...e}),(0,uO.jsx)(vd.Z,{variant:"warning",full:!0,sx:{mb:2},children:fZ.deleteProjectWarning})]}),Gv=({children:e})=>(0,uO.jsx)(mO.Z,{sx:{fontWeight:"bold"},children:e});function Gw({onClose:e,onConfirm:t,projectName:r,draftIssueCount:a}){let n=(0,uq.useRef)(null),[l,i]=(0,uq.useState)("");return(0,uq.useEffect)(()=>{n.current?.focus()},[]),(0,uO.jsxs)(RV.V,{title:fZ.deleteProjectTitle,width:"large",renderBody:FR,renderHeader:Gb,onClose:e,role:"alertdialog",children:[(0,uO.jsxs)(mO.Z,{as:"p",children:["This action ",(0,uO.jsx)(Gv,{children:"cannot"})," be undone. This will permanently delete the"," ",(0,uO.jsx)(Gv,{children:r})," project, saved views, custom fields and associated values, and Insights data."]}),a?(0,uO.jsxs)(mO.Z,{as:"p",children:["This will also delete"," ",(0,uO.jsxs)(Gv,{children:[a," draft issue",a>1?"s":""]})," ","that ",a>1?"were":"was"," created in this project."]}):null,(0,uO.jsx)(mO.Z,{as:"p",children:"This will not delete issues or pull requests themselves."}),(0,uO.jsxs)(mO.Z,{as:"p",children:["Please type ",(0,uO.jsx)(Gv,{children:r})," to confirm."]}),(0,uO.jsxs)("form",{onSubmit:t,...(0,mp.f)("confirm-delete-form"),children:[(0,uO.jsx)(k4.Z,{"aria-label":fZ.deleteProjectInputLabel,ref:n,block:!0,onChange:e=>i(e.target.value),value:l,sx:{mb:3},...(0,mp.f)("confirm-delete-input")}),(0,uO.jsx)(RV.V.Buttons,{buttons:[{content:fZ.deleteProjectConfirmation,buttonType:"danger",disabled:l.trim()!==r.trim(),type:"submit",sx:{width:"100%"}}]})]})]})}try{(iK=Gv).displayName||(iK.displayName="BoldText")}catch{}try{(iQ=Gw).displayName||(iQ.displayName="DeleteProjectDialog")}catch{}function Gj({children:e,showDivider:t}){return(0,uO.jsx)(mF.Z,{sx:{justifyItems:"center",p:3,display:"flex",...t?{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px"}:{borderBottom:"unset"}},children:e})}function GC({title:e,description:t}){return(0,uO.jsxs)(mF.Z,{sx:{flex:"auto"},children:[(0,uO.jsx)(Cn.Z,{as:"h3",sx:{mb:1,fontSize:1},children:e}),(0,uO.jsx)(mO.Z,{sx:{fontSize:1},children:t})]})}function Gk({children:e}){return(0,uO.jsx)(mF.Z,{sx:{display:"flex",alignItems:"center"},children:e})}try{(iY=Gj).displayName||(iY.displayName="ProjectSettingsCard")}catch{}try{(iX=GC).displayName||(iX.displayName="ProjectSettingsCardHeader")}catch{}try{(iJ=Gk).displayName||(iJ.displayName="ProjectSettingsCardBody")}catch{}function GS({onClose:e}){let t=(0,uq.useRef)(null);(0,uq.useEffect)(()=>{t.current?.focus()},[]);let r=(0,uq.useCallback)(()=>{e("cancel")},[e]),a=(0,uq.useCallback)(()=>{e("confirm")},[e]);return(0,uO.jsx)(RV.V,{onClose:e,"aria-labelledby":"header-id",title:"Are you sure?",width:"small",footerButtons:[{content:(0,uO.jsx)("span",{children:"Cancel"}),onClick:r,buttonType:"normal"},{content:(0,uO.jsx)("span",{children:"Remove"}),onClick:a,buttonType:"danger"}],children:(0,uO.jsx)(mO.Z,{children:"Remove this project as a template? It will no longer be available as a template when creating new projects."})})}try{(i0=GS).displayName||(i0.displayName="RemoveTemplateDialog")}catch{}let GI=({projectName:e})=>0===e.trim().length?fE.projectNameRequired:fE.genericErrorMessage;function GN(){let{isClosed:e,isPublicProject:t,isTemplate:r}=TV(),{isOrganization:a,projectOwner:n,copyProjectPartialUrl:l}=yk(),{hasAdminPermissions:i,canChangeProjectVisibility:s,canCopyAsTemplate:o}=yI(),{projectNumber:d}=b9(),{toggleMemexClose:c}=Gg(),{toggleMemexPublic:u}=Gx(),[m,p]=(0,uq.useState)(""),{postStats:f}=bM(),[h,g]=(0,uq.useState)(!1),{updateIsTemplate:x}=Gy(),[y,b]=(0,uq.useState)(!1),[v,w]=(0,uq.useState)(""),{deleteMemex:j}=Gh(),{memex_paginated_archive:C,memex_resync_index:k}=g9(),S=C&&k&&i,I=(0,uq.useCallback)(e=>{e.preventDefault(),j()},[j]),N=(0,uq.useCallback)(async e=>{await c(e)},[c]),_=(0,uq.useCallback)(async e=>{try{t!==e&&(await u(e),p("success"))}catch{p("error")}},[u,t]),T=(0,uq.useCallback)(()=>{m&&p("")},[m,p]),{title:R}=f3(),{updateTitle:E}=M2(),D=bt().items,P=(0,uq.useMemo)(()=>D.filter(e=>"DraftIssue"===e.contentType).length,[D]),{localValue:A,isError:M,isSuccess:L,inputProps:F}=Ey({initialValue:R,commitFn:e=>E(e)}),Z=(0,uq.useCallback)(e=>{f({name:e?h4:h3,ui:"settings"})},[f]),O=(0,uq.useCallback)(e=>{f({name:e?h9:h8,ui:ge})},[f]),B=(0,uq.useCallback)(()=>{f({name:gl,ui:ge})},[f]),V=(0,uq.useCallback)(()=>{f({name:gi,ui:ge})},[f]),$=(0,uq.useMemo)(()=>s&&t?fZ.projectIsPublic:s?fZ.projectIsPrivate:a?fZ.organizationOwnedProjectVisibilityRestriction:fZ.userOwnedProjectVisibilityRestriction,[s,t,a]),z=ER(),U=e=>{"confirm"===e&&W(!r),b(!1)},W=(0,uq.useCallback)(async e=>{try{r!==e&&(await x(e),w("success"))}catch{w("error")}},[x,r]);return(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",flexGrow:1},...(0,mp.f)("general-settings"),children:[(0,uO.jsx)(Cn.Z,{as:"h2",sx:{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px",fontSize:4,fontWeight:"normal",pb:2,mb:2},children:"Project settings"}),(0,uO.jsxs)(Cc.Z,{sx:{mb:5},id:LV,children:[(0,uO.jsx)(Cc.Z.Label,{children:"Project name"}),(0,uO.jsx)(E_.Z,{...z,children:(0,uO.jsx)(k4.Z,{value:A,...F,sx:{...M?ES:{},"& > input":{padding:"6px 8px"},width:320},trailingVisual:L?EC:void 0})}),M&&(0,uO.jsx)(Cc.Z.Validation,{variant:"error",...(0,mp.f)("project-name-error-message"),children:GI({projectName:A})})]}),(0,uO.jsx)(ED,{onSaveStats:Z,editModeOff:!0}),(0,uO.jsx)(mF.Z,{sx:{mb:5},...(0,mp.f)("readme-edit"),children:(0,uO.jsx)(EI,{onSaveStats:O,editModeOff:!0})}),a&&(i||o)&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(Cn.Z,{as:"h2",sx:{alignItems:"center",borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px",display:"flex",justifyContent:"space-between",fontSize:4,fontWeight:"normal",pb:2,mb:2,width:"100%"},children:["Templates",(0,uO.jsx)(LB,{feedbackUrl:"https://github.com/orgs/community/discussions/54576"})]}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"column",width:"100%",borderColor:"border.default",borderWidth:"1px",borderStyle:"solid",borderRadius:2,mb:4},children:[i&&(0,uO.jsxs)(Gj,{showDivider:o,children:[(0,uO.jsxs)(mF.Z,{sx:{flex:"auto"},children:[(0,uO.jsx)(mF.Z,{sx:{fontWeight:"bold"},id:"make-template-label",children:"Make template"}),(0,uO.jsxs)(mO.Z,{as:"p",sx:{color:"fg.muted",m:0},id:"make-template-description",children:["Make this project a template that can be used by members of the ",(0,uO.jsx)("b",{children:n?.login})," ","organization when creating new projects."]}),(0,uO.jsxs)("div",{children:["success"===v&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(EC,{}),(0,uO.jsx)(mO.Z,{sx:{ml:1},children:"Changes saved"})]}),"error"===v&&(0,uO.jsx)(mO.Z,{sx:{color:"danger.fg"},children:"Something went wrong"})]})]}),(0,uO.jsx)(Gk,{children:(0,uO.jsx)(jN.Z,{"aria-labelledby":"make-template-label","aria-describedby":"make-template-description",disabled:e,onClick:()=>{r||W(!r),b(r)},checked:r})})]}),o&&(0,uO.jsxs)(Gj,{children:[(0,uO.jsxs)(mF.Z,{sx:{flex:"auto"},children:[(0,uO.jsx)(Cn.Z,{as:"h3",sx:{mb:1,fontSize:1},children:"Copy as template"}),(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted"},children:"Copy this project into a template that can be used when creating new projects."})]}),(0,uO.jsxs)(Gk,{children:[(0,uO.jsx)("include-fragment",{src:encodeURI(`${l}?copy_as_template=true`)},"settingsCopyAsTemplate"),(0,uO.jsx)(jI.z,{variant:"default","aria-label":"Copy as template",id:`settings-copy-as-template-dialog-${d}`,"data-show-dialog-id":`copy-as-template-dialog-${d}`,sx:{color:"fg.default",textAlign:"left",'&& [data-component="buttonContent"]':{flex:0}},leadingIcon:mM.NAN,onClick:V,...(0,mp.f)("copy-as-template-button"),children:(0,uO.jsx)(mO.Z,{children:"Copy as template"})},"settingsCopyAsTemplateButton")]})]})]})]}),y&&(0,uO.jsx)(GS,{isOpen:y,onClose:e=>{U(e)}}),(0,uO.jsx)(Cn.Z,{as:"h2",sx:{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px",fontSize:4,fontWeight:"normal",pb:2,mb:2},children:"More options"}),(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"column",width:"100%",borderColor:"border.default",borderWidth:"1px",borderStyle:"solid",borderRadius:2,mb:4},children:(0,uO.jsxs)(Gj,{children:[(0,uO.jsx)(GC,{title:"Make a copy",description:"Make a one time copy of this project."}),(0,uO.jsxs)(Gk,{children:[(0,uO.jsx)("include-fragment",{src:encodeURI(l)},"settingsCopyProject"),(0,uO.jsx)(jI.z,{variant:"default","aria-label":"Make a copy",id:`settings-copy-project-dialog-${d}`,"data-show-dialog-id":`copy-project-dialog-${d}`,sx:{color:"fg.default",textAlign:"left",'&& [data-component="buttonContent"]':{flex:0}},block:!0,leadingIcon:mM.TIy,onClick:B,children:(0,uO.jsx)(mO.Z,{children:"Make a copy"})},"settingsCopyProjectButton")]})]})}),(0,uO.jsx)(Cn.Z,{as:"h3",sx:{fontSize:4,mb:2,fontWeight:"normal"},children:"Danger zone"}),(0,uO.jsx)(mF.Z,{sx:{borderColor:"danger.emphasis",borderWidth:"1px",borderStyle:"solid",borderRadius:2,mb:4},children:(0,uO.jsxs)(mF.Z,{sx:{justifyItems:"center",display:"flex",flexDirection:"column"},children:[i&&(0,uO.jsxs)(Gj,{showDivider:!0,children:[(0,uO.jsxs)(mF.Z,{sx:{flex:"auto"},children:[(0,uO.jsx)(Cn.Z,{as:"h3",id:"visibilityHeading",sx:{fontSize:1,mb:1},children:"Visibility"}),(0,uO.jsx)(mO.Z,{sx:{fontSize:1},...(0,mp.f)("project-visibility-text"),children:$})]}),(0,uO.jsx)(Gk,{children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexWrap:"wrap-reverse",justifyContent:"flex-end"},children:[(0,uO.jsx)(mF.Z,{sx:{pt:2},children:(0,uO.jsxs)("div",{"aria-live":"polite",...(0,mp.f)("project-visibility-update-status"),children:["success"===m&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(EC,{}),(0,uO.jsx)(mO.Z,{sx:{ml:1},children:"Changes saved"})]}),"error"===m&&(0,uO.jsx)(mO.Z,{sx:{color:"danger.fg"},children:"Something went wrong"})]})}),(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Button,{...(0,mp.f)("project-visibility-button"),sx:{position:"relative",ml:"16px",px:3},onClick:T,"aria-describedby":"visibilityHeading",leadingIcon:t?mM.n9J:mM.mBM,disabled:!s,children:t?"Public":"Private"}),(0,uO.jsx)(In.P.Overlay,{anchorSide:"inside-right",children:(0,uO.jsxs)(Ia.S,{selectionVariant:"single",children:[(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>_(!1),selected:!t,sx:{alignItems:"flex-start"},children:["Private",(0,uO.jsx)(Ia.S.Description,{variant:"block",children:"You choose who can read, write, and admin this project."})]},"private"),(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>_(!0),selected:t,sx:{alignItems:"flex-start"},children:["Public",(0,uO.jsx)(Ia.S.Description,{variant:"block",children:"Everyone on the internet has read access to this project. You choose who has write and admin access."})]},"public")]})})]})]})})]}),(0,uO.jsx)(Gj,{showDivider:i,children:e?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(GC,{title:"Re-open project",description:"Re-opening a project will add it to the list of open projects."}),(0,uO.jsx)(Gk,{children:(0,uO.jsx)(jI.z,{...(0,mp.f)("reopen-project-button"),onClick:()=>N(!1),children:"Re-open this project"})})]}):(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(GC,{title:"Close project",description:"Closing a project will disable its workflows & remove it from the list of open projects."}),(0,uO.jsx)(Gk,{children:(0,uO.jsx)(jI.z,{variant:"danger",...(0,mp.f)("close-project-button"),onClick:()=>N(!0),children:"Close this project"})})]})}),i&&(0,uO.jsxs)(Gj,{showDivider:S,children:[(0,uO.jsx)(GC,{title:"Delete project",description:"Once you delete a project, there is no going back. Please be certain."}),(0,uO.jsx)(Gk,{children:(0,uO.jsx)(jI.z,{variant:"danger",...(0,mp.f)("delete-project-button"),onClick:()=>g(!0),children:"Delete this project"})})]}),S&&(0,uO.jsxs)(Gj,{children:[(0,uO.jsx)(GC,{title:"Resync Elasticsearch index for this project",description:"Resyncing the Elasticsearch index will reindex items and field values for this project."}),(0,uO.jsx)(Gk,{children:(0,uO.jsx)(jI.z,{variant:"danger",...(0,mp.f)("resync-project-es-index-button"),onClick:()=>Gp(),children:"Resync Elasticsearch index"})})]})]})}),h&&(0,uO.jsx)(Gw,{onClose:()=>g(!1),projectName:A,onConfirm:I,draftIssueCount:P})]})}try{(i1=GN).displayName||(i1.displayName="GeneralSettingsView")}catch{}let G_=()=>{let e=CO();return{reservedColumnNames:e.reservedColumnNames}},GT=e=>({isValid:!1,message:e.trim()}),GR=({allColumns:e,reservedColumnNames:t},r)=>{let a=r.trim();if(!a)return GT(fE.titleCannotBeBlank);let n=!e.some(({name:e})=>GE(e,a));if(!n)return GT(fE.titleHasAlreadyBeenTaken);let l=t.some(e=>0===e.trim().localeCompare(a,void 0,{sensitivity:"accent"}));if(l)return GT(fE.titleIsReserved);let i=a.includes(":");return i?GT(fE.titleContainsReservedColonCharacter):{isValid:!0,message:""}},GE=(e,t)=>{let r=e.replace(/ /g,"-"),a=t.replace(/ /g,"-");return 0===r.localeCompare(a,void 0,{sensitivity:"accent"})};async function GD(e){let t=f8("memex-column-create-api-data"),{data:r}=await hh(t.url,{method:"POST",body:e,token:t.token});return r}let GP=()=>{let{postStats:e}=bM(),{setAllColumns:t,allColumnsRef:r}=j2(),{updateLoadedColumns:a}=_3(),n=(0,uq.useCallback)(async n=>{let l={name:n.name,dataType:n.type,settings:n.settings};ID();let i=await GD({memexProjectColumn:l}),s=i.memexProjectColumn;a(s.id);let o=jQ(s),d=r.current.findIndex(e=>e.id===s.id)>-1;d&&e({name:"existing_column_found",id:s.id});let c=d?[...r.current.filter(e=>e.id!==s.id),o]:[...r.current,o];return t(c),{newColumn:o}},[a,r,t,e]);return{addColumn:n}},GA=()=>{let{viewStateDispatch:e,viewsMap:t}=bP(),r=M7(),{addColumn:a}=GP(),n=(0,uq.useCallback)(async({request:n,viewNumber:l})=>{let{newColumn:i}=await a(n);if(l){let a=t[l];(0,u0.Z)(a,"View must exist");let n={...a.serverViewState,visibleFields:a.serverViewState.visibleFields.concat(i.databaseId)};await r.perform({viewNumber:a.number,view:ht(n,_B)}),"succeeded"===r.status.current.status&&e({type:kc.AddField,column:i,viewNumber:l})}return i},[a,r,e,t]),l=b6({request:n});return{addField:l}};function GM(e){return`${fE.newField}${e>0?` ${e+1}`:""}`}let GL=e=>e.preventDefault(),GF=(0,uq.memo)(function({setOpen:e,isOpen:t,onSave:r,anchorRef:a,limitedTypes:n}){let{allColumns:l}=CB(),i=l.filter(e=>e.userDefined).length,s=GM(i),{currentView:o}=bP(),[d,c]=Eh(s,{isPropUpdateDisabled:t}),u=(0,uq.useRef)(null),m=(0,uq.useRef)(null),{reservedColumnNames:p}=G_(),{clientHeight:f}=zK({}),h=(0,uq.useMemo)(()=>{if(!f)return"unset";if(!a.current)return f;let e=window.pageYOffset+a.current.getBoundingClientRect().top;return f-e},[a,f]),{options:g,onDrop:x,addOption:y,updateOption:b,removeOption:v,canRemoveOption:w,revertMutations:j}=Hc({ui:hK}),{addField:C}=GA(),k=(0,uq.useMemo)(()=>[{leadingVisual:Li(mD.Text),text:Ls(mD.Text),key:"Dropdown-text",type:mD.Text,onMouseDown:GL,...(0,mp.f)("column-type-text")},{leadingVisual:Li(mD.Number),text:Ls(mD.Number),key:"Dropdown-number",type:mD.Number,onMouseDown:GL,...(0,mp.f)("column-type-number")},{leadingVisual:Li(mD.Date),text:Ls(mD.Date),key:"Dropdown-date",type:mD.Date,onMouseDown:GL,...(0,mp.f)("column-type-date")},{leadingVisual:Li(mD.SingleSelect),text:Ls(mD.SingleSelect),key:"Dropdown-singleselect",type:mD.SingleSelect,onMouseDown:GL,...(0,mp.f)("column-type-single-select")},{leadingVisual:Li(mD.Iteration),text:Ls(mD.Iteration),key:"Dropdown-iteration",type:mD.Iteration,onMouseDown:GL,...(0,mp.f)("column-type-iteration")}],[]),S=n&&n.length?k.filter(e=>n.includes(e.type)):k,[I,N]=(0,uq.useState)(()=>gc(S[0]).type),[_,T]=(0,uq.useState)(gc(S[0])),R=(0,uq.useCallback)(()=>{c(s)},[s,c]),E=(0,uq.useCallback)(e=>{if(e){if(d===s){if(e.type===mD.Iteration){let e=l.filter(e=>e.userDefined&&e.name.startsWith("Iteration")).length;c(fE.newIterationField(e>0?` ${e+1}`:""))}else R()}T(e),N(e.type)}},[l,s,R,c,d]),D=(0,uq.useMemo)(()=>(0,HK.Z)(new Date,1),[]),[P,A]=(0,uq.useState)(new Date),[M,L]=(0,uq.useState)(g0),[F,Z]=(0,uq.useState)(!0),O=(0,uq.useCallback)(()=>{R(),j(),A(new Date),L(g0),Z(!0);let e=S[0];e&&(T(e),N(e.type))},[S,R,j]),B=(0,uq.useCallback)((e,t)=>{switch(t){case mD.SingleSelect:{let r=AW(g).map(({id:e,...t})=>t);return{name:e,type:t,settings:r.length>0?{options:r}:{}}}case mD.Iteration:{let r=gY(M),a=0!==P.getDay()?P.getDay():7,{iterations:n,completedIterations:l}=HP(e,{duration:r,selectedStartDate:P},3);return{name:e,type:t,settings:{configuration:{startDay:a,duration:r,iterations:n,completedIterations:l}}}}case mD.Number:case mD.Text:case mD.Date:return{name:e,type:t,settings:void 0};default:xE(t)}},[P,g,M]);(0,uq.useEffect)(()=>{t&&m.current?.scrollIntoView()},[t]);let V=(0,uq.useCallback)(e=>{c(RQ(e.currentTarget.value))},[c]),$={size:"small",type:"button"},z=(0,uq.useCallback)(()=>I!==mD.SingleSelect||AW(g).length>0,[g,I]),{isValid:U,message:W}=GR({allColumns:l,reservedColumnNames:p},d),H=z()&&U,G=(0,uq.useCallback)(t=>{"click-outside"!==t&&O(),e(!1)},[e,O]),{postStats:q}=bM(),K=(0,uq.useCallback)(async()=>{if(!H)return;G();let e=B(d,I);await C.perform({request:e,viewNumber:o?.number}),"succeeded"===C.status.current.status&&r(C.status.current.data),q({name:hG,ui:hK,memexProjectColumnId:C.status.current.data?.id})},[H,G,B,d,I,C,o?.number,q,r]),Q=(0,uq.useCallback)(e=>{"Enter"===e.key?(K(),e.preventDefault()):"Escape"===e.key&&(G(),e.preventDefault())},[G,K]),Y=Eg(Q),X=(0,uq.useRef)(null),{isDragging:J}=Ha();Fi({active:J,scrollRef:X,strength:10});let ee=Hr({dropID:"singleSelectDrop",dropType:"singleSelectItem",dropRef:X,onDrop:x}),et=Li(I),er=g.length,ea=(0,uq.useRef)(g.length);(0,uq.useEffect)(()=>{X.current&&(er<=ea.current||(X.current.scrollTop=X.current.scrollHeight))},[er]),(0,uq.useEffect)(()=>{ea.current=er});let en=ER();return t?(0,uO.jsx)(EH.w,{anchorRef:a,renderAnchor:null,open:t,onClose:G,width:"medium",overlayProps:{...(0,mp.f)("add-column-menu"),initialFocusRef:u,role:"dialog","aria-label":"Create a new field configuration",sx:h?{maxHeight:h,overflowY:"auto",overflowX:"visible"}:{overflow:"visible"}},focusZoneSettings:{bindKeys:EU.Qw.Tab,containerRef:a},children:(0,uO.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,uO.jsxs)(mF.Z,{ref:X,...ee.props,children:[(0,uO.jsxs)(Cc.Z,{required:!0,sx:{p:3,pb:0,mb:2,position:"relative"},children:[(0,uO.jsx)(Cc.Z.Label,{children:"Field name"}),(0,uO.jsx)(E_.Z,{...en,sx:{width:"100%"},children:(0,uO.jsx)(k4.Z,{...Y,onFocus:e=>e.currentTarget.select(),value:d,className:U?"":"error",onChange:V,ref:u,"aria-invalid":!U,...(0,mp.f)("add-column-name-input"),validationStatus:U?void 0:"error"})}),!U&&(0,uO.jsx)(Cc.Z.Validation,{variant:"error",children:W})]}),(0,uO.jsxs)(Cc.Z,{id:"add-column-type",sx:{px:3,mb:2},children:[(0,uO.jsx)(Cc.Z.Label,{children:"Field type"}),(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Button,{"aria-label":"Type",sx:{width:"100%",pr:2,gridTemplateColumns:"min-content 1fr min-content","[data-component=text]":{textAlign:"left"},"[data-component=buttonContent]":{flex:0}},id:"add-column-type",...(0,mp.f)("add-column-type"),children:(0,uO.jsxs)(mF.Z,{sx:{flexGrow:1,alignItems:"center",display:"flex"},children:[(0,uO.jsx)(mF.Z,{children:(0,uO.jsx)(mL.Z,{icon:et,sx:{mr:1,color:"fg.muted"}})}),(0,uO.jsx)(mF.Z,{children:_.text})]})}),(0,uO.jsx)(In.P.Overlay,{children:(0,uO.jsx)(Ia.S,{selectionVariant:"single",children:S.map((e,t)=>(0,uO.jsxs)(Ia.S.Item,{selected:_===e,onSelect:()=>E(e),...e,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(e.leadingVisual,{})}),e.text]},t))})})]})]}),I===mD.SingleSelect&&(0,uO.jsxs)(mF.Z,{sx:{border:0,padding:0,margin:0,px:3,pt:2,flexWrap:"wrap"},as:"fieldset",children:[(0,uO.jsx)(mF.Z,{sx:{fontWeight:"bold"},as:"legend",children:"Options"}),(0,uO.jsx)(Hy,{options:g,canRemoveOption:w,onAddOption:y,onUpdateOption:b,onRemoveOption:v})]}),I===mD.Iteration&&(0,uO.jsxs)(mF.Z,{sx:{padding:0,margin:0,px:3,pt:2,flexWrap:"wrap",border:0},as:"fieldset",children:[(0,uO.jsx)(mF.Z,{sx:{fontWeight:"bold"},as:"legend",children:"Options"}),(0,uO.jsx)(mF.Z,{sx:{pl:2},children:(0,uO.jsx)(Ge,{duration:M,onDurationChange:L,onValidChange:Z,startDate:P,onStartDateChange:A,minStartDate:D})})]}),(0,uO.jsxs)(mF.Z,{sx:{justifyContent:"flex-end",px:3,py:2,mt:4,borderTop:"1px solid",borderColor:"border.muted",display:"flex",backgroundColor:e=>`${e.colors.canvas.default}`},children:[(0,uO.jsx)(jI.z,{...$,onClick:()=>G(),children:"Cancel"}),(0,uO.jsx)(jI.z,{variant:"primary",...(0,mp.f)("add-column-modal-save"),...$,onClick:K,disabled:!H||!F,sx:{ml:1},children:"iteration"===I?"Save and create":"Save"})]})]})})}):null}),GZ=(0,uq.memo)(function(e){return(0,uO.jsx)(W9,{children:(0,uO.jsx)(GF,{...e})})});try{(i2=GF).displayName||(i2.displayName="AddColumnModalInner")}catch{}try{(i5=SelectedIcon).displayName||(i5.displayName="SelectedIcon")}catch{}try{(i3=GZ).displayName||(i3.displayName="AddColumnModal")}catch{}var GO=r(74339);function GB(e){return(0,uO.jsx)(W9,{children:(0,uO.jsx)(G$,{...e})})}let GV=(0,uJ.ZP)(mF.Z)`
  &.reoder-commit-state-feedback {
    opacity: 0;
  }
  &.reoder-commit-state-feedback.enter {
    opacity: 1;
  }
  &.reoder-commit-state-feedback.enter-done {
    opacity: 0;
    transition: opacity ${1e3}ms;
  }
`;function G$({allColumns:e,reorderCommitState:t,addNewAnchorRef:r,onAddColumnCallback:a,onReorderColumnCallback:n,onFieldNavCallback:l}){let i=(0,uq.useRef)(null),s=(0,uq.useRef)(null),o=(0,uq.useRef)(!1),d=(0,uq.useCallback)(({dragMetadata:t,dropMetadata:r,side:a})=>{if(t.id===r?.id)return;let l=-1;if(r)l=r.id;else{let t=e.at(-1);if(!t)return;l=t.databaseId}let i=l;if("before"===a){let t=e.findIndex(({databaseId:e})=>e===l),r=e[t-1];i=r?r.databaseId:null}if(i){let r=e.findIndex(({databaseId:e})=>e===i),a=e.findIndex(({databaseId:e})=>e===t.id);if(r+1===a)return}n?.(t.id,i)},[e,n]),c=Hr({dropID:"columListDrop",dropType:"projectColumnItem",dropRef:i,onDrop:d});return(0,uO.jsxs)(Ie.$.Group,{sx:{position:"relative",minWidth:220},title:"Custom fields",...(0,mp.f)("project-column-settings-list"),children:[(0,uO.jsxs)(Ia.S.Item,{ref:r,sx:{color:"accent.fg",position:"absolute",top:0,right:0,width:"auto",py:1},onSelect:()=>{o.current=!o.current,a(o.current)},children:[(0,uO.jsx)(Ia.S.LeadingVisual,{sx:{color:"inherit"},children:(0,uO.jsx)(mM.pOD,{})}),"New field"]}),(0,uO.jsx)(mF.Z,{ref:i,...c.props,children:(0,uq.useMemo)(()=>e.filter(e=>HI(e)).sort(fv).map((e,t)=>(0,uO.jsx)(GU,{column:e,index:t,onLinkClick:t=>{l&&l(e.id,t)}},e.id)),[e,l])}),(0,uO.jsx)(GO.Z,{in:"success"===t,nodeRef:s,timeout:1e3,className:"reoder-commit-state-feedback",children:(0,uO.jsxs)(GV,{as:"li","aria-live":"polite",ref:s,sx:{color:"success.fg",textAlign:"right",p:1,mx:2,userSelect:"none"},children:[(0,uO.jsx)(mO.Z,{sx:{color:"inherit",px:1},children:(0,uO.jsx)(mM.nQG,{})}),"Saved"]})})]})}let Gz=(0,uJ.ZP)(mF.Z)`
  position: relative;
  user-select: none;

  a {
    user-drag: none;
  }

  &:after,
  &:before {
    content: '';
    display: none;
    position: absolute;
    left: 8px;
    right: 8px;
    background-color: ${(0,uG.U2)("colors.accent.emphasis")};
    height: ${(0,uG.U2)("space.1")};
    border: 0;
    border-radius: 6px;
    z-index: 12;
  }

  body.is-dragging &.show-sash-projectColumnItem.show-sash-after {
    &:after {
      display: block;
      bottom: 0;
      transform: translateY(50%);
    }
  }

  body.is-dragging &.show-sash-projectColumnItem.show-sash-before {
    &:before {
      display: block;
      top: 0;
      transform: translateY(-50%);
    }
  }

  body.is-dragging &.show-sash-projectColumnItem.show-sash-before,
  body.is-dragging &.show-sash-projectColumnItem.show-sash-after {
    .projectColumItemLeadingVisual .projectColumnGrabber {
      display: none;
    }
    .projectColumItemLeadingVisual .projectColumnIcon {
      display: inline-block;
    }
  }

  .projectColumItemLeadingVisual .projectColumnGrabber {
    display: none;
    cursor: grab;
  }
  &:hover {
    .projectColumItemLeadingVisual .projectColumnGrabber {
      display: inline-block;
    }
    .projectColumItemLeadingVisual .projectColumnIcon {
      display: none;
    }
  }
`;function GU({column:e,index:t,onLinkClick:r}){let a=(0,uq.useRef)(null),n=(0,uq.useMemo)(()=>({id:e.databaseId}),[e]),l=Ht({dragID:e.databaseId.toString(),dragType:"projectColumnItem",dragIndex:t,dragRef:a,metadata:n}),i=Li(e.dataType);return(0,uO.jsx)(Gz,{ref:a,...l.props,children:(0,uO.jsxs)(Ir,{to:{pathname:mj.generatePath({fieldId:encodeURIComponent(e.id)})},onClick:r,...(0,mp.f)(`ColumnSettingsItem{id: ${e.name}}`),children:[(0,uO.jsxs)(Ie.$.LeadingVisual,{...l.handle.props,className:"projectColumItemLeadingVisual",...(0,mp.f)(`ColumnSettingsItemIcon{id: ${e.name}}`),children:[(0,uO.jsx)("span",{className:"projectColumnGrabber",children:(0,uO.jsx)(mM.T2z,{})}),(0,uO.jsx)("span",{className:"projectColumnIcon",children:(0,uO.jsx)(i,{})})]}),e.name]})})}try{(i4=GB).displayName||(i4.displayName="ReorderableColumnListNav")}catch{}try{(i6=GV).displayName||(i6.displayName="BoxFeedbackCommitState")}catch{}try{(i7=G$).displayName||(i7.displayName="ColumnListNav")}catch{}try{(i8=Gz).displayName||(i8.displayName="BoxWithDropSash")}catch{}try{(i9=GU).displayName||(i9.displayName="ColumnListItem")}catch{}try{(se=Icon).displayName||(se.displayName="Icon")}catch{}let GW=(0,uq.memo)(function(){let{allColumns:e}=CB(),{hasAdminPermissions:t}=yI(),{postStats:r}=bM(),[a,n]=(0,uq.useState)(!1),l=(0,uq.useRef)(null),i=yq();return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(Ie.$,{...(0,mp.f)("settings-side-nav"),children:[(0,uO.jsxs)(Ir,{end:!0,to:mw.generatePath(),...(0,mp.f)("general-settings-item"),onClick:e=>{r({name:hU,ui:hH,context:`${e.type}: ${e.currentTarget.tagName}`})},children:[(0,uO.jsx)(Ie.$.LeadingVisual,{children:(0,uO.jsx)(mM.UG6,{})}),"Project settings"]}),t&&(0,uO.jsxs)(Ir,{to:mC.generatePath(),...(0,mp.f)("manage-access-item"),children:[(0,uO.jsx)(Ie.$.LeadingVisual,{children:(0,uO.jsx)(mM.t0Z,{})}),"Manage access"]}),(0,uO.jsxs)(Ie.$.Group,{sx:{position:"relative",minWidth:220},title:"Custom fields",children:[(0,uO.jsxs)(Ia.S.Item,{ref:l,sx:{color:"accent.fg",position:"absolute",top:0,right:0,width:"auto",py:1},onSelect:()=>n(e=>!e),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{sx:{color:"inherit"},children:(0,uO.jsx)(mM.pOD,{})}),"New field"]}),(0,uq.useMemo)(()=>e.filter(e=>HI(e)).sort(fv).map(e=>{let t=Li(e.dataType);return(0,uO.jsxs)(Ir,{to:{pathname:mj.generatePath({fieldId:encodeURIComponent(e.id)})},onClick:t=>{r({name:hW,ui:hH,memexProjectColumnId:e.id,context:`${t.type}: ${t.currentTarget.tagName}`})},...(0,mp.f)(`ColumnSettingsItem{id: ${e.name}}`),children:[(0,uO.jsx)(Ie.$.LeadingVisual,{children:(0,uO.jsx)(t,{})}),e.name]},e.id)}),[e,r])]})]}),(0,uO.jsx)(GZ,{isOpen:a,setOpen:n,anchorRef:l,onSave:(0,uq.useCallback)(e=>{i(mj.generatePath({fieldId:e.id}))},[i])},e.length)]})}),GH=(0,uq.memo)(function(){let{addToast:e}=m7(),{allColumns:t,setAllColumns:r}=CB(),{hasAdminPermissions:a}=yI(),{postStats:n}=bM(),[l,i]=(0,uq.useState)(!1),[s,o]=(0,uq.useState)("idle"),d=(0,uq.useRef)(null),c=yq(),u=(0,uq.useCallback)(e=>{i(e)},[i]),m=(0,uq.useCallback)(async(a,l)=>{o("saving");try{await A2({memexProjectColumnId:a,previousMemexProjectColumnId:l})}catch(t){e({message:"Reorder couldn't be saved",type:"error"}),o("error");return}o("success");let i=t.findIndex(({databaseId:e})=>e===a),s=t[i];if(!s)return;let d=[...t.slice(0,i),...t.slice(i+1)],c=d.findIndex(({databaseId:e})=>e===l);c=c>-1?c:d.length-1;let u=[...d.slice(0,c+1),s,...d.slice(c+1)],m=1;for(let e of u)e.position=m,m+=1;r(u),n({name:"settings_field_reorder",ui:"settings",memexProjectColumnId:a,context:`previousColumnId: ${l}`})},[t,r,n,e,o]),p=(0,uq.useCallback)((e,t)=>{n({name:hW,ui:hH,memexProjectColumnId:e,context:`${t.type}: ${t.currentTarget.tagName}`})},[n]);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(Ie.$,{...(0,mp.f)("settings-side-nav"),children:[(0,uO.jsxs)(Ir,{end:!0,to:mw.generatePath(),...(0,mp.f)("general-settings-item"),onClick:e=>{n({name:hU,ui:hH,context:`${e.type}: ${e.currentTarget.tagName}`})},children:[(0,uO.jsx)(Ie.$.LeadingVisual,{children:(0,uO.jsx)(mM.UG6,{})}),"Project settings"]}),a&&(0,uO.jsxs)(Ir,{to:mC.generatePath(),...(0,mp.f)("manage-access-item"),children:[(0,uO.jsx)(Ie.$.LeadingVisual,{children:(0,uO.jsx)(mM.t0Z,{})}),"Manage access"]}),(0,uO.jsx)(GB,{allColumns:t,reorderCommitState:s,addNewAnchorRef:d,onAddColumnCallback:u,onReorderColumnCallback:m,onFieldNavCallback:p})]}),(0,uO.jsx)(GZ,{isOpen:l,setOpen:i,anchorRef:d,onSave:(0,uq.useCallback)(e=>{c(mj.generatePath({fieldId:e.id}))},[c])},t.length)]})});try{(st=GW).displayName||(st.displayName="SettingsSideNav")}catch{}try{(sr=Icon).displayName||(sr.displayName="Icon")}catch{}try{(sa=GH).displayName||(sa.displayName="ReorderableSettingsSideNav")}catch{}let GG=()=>{let{memex_custom_field_reordering:e}=g9();return(0,uO.jsxs)(Ro.X,{containerWidth:"full",sx:{height:"100%",padding:0,m:0,[`& > ${mF.Z}`]:{minHeight:"100%"}},children:[(0,uO.jsx)(Ro.X.Pane,{position:"start",sx:{padding:[3,null,null,4],borderRight:"1px solid",borderColor:"border.subtle"},children:e?(0,uO.jsx)(GH,{}):(0,uO.jsx)(GW,{})}),(0,uO.jsx)(Ro.X.Content,{width:"large",sx:{padding:[3,null,null,4]},children:(0,uO.jsx)(uQ.j3,{})})]})};try{(sn=GG).displayName||(sn.displayName="SettingsView")}catch{}function Gq(){return b2(),(0,uO.jsx)(b5,{...(0,mp.f)("settings-page"),children:(0,uO.jsx)(GG,{})})}try{(sl=Gq).displayName||(sl.displayName="SettingsPage")}catch{}var GK=r(80770);let GQ='#__primerPortalRoot__, [id$="-portal-root"], [id^="__omnibarPortalRoot__"]';function GY(){let e=[...document.querySelectorAll(GQ)],t=e.some(e=>e.childNodes.length>0);return e&&t}function GX(e){return!!e&&null!==e.closest(GQ)}function GJ(e){let t=(0,uq.useRef)({horizontalScrollbarSize:null,verticalScrollbarSize:null}),r=(0,uq.useCallback)(t=>{let{current:r}=e;if(!r)return()=>void 0;let a=new ResizeObserver(t);return a.observe(r),()=>{a.unobserve(r),a.disconnect()}},[e]);return(0,uq.useSyncExternalStore)(r,()=>{let{current:r}=e;if(!r)return t.current;let a=r?r.offsetHeight-r.clientHeight:null,n=r?r.offsetWidth-r.clientWidth:null,l={horizontalScrollbarSize:a,verticalScrollbarSize:n};return(0,CR.Z)(t.current,l)||(t.current=l),t.current})}let G0=(0,uq.createContext)(null),G1=(0,uq.memo)(function({children:e}){let[t,r]=(0,uq.useState)(!1),a=(0,uq.useMemo)(()=>({showAddFieldModal:t,setShowAddFieldModal:r}),[t]);return(0,uO.jsx)(G0.Provider,{value:a,children:e})});try{(si=G0).displayName||(si.displayName="AddFieldModalContext")}catch{}try{(ss=G1).displayName||(ss.displayName="AddFieldModalContextProvider")}catch{}let G2=()=>{let e=(0,uq.useContext)(G0);if(!e)throw Error("useAddFieldModal must be used within a AddFieldModalContextProvider");return e},G5=(0,uq.createContext)(null),G3=(0,uq.memo)(function({children:e}){let t=(0,uq.useRef)(null);return(0,uO.jsx)(G5.Provider,{value:(0,uq.useMemo)(()=>({anchorRef:t}),[]),children:e})}),G4=()=>{let e=(0,uq.useContext)(G5);if(!e)throw Error("useViewOptionsMenu must be used within a ViewOptionsMenuRefContextProvider");return e};try{(so=G5).displayName||(so.displayName="ViewOptionsMenuRefContext")}catch{}try{(sd=G3).displayName||(sd.displayName="ViewOptionsMenuRefContextProvider")}catch{}function G6({onCollapseToggle:e,isCollapsed:t,expandCollapseLabel:r,...a}){return(0,uO.jsx)(kF.h,{variant:"invisible",size:"small",onClick:e,sx:{color:"fg.muted",pl:0,ml:2,mr:2,"&:hover, > svg:hover, > span:hover":{color:"accent.fg",textDecoration:"none"}},icon:t?mM.XCv:mM.v4q,...a,"aria-label":r})}try{(sc=G6).displayName||(sc.displayName="GroupHeaderExpansionButton")}catch{}let G7={backgroundColor:"canvas.default",borderBottomColor:"border.default",borderBottomStyle:"solid",borderBottomWidth:"1px",paddingLeft:"16px",height:`${F8}px`,display:"flex",alignItems:"center",position:"relative",overflow:"hidden","&.collapsed":{borderBottomColor:"transparent"},"&.board":{borderRightColor:"border.default",borderRightStyle:"solid",borderRightWidth:"1px",borderTopColor:"border.default",borderTopStyle:"solid",borderTopWidth:"1px",marginRight:"8px"},"&.board.collapsed":{borderBottomColor:"border.default"},"&.board.collapsed:has(+ .board)":{borderBottomColor:"transparent"},"&.sticky":{position:"sticky",top:0,left:[-3,-4,-5],marginLeft:[-3,-4,-5],zIndex:1}},G8=(0,uq.forwardRef)(({topOffset:e,...t},r)=>(0,uO.jsx)(mF.Z,{ref:r,sx:G7,style:{top:e??0},...t}));G8.displayName="StyledGroupHeader";let G9=({isCollapsed:e,metadata:t,numberOfRows:r,children:a,sticky:n,swimlanesHeaderRef:l})=>{let{groupedByColumnId:i,toggleGroupCollapsed:s}=NR(),{postStats:o}=bM(),{viewType:d}=_Y(),c=xO(t.sourceObject),u=xV(t.sourceObject),m=(0,uq.useCallback)(()=>{let a=!e;i&&o({key:"memex_project_field_group_by_collapse_toggle",groupTitle:ff(c),memexProjectColumnId:i,collapsed:a,numberOfRows:r}),s(t.value)},[e,i,s,t,o,c,r]),p=e?`Expand group ${c}`:`Collapse group ${c}`;return(0,uO.jsxs)(G8,{className:F7()({collapsed:e,board:d===_z.Board,sticky:n}),topOffset:l?.current?.offsetHeight??0,...(0,mp.f)(`group-header-${u}`),children:[(0,uO.jsx)(G6,{onCollapseToggle:m,isCollapsed:e,expandCollapseLabel:p,...(0,mp.f)(`group-by-toggle-collapsed-${u}`)}),(0,uO.jsx)(mF.Z,{sx:{alignItems:"center",display:"flex"},children:a})]})};try{(su=G9).displayName||(su.displayName="GroupHeader")}catch{}let qe=(0,uq.createContext)(null);function qt({children:e}){let{showInput:t}=IN(),r=(0,uq.useCallback)(()=>{t()},[t]);return(0,uO.jsx)(qe.Provider,{value:(0,uq.useMemo)(()=>({setShowFindInProject:r}),[r]),children:e})}function qr(){let e=(0,uq.useContext)(qe);if(!e)throw Error("useBoardFindInProject must be used within a BoardFindInProject");return e}try{(sm=qe).displayName||(sm.displayName="BoardFindInProject")}catch{}try{(sp=qt).displayName||(sp.displayName="BoardFindInProjectProvider")}catch{}var qa=r(10160);let qn=(e,t,r)=>{let[a,n]=(0,uq.useState)(t);return r&&e in r?[r[e],IR.Z,!0]:[a,n,!1]},ql=e=>{let[t,r,a]=qn("isOpen",!1,e),n=(0,uq.useRef)(!1),l=a?IR.Z:()=>{r(!0)},i=a?IR.Z:()=>{!1===n.current&&r(!1)},s=(0,uq.useCallback)(()=>a?IR.Z:()=>{n.current=!1},[a]),o=a?IR.Z:()=>{n.current=!0};return{isOpen:t,setIsOpen:r,itemOnMouseDown:o,inputOnBlur:i,inputOnFocus:l,onResetListInteraction:s}};function qi(e){let t=(0,uq.useRef)(null);return e??t}let qs=1,qo=(e,t,r,a)=>{if(r?.[a]){let t=r[a];"function"==typeof t&&t(e)}t(e)},qd=(e,t)=>{let[r,a]=qn("inputValue","",e),{isOpen:n,setIsOpen:l,inputOnBlur:i,inputOnFocus:s,itemOnMouseDown:o,onResetListInteraction:d}=ql(e),c=(0,uq.useRef)(null),u=(0,uq.useRef)(e.items),m=(0,uq.useRef)(),p=(0,uq.useRef)(e.onSelectedItemChange),f=(0,uq.useRef)(qs++),h=(0,uq.useRef)(`combobox-input-${f.current}`),g=(0,uq.useRef)(`combobox-list-${f.current}`),x=qi(t);u.current!==e.items&&(u.current=e.items),p.current!==e.onSelectedItemChange&&(p.current=e.onSelectedItemChange);let y=(0,uq.useCallback)(e=>{if(u.current){let t=u.current[e];t&&p.current(t),d(),x.current&&x.current.focus(),l(!1)}},[d,l,x]),b=(0,uq.useCallback)(e=>{let t=e.target.getAttribute("data-list-index");t&&y(parseInt(t))},[y]);(0,uq.useEffect)(()=>{n?m.current?.start():m.current?.stop()},[n]);let v=m1(b);(0,uq.useEffect)(()=>{let e=c.current;if(x.current&&c.current){m.current=new qa.Z(x.current,c.current);let t=e=>{v.current(e)};return c.current.addEventListener("combobox-commit",t),function(){m.current?.destroy(),e?.removeEventListener("combobox-commit",t)}}},[x,v]),(0,uq.useEffect)(()=>{n?m.current?.start():m.current?.stop()},[n]);let w=e=>{a(e.target.value),n||l(!0)},j=e=>({ref:x,id:h.current,type:"text",value:r,onFocus:t=>{qo(t,s,e,"onFocus")},onBlur:t=>{qo(t,i,e,"onBlur")},onChange:t=>{qo(t,w,e,"onChange")}}),C=()=>({ref:c,id:g.current}),k=(e,t,r)=>({role:"option",id:`combobox-${f.current}-item-${t}`,"data-list-index":t,onMouseDown:e=>{qo(e,o,r,"onMouseDown")}}),S=()=>{x.current&&c.current&&(m.current?.clearSelection(),m.current?.navigate(1))};return{inputValue:r,setInputValue:a,getInputProps:j,getListProps:C,getItemProps:k,isOpen:n,selectFirstItem:S}};function qc(){let[e,t]=(0,uq.useState)({current:null}),r=(0,uq.useCallback)(r=>{e.current!==r&&t({current:r})},[e]);return[e,r]}function qu(e,t,r,a,n){let[l,i]=(0,uq.useState)("left"),[s,o]=(0,uq.useState)("top"),d=(0,uq.useCallback)(()=>{if(!e?.current||!t.current)return;let{top:r,left:a,xAlign:d,yAlign:c,hasContentDimensions:u}=C1({originRef:e,contentRef:t,alignment:{xAlign:n?.xAlign??l,yAlign:n?.yAlign??s,yTopOffset:0}});t.current.style.top=`${r}px`,t.current.style.left=`${a}px`,!l&&u&&i(d),!s&&u&&o(c)},[e,t,l,s,n]);return(0,uq.useLayoutEffect)(()=>{r||(i(void 0),o(void 0)),d();let e=new ResizeObserver(d);return e.observe(document.documentElement),()=>{e.unobserve(document.documentElement),e.disconnect()}},[d,r,...a]),{adjustPickerPosition:d}}let qm=(0,uq.forwardRef)((e,t)=>(0,uO.jsx)(mF.Z,{as:"ul",ref:t,...e,sx:{width:`calc(100vw - ${e.offsetX??52}px)`,maxHeight:`calc(100vh - ${e.offsetY??60}px)`,overflowY:"auto",p:0,m:0,listStyle:"none",bg:"canvas.default",border:"1px solid",borderColor:"border.default",borderRadius:2,boxShadow:"shadow.medium",position:"absolute",zIndex:100,fontSize:"12px","@media (min-width: 544px)":{width:"auto",minWidth:"400px"},...e.sx},children:e.children}));qm.displayName="PickerList";let qp={cursor:"pointer",display:"block",fontSize:"12px",p:2,"&:first-child":{borderTopLeftRadius:2,borderTopRightRadius:2},'&[aria-selected="true"]':{color:"fg.default",textDecoration:"none",bg:"canvas.subtle"}},qf=(0,uq.forwardRef)((e,t)=>(0,uO.jsx)(mF.Z,{as:"li",ref:t,...e,sx:qp,children:e.children}));qf.displayName="PickerItem";let qh=(0,uO.jsxs)(uO.Fragment,{children:["You can use ",(0,uO.jsx)(FX.u,{format:"full",keys:"Control+Space"})," to add an item"]}),qg=({focusedPlaceholder:e,inputHasFocus:t,unfocusedPlaceholder:r,value:a,descriptionId:n})=>""===a&&(t||r)?(0,uO.jsx)(mF.Z,{sx:{position:"absolute",height:"100%",display:"flex",alignItems:"center",paddingLeft:"20px"},children:(0,uO.jsxs)(mO.Z,{sx:{fontSize:1,color:"fg.muted"},children:[!t&&(0,uO.jsx)("span",{"aria-hidden":!0,children:r}),(0,uO.jsx)("span",{id:n,hidden:!t,children:e})]})}):null;try{(sf=qh).displayName||(sf.displayName="DefaultOmnibarPlaceholder")}catch{}try{(sh=qg).displayName||(sh.displayName="OmnibarPlaceholder")}catch{}let qx={position:"relative",width:"100%",cursor:"text",display:"flex"},qy=({isOpen:e,inputRef:t,renderInput:r,newItemAttributes:a,onCloseSuggestions:n})=>{let[l,i]=qc(),s=Te(),o=(0,uq.useMemo)(()=>{let e=[];return s?e.push({icon:mM.hEv,title:"Create new issue",action:"createIssue"}):e.push({icon:mM.aNF,title:"Create a draft",action:"createDraft"}),e.push({icon:mM.H0r,title:"Add item from repository",shortcutIcon:mM.LZ3,action:"openSidePanel",shortcutContent:(0,uO.jsx)(mL.Z,{icon:mM.LZ3,sx:{color:"fg.muted"}})}),e},[s]),d=qw(t),c=t=>{switch(t.key){case"Escape":n("");break;case"ArrowDown":case"ArrowUp":e&&t.stopPropagation()}},{openPaneBulkAdd:u}=bJ(),m=(0,uq.useCallback)(e=>{if(e)switch(e.action){case"createDraft":(0,w8.flushSync)(()=>{n("")}),t.current?.focus();break;case"createIssue":s&&(n(""),s({},a));break;case"openSidePanel":n(""),u("omnibar_discovery_suggestions_ui",void 0,"Add item from repository"!==e.title?e.title:void 0,a)}},[n,u,t,a,s]),{getInputProps:p,getListProps:f,getItemProps:h}=qd({items:o,onSelectedItemChange:m,isOpen:e},t),g=(0,uq.useCallback)(()=>{(0,w8.flushSync)(()=>{n(t.current?.value)}),t.current?.focus()},[n,t]),x=(0,uq.useId)();return(0,uO.jsxs)(mF.Z,{sx:qx,ref:i,children:[(0,uO.jsx)(qg,{focusedPlaceholder:fE.newItemPlaceholder,inputHasFocus:!0,value:t.current?.value,descriptionId:x}),r({...p({onChange:g}),fontSize:1,pl:"12px",lineHeight:1.5,"aria-label":fE.newItemPlaceholderAriaLabel,"aria-describedby":x,autoFocus:!0,autoComplete:"off",onKeyDown:c}),(0,uO.jsx)(qb,{...f(),containerRef:l,isOpen:e,items:o,getItemProps:h,itemOnMouseDown:m,"aria-label":fE.newItemPlaceholderAriaLabel,coordinates:d})]})},qb=(0,uq.forwardRef)(({items:e,getItemProps:t,itemOnMouseDown:r,isOpen:a,containerRef:n,coordinates:l,...i},s)=>{let o=(0,uq.useRef)(null);(0,CJ.z)(s,o);let{adjustPickerPosition:d}=qu(n,o,a,[l,e],{yAlign:"bottom"});return(0,uO.jsx)(C8,{onMount:d,children:(0,uO.jsx)("div",{role:"dialog","aria-label":"Discovery suggestions",children:(0,uO.jsx)(qm,{...i,...(0,mp.f)("discovery-suggestions"),ref:o,hidden:!a||!e.length,sx:{p:[null,0],width:[null,"300px"],maxWidth:[null,"300px"]},children:a&&e.map((a,n)=>(0,uO.jsxs)(uq.Fragment,{children:[(0,uO.jsx)(qf,{style:{padding:14},value:a.title,...(0,mp.f)("issue-picker-item"),...t(a,n,{onMouseDown:()=>r(a)}),children:(0,uO.jsxs)(mF.Z,{sx:{justifyContent:"space-between",overflow:"hidden",flex:1,display:"flex"},children:[(0,uO.jsxs)("span",{children:[(0,uO.jsx)(mL.Z,{icon:a.icon,sx:{ml:2,color:"fg.muted"}}),(0,uO.jsx)(mO.Z,{sx:{ml:2,color:"fg.muted",fontSize:1},children:a.title})]}),(0,uO.jsx)("span",{style:{display:"flex",alignItems:"center"},children:a.shortcutContent})]})}),n!==e.length&&(0,uO.jsx)(Ia.S.Divider,{sx:{margin:0}})]},n++))})})})});qb.displayName="SuggestedItemList";let qv=e=>{let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}};function qw(e){let t=(0,uq.useRef)({top:0,left:0});return(0,uq.useSyncExternalStore)(qv,()=>{let r=t.current;if(e.current){let{top:a,left:n}=e.current.getBoundingClientRect();(a!==r.top||n!==r.left)&&(t.current={top:a,left:n})}return t.current})}try{(sg=qy).displayName||(sg.displayName="DiscoverySuggestions")}catch{}let qj=({items:e,onSelectedItemChange:t,textExpanderOnChange:r,expansionKey:a="#",...n},l)=>{let{inputOnBlur:i,isOpen:s,setIsOpen:o,itemOnMouseDown:d,onResetListInteraction:c}=ql(),u=e=>{e.target.value.startsWith(a)?(s||o(!0),r(e.target.value.substr(1))):o(!1)},m=e=>{c(),o(!1),t(e)},{getInputProps:p,selectFirstItem:f,inputValue:h,getItemProps:g,...x}=qd({items:e,isOpen:s,onSelectedItemChange:m,...n},l),y=e=>{h.startsWith(a)&&o(!0)};(0,uq.useEffect)(()=>{h.startsWith(a)?o(!0):o(!1)},[h,o,a]);let b=e=>{let t=t=>{e?.onChange?.(t),u(t)},r=t=>{e?.onFocus?.(t),y(t)},a=t=>{e?.onBlur?.(t),i(t)};return p({onChange:t,onBlur:a,onFocus:r})},v=(e,t,r)=>{let a=e=>{r&&r.onMouseDown&&r.onMouseDown(e),d()};return g(e,t,{...r,onMouseDown:a})};return(0,uq.useEffect)(()=>{s&&f()},[s,e,f]),{...x,isOpen:s,selectFirstItem:f,getInputProps:b,getItemProps:v,inputValue:h,textExpanderValue:h.startsWith(a)?h.substr(1):""}},qC={bg:e=>`${e.colors.searchKeyword.hl}`,color:"inherit",fontWeight:"bold"},qk=({text:e,chunks:t,...r})=>(0,uO.jsx)(mO.Z,{...r,children:t.map(t=>{let r=e.substr(t.startIndex,t.endIndex-t.startIndex);return t.highlight?(0,uO.jsx)(mF.Z,{as:"mark",sx:qC,children:r},t.startIndex.toString()):r})});try{(sx=qk).displayName||(sx.displayName="HighlightedText")}catch{}let qS=(0,uq.forwardRef)(({isOpen:e,loading:t,repositories:r,getItemProps:a,positionDataMap:n,inputRef:l,...i},s)=>{let o=(0,uq.useRef)(null);(0,CJ.z)(s,o);let{adjustPickerPosition:d}=qu(l,o,e,[t]),c=C0("__omnibarPortalRoot__");return(0,uO.jsx)(C8,{id:c,onMount:d,children:(0,uO.jsx)("div",{role:"dialog","aria-label":"Repository suggestions",children:(0,uO.jsx)(qm,{...i,...(0,mp.f)("repo-searcher-list"),className:`repo-searcher-list omnibar-picker ${e&&(t||r.length)?"visible":"hidden"}`,ref:o,hidden:!e||!t&&!r.length,children:t?(0,uO.jsx)(mF.Z,{sx:{justifyContent:"center",my:4,display:"flex"},children:(0,uO.jsx)(w4.Z,{size:"medium"})}):r.map((e,t)=>(0,uq.createElement)(qI,{...a(e,t),...(0,mp.f)("repo-searcher-item"),positionData:n.get(e),key:e.id,repository:e}))})})})});qS.displayName="RepoList";let qI=({repository:e,positionData:t,...r})=>{let{projectOwner:a}=yk(),n=t?.chunks??[],l=e.nameWithOwner.split("/")[0],i=l?.toLowerCase()!==a?.login.toLowerCase()?l:"";return(0,uO.jsxs)(qf,{...r,children:[(0,uO.jsx)(Cv,{repository:e}),(0,uO.jsx)(mO.Z,{sx:{ml:2},children:i?`${i}/`:""}),(0,uO.jsx)(qk,{text:e.name,chunks:n})]})};try{(sy=qI).displayName||(sy.displayName="RepoItem")}catch{}let qN=({onRepositorySelected:e,text:t,setText:r,onItemSelected:a,inputRef:n,renderInput:l,defaultPlaceholder:i,isFocused:s,isDisabled:o})=>{let{suggestRepositories:d}=Cb(),[c,u]=(0,uq.useState)(!1),[m,p]=(0,uq.useState)(),[f,h]=(0,uq.useState)(),[g,x]=(0,uq.useState)(new WeakMap),y=(0,uq.useRef)(),b=(0,uq.useRef)(!0),[v,w]=(0,uq.useState)(!!s),j=(0,uq.useCallback)(e=>{let t=e.reduce((e,t)=>(e.set(t,{chunks:[{startIndex:0,endIndex:t.name.length,highlight:!1}]}),e),new WeakMap);h(e),x(t),u(!1)},[h,x]),C=(0,uq.useCallback)(e=>{r(e.target.value)},[r]),k=(0,uq.useCallback)(async e=>{let t=e?await Ch(e):void 0;n.current?.value!=="#"&&j(t?.repositories??m??[])},[j,m,n]),S=(0,uq.useCallback)(e=>{y.current&&y.current.cancel(),y.current=(0,b7.Z)(()=>k(e),200),u(!0),y.current()},[y,k,u]),I=t=>{e(t)},N=e=>{!e&&m&&j(m),e&&S(e)},{getInputProps:_,getListProps:T,getItemProps:R,isOpen:E}=qj({textExpanderOnChange:N,items:f||[],onSelectedItemChange:I,inputValue:t},n),{navigationDispatch:D}=x3(),P=(0,uq.useCallback)(async e=>{if(e.target instanceof HTMLInputElement||e.target instanceof HTMLInputElement){let n=e.target;switch(e.key){case"Enter":r(""),e.preventDefault(),a(t);break;case"Tab":e.shiftKey||E||!(t.length>0)||(e.preventDefault(),await a(t),r(""),requestAnimationFrame(()=>{w(!1),D(x2({x:xi.Second,y:xi.Last,focusType:xl.Focus}))}));break;case"Escape":E&&(r(""),e.stopPropagation());break;case"ArrowLeft":(0!==n.selectionStart||0!==n.selectionEnd)&&(e.nativeEvent.preventFocusChange=!0);break;case"ArrowRight":(n.selectionStart!==n.value.length||n.selectionEnd!==n.value.length)&&(e.nativeEvent.preventFocusChange=!0);break;case"ArrowDown":case"ArrowUp":E&&e.stopPropagation()}}},[E,t,r,a,D]),A=Eg(P);(0,uq.useEffect)(()=>{let e=async()=>{if(void 0===m){u(!0);let e=await d();p(e),n?.current?.value==="#"&&j(e)}};b.current&&(b.current=!1,e())},[m,p,d,n,j]);let M=(0,uq.useCallback)(()=>{o||w(!0)},[o]),L=(0,uq.useCallback)(()=>{o||w(!1)},[o]),F=(0,uq.useId)(),Z=o?(0,uO.jsx)(F4,{"aria-disabled":"true",sx:{cursor:"not-allowed",pl:"20px"},children:i}):l({..._({onChange:C,onFocus:M,onBlur:L}),pl:"12px",fontSize:1,lineHeight:1.5,"aria-label":fE.newItemPlaceholderAriaLabel,"aria-describedby":F,"aria-keyshortcuts":"Control+Space",autoComplete:"off",value:t,...A});return(0,uO.jsxs)(mF.Z,{sx:{width:"100%",cursor:"text",display:"flex",position:"relative"},children:[(0,uO.jsx)(qg,{descriptionId:F,focusedPlaceholder:fE.newItemPlaceholder,inputHasFocus:v,unfocusedPlaceholder:i,value:n.current?.value}),Z,(0,uO.jsx)(qS,{...T(),inputRef:n,"aria-label":fE.newItemPlaceholderAriaLabel,isOpen:E,loading:c,positionDataMap:g,getItemProps:R,repositories:f||[]})]})};try{(sb=qN).displayName||(sb.displayName="RepoSearcher")}catch{}let q_=({item:e,...t})=>(0,uO.jsx)(qf,{...t,children:(0,uO.jsxs)(mF.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:[(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,uO.jsx)(jh,{type:e.type,state:e.state,stateReason:e?.stateReason,isDraft:!!e.isDraft})}),(0,uO.jsx)(mO.Z,{children:e.title}),(0,uO.jsx)(mO.Z,{sx:{ml:1,color:"fg.muted"},children:`#${e.number}`})]})});try{(sv=q_).displayName||(sv.displayName="SuggestedItemOption")}catch{}let qT="add_multiple_items",qR="create_issue",qE=(0,uq.forwardRef)(({loading:e,items:t,getItemProps:r,isOpen:a,itemOnMouseDown:n,containerRef:l,...i},s)=>{let o=(0,uq.useRef)(null);(0,CJ.z)(s,o);let{adjustPickerPosition:d}=qu(l,o,a,[e,t]),{theme:c}=(0,uz.Fg)(),u=C0("__omnibarPortalRoot__");return(0,uO.jsx)(C8,{id:u,onMount:d,children:(0,uO.jsx)("div",{"aria-label":"Suggestions",role:"dialog",children:(0,uO.jsx)(qm,{...i,...(0,mp.f)("issue-picker-list"),ref:o,className:`issue-picker-list omnibar-picker ${a&&(e||t.length)?"visible":"hidden"}`,hidden:!a||!e&&!t.length,children:e?(0,uO.jsx)(mF.Z,{sx:{justifyContent:"center",my:4,display:"flex"},children:(0,uO.jsx)(w4.Z,{size:"medium"})}):t.map((e,t)=>e.type===qR?(0,uO.jsx)(qf,{style:{borderTop:"1px solid",borderColor:c?.colors.border.muted},...r(e,t,{onMouseDown:t=>n(t,e)}),...(0,mp.f)("create-new-issue"),children:(0,uO.jsxs)(mF.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:[(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,uO.jsx)(mL.Z,{icon:mM.wl8,sx:{color:"fg.muted"}})}),(0,uO.jsxs)(mO.Z,{sx:{flexGrow:1},children:["Create new issue"," ",e.title?(0,uO.jsxs)(uO.Fragment,{children:['"',(0,uO.jsx)(mO.Z,{sx:{fontWeight:600},children:e.title}),'"']}):null]})]})},"create"):e.type===qT?(0,uO.jsx)(qf,{...r(e,t,{onMouseDown:t=>n(t,e)}),...(0,mp.f)("add-multiple-items"),children:(0,uO.jsxs)(mF.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:[(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,uO.jsx)(mL.Z,{icon:mM.H0r,sx:{color:"fg.muted"}})}),(0,uO.jsxs)(mO.Z,{sx:{flexGrow:1},children:["Add items from ",(0,uO.jsx)(mO.Z,{sx:{fontWeight:600},children:e.repository.nameWithOwner})]}),(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,ml:2,display:"flex"},children:(0,uO.jsx)(mL.Z,{icon:mM.LZ3,sx:{color:"fg.muted"}})})]})},"multiple"):(0,uO.jsx)(q_,{item:e,...r(e,t,{onMouseDown:t=>n(t,e)}),...(0,mp.f)("issue-picker-item")},e.number))})})})});qE.displayName="SuggestedItemList";let qD=({repository:e})=>(0,uO.jsxs)(mF.Z,{sx:{alignItems:"center",display:"flex"},...(0,mp.f)("repo-searcher-selected-repo"),children:[(0,uO.jsx)(mO.Z,{sx:{fontSize:1,mr:0,color:"fg.subtle"},children:"repo:"}),(0,uO.jsx)(mO.Z,{sx:{fontSize:1,color:"accent.fg",mr:2},children:e.name})]});try{(sw=qD).displayName||(sw.displayName="SelectedRepositoryPill")}catch{}let qP=({onItemSelected:e,onRemovePicker:t,onFilterTextChanged:r,inputRef:a,renderInput:n,loading:l,filteredItems:i,repository:s})=>{let{isOpen:o,setIsOpen:d,inputOnBlur:c,itemOnMouseDown:u,onResetListInteraction:m,inputOnFocus:p}=ql(),f=(0,uq.useRef)(null),{navigationDispatch:h}=x3(),g=null!==Te(),[x,y]=(0,uq.useState)(),b=(0,uq.useMemo)(()=>{let e=Array.from(i);return g&&e.push({type:qR,title:x,repository:s}),i.length>1&&e.push({type:qT,title:x,repository:s}),e},[i,g,x,s]),v=(0,uq.useCallback)(async t=>{m(),e(t),N(""),y(""),I()},[b,m]),w=e=>{y(e.target.value),r(e.target.value)},{getInputProps:j,getListProps:C,getItemProps:k,inputValue:S,selectFirstItem:I,setInputValue:N}=qd({items:b,onSelectedItemChange:v,isOpen:o},a);(0,uq.useEffect)(()=>{o&&I()},[o,b,I]);let _=e=>{switch(e.key){case"Backspace":S||(e.preventDefault(),t());break;case"Escape":t(),e.stopPropagation();break;case"ArrowDown":case"ArrowUp":o&&e.stopPropagation();break;case"Tab":t(),requestAnimationFrame(()=>{h(x2({x:xi.Second,y:xi.Last,focusType:xl.Focus}))})}},T=(0,uq.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),u()},[u]),R=(0,uq.useCallback)(()=>{d(!1)},[d]);return(0,uO.jsxs)("div",{ref:f,onBlur:R,style:{position:"relative",width:"100%",cursor:"text",display:"flex"},children:[n({...j({onFocus:p,onBlur:c,onChange:w}),fontSize:1,lineHeight:1.5,placeholder:fE.newItemFindIssuePlaceholder(g),"aria-label":fE.newItemFindIssuePlaceholder(g),autoFocus:!0,autoComplete:"off",onKeyDown:_}),(0,uO.jsx)(qE,{...C(),containerRef:f,isOpen:o,loading:l,items:b,getItemProps:k,itemOnMouseDown:T,"aria-label":fE.newItemFindIssuePlaceholder(g)})]})};qP.displayName="SuggestedItemPicker";let qA=[],qM=(0,uq.memo)(function(e){let{repository:t,filteredItemIds:r=qA,newItemAttributes:a,inputRef:n,onItemSelected:l,onRemovePicker:i,renderInput:s,...o}=e,[d,c]=(0,uq.useState)(!0),{refresh:u,items:m,removeItem:p}=ve(c),{openPaneBulkAdd:f}=bJ(),h=(0,uq.useMemo)(()=>m?m.filter(e=>!r.includes(e.id)):[],[r,m]),g=(0,uq.useCallback)(e=>u(t.id,e),[u,t]),x=Te(),y=(0,uq.useCallback)(async e=>{c(!0),e.type===qT?f("omnibar_add_item_suggestions_ui",t,e.title,a):e.type===qR?x?.({issueTitle:e.title,repo:_2(e.repository.nameWithOwner)},a):(await l(e),await u(t.id,"",!0),p(e)),c(!1)},[t,f,a,l,u,p,x]);return(0,uq.useEffect)(()=>{g("")},[g]),(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mF.Z,{...o,sx:{flexShrink:0,display:"flex",...o.sx},children:(0,uO.jsx)(qD,{repository:t})}),(0,uO.jsx)(qP,{onRemovePicker:i,onItemSelected:y,inputRef:n,renderInput:s,loading:d,filteredItems:h,onFilterTextChanged:g,repository:t})]})});qM.displayName="SuggestionsForRepository";let qL="69px",qF=(0,uq.memo)((0,uq.forwardRef)(({onAddItem:e,newItemAttributes:t,scrollRef:r,...a},n)=>{let{addToast:l}=m7(),{createMemexItem:i}=_8(),s=(0,uq.useCallback)((r,a,n,l,s)=>(e?.(t),i({contentType:r.type,content:{id:r.id,repositoryId:a},memexProjectColumnValues:n,localColumnValues:l,previousMemexProjectItemId:s})),[i,t,e]),o=(0,uq.useCallback)((a,n,s,o)=>{e?.(t);let d=a.trim();return d?i({contentType:mA.DraftIssue,content:{title:RQ(d)},memexProjectColumnValues:n,localColumnValues:s,previousMemexProjectItemId:o}).then(e=>(t?.setField?.dataType===mD.TrackedBy&&e.contentType!==mA.Issue&&(l({message:fq.addedUnsupportedItemToast,type:mB.warning}),r?.current?.scrollTo({left:0,top:r.current?.scrollHeight,behavior:"smooth"})),e)):Promise.resolve(null)},[l,i,t,e,r]);return(0,uO.jsx)(qZ,{onAddItem:s,onAddDraftItem:o,newItemAttributes:t,...a,ref:n})}));qF.displayName="OmnibarInternal";let qZ=(0,uq.forwardRef)(({onAddItem:e,onAddDraftItem:t,onInputFocus:r,filteredItemIds:a,newItemAttributes:n,isFixed:l,defaultPlaceholder:i,disabled:s,childElementRole:o,...d},c)=>{let u=(0,uq.useRef)(null);(0,CJ.z)(c,u);let[m,p]=(0,uq.useState)(!1),[f,h]=(0,uq.useState)(!1),{navigationDispatch:g}=x3(),x=(0,uq.useCallback)(()=>{u.current?.focus()},[u]),y=F7()({"is-focused":m,"is-fixed":l}),b=F7()({"is-focused":m,"is-disabled":s}),{isTemplatesDialogOpen:v,showTemplateDialog:w,isModalDismissed:j,setIsModalDismissed:C}=Ln(),{viewType:k}=_Y();(0,uq.useEffect)(()=>{C(!1)},[C]),(0,uq.useEffect)(()=>{k===_z.Table&&j&&h(!0)},[v,k,w,h,j]);let S=(0,uq.useCallback)(()=>{h(!1),p(!1)},[h]),I=(0,uq.useCallback)(e=>{e.preventDefault(),h(!f)},[f,h]),N=(0,uq.useCallback)(()=>{r&&r(),p(!0)},[r]),_=(0,uq.useCallback)(()=>{g(x1())},[g]);return(0,uO.jsxs)(qB,{className:y,onClick:x,...(0,mp.f)("omnibar"),...d,children:[(0,uO.jsx)(mF.Z,{role:o,sx:{height:"100%",padding:"3px 1px 3px 3px"},children:(0,uO.jsx)(kF.h,{"aria-label":fE.createNewItemOrAddExistingIssueAriaLabel,className:b,onClick:I,onFocus:_,disabled:s,...(0,mp.f)("new-item-button"),icon:mM.pOD,variant:"invisible",size:"small",sx:{height:"100%",color:"fg.subtle"}})}),(0,uO.jsx)(mF.Z,{role:o,className:y,sx:{display:"flex",flex:"auto","&.is-focused":{boxShadow:e=>`inset 0 0 0 2px ${e.colors.accent.emphasis}`,borderRadius:"2px"},"&.is-fixed":{boxShadow:e=>`inset 1px 0 0 0 ${e.colors.border.default}`},"&.is-focused.is-fixed":{boxShadow:e=>`inset 1px 0 0 0 ${e.colors.accent.muted}`}},children:(0,uO.jsx)(q$,{ref:u,isFocused:m,filteredItemIds:a,showDiscoveryMenu:f,setShowDiscoveryMenu:h,onAddItem:e,onAddDraftItem:t,newItemAttributes:n,onFocus:N,onBlur:S,defaultPlaceholder:i,disabled:s})})]})});qZ.displayName="BaseOmnibar";let qO=uJ.F4`
  0% {opacity: 0;}
  100% {opacity: 1;}
`,qB=(0,uJ.ZP)(mF.Z)`
  align-items: stretch;
  display: flex;
  flex: auto;
  height: ${37}px;
  max-height: ${37}px;

  &.is-fixed {
    animation: ${qO} 0.25s ease-in;
    height: ${45}px;
    max-height: ${45}px;
    width: 100%;

    background-color: ${(0,uG.U2)("colors.canvas.overlay")};
    box-shadow: inset -1px 0 0 0 ${(0,uG.U2)("colors.border.default")},
      inset 1px 0 0 0 ${(0,uG.U2)("colors.border.default")}, inset 0px 1px 0 0 ${(0,uG.U2)("colors.border.default")},
      inset 0px -1px 0 0 ${(0,uG.U2)("colors.border.default")}, ${(0,uG.U2)("shadows.shadow.medium")};
    border-radius: 6px;

    &.is-focused {
      box-shadow: inset 0 0 0 2px ${(0,uG.U2)("colors.accent.emphasis")};
    }
  }
`,qV=[],q$=(0,uq.memo)((0,uq.forwardRef)(({onAddItem:e,onAddDraftItem:t,onFocus:r,onBlur:a,filteredItemIds:n=qV,isFocused:l,showDiscoveryMenu:i,setShowDiscoveryMenu:s,newItemAttributes:o,defaultPlaceholder:d,disabled:c},u)=>{let m=(0,uq.useRef)(null),{clearCachedSuggestions:p}=Cb(),f=_J({updateAction:o&&o.setField||void 0,previousItemId:o?.previousItemId,onAddItem:e,onAddDraftItem:t}),[h,g]=(0,uq.useState)(""),[x,y]=(0,uq.useState)(null),b=(0,uq.useCallback)(e=>{(0,w8.flushSync)(()=>{y(e),g("")}),m.current?.focus()},[]),v=(0,uq.useCallback)((e="")=>{g(e),y(null)},[]);(0,uq.useImperativeHandle)(u,()=>({focus:()=>m.current?.focus(),blur:()=>m.current?.blur(),isInputElement:e=>e===m.current}),[]);let w=(0,uq.useCallback)(async e=>(p(),(0,w8.flushSync)(()=>{g("")}),e===qT)?void 0:"string"==typeof e?f(e):e?.type!==qT&&e?.type!==qR&&x?f({...e,repositoryId:x.id}):void 0,[x,p,f]),j=(0,uq.useCallback)(e=>{let t=t=>{e.onFocus&&e.onFocus(t),r&&r()},n=t=>{e.onBlur&&e.onBlur(t),a&&a()},{width:l,size:i,...s}=e;return(0,uO.jsx)(Sa,{...s,ref:m,sx:{color:"fg.default",paddingLeft:"20px"},onFocus:t,onBlur:n,className:c?"is-disabled":void 0,...(0,mp.f)("repo-searcher-input")})},[c,a,r]),C=(0,uq.useCallback)(e=>{s&&(s(!1),void 0!==e&&(0,w8.flushSync)(()=>{v(e)}),m.current?.focus())},[s,v]),k=(0,uq.useCallback)(()=>{(0,w8.flushSync)(()=>{y(null)}),m.current?.focus()},[]),S=m.current?.value;return S||x||!i?x?(0,uO.jsx)(qM,{onRemovePicker:k,filteredItemIds:n,newItemAttributes:o,onItemSelected:w,repository:x,inputRef:m,renderInput:j,sx:{alignItems:"center",pl:3}}):(0,uO.jsx)(qN,{onItemSelected:w,inputRef:m,isFocused:l,isDisabled:c,renderInput:j,defaultPlaceholder:d,text:h,setText:g,onRepositorySelected:b}):(0,uO.jsx)(qy,{isOpen:!0,inputRef:m,renderInput:j,newItemAttributes:o,onCloseSuggestions:C})}));q$.displayName="OmnibarInput";try{(sj=qB).displayName||(sj.displayName="StyledOmnibar")}catch{}let qz=({verticalScrollbarSize:e,isFixed:t,horizontalScrollbarSize:r,effectiveTableHeight:a,disableBlur:n})=>{let l={alignItems:"center",pl:"12px",width:e?`calc(100% - ${e}px)`:"100%",right:e?`${e}px`:"",pointerEvents:"none",">:first-child":{pointerEvents:"all"}};return t?{...l,backdropFilter:n?"unset":"blur(12px)",pb:r?0:"12px",position:"absolute",bottom:r?`${r}px`:0,pr:e?0:"12px"}:{...l,backgroundColor:"canvas.default",pb:"1px",position:"absolute",top:`${a}px`,height:"37px",borderBottom:"1px solid",borderBottomColor:"border.default",boxShadow:"shadow.medium"}},qU=(0,uq.forwardRef)(({horizontalScrollbarSize:e,disableBlur:t,verticalScrollbarSize:r,isFixed:a,effectiveTableHeight:n,sx:l,children:i,...s},o)=>(0,uO.jsx)(mF.Z,{...s,ref:o,sx:{display:"flex",zIndex:10,...qz({isFixed:a,verticalScrollbarSize:r,horizontalScrollbarSize:e,effectiveTableHeight:n,disableBlur:t}),...l},...(0,mp.f)("omnibar-container"),children:i}));qU.displayName="OmnibarContainer";let qW=(0,uq.forwardRef)(({horizontalScrollbarSize:e,children:t},r)=>{let a=e??12;return(0,uO.jsx)(qH,{ref:r,sx:{bottom:e?`${a}px`:0},...(0,mp.f)("omnibar-drawer"),children:t})});qW.displayName="OmnibarDrawer";let qH=(0,uJ.ZP)(mF.Z)`
  position: absolute;
  width: 100%;
  pointer-events: none;
`;try{(sC=qH).displayName||(sC.displayName="StyledOmnibarDrawer")}catch{}let qG=({aggregates:e,hideItemsCount:t,itemsCount:r,columnLimit:a,counterSx:n})=>{let{itemCountContent:l,sx:i}=qQ({columnLimit:a,itemsCount:r});return(0,uO.jsxs)(uO.Fragment,{children:[!t&&(0,uO.jsx)(k$.Z,{sx:{...n,...i},...(0,mp.f)("column-items-counter"),children:l}),e.map(e=>(0,uq.createElement)(EL.Z,{sx:{...n,color:"fg.muted"},...(0,mp.f)(`column-sum-${e.name}`),key:`aggregate-sum-${e.name}`,children:[e.name,": ",e.sum]}))]})},qq={default:{color:"fg.muted"},danger:{color:"danger.fg",backgroundColor:"danger.subtle"}};function qK({columnLimit:e,itemsCount:t}){return e<t?qq.danger:qq.default}function qQ({columnLimit:e,itemsCount:t}){return void 0===e?{itemCountContent:t,sx:qq.default}:{itemCountContent:`${t} / ${e}`,sx:qK({columnLimit:e,itemsCount:t})}}try{(sk=qG).displayName||(sk.displayName="AggregateLabels")}catch{}function qY({titleHtml:e,sx:t}){return(0,uO.jsx)(jc,{sx:{color:"fg.default",fontWeight:"bold",fontSize:2,overflow:"hidden",textOverflow:"ellipsis",...t},...(0,mp.f)("group-name"),children:e})}try{(sS=qY).displayName||(sS.displayName="SanitizedGroupHeaderText")}catch{}function qX({assignees:e,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:n}){let l=fn(e.map(e=>e.login));return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(PI.Z,{sx:{zIndex:0,mr:2},children:e.map(e=>(0,uO.jsx)(C$.O,{loading:"lazy",alt:e.login,src:e.avatarUrl},e.id))}),(0,uO.jsx)(qY,{titleHtml:l,sx:n}),(0,uO.jsx)(qG,{counterSx:{color:"fg.muted",ml:2},itemsCount:t,aggregates:r,hideItemsCount:a})]})}try{(sI=qX).displayName||(sI.displayName="AssigneesGroupHeaderLabel")}catch{}function qJ({titleHtml:e,label:t,rowCount:r,hideItemsCount:a,aggregates:n,titleSx:l}){return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(qY,{titleHtml:e,sx:l}),t&&(0,uO.jsx)(EL.Z,{sx:{color:"accent.fg",ml:2},...(0,mp.f)("table-group-label"),children:t}),(0,uO.jsx)(qG,{counterSx:{color:"fg.muted",ml:2},itemsCount:r,aggregates:n,hideItemsCount:a})]})}try{(sN=qJ).displayName||(sN.displayName="DefaultGroupHeaderLabel")}catch{}function q0({iteration:e,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:n}){let l=e.titleHtml,i=gI(e),s=gj(new Date,e);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(qY,{titleHtml:l,sx:n}),(0,uO.jsx)(qG,{counterSx:{color:"fg.muted",ml:2},itemsCount:t,aggregates:r,hideItemsCount:a}),i&&(0,uO.jsxs)(mO.Z,{sx:{color:"fg.muted",ml:2,fontSize:(0,uG.U2)("fontSizes.1"),textAlign:"left",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",code:{fontFamily:"fonts.mono",fontSize:0}},...(0,mp.f)("group-name-subtitle"),children:[(0,uO.jsx)("time",{dateTime:p2(i.startDate),children:gC(i.startDate)})," - ",(0,uO.jsx)("time",{dateTime:p2(i.endDate),children:gC(i.endDate)})]}),s&&(0,uO.jsx)(At,{sx:{ml:2}})]})}try{(s_=q0).displayName||(s_.displayName="IterationGroupHeaderLabel")}catch{}function q1({repository:e,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:n}){return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Cv,{repository:e}),(0,uO.jsx)(qY,{titleHtml:e.nameWithOwner,sx:{ml:2,...n}}),(0,uO.jsx)(qG,{counterSx:{color:"fg.muted",ml:2},itemsCount:t,aggregates:r,hideItemsCount:a})]})}try{(sT=q1).displayName||(sT.displayName="RepositoryGroupHeaderLabel")}catch{}let q2=({option:e,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:n})=>(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(CU,{color:e.color,sx:{mr:2}}),(0,uO.jsx)(qY,{titleHtml:e.nameHtml,sx:n}),(0,uO.jsx)(qG,{counterSx:{color:"fg.muted",ml:2},itemsCount:t,aggregates:r,hideItemsCount:a}),e.descriptionHtml&&(0,uO.jsx)(jc,{sx:{color:"fg.muted",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"200ch",ml:2,flexBasis:0,flexGrow:1,mb:"-2px"},children:e.descriptionHtml})]});try{(sR=q2).displayName||(sR.displayName="SingleSelectGroupHeaderLabel")}catch{}var q5=r(45222),q3=r(27999);let q4=(0,uG.U2)("colors.neutral.subtle"),q6=(0,uG.U2)("colors.neutral.muted"),q7=uJ.F4`
  from {
    background-position: -200px 0;
  }

  to {
    background-position: 200px 0;
  }
`,q8=uJ.iv`
  background-image: linear-gradient(
    to right,
    ${q4} 0%,
    ${q6} 40%,
    ${q4} 50%,
    ${q4} 100%
  );
  background-color: ${(0,uG.U2)("colors.border.muted")};
  background-size: 200px 50px;
  animation: ${q7} 1.5s linear infinite;
`,q9=uJ.ZP.div`
  display: inline-block;
  width: ${e=>e.minWidth+Math.floor(Math.random()*(e.maxWidth-e.minWidth))}px;
  height: 4px;
  border-radius: 6px;
  ${q8}
  ${q3.space}
`,Ke=uJ.ZP.div`
  --width: ${e=>e.minWidth+Math.floor(Math.random()*(e.maxWidth-e.minWidth))}px;
  display: inline-block;
  width: var(--width);
  height: 14px;
  border-radius: 100px;
  ${q8}
  ${q3.space}
`,Kt=uJ.ZP.div`
  display: inline-block;
  width: 20px;
  height: 20px;
  border-radius: 20px;
  ${q8}
  ${q3.space}
`,Kr=({trackedBy:e,titleSx:t,showOwnerOnFocus:r=!1,rowCount:a,aggregates:n,hideItemsCount:l})=>{let{projectOwner:i}=yk(),{getParentCompletion:s}=IW(),{getChildrenTrackedByParent:o}=IU(),{createSidePanelHandler:d}=Pl(),[c,u]=(0,uq.useState)(),m=(0,uq.useRef)(!1),{memex_tracked_by_add_missing_items:p}=g9(),[f,h]=(0,uq.useState)(!1),g=(0,uq.useRef)(null),x=(0,uq.useRef)(null),y=qu(g,x,f,[c],{xAlign:"center",yAlign:"top"}),b=(0,uq.useCallback)(async e=>{if(!m.current)return;let t=s(e);if(t){u(t);return}await o(e)},[o,s]);(0,uq.useEffect)(()=>{if(p)return m.current=!0,b(e.key.itemId),()=>{m.current=!1}},[e.key.itemId,b,p]);let v=c?(0,uO.jsxs)(jI.z,{variant:"invisible",sx:{ml:2,p:0,borderRadius:3,"&:hover:not([disabled]), &:focus:not([disabled])":{backgroundColor:"transparent",color:"fg.default"}},onClick:d(e),ref:g,tabIndex:-1,onPointerEnter:()=>h(!0),onPointerLeave:()=>h(!1),...(0,mp.f)("tracked-by-completion-pill"),children:[(0,uO.jsx)(q5.h,{direction:"n",open:f,"aria-label":fE.progressPercentCount(Math.floor(c.completed/c.total*100)),ref:x,id:`${e.key.itemId}-tracked-by-completion-value`,"aria-live":"polite",portalProps:{onMount:y.adjustPickerPosition}}),(0,uO.jsx)(mF.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:(0,uO.jsx)(DS,{progress:c})})]}):(0,uO.jsx)(mF.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1 0 auto",display:"flex",ml:2},children:(0,uO.jsx)(Ke,{marginLeft:2,minWidth:40,maxWidth:80,...(0,mp.f)("placeholder")})});return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(jh,{state:e.state,stateReason:e.stateReason,type:"Issue",isDraft:!1,sx:{mr:2}},e.key.itemId),(0,uO.jsx)(qY,{titleHtml:e.title,sx:t}),r?(0,uO.jsxs)(w3.Z,{target:"_blank",rel:"noreferrer",href:e.url,onClick:d(e),sx:{color:"fg.subtle",display:"flex",alignItems:"center",ml:2,":focus-within .tracked-by-item-owner-repo":{display:"block"},":hover .tracked-by-item-owner-repo":{display:"block"}},"aria-label":xM(e,i),children:[(0,uO.jsx)(mF.Z,{className:"tracked-by-item-owner-repo",sx:{display:"none"},children:xA(e,i)}),`#${e.number}`]},e.url):(0,uO.jsx)(w3.Z,{target:"_blank",rel:"noreferrer",href:e.url,onClick:d(e),sx:{color:"fg.subtle",display:"flex",alignItems:"center",ml:2},children:xM(e,i)},e.url),p&&v,(0,uO.jsx)(qG,{counterSx:{color:"fg.muted",ml:2},itemsCount:a,aggregates:n,hideItemsCount:l})]})};try{(sE=Kr).displayName||(sE.displayName="TrackedByGroupHeaderLabel")}catch{}let Ka=({sourceObject:e,rowCount:t,aggregates:r,hideItemsCount:a,showTrackedByOwnerOnFocus:n=!1,titleSx:l})=>{if("empty"===e.kind)return(0,uO.jsx)(qJ,{titleHtml:e.value.titleHtml,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:l});switch(e.dataType){case mD.Assignees:return(0,uO.jsx)(qX,{assignees:e.value,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:l});case mD.Date:{let n=p1(e.value.date.value),i=p2(e.value.date.value),s=fd(i)?"Today":void 0;return(0,uO.jsx)(qJ,{titleHtml:n,label:s,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:l})}case mD.Repository:return(0,uO.jsx)(q1,{repository:e.value,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:l});case mD.Iteration:return(0,uO.jsx)(q0,{iteration:e.value.iteration,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:l});case mD.TrackedBy:return(0,uO.jsx)(Kr,{trackedBy:e.value,showOwnerOnFocus:n,titleSx:l,rowCount:t,aggregates:r,hideItemsCount:a});case mD.SingleSelect:return(0,uO.jsx)(q2,{option:e.value.option,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:l});default:{let n=xB(e);return(0,uO.jsx)(qJ,{titleHtml:n,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:l})}}};try{(sD=Ka).displayName||(sD.displayName="GroupHeaderLabel")}catch{}let Kn=(0,uq.memo)(function({id:e,open:t,setOpen:r,anchorRef:a,closeOnSelection:n=!1}){let{clientHeight:l}=Do({onResize:()=>{t&&((0,w8.flushSync)(()=>{r(!1)}),r(!0))}});return(0,uO.jsx)(In.P,{open:t,anchorRef:a,onOpenChange:IR.Z,children:(0,uO.jsx)(In.P.Overlay,{sx:{maxHeight:l,overflow:"auto"},...(0,mp.f)("slice-by-menu"),role:"dialog","aria-label":"Select a field to slice by",onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,uO.jsx)(Kl,{id:e,setOpen:r,closeOnSelection:n},String(t))})})}),Kl=(0,uq.memo)(function({setOpen:e,id:t,closeOnSelection:r}){let{currentView:a}=bP(),{allColumns:n}=CB(),{sliceField:l,setSliceField:i,clearSliceField:s}=Bl(),o=(0,uq.useMemo)(()=>{let t=n.slice().filter(e=>e.dataType===mD.TrackedBy||e.dataType===mD.Iteration||e.dataType===mD.SingleSelect||e.dataType===mD.Assignees||e.dataType===mD.Labels).sort(fv).map(t=>{let n=n=>{a&&(l===t?s(a.number):i(a.number,t),r&&e(!1),n.stopPropagation())},o=Li(t.dataType);return(0,uO.jsxs)(Ia.S.Item,{onSelect:n,selected:l===t,...(0,mp.f)(`slice-${t.name}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(o,{})}),t.name]},t.id)});return t},[n,l,a,r,s,i,e]),d=(0,uq.useCallback)(()=>{a&&s(a.number),e(!1)},[s,a,e]);return(0,uO.jsx)(Ia.S,{id:t,selectionVariant:"single",children:(0,uO.jsxs)(Ia.S.Group,{title:"Slice by",children:[o,(0,uO.jsxs)(Ia.S.Item,{selected:!l,onSelect:d,...(0,mp.f)("slice-none"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.b0D,{})}),"No slicing"]},"slice-none")]},"slice")})}),Ki=(0,uO.jsx)(uO.Fragment,{children:(0,uO.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 1.5H6.5V5H10C10.4142 5 10.75 5.33579 10.75 5.75C10.75 6.16421 10.4142 6.5 10 6.5H6.5V7.75C6.5 8.16421 6.16421 8.5 5.75 8.5C5.33579 8.5 5 8.16421 5 7.75V6.5H1.5V14.5H5V12.75C5 12.3358 5.33579 12 5.75 12C6.16421 12 6.5 12.3358 6.5 12.75V14.5H14.5V1.5ZM5 1.5V5H1.5V1.5H5ZM0 14.5V5.75V1.5C0 0.671573 0.671573 0 1.5 0H5.75H14.5C15.3284 0 16 0.671573 16 1.5V14.5C16 15.3284 15.3284 16 14.5 16H5.75H1.5C0.671573 16 0 15.3284 0 14.5ZM9.62012 9.58516C10.8677 9.59206 11.8826 8.58286 11.8826 7.33544V6.32279C11.8826 5.90857 12.2184 5.57279 12.6326 5.57279C13.0468 5.57279 13.3826 5.90857 13.3826 6.32279V7.33544C13.3826 9.4147 11.6909 11.0966 9.61182 11.0851L9.3826 11.0839L9.3826 12.9995C9.3826 13.2178 9.12245 13.3312 8.96248 13.1827L6.07989 10.506C5.97337 10.4071 5.97337 10.2385 6.07989 10.1396L8.96248 7.46291C9.12245 7.31438 9.3826 7.42782 9.3826 7.64611V9.58384L9.62012 9.58516Z"})});function Ks(){return(0,uO.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",className:"octicon",style:{display:"inline-block",userSelect:"none",overflow:"visible"},children:Ki})}try{(sP=Kn).displayName||(sP.displayName="SliceByMenu")}catch{}try{(sA=Kl).displayName||(sA.displayName="Options")}catch{}try{(sM=Icon).displayName||(sM.displayName="Icon")}catch{}try{(sL=Ks).displayName||(sL.displayName="SlicerIcon")}catch{}var Ko=r(8121),Kd=r(74226);let Kc=e=>e.replace(/[\\/:"*?<>|]/g,""),Ku=()=>{let{itemsToCsv:e}=Z6(),{currentView:t}=bP(),{matchesSearchQuery:r}=kp(),{items:a}=bt(),n=f3().title;return(0,uq.useCallback)(()=>{if(!t)return;let l=a.filter(e=>r(e)),i=e(l,{withHeaders:!0});if(!i)return;let s=`${Kc(n)} - ${Kc(t.name)}.tsv`,o=new Blob([i],{type:hu.CSV}),d=URL.createObjectURL(o),c=document.createElement("a");c.style.display="none",c.href=d,c.download=s,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(d)},[t,a,e,r,n])},Km=()=>{let e=je(()=>document.querySelector(".command-palette")),t=(0,uq.useCallback)(t=>{if(!e.current)return()=>void 0;let r=new MutationObserver(t);return r.observe(e.current,{attributes:!0,characterData:!1,childList:!1,subtree:!0}),()=>{r.disconnect()}},[e]),r=(0,uq.useCallback)(()=>Boolean(e.current&&e.current.offsetParent),[e]),a=(0,uq.useSyncExternalStore)(t,r);return{isCommandPaletteVisible:a}};function Kp(e,t){let r="none";return t===mD.Iteration?r="iteration_field":t===mD.Date&&(r=`${e}_date_field${1===e?"":"s"}`),{dateFields:r}}let Kf=(0,uq.createContext)(null),Kh=()=>{let e=(0,uq.useContext)(Kf);if(null===e)throw Error("useRoadmapDateFieldsMenu must be used within a RoadmapDateFieldsMenuContext");return e},Kg=(0,uq.createContext)(hR);function Kx(){let e=(0,uq.useContext)(Kg);return e}let Ky={NewFieldGroup:"NewFieldGroup",VisibleFieldGroup:"VisibleFieldGroup",HiddenFieldGroup:"HiddenFieldGroup"},Kb=(0,uq.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let{clientHeight:n}=zK({onResize:()=>{t&&((0,w8.flushSync)(()=>{r(!1)}),r(!0))}});return(0,uO.jsx)(In.P,{open:t,anchorRef:a,onOpenChange:IR.Z,children:(0,uO.jsx)(In.P.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,mp.f)("column-visibility-menu"),onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,uO.jsx)(Kv,{id:e,setOpen:r},String(t))})})}),Kv=(0,uq.memo)(function({id:e,setOpen:t}){let{currentView:r}=bP(),{setShowAddFieldModal:a,showAddFieldModal:n}=G2(),{allColumns:l}=CB(),{isFieldVisible:i,toggleField:s,visibleFields:o}=ZB(),{hasWritePermissions:d}=yI(),c=Kx(),u=(0,uq.useCallback)(e=>{a(!0),t(!1),e.stopPropagation()},[t,a]),m=(0,uq.useCallback)((e,t,a)=>{let n=i(e),l=Kk(e),o=Li(e.dataType);return(0,uO.jsxs)(Kj,{groupId:t,dragProps:{column:e,index:a},disabled:l,onSelect:l?void 0:t=>{r&&(s(r.number,e,void 0,c),t.stopPropagation())},selected:n,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(o,{})}),e.name]},e.id)},[r,i,s,c]),[p,f]=(0,uq.useMemo)(()=>{let e=new Set(o),t=l.filter(t=>!e.has(t)),r=[],a=[];for(let[e,t]of o.entries())r.push(m(t,Ky.VisibleFieldGroup,e));for(let[e,r]of t.entries())a.push(m(r,Ky.HiddenFieldGroup,e));return[r,a]},[l,m,o]),h=(0,uq.useMemo)(()=>d&&!n,[d,n]);return(0,uO.jsx)(W9,{children:(0,uO.jsxs)(Ia.S,{id:e,sx:{width:"max-content"},...(0,mp.f)("visible-columns-menu"),children:[(0,uO.jsx)(Ia.S.Group,{children:(0,uO.jsxs)(Ia.S.Item,{disabled:!h,onSelect:u,...(0,mp.f)("new-field-button"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.pOD,{})}),"New field"]},"new-field")}),(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsx)(Ia.S.Group,{selectionVariant:"multiple",title:"Visible fields",children:p}),(0,uO.jsx)(Ia.S.Group,{selectionVariant:"multiple",title:"Hidden fields",children:f})]})})}),Kw={position:"relative",mb:1,userSelect:"none","&:not(.hide-sash):not(.is-dragging)":{"&::after, &::before":{content:"''",display:"none",position:"absolute",width:"100%",bg:"accent.emphasis",height:"4px",border:0,borderRadius:"6px",zIndex:12},"&.show-sash-before":{"&::before":{display:"block",top:"-4px"}},"&.show-sash-after":{"&::after":{display:"block",bottom:"-4px"}}}},Kj=(0,uq.memo)(function({dragProps:e,groupId:t,...r}){let{currentView:a}=bP(),{groupedByColumn:n}=NR(),{moveField:l,hideField:i,isFieldVisible:s}=ZB(),{findColumnByDatabaseId:o}=j5(),d=(0,uq.useRef)(null),[c,u]=(0,uq.useState)(!1),[m]=KC(c),p=Kx(),f=Ht({dragID:String(e?.column.databaseId),dragType:"add-column-option",dragRef:d,dragIndex:e?.index??-1,dragOrigin:Ky.VisibleFieldGroup,metadata:{},disable:!e,onDragStart(){u(!0)},onDragEnd(){u(!1)}}),h=Hr({dropRef:d,dropID:String(e?.column.databaseId),dropType:"add-column-option",onDrop({state:{dragID:r}}){if(!r||!a)return;let s=o(Number(r));if(s&&r!==String(e?.column.databaseId)){if(t===Ky.HiddenFieldGroup){if(n===s||s.dataType===mD.Title)return;i(a.number,s)}if(e&&t===Ky.VisibleFieldGroup){l(a.number,s,e.index,p);return}}}}),g=F7()({"hide-sash":!e||!s(e.column)||c});return(0,uO.jsx)(mF.Z,{sx:Kw,...f.props,...f.handle.props,...h.props,className:g,role:"menuitem",ref:d,children:(0,uO.jsx)(Ia.S.Item,{...(0,mp.f)(KS(s(e.column),e?.column.name)),...r,sx:{...r.sx,boxShadow:c?e=>`0 0 0 1px ${e.colors.accent.emphasis}`:void 0,":hover":c?{background:"initial"}:void 0,pointerEvents:m}})})});function KC(e,t=150){let[r,a]=(0,uq.useState)(()=>e?"none":"auto"),n=m1(t);return(0,uq.useEffect)(function(){if(!e)return;let t=!0,r=setTimeout(()=>{t&&a("none")},n.current);return()=>{t=!1,clearTimeout(r)}},[e,n]),(0,uq.useEffect)(function(){e||a("auto")},[e]),[r,a]}function Kk(e){return e.dataType===mD.Title}function KS(e,t){let r=wb(t);return`${e?"visible":"hidden"}-column-item-${r}`}try{(sF=Kb).displayName||(sF.displayName="AddColumnMenu")}catch{}try{(sZ=Kv).displayName||(sZ.displayName="Options")}catch{}try{(sO=Icon).displayName||(sO.displayName="Icon")}catch{}try{(sB=Kj).displayName||(sB.displayName="DragAndDroppableActionListItem")}catch{}function KI({direction:e,index:t}){return(0,uO.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",verticalAlign:"text-bottom"},children:["desc"===e?(0,uO.jsx)(mM.k6S,{}):(0,uO.jsx)(mM.aoE,{}),void 0!==t&&(0,uO.jsx)(mO.Z,{sx:{px:"2px",fontWeight:"bold",fontSize:0},role:"presentation",children:t+1})]})}try{(sV=KI).displayName||(sV.displayName="ColumnSortIcon")}catch{}let KN=(0,uq.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let{clientHeight:n}=Do({onResize:()=>{t&&((0,w8.flushSync)(()=>{r(!1)}),r(!0))}});return(0,uO.jsx)(In.P,{open:t,anchorRef:a,onOpenChange:IR.Z,children:(0,uO.jsx)(In.P.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,mp.f)("field-sum-menu"),onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,uO.jsx)(K_,{id:e},String(t))})})}),K_=(0,uq.memo)(function({id:e}){let{currentView:t}=bP(),{allColumns:r}=CB(),a=(0,uq.useMemo)(()=>r.filter(e=>e.dataType===mD.Number).sort(fv),[r]),{hideItemsCount:n,sum:l,toggleItemsCount:i,addFieldAggregation:s,removeFieldAggregation:o}=LG(),{postStats:d}=bM(),c=t?.localViewStateDeserialized?.viewType,u=Kx(),m=(0,uq.useMemo)(()=>{let e=e=>{t&&(i(t.number),d({name:n?"aggregation_settings_show_items_count":"aggregation_settings_hide_items_count",ui:u,context:c}),e.stopPropagation())};return(0,uO.jsx)(Ia.S.Item,{selected:!n,onSelect:e,...(0,mp.f)("sum-of-items"),children:"Count"},"items-count")},[n,t,i,d,u,c]),p=(0,uq.useMemo)(()=>a.map(e=>{let r=l.some(t=>t.id===e.id),a=a=>{t&&(r?o(t.number,"sum",e):s(t.number,"sum",e),d({name:r?"aggregation_settings_sum_removed":"aggregation_settings_sum_applied",ui:u,memexProjectColumnId:e.id,context:c}),a.stopPropagation())};return(0,uO.jsx)(Ia.S.Item,{selected:r,onSelect:a,...(0,mp.f)(`sum-of-${e.name}`),children:e.name},e.id)}),[s,l,t,a,o,d,u,c]);return(0,uO.jsx)(Ia.S,{id:e,selectionVariant:"multiple",children:(0,uO.jsxs)(Ia.S.Group,{title:"Field sum",children:[m,p]})})});try{(s$=KN).displayName||(s$.displayName="FieldSumMenu")}catch{}try{(sz=K_).displayName||(sz.displayName="MenuOptions")}catch{}let KT=(0,uq.memo)(function({open:e,setOpen:t,anchorRef:r,children:a}){let{clientHeight:n}=Do({onResize:()=>{e&&((0,w8.flushSync)(()=>{t(!1)}),t(!0))}});return(0,uO.jsx)(In.P,{open:e,anchorRef:r,onOpenChange:IR.Z,children:(0,uO.jsx)(In.P.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,mp.f)("group-by-menu"),onEscape:()=>t(!1),onClickOutside:()=>t(!1),children:a})})}),KR=(0,uq.memo)(function({id:e,groupedByColumn:t,setGroupedBy:r,isValidGroupByColumn:a,handleClearGroupBy:n,title:l}){let{currentView:i}=bP(),{viewType:s}=_Y(),{allColumns:o}=CB(),{postStats:d}=bM(),c=Kx(),u=(0,uq.useMemo)(()=>o.filter(a).sort(fv).map(e=>{let a=a=>{if(!i)return;let l=t===e;if(l){if(!n)return;n()}else r(i.number,e);d({groupByEnabled:!l,memexProjectColumnId:e.id,key:hE,ui:c,context:s}),a.stopPropagation()},l=Li(e.dataType);return(0,uO.jsxs)(Ia.S.Item,{selected:t===e,onSelect:a,...(0,mp.f)(`group-by-${e.name}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(l,{})}),e.name]},e.id)}),[o,a,t,i,n,d,c,r,s]);return(0,uO.jsx)(Ia.S,{id:e,selectionVariant:"single",children:(0,uO.jsxs)(Ia.S.Group,{title:l,children:[u,n&&(0,uO.jsxs)(Ia.S.Item,{selected:!t,onSelect:n,...(0,mp.f)("group-by-none"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.b0D,{})}),"No grouping"]},"group-by-none")]})})});try{(sU=KT).displayName||(sU.displayName="GroupByMenu")}catch{}try{(sW=KR).displayName||(sW.displayName="GroupByMenuOptions")}catch{}try{(sH=Icon).displayName||(sH.displayName="Icon")}catch{}let KE=(0,uq.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){return(0,uO.jsx)(KT,{open:t,setOpen:r,anchorRef:a,children:(0,uO.jsx)(KD,{id:e,setOpen:r},String(t))})}),KD=(0,uq.memo)(function({id:e,setOpen:t}){let{groupedByColumn:r,setGroupedBy:a,clearGroupedBy:n}=NR(),{currentView:l}=bP(),i=(0,uq.useCallback)(()=>{l&&n(l.number),t(!1)},[n,l,t]);return(0,uO.jsx)(KR,{id:e,groupedByColumn:r,setGroupedBy:a,isValidGroupByColumn:ND,handleClearGroupBy:i,title:"Group by"})});try{(sG=KE).displayName||(sG.displayName="HorizontalGroupByMenu")}catch{}try{(sq=KD).displayName||(sq.displayName="HorizontalGroupByMenuOptions")}catch{}let KP=(0,uq.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let[n,l]=(0,uq.useState)(!1),{clientHeight:i}=Do({onResize:()=>{t&&((0,w8.flushSync)(()=>{r(!1)}),r(!0))}}),{dateFields:s,setDateFields:o}=OH(),{currentView:d}=bP(),c=(0,uq.useCallback)(e=>{if(!d||!L8(e))return;let[t=_V,a=_V]=s;if(t===_V||a===_V){let r=[];r=t===_V?g1(e)&&a===_V?[e,e]:[e,a]:[t,e],o(d.number,r)}r(!0)},[d,s,o,r]);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(In.P,{open:t,anchorRef:a,onOpenChange:IR.Z,children:(0,uO.jsx)(In.P.Overlay,{sx:{maxHeight:i,overflow:"auto"},role:"dialog","aria-label":"Select date fields",...(0,mp.f)("roadmap-date-fields-menu"),onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,uO.jsx)(KL,{id:e,setOpen:r,setAddFieldOpen:l},String(t))})}),(0,uO.jsx)(GZ,{isOpen:!t&&n,setOpen:l,anchorRef:a,onSave:c,limitedTypes:[mD.Date,mD.Iteration]})]})}),KA=({dateFields:e,currentValue:t,onSelect:r,variant:a})=>(0,uO.jsx)(uO.Fragment,{children:e.map(e=>{let n=Li(e.dataType);return(0,uO.jsxs)(Ia.S.Item,{selected:e.id===t,onSelect:t=>{t.preventDefault(),r(e,a)},...(0,mp.f)(`date-field-${a}-${e.name}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(n,{})}),`${e.name} ${g1(e)?fW.iterationSuffix(a):""}`]},e.id)})});function KM(e,t){return L8(e)&&L8(t)&&e.id===t.id&&g5(e)}let KL=(0,uq.memo)(function({id:e,setOpen:t,setAddFieldOpen:r}){let{currentView:a}=bP(),{allColumns:n}=CB(),l=(0,uq.useMemo)(()=>n.filter(e=>L8(e)).sort(fv),[n]),{hasWritePermissions:i}=yI(),{postStats:s}=bM(),o=Kx(),d=(0,uq.useCallback)(e=>{r(!0),t(!1),e.stopPropagation()},[r,t]),{dateFields:c,setDateFields:u}=OH(),[m=_V,p=_V]=c,f=(0,uq.useCallback)((e,t)=>{if(!a)return;let r=[];if("start"===t){let t=L8(e)&&g1(e)?e:_V,a=KM(e,p);r.push(e,a?t:p)}else{let t=KM(e,m);r.push(t?_V:m,e)}s({name:"roadmap_date_field_selected",ui:o,context:"start"===t?"start":"target",...L8(e)?{memexProjectColumnId:e.databaseId}:{}}),u(a.number,r)},[a,s,o,u,p,m]);return(0,uO.jsxs)(Ia.S,{id:e,children:[(0,uO.jsx)(Ia.S.Group,{children:(0,uO.jsxs)(Ia.S.Item,{disabled:!i,onSelect:d,...(0,mp.f)("roadmap-new-field-button"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.pOD,{})}),"New field"]},"new-field")}),(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsxs)(Ia.S.Group,{title:fW.startDate,selectionVariant:"single",children:[(0,uO.jsx)(KA,{dateFields:l,currentValue:m===_V?m:m?.id,onSelect:f,variant:"start"}),(0,uO.jsx)(Ia.S.Item,{selected:m===_V,onSelect:e=>{e.preventDefault(),f(_V,"start")},...(0,mp.f)("date-field-no-start"),children:fW.noStartDate},"none")]}),(0,uO.jsxs)(Ia.S.Group,{title:fW.endDate,selectionVariant:"single",children:[(0,uO.jsx)(KA,{dateFields:l,currentValue:p===_V?p:p?.id,onSelect:f,variant:"end"}),(0,uO.jsx)(Ia.S.Item,{disabled:!l,selected:p===_V,onSelect:e=>{e.preventDefault(),f(_V,"end")},...(0,mp.f)("date-field-no-end"),children:fW.noEndDate},"none")]})]})});try{(sK=KP).displayName||(sK.displayName="RoadmapDateFieldsMenu")}catch{}try{(sQ=KA).displayName||(sQ.displayName="DateFields")}catch{}try{(sY=Icon).displayName||(sY.displayName="Icon")}catch{}try{(sX=KL).displayName||(sX.displayName="MenuOptions")}catch{}let KF=(0,uq.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){return(0,uO.jsx)(KT,{open:t,setOpen:r,anchorRef:a,children:(0,uO.jsx)(KZ,{id:e,setOpen:r},String(t))})}),KZ=(0,uq.memo)(function({setOpen:e,id:t}){let{groupedByColumn:r,setGroupedBy:a,clearGroupedBy:n}=NR(),{currentView:l}=bP(),i=(0,uq.useCallback)(()=>{l&&n(l.number),e(!1)},[n,l,e]);return(0,uO.jsx)(KR,{id:t,groupedByColumn:r,setGroupedBy:a,isValidGroupByColumn:ND,handleClearGroupBy:i,title:"Group by"})});try{(sJ=KF).displayName||(sJ.displayName="RoadmapGroupByMenu")}catch{}try{(s0=KZ).displayName||(s0.displayName="RoadmapGroupByMenuOptions")}catch{}let KO=new Set([mD.Iteration,mD.Milestone,mD.Date]);function KB(e){return KO.has(e.dataType)}let KV=()=>{let{allColumns:e}=CB();return(0,uq.useMemo)(()=>e.filter(KB).sort(fv),[e])},K$=()=>{let{isRoadmapMarkerFieldsDirty:e}=OH(),{hasWritePermissions:t}=yI();return(0,uO.jsx)(Uv,{isDirty:e,hideDirtyState:!t,children:(0,uO.jsx)(mM._tJ,{})})};function Kz({id:e}){let{currentView:t}=bP(),r=KV(),{markerFields:a,toggleMarkerField:n}=OH(),l=(0,uq.useMemo)(()=>new Set(a),[a]),{postStats:i}=bM(),s=Kx(),o=(0,uq.useCallback)(e=>{if(!t)return;let r=l.has(e);n(t.number,e),i({name:r?"roadmap_marker_hide":"roadmap_marker_show",ui:s,memexProjectColumnId:e.id})},[t,l,n,i,s]);return(0,uO.jsx)(Ia.S,{...(0,mp.f)("roadmap-markers-menu"),id:e,selectionVariant:"multiple",children:(0,uO.jsx)(Ia.S.Group,{title:"Markers",children:r.map(e=>{let t=Li(e.dataType);return(0,uO.jsxs)(Ia.S.Item,{selected:l.has(e),onSelect:()=>o(e),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(t,{})}),e.name]},e.id)})})})}let KU=(0,uq.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let{clientHeight:n}=zK({onResize:()=>{t&&((0,w8.flushSync)(()=>{r(!1)}),r(!0))}});return(0,uO.jsx)(In.P,{open:t,anchorRef:a,onOpenChange:IR.Z,children:(0,uO.jsx)(In.P.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,mp.f)("column-marker-menu"),role:"dialog",onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,uO.jsx)(Kz,{id:e})})})});try{(s1=KO).displayName||(s1.displayName="MarkerFields")}catch{}try{(s2=K$).displayName||(s2.displayName="MarkerDirtyIcon")}catch{}try{(s5=Kz).displayName||(s5.displayName="RoadmapMarkerMenu")}catch{}try{(s3=Icon).displayName||(s3.displayName="Icon")}catch{}try{(s4=KU).displayName||(s4.displayName="MarkerColumnMenu")}catch{}let KW=(0,uq.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let n=OJ(),{clientHeight:l}=Do({onResize:()=>{t&&((0,w8.flushSync)(()=>{r(!1)}),r(!0))}});return(0,uO.jsx)(In.P,{open:t,anchorRef:a,onOpenChange:IR.Z,children:(0,uO.jsx)(In.P.Overlay,{sx:{maxHeight:l,overflow:"auto"},...(0,mp.f)("roadmap-zoom-level-menu"),role:"dialog","aria-label":fW.zoomMenuDialogAriaLabel(n),onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,uO.jsx)(Kq,{id:e},String(t))})})}),KH=[{type:_$.Month,label:fW.zoomLevelOptions.month},{type:_$.Quarter,label:fW.zoomLevelOptions.quarter},{type:_$.Year,label:fW.zoomLevelOptions.year}],KG=(0,uq.memo)(function({currentValue:e,onSelect:t}){return(0,uO.jsx)(uO.Fragment,{children:KH.map(r=>(0,uO.jsx)(Ia.S.Item,{selected:r.type===e,onSelect:e=>{e.preventDefault(),t(r.type)},...(0,mp.f)(`zoom-level-${r.type}`),children:r.label},r.type))})}),Kq=(0,uq.memo)(function({id:e}){let{currentView:t}=bP(),r=OJ(),a=O1(),{postStats:n}=bM(),l=Kx(),i=(0,uq.useCallback)(e=>{t&&(a(t.number,e),n({name:"roadmap_zoom_level_set",ui:l,context:e}))},[t,a,n,l]);return(0,uO.jsx)(Ia.S,{id:e,children:(0,uO.jsx)(Ia.S.Group,{title:fW.zoomLevel,selectionVariant:"single",...(0,mp.f)("roadmap-zoom-list"),children:(0,uO.jsx)(KG,{currentValue:r,onSelect:i})})})}),KK=(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)("path",{fillRule:"evenodd",d:"M7.5 15a7.469 7.469 0 004.746-1.693l2.474 2.473a.75.75 0 101.06-1.06l-2.473-2.474A7.5 7.5 0 107.5 15zm0-13.5a6 6 0 104.094 10.386.75.75 0 01.293-.292A6 6 0 007.5 1.5z"}),(0,uO.jsx)("path",{d:"M7.5 3.5a.75.75 0 01.75.75v2.5h2.5a.75.75 0 010 1.5h-2.5v2.5a.75.75 0 01-1.5 0v-2.5h-2.5a.75.75 0 010-1.5h2.5v-2.5a.75.75 0 01.75-.75z"})]});function KQ(){return(0,uO.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",className:"octicon",style:{display:"inline-block",userSelect:"none",overflow:"visible"},children:KK})}try{(s6=KW).displayName||(s6.displayName="RoadmapZoomLevelMenu")}catch{}try{(s7=KG).displayName||(s7.displayName="ZoomLevels")}catch{}try{(s8=Kq).displayName||(s8.displayName="MenuOptions")}catch{}try{(s9=KQ).displayName||(s9.displayName="ZoomIcon")}catch{}let KY=(0,uq.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let{memex_sort_multiple:n}=g9(),l=(0,uq.useId)(),i=e??l,{clientHeight:s}=Do({onResize:()=>{t&&((0,w8.flushSync)(()=>{r(!1)}),r(!0))}}),o=`${i}_label`,d=`${i}_description`;return(0,uO.jsx)(In.P,{open:t,anchorRef:a,onOpenChange:IR.Z,children:(0,uO.jsxs)(In.P.Overlay,{sx:{maxHeight:s,overflow:"auto"},...(0,mp.f)("sort-by-menu"),role:"dialog","aria-label":"Select a field to sort by",onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:[(0,uO.jsx)(mF.Z,{id:o,sx:{fontWeight:"bold",m:3,mb:2,fontSize:0,color:"fg.muted"},children:"Sort by"}),n&&(0,uO.jsxs)(mF.Z,{id:d,sx:{mx:3,my:1,fontSize:0,color:"fg.muted"},children:["Hold ",(0,uO.jsx)(FX.u,{keys:"Alt",format:"full"})," to select secondary sort"]}),(0,uO.jsx)(KX,{id:i,setOpen:r,labelledBy:o,describedBy:n?d:void 0},String(t))]})})}),KX=(0,uq.memo)(function({setOpen:e,id:t,labelledBy:r,describedBy:a}){let{allColumns:n}=CB(),{sorts:l,isSorted:i,clearSortedBy:s,setColumnSort:o}=NO(),{postStats:d}=bM(),c=Kx(),{memex_sort_multiple:u}=g9(),m=(0,uq.useMemo)(()=>{let e=n.slice().sort(fv).map(e=>{let t=l.findIndex(t=>t.column.id===e.id),r=l[t],a=t=>{let a=Bs(r?.direction??null),n=t.altKey&&u?1:0;o(e,a,n),d({name:"desc"===a?hM:hA,ui:c,context:e.id,index:n}),t.stopPropagation()},n=Li(e.dataType),i=l.length>1;return(0,uO.jsxs)(Ia.S.Item,{onSelect:a,selected:void 0!==r,...(0,mp.f)(`sort-by-${e.name}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(n,{})}),e.name,void 0!==r&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(kr,{children:["(",i?`${Bo(t)} `:"","sort:"," ","asc"===r.direction?"ascending":"descending",")"]}),(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(KI,{direction:r.direction,index:i?t:void 0})})]})]},e.id)});return e},[n,l,o,d,c,u]),p=(0,uq.useCallback)(()=>{s(),e(!1)},[s,e]);return(0,uO.jsxs)(Ia.S,{id:t,selectionVariant:"single","aria-labelledby":r,"aria-describedby":a,children:[m,(0,uO.jsxs)(Ia.S.Item,{selected:!i,onSelect:p,...(0,mp.f)("sort-by-none"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.b0D,{})}),"No sorting"]},"sort-by-none")]})});try{(oe=KY).displayName||(oe.displayName="SortByMenu")}catch{}try{(ot=KX).displayName||(ot.displayName="Options")}catch{}try{(or=Icon).displayName||(or.displayName="Icon")}catch{}let KJ=(0,uq.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){return(0,uO.jsx)(KT,{open:t,setOpen:r,anchorRef:a,children:(0,uO.jsx)(K0,{id:e},String(t))})}),K0=(0,uq.memo)(function({id:e}){let{groupedByColumn:t,setGroupedBy:r}=NL();return(0,uO.jsx)(KR,{id:e,groupedByColumn:t,setGroupedBy:r,isValidGroupByColumn:g8,title:"Column by"})});try{(oa=KJ).displayName||(oa.displayName="VerticalGroupByMenu")}catch{}try{(on=K0).displayName||(on.displayName="VerticalGroupByMenuOptions")}catch{}function K1(){let{isVisibleFieldsDirty:e}=ZB(),{hasWritePermissions:t}=yI();return(0,uO.jsx)(Uv,{isDirty:e,hideDirtyState:!t,children:(0,uO.jsx)(mM.Zi2,{})})}function K2(){let{isGroupedByDirty:e}=NR(),{hasWritePermissions:t}=yI();return(0,uO.jsx)(Uv,{isDirty:e,hideDirtyState:!t,children:(0,uO.jsx)(mM.NoV,{})})}function K5(){let{isGroupedByDirty:e}=NL(),{hasWritePermissions:t}=yI();return(0,uO.jsx)(Uv,{isDirty:e,hideDirtyState:!t,children:(0,uO.jsx)(mM.SeN,{})})}function K3(){let{isSortedByDirty:e}=NO(),{hasWritePermissions:t}=yI();return(0,uO.jsx)(Uv,{isDirty:e,hideDirtyState:!t,children:(0,uO.jsx)(mL.Z,{icon:mM.Wk_,sx:{transform:"rotate(90deg)"}})})}function K4(){let{isAggregationSettingsDirty:e}=LG(),{hasWritePermissions:t}=yI();return(0,uO.jsx)(Uv,{isDirty:e,hideDirtyState:!t,...(0,mp.f)("aggregation-settings-dirty"),children:(0,uO.jsx)(mM.yEv,{})})}let K6=()=>{let{hasWritePermissions:e}=yI(),{isRoadmapDateFieldsDirty:t}=OH();return(0,uO.jsx)(Uv,{isDirty:t,hideDirtyState:!e,...(0,mp.f)("roadmap-date-fields-dirty"),children:(0,uO.jsx)(mM.Que,{})})},K7=()=>{let{hasWritePermissions:e}=yI(),{isRoadmapZoomLevelDirty:t}=OH();return(0,uO.jsx)(Uv,{isDirty:t,hideDirtyState:!e,...(0,mp.f)("roadmap-zoom-level-dirty"),children:(0,uO.jsx)(KQ,{})})};function K8(){let{isSliceByDirty:e}=Bl(),{hasWritePermissions:t}=yI();return(0,uO.jsx)(Uv,{isDirty:e,hideDirtyState:!t,children:(0,uO.jsx)(Ks,{})})}try{(ol=K1).displayName||(ol.displayName="VisibleFieldsLeadingVisual")}catch{}try{(oi=K2).displayName||(oi.displayName="GroupLeadingVisual")}catch{}try{(os=K5).displayName||(os.displayName="VerticalGroupLeadingVisual")}catch{}try{(oo=K3).displayName||(oo.displayName="SortLeadingVisual")}catch{}try{(od=K4).displayName||(od.displayName="AggregationLeadingVisual")}catch{}try{(oc=K6).displayName||(oc.displayName="RoadmapDateFieldsDirtyIcon")}catch{}try{(ou=K7).displayName||(ou.displayName="RoadmapZoomLevelIcon")}catch{}try{(om=K8).displayName||(om.displayName="SlicerLeadingVisual")}catch{}function K9(e){let t={hideIf:()=>!1,...e};return t}let Qe=K9({icon:K8,title:"Slice by",MenuComponent:Kn,testId:"slice-by-menu",useHasValue:()=>{let{sliceField:e}=Bl();return!!e},TextContent(){let{sliceField:e}=Bl();return(0,uO.jsx)(Qv,{active:!!e,title:"Slice by",children:e?e.name:"none"})},hideIf:({enabledFeatures:e})=>!e?.memex_pivot_panel}),Qt=K9({icon:K1,title:"Fields",MenuComponent:Kb,testId:"add-field-menu",useHasValue:()=>{let{visibleFields:e}=ZB();return e.length>0},TextContent(){let{visibleFields:e}=ZB();return(0,uO.jsx)(Qv,{active:e.length>0,title:"Fields",children:fn(e.map(e=>e.name))})}}),Qr=K9({icon:K2,title:"Group by",MenuComponent:KE,testId:"group-by-menu",useHasValue:()=>{let{groupedByColumn:e}=NR();return!!e},TextContent(){let{groupedByColumn:e}=NR();return(0,uO.jsx)(Qv,{active:!!e,title:"Group by",children:e?e.name:"none"})},hideIf:({currentView:e,enabledFeatures:t})=>!!e&&!!t&&e.localViewStateDeserialized.viewType===_z.Board&&!t.memex_swimlanes}),Qa=K9({icon:K3,title:"Sort by",MenuComponent:KY,testId:"sort-by-menu",useHasValue:()=>{let{isSorted:e}=NO();return e},TextContent(){let{sorts:e,isSorted:t}=NO();return(0,uO.jsx)(Qv,{active:t,title:"Sort by",children:t?e.map((t,r)=>(0,uO.jsxs)(uq.Fragment,{children:[(0,uO.jsx)(KI,{direction:t.direction})," ",t.column.name,(0,uO.jsx)(kr,{children:"asc"===t.direction?" (ascending)":" (descending)"}),r!==e.length-1&&", "]},t.column.id)):"manual"})}}),Qn=K9({icon:K4,title:"Field sum",MenuComponent:KN,testId:"field-sum-menu",useHasValue:()=>{let{sum:e,hideItemsCount:t}=LG();return!!e[0]||!t},TextContent(){let{hideItemsCount:e,sum:t}=LG(),r=e?"":"Count";if(t.length){let e=t[0];null!=e&&(r+=`${r?", ":""}${e.name}`),t.length>1&&(r+=` and ${t.length-1} more`)}return(0,uO.jsx)(Qv,{active:!!r,title:"Field sum",children:r||"none"})}}),Ql=K9({...Qn,hideIf:({currentView:e})=>!!e&&0===e.localViewState.groupBy.length}),Qi=K9({icon:K5,title:"Column by",MenuComponent:KJ,testId:"column-by-menu",useHasValue:()=>!0,TextContent(){let{groupedByColumn:e}=NL();return(0,uO.jsx)(Qv,{active:!!e,title:"Column by",children:e?e.name:"none"})}}),Qs=K9({...Qr,MenuComponent:KF,TextContent(){let{groupedByColumn:e}=NR();return(0,uO.jsx)(Qv,{active:!!e,title:"Group by",children:e?e.name:"none"})}}),Qo=K9({icon:K$,title:"Marker fields",MenuComponent:KU,testId:"markers-menu",useHasValue:()=>{let{markerFields:e}=OH();return e.length>0},TextContent(){let{markerFields:e}=OH(),t=e.length>0;return(0,uO.jsx)(Qv,{active:t,title:"Markers",children:t?fn(e.map(e=>e.name)):"none"})}}),Qd=K9({icon:K6,title:"Dates",MenuComponent:KP,testId:"date-fields-menu",ToolbarItemComponent:Qh,useHasValue:()=>{let{dateFields:e}=OH();return new Set(e.filter(L8).map(e=>e.name)).size>0},TextContent(){let{dateFields:e}=OH(),t=new Set(e.filter(L8).map(e=>e.name)),r=fn(Array.from(t).filter(e=>!!e));return(0,uO.jsx)(Qv,{active:!!r,title:"Dates",children:r||"none"})}}),Qc=K9({icon:K7,title:"Zoom level",MenuComponent:KW,testId:"zoom-level",useHasValue:()=>!0,TextContent(){let e=OJ();return(0,uO.jsx)(Qv,{active:!0,title:"Zoom level",children:fW.zoomLevelOptions[e]})}}),Qu={[_z.Table]:[Qt,Qr,Qa,Ql,Qe],[_z.Board]:[Qt,Qi,Qr,Qa,Qn,Qe],[_z.Roadmap]:[Qs,Qo,Qa,Qd,Qc,Ql,Qe]},Qm={top:"32px",left:"-5px"},Qp={position:"absolute"},Qf={position:"relative"};function Qh({MenuComponent:e,title:t,icon:r,testId:a,useHasValue:n}){let l=(0,uq.useRef)(null),[i,s]=kL({contentRef:l,"aria-label":t}),{dateFields:o,areDateFieldsDefault:d}=OH(),c=n(),{isDateFieldsPopoverDisabled:u}=OG(),m=new Set(o.filter(L8).map(e=>e.name)),{isDateConfigurationMenuOpen:p,setOpenDateConfigurationMenu:f}=Kh(),{currentView:h}=bP(),{postStats:g}=bM(),x=0===m.size,y=h?.serverViewState.layout!==_Z.Roadmap&&h?.localViewState.layout===_Z.Roadmap,b=!x&&d&&y,v=o.some(e=>L8(e)&&"iteration"===e.dataType)?"iteration":"date",w=!u&&(x||b),j=()=>{f(!0),g({name:hP,ui:hD,context:JSON.stringify(Kp(m.size,v))})},C=(0,uq.useId)();return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(kF.h,{ref:l,size:"small",icon:r,sx:Qf,variant:c?"default":"invisible","aria-label":t,onClick:()=>f(!p),"aria-haspopup":"menu","aria-controls":C,"aria-expanded":p,...i,...(0,mp.f)(`quick-action-toolbar-${a}`)}),(0,uO.jsx)(e,{id:C,anchorRef:l,open:p,setOpen:f}),w?(0,uO.jsx)(T1.Z,{style:Qp,open:w,caret:"top",relative:!1,sx:Qm,children:(0,uO.jsxs)(T1.Z.Content,{sx:{mt:2},children:[(0,uO.jsx)(mF.Z,{sx:{fontSize:2,fontWeight:"bold"},children:fW.gettingStarted.popoverTitle}),(0,uO.jsx)(mF.Z,{sx:{marginTop:2,marginBottom:3},children:b?fW.gettingStarted.fieldsSelectedByDefault(v):fW.gettingStarted.projectNeedsField}),(0,uO.jsx)(jI.z,{onClick:j,children:fW.gettingStarted.popoverDismissButton})]})}):null,s]})}let Qg={display:"flex",justifyContent:"space-between",whiteSpace:"nowrap",width:"100%",maxWidth:"100%"},Qx={color:"fg.muted",fontStyle:"normal"},Qy={maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",fontStyle:"normal"},Qb={...Qy,fontStyle:"italic"};function Qv({title:e,active:t,children:r}){return(0,uO.jsxs)(mO.Z,{sx:Qg,children:[(0,uO.jsxs)(mO.Z,{sx:Qx,children:[e,": "]}),(0,uO.jsx)(mO.Z,{sx:t?Qy:Qb,children:r})]})}try{(op=Qh).displayName||(op.displayName="DateConfigurationMenuNew")}catch{}try{(of=Qv).displayName||(of.displayName="ListItemContent")}catch{}let Qw=(0,uq.memo)(function({title:e,testId:t,children:r,disabled:a,icon:n,onSelect:l}){return(0,uO.jsxs)(Ia.S.Item,{disabled:a,...(0,mp.f)(`view-options-menu-item-${t}`),onSelect:()=>l(e),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(n,{})}),r,(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(mM.XCv,{})})]})}),Qj=(0,uq.memo)(function({onSelect:e}){let{viewType:t}=_Y(),{currentView:r}=bP(),a=g9(),n=Qu[t];return n&&r?(0,uO.jsx)(Ia.S.Group,{title:"Configuration",variant:"subtle",children:n.map(t=>t.hideIf({currentView:r,enabledFeatures:a})?null:(0,uq.createElement)(Qw,{...t,disabled:a.memex_table_without_limits&&("Group by"===t.title||"Sort by"===t.title),key:t.title,onSelect:e},(0,uO.jsx)(t.TextContent,{})))}):null}),QC=(0,uq.memo)(function({currentMenu:e,setShowSubMenu:t,anchorRef:r}){let{viewType:a}=_Y(),{currentView:n}=bP(),l=g9(),i=Qu[a];return i&&n?(0,uO.jsx)(uO.Fragment,{children:i.map(({MenuComponent:a,title:i,...s})=>s.hideIf({currentView:n,enabledFeatures:l})?null:(0,uO.jsx)(a,{anchorRef:r,open:e===i,setOpen:e=>{t(e?i:null)}},i))}):null});try{(oh=Qw).displayName||(oh.displayName="ListItem")}catch{}try{(og=Qj).displayName||(og.displayName="ConfigurationItems")}catch{}try{(ox=QC).displayName||(ox.displayName="ConfigurationItemMenus")}catch{}var Qk=r(72278);let QS=[{type:_z.Table,Icon:mM.$eq,title:"Table"},{type:_z.Board,Icon:mM.Rg1,title:"Board"},{type:_z.Roadmap,Icon:mM.Bjy,title:"Roadmap"}],QI={px:3,py:1},QN={display:"block",color:"fg.muted",fontSize:0,fontWeight:"bold",py:2},Q_=(0,uq.memo)(function({view:e,setOpen:t}){let{isViewTypeDirty:r,viewType:a,setViewType:n}=_Y(),{hasWritePermissions:l}=yI(),{memex_table_without_limits:i}=g9(),{postStats:s}=bM(),o=(0,uq.useCallback)((e,t)=>(0,uO.jsx)(Uv,{isDirty:r,hideDirtyState:!t.selected||!l,children:(0,uO.jsx)(e,{})}),[l,r]),d=(0,uq.useCallback)(r=>{let a=QS[r];a&&(n(e,a.type,hR),s({name:hB,ui:hR,context:a.type}),t(!1))},[n,e,s,t]),c=(0,uq.useId)(),u=(0,uq.useId)();return(0,uO.jsxs)(Cc.Z,{id:c,sx:QI,children:[(0,uO.jsx)(Cc.Z.Label,{id:u,sx:QN,children:"Layout"}),(0,uO.jsx)(Qk.s,{"aria-labelledby":u,fullWidth:!0,onChange:d,...(0,mp.f)("view-options-menu-layout"),children:QS.map(e=>(0,uO.jsx)(Qk.s.Button,{leadingIcon:()=>o(e.Icon,{selected:a===e.type}),selected:a===e.type,disabled:i&&e.type!==_z.Table,...(0,mp.f)(`view-type-${e.type}`),children:e.title},e.type))})]})});try{(oy=Q_).displayName||(oy.displayName="LayoutToggle")}catch{}let QT=({isViewStateDirty:e})=>(0,uO.jsx)(QR,{isViewStateDirty:e,children:(0,uO.jsx)(mM.UG6,{})}),QR=({isViewStateDirty:e,children:t,onClick:r})=>{let{hasWritePermissions:a}=yI();return(0,uO.jsx)(Uv,{isDirty:e,hideDirtyState:!a,onClick:r,...e?(0,mp.f)("view-options-dirty"):void 0,children:t})},QE=(0,uq.forwardRef)(function(e,t){let{isViewStateDirty:r}=bP();return(0,uO.jsx)(QR,{isViewStateDirty:r,onClick:e.onClick,children:(0,uO.jsx)(kF.h,{...e,ref:t,icon:mM.AS7,sx:{display:"flex",alignItems:"center",justifyContent:"center",px:0,py:0,height:18,width:18},"aria-label":"View options",...(0,mp.f)("view-options-menu-toggle")})})});try{(ob=QT).displayName||(ob.displayName="DirtyConfigIcon")}catch{}try{(ov=QR).displayName||(ov.displayName="DirtyViewIndicator")}catch{}try{(ow=QE).displayName||(ow.displayName="MenuAnchor")}catch{}let QD=()=>{let{roadmapTruncateTitles:e,roadmapShowDateFields:t}=Bt();return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(QP,{option:e}),(0,uO.jsx)(QP,{option:t})]})};function QP({option:e}){return(0,uO.jsxs)(Ia.S.Item,{onSelect:e.toggleEnabled,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:e.enabled&&(0,uO.jsx)(mM.nQG,{})}),e.label]},e.name)}try{(oj=QD).displayName||(oj.displayName="RoadmapUserSettingsMenu")}catch{}try{(oC=QP).displayName||(oC.displayName="OptionsElement")}catch{}let QA=(0,uq.memo)(function({view:e,handleRenameViewClick:t,handleDuplicateView:r,handleDestroyView:a,viewsLength:n}){return(0,uO.jsxs)(uO.Fragment,{children:[e.isDeleted?null:(0,uO.jsxs)(Ia.S.Item,{...(0,mp.f)("view-options-menu-item-rename-view"),onSelect:t,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.vdY,{})}),"Rename view"]}),(0,uO.jsxs)(Ia.S.Item,{...(0,mp.f)("view-options-menu-item-duplicate-view"),onSelect:r,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.cRd,{})}),fE.duplicateView({isDirty:e.isViewStateDirty})]}),(0,uO.jsxs)(Ia.S.Item,{...(0,mp.f)("view-options-menu-item-delete-view"),onSelect:a,disabled:n<=1,variant:"danger",children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),e.isDeleted?"Remove deleted view":"Delete view"]})]})});try{(ok=QA).displayName||(ok.displayName="ViewActionItems")}catch{}function QM({view:e,setOpen:t}){let{hasWritePermissions:r}=yI(),{saveCurrentViewState:a,resetViewState:n}=bP(),l=(0,uq.useCallback)(async()=>{await a(e.number,{ui:hR}),t(!1)},[a,t,e.number]),i=(0,uq.useCallback)(async()=>{n(e.number,{ui:hR}),t(!1)},[n,t,e.number]);return(0,uO.jsxs)(uO.Fragment,{children:[r&&!e.isDeleted?(0,uO.jsx)(Ia.S.Item,{onSelect:l,disabled:!e.isViewStateDirty,...(0,mp.f)("view-options-menu-save-changes-button"),sx:{flex:"auto",color:"accent.fg",borderRight:"1px solid",borderColor:"border.default",borderRadius:0,my:-2,mx:0,py:3,textAlign:"center",fontWeight:"normal","&:hover":{bg:"canvas.inset"}},children:fE.saveChanges}):null,(0,uO.jsx)(Ia.S.Item,{onSelect:i,...(0,mp.f)("view-options-menu-reset-changes-button"),sx:{flex:"auto",color:"fg.muted",borderRadius:0,my:-2,mx:0,py:3,textAlign:"center",fontWeight:"normal","&:hover":{bg:"canvas.inset"}},children:fE.discardChanges})]})}try{(oS=QM).displayName||(oS.displayName="ViewChangeButtons")}catch{}let QL={overflow:"auto"},QF=(0,uq.memo)(function({viewNameInputRef:e,view:t,viewOptionMenuTriggerRef:r,startEditing:a}){let{memex_header_redesign:n}=g9(),[l,i]=(0,uq.useState)(!1),[s,o]=(0,uq.useState)(null),{clientHeight:d}=Do({onResize:()=>{l&&((0,w8.flushSync)(()=>{i(!1)}),i(!0))}}),{query:c}=kp(),[u,m]=(0,uq.useState)(),{views:p,currentView:f,duplicateCurrentViewState:h,destroyCurrentView:g}=bP(),{hasWritePermissions:x}=yI(),{isInsightsChartViewEnabled:y}=LN(),{anchorRef:b}=G4();(0,uq.useEffect)(()=>{l&&o(null)},[l]),(0,uq.useEffect)(()=>{u&&(u.focus(),m(null))},[u]);let v=(0,uq.useCallback)(async()=>{g(t.number,{ui:hR},()=>{i(!1)})},[g,t.number]),w=(0,uq.useCallback)(async()=>{f&&(await h(f.number,void 0,{ui:hR}),i(!1))},[f,h]),j=(0,uq.useCallback)(()=>{n?(i(!1),o("rename-view")):(i(!1),a?.(),e&&m(e.current))},[n,a,e]);(0,uq.useImperativeHandle)(r,()=>b.current);let{isCommandPaletteVisible:C}=Km(),k=(0,uq.useCallback)(()=>(0,uO.jsx)(QT,{isViewStateDirty:t.isViewTypeDirty}),[t.isViewTypeDirty]),S=Ku();return(0,uO.jsxs)(mF.Z,{sx:{position:"relative"},children:[n?null:(0,uO.jsx)(QE,{ref:b,onClick:()=>i(e=>!e)}),(0,uO.jsxs)(In.P,{anchorRef:b,open:l&&!C,onOpenChange:(0,uq.useCallback)(e=>i(e),[]),children:[n?(0,uO.jsx)(In.P.Button,{...(0,mp.f)("view-options-menu-toggle"),size:"small",trailingAction:null,leadingIcon:k,children:"View options"}):(0,uO.jsx)(uO.Fragment,{}),(0,uO.jsxs)(In.P.Overlay,{...(0,mp.f)("view-options-menu-modal"),width:"medium",sx:QL,style:{maxHeight:d},children:[(0,uO.jsx)(Q_,{view:t,setOpen:i}),(0,uO.jsxs)(Ia.S,{sx:{pt:0},children:[(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsx)(Qj,{onSelect:e=>{o(e),i(!1)}}),t.localViewState.layout===_Z.Roadmap?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsx)(Ia.S.Group,{title:"User settings",children:(0,uO.jsx)(QD,{})})]}):null,y?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsx)(Ia.S.Group,{children:(0,uO.jsxs)(Ia.S.LinkItem,{as:yK,...(0,mp.f)("view-options-menu-item-show-insights"),to:{pathname:mk.generatePath(),search:c?`${new URLSearchParams({filterQuery:c})}`:void 0},children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.RIw,{})}),"Generate chart"]})})]}):null,x?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsx)(QA,{handleRenameViewClick:j,handleDuplicateView:w,handleDestroyView:v,viewsLength:p.length,view:t})]}):null,(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsxs)(Ia.S.Item,{onClick:S,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM._8t,{})}),"Download"]}),!n&&t.isViewStateDirty?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsx)(Ia.S.Group,{sx:{"& > ul":{display:"flex"}},children:(0,uO.jsx)(QM,{setOpen:i,view:t})})]}):null]})]})]}),(0,uO.jsx)(QC,{anchorRef:b,currentMenu:"rename-view"===s?null:s,setShowSubMenu:o}),f?(0,uO.jsx)(QO,{anchorRef:b,open:"rename-view"===s,setOpen:e=>o(()=>e?"rename-view":null),view:f},t.id):null]})}),QZ=e=>{e.stopPropagation()},QO=(0,uq.memo)(function({open:e,setOpen:t,anchorRef:r,view:a}){let{renameView:n}=bP(),[l,i]=Eh(a.name),{hasWritePermissions:s}=yI(),o=(0,uq.useCallback)(()=>{i(a.name)},[i,a.name]),{clientHeight:d}=Do({onResize:()=>{e&&((0,w8.flushSync)(()=>{t(!1)}),t(!0))}}),c=ER(),u=(0,uq.useCallback)(async e=>{switch(e.key){case"Enter":l.trim().length>0&&l!==a.name&&(await n(a.number,l,{ui:hR}),t(!1)),e.preventDefault();break;case"Escape":o()}},[l,t,a.name,a.number,n,o]),m=(0,Kd.u)(u),p=(0,uq.useCallback)(e=>{i(e.target.value)},[i]);return(0,uO.jsx)(In.P,{open:e,anchorRef:r,onOpenChange:IR.Z,children:(0,uO.jsx)(In.P.Overlay,{sx:{maxHeight:d,overflow:"auto"},...(0,mp.f)("rename-view-menu"),role:"dialog","aria-label":"Rename view",width:"medium",onEscape:()=>t(!1),onClickOutside:()=>t(!1),children:(0,uO.jsxs)(mF.Z,{children:[(0,uO.jsx)(mF.Z,{sx:{p:3,pb:0,display:"flex",flexDirection:"column"},children:(0,uO.jsxs)(Cc.Z,{children:[(0,uO.jsx)(Cc.Z.Label,{children:"Rename view"}),(0,uO.jsx)(E_.Z,{sx:{width:"100%"},...c,children:(0,uO.jsx)(k4.Z,{block:!0,autoComplete:"off",value:l,onChange:p,onMouseDown:QZ,"aria-label":"Change view name",disabled:!s||a.isDeleted,...m,...(0,mp.f)("view-name-input")})})]})}),(0,uO.jsxs)(mF.Z,{sx:{justifyContent:"flex-end",px:3,py:2,mt:4,borderTop:"1px solid",borderColor:"border.muted",display:"flex",gap:1,backgroundColor:e=>`${e.colors.canvas.default}`},children:[(0,uO.jsx)(jI.z,{onClick:e=>{e.preventDefault(),o(),t(!1)},size:"small",type:"reset",disabled:a.name===l,children:fE.discardChanges}),(0,uO.jsx)(jI.z,{onClick:async e=>{e.preventDefault(),0!==l.trim().length&&l!==a.name&&(await n(a.number,l,{ui:hR}),t(!1))},size:"small",type:"submit",variant:"primary",disabled:a.name===l,children:fE.saveChanges})]})]})})})});try{(oI=QF).displayName||(oI.displayName="ViewOptionsMenu")}catch{}try{(oN=DirtyConfigIconForView).displayName||(oN.displayName="DirtyConfigIconForView")}catch{}try{(o_=QO).displayName||(o_.displayName="RenameViewMenu")}catch{}let QB={position:"relative","& .dirty-icon-container":{lineHeight:0}},QV=({MenuComponent:e,title:t,icon:r,testId:a,hideIf:n,useHasValue:l})=>{let{currentView:i}=bP(),s=g9(),o=l(),d=(0,uq.useRef)(null),[c,u]=kL({contentRef:d,"aria-label":t}),[m,p]=(0,uq.useState)(!1),f=(0,uq.useId)(),h=(0,uq.useCallback)(()=>p(e=>!e),[]);return!i||n({currentView:i,enabledFeatures:s})?null:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(kF.h,{ref:d,size:"small",variant:o?"default":"invisible",icon:r,sx:QB,"aria-pressed":o?"true":"false","aria-label":t,onClick:h,"aria-haspopup":"menu","aria-controls":f,"aria-expanded":m,...c,...(0,mp.f)(`quick-action-toolbar-${a}`)}),(0,uO.jsx)(e,{id:f,open:m,anchorRef:d,setOpen:p}),u]})},Q$={position:"relative",display:"flex",gap:1},Qz=(0,uq.memo)(function(){let e=(0,uq.useRef)(null);(0,EW.v)({containerRef:e,bindKeys:EU.Qw.ArrowHorizontal});let{currentView:t}=bP(),{viewType:r}=_Y(),a=g9();if(!t)return null;let n=Qu[r];return n?(0,uO.jsx)(Kg.Provider,{value:hT,children:(0,uO.jsx)(mF.Z,{role:"toolbar",sx:Q$,ref:e,...(0,mp.f)("quick-action-toolbar"),children:n.map(({ToolbarItemComponent:e=QV,...r})=>r.hideIf({currentView:t,enabledFeatures:a})?null:(0,uq.createElement)(e,{...r,key:r.title}))})}):null});try{(oT=QV).displayName||(oT.displayName="ActionMenuWithTooltip")}catch{}try{(oR=Qz).displayName||(oR.displayName="ViewOptionsToolbar")}catch{}let QU={display:"flex",alignItems:"center",p:"12px"},QW=(0,uq.memo)(function({isFocused:e,...t}){let{searchInputRef:r}=kp();return(0,uq.useEffect)(()=>{e&&r.current?.focus()},[e,r]),(0,uO.jsx)(QH,{...t})}),QH=(0,uq.memo)(function(e){let{currentView:t,isViewStateDirty:r,saveCurrentViewState:a,resetViewState:n}=bP(),{hasWritePermissions:l}=yI(),i=t?.number,s=(0,uq.useCallback)(async()=>{void 0!==i&&await a(i,{ui:hO})},[i,a]),o=(0,uq.useCallback)(async()=>{void 0!==i&&n(i,{ui:hO})},[i,n]),{memex_header_redesign:d}=g9();return(0,uO.jsx)(uO.Fragment,{children:(0,uO.jsx)(QG,{onResetChanges:r?o:void 0,onSaveChanges:!t?.isDeleted&&r?s:void 0,hideSaveButton:!l,...e,children:d&&t?(0,uO.jsx)(Qq,{view:t}):null})})}),QG=(0,uq.memo)(function({dispatchInputFocusEvent:e,setShowFindInProject:t,filterCount:r,children:a,...n}){let{currentView:l}=bP(),{query:i,setQuery:s,searchInputRef:o,addSpaceToQuery:d,clearSearchQuery:c}=kp(),{memex_find_in_project:u}=g9(),m=(0,uq.useRef)(null),p=(0,uq.useMemo)(()=>(0,b7.Z)(s,200),[s]),f=l?.number;(0,uq.useImperativeHandle)(o,()=>m.current);let[h,g]=Eh(i),x=m1(d),y=(0,uq.useCallback)(()=>{C.current?.classList.add("is-focused"),e&&e()},[e]),b=(0,uq.useCallback)(()=>{C.current?.classList.remove("is-focused")},[]),v=(0,uq.useCallback)(e=>{void 0!==f&&(p.cancel(),g(e),p(f,e))},[f,p,g]),w=(0,uq.useCallback)(e=>{v(e.target.value)},[v]),j=kD(u&&!!t);(0,uq.useEffect)(()=>{function e(e){let r=kE(e);if(r===j){if(e.defaultPrevented)return;e.stopPropagation(),e.preventDefault(),y(),x.current()}else if(u&&r===k_.META_F){if(e.defaultPrevented)return;e.stopPropagation(),e.preventDefault(),t&&t(!0)}}return addEventListener("keydown",e),()=>removeEventListener("keydown",e)},[x,y,u,t,j]);let C=(0,uq.useRef)(null),k=(0,uq.useCallback)(()=>{void 0!==f&&c(f)},[c,f]),S=(0,uq.useCallback)(()=>{o.current&&o.current.selectionStart&&o.current.value.length&&o.current.selectionStart>=o.current.value.length&&x.current()},[o,x]);return(0,uO.jsx)(mF.Z,{sx:QU,children:(0,uO.jsx)(QK,{children:(0,uO.jsx)(SE,{height:"32px",containerRef:C,value:h,onChange:w,onBlur:b,onFocus:y,onInputClick:S,inputRef:m,filterCount:i.length>0?r:null,onClearButtonClick:k,setValueFromSuggestion:v,...n,children:a})})})});QW.displayName="BaseProjectViewFilterInput";let Qq=(0,uq.memo)(function({view:e}){return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Qz,{}),(0,uO.jsx)(QF,{view:e})]})}),QK=(0,uq.memo)(function({children:e}){let{items:t}=bt(),r=(0,uq.useMemo)(()=>({items:t}),[t]);return(0,uO.jsx)(kv.Provider,{value:r,children:e})});try{(oE=QH).displayName||(oE.displayName="BaseProjectInputWithActions")}catch{}try{(oD=QG).displayName||(oD.displayName="ProjectInputWithSearchContext")}catch{}try{(oP=Qq).displayName||(oP.displayName="ViewOptionsArea")}catch{}try{(oA=QK).displayName||(oA.displayName="MemexItemsSuggestionsProvider")}catch{}let QQ={display:"flex",marginTop:"10px"},QY={color:"fg.muted"},QX={"& ul":{padding:"0 12px"},"& .hyperlistitem":{minHeight:"40px"},"& .hyperlistitem-leadingcontent":{minWidth:"40px"}},QJ={backgroundColor:"canvas.subtle",borderBottom:"1px solid",borderBottomColor:"border.muted",borderTop:"1px solid",borderTopColor:"border.muted",color:"fg.muted",fontWeight:"bold",my:1,pl:3,py:1},Q0={ml:"auto",mr:"12px",mt:"8px",color:"fg.muted",fontWeight:"normal"},Q1=({children:e})=>(0,uO.jsx)(Ko.HC.LeadingContent,{children:(0,uO.jsx)(mF.Z,{sx:QQ,children:e})}),Q2=({count:e})=>(0,uO.jsx)(Ko.HC.Metadata,{right:!0,children:(0,uO.jsx)(k$.Z,{...(0,mp.f)("slicer-item-count"),sx:QY,children:e})}),Q5=({children:e})=>(0,uO.jsx)(mF.Z,{sx:QX,children:e}),Q3=({fieldGrouping:e,count:t,onSliceValueChange:r,sliceValue:a})=>(0,uO.jsxs)(Ko.HC,{isActive:-1===a,onClick:()=>r(-1),children:[(0,uO.jsx)(Ko.HC.LeadingContent,{}),(0,uO.jsx)(Ko.HC.MainContent,{children:(0,uO.jsx)(Ko.HC.Title,{title:e.value.titleHtml})}),(0,uO.jsx)(Ko.HC.TrailingContent,{children:(0,uO.jsx)(Q2,{count:t})})]}),Q4=({fieldGrouping:e,count:t,sliceValue:r,onSliceValueChange:a})=>(0,uO.jsxs)(Ko.HC,{isActive:r===e.value.option.name,onClick:()=>a(e.value.option.name),children:[(0,uO.jsx)(Q1,{children:(0,uO.jsx)(CU,{color:e.value.option.color})}),(0,uO.jsxs)(Ko.HC.MainContent,{children:[(0,uO.jsx)(Ko.HC.Title,{title:e.value.option.nameHtml}),e.value.option.descriptionHtml&&(0,uO.jsx)(Ko.HC.Description,{children:(0,uO.jsx)(jc,{children:e.value.option.descriptionHtml})})]}),(0,uO.jsx)(Ko.HC.TrailingContent,{children:(0,uO.jsx)(Q2,{count:t})})]}),Q6=({fieldGrouping:e,count:t,onSliceValueChange:r,sliceValue:a})=>(0,uO.jsxs)(Ko.HC,{isActive:a===e.value.iteration.title,onClick:()=>r(e.value.iteration.title),children:[(0,uO.jsx)(Q1,{children:(0,uO.jsx)(mL.Z,{icon:mM.H9J,sx:{color:"fg.muted"}})}),(0,uO.jsxs)(Ko.HC.MainContent,{children:[(0,uO.jsx)(Ko.HC.Title,{title:e.value.iteration.titleHtml}),(0,uO.jsx)(Ko.HC.Description,{children:g_(e.value.iteration)})]}),(0,uO.jsxs)(Ko.HC.TrailingContent,{children:[gj(new Date,e.value.iteration)&&(0,uO.jsx)(Ko.HC.Metadata,{children:(0,uO.jsx)(At,{sx:{ml:2}})}),(0,uO.jsx)(Q2,{count:t})]})]}),Q7=({fieldGrouping:e,count:t,onSliceValueChange:r,sliceValue:a})=>{let n=e.value[0];return n?(0,uO.jsxs)(Ko.HC,{isActive:a===n.login,onClick:()=>r(n.login),children:[(0,uO.jsx)(Q1,{children:(0,uO.jsx)(C$.O,{loading:"lazy",alt:n.login,src:n.avatarUrl},n.id)}),(0,uO.jsx)(Ko.HC.MainContent,{children:(0,uO.jsx)(Ko.HC.Title,{title:n.login})}),(0,uO.jsx)(Ko.HC.TrailingContent,{children:(0,uO.jsx)(Q2,{count:t})})]}):(0,uO.jsx)(uO.Fragment,{})},Q8=({fieldGrouping:e,count:t,onSliceValueChange:r,sliceValue:a})=>(0,uO.jsxs)(Ko.HC,{isActive:a===e.value.name,onClick:()=>r(e.value.name),children:[(0,uO.jsx)(Q1,{children:(0,uO.jsx)(Ak,{color:e.value.color})}),(0,uO.jsx)(Ko.HC.MainContent,{children:(0,uO.jsx)(Ko.HC.Title,{title:e.value.nameHtml})}),(0,uO.jsx)(Ko.HC.TrailingContent,{children:(0,uO.jsx)(Q2,{count:t})})]}),Q9=({group:e,onSliceValueChange:t,...r})=>{if("empty"===e.sourceObject.kind)return(0,uO.jsx)(Q3,{fieldGrouping:e.sourceObject,count:e.rows.length,onSliceValueChange:t,...r},-1);switch(e.sourceObject.dataType){case mD.SingleSelect:return(0,uO.jsx)(Q4,{fieldGrouping:e.sourceObject,count:e.rows.length,onSliceValueChange:t,...r},e.sourceObject.value.option.id);case mD.Iteration:return(0,uO.jsx)(Q6,{fieldGrouping:e.sourceObject,count:e.rows.length,onSliceValueChange:t,...r},e.sourceObject.value.iteration.id);case mD.Assignees:return(0,uO.jsx)(Q7,{fieldGrouping:e.sourceObject,count:e.rows.length,onSliceValueChange:t,...r},e.sourceObject.value[0]?.id);case mD.Labels:return(0,uO.jsx)(Q8,{fieldGrouping:e.sourceObject,count:e.rows.length,onSliceValueChange:t,...r},e.sourceObject.value.id);default:return null}},Ye=({sliceValue:e,onSliceValueChange:t,slicerItems:r,showEmptySlicerItems:a,setShowEmptySlicerItems:n})=>{let[l,i]=gy(r,e=>e.rows.length>0),s=i.length>0;return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Q5,{children:(0,uO.jsxs)(Ko.Bv,{variant:"sidebar",children:[l.map(r=>Q9({group:r,sliceValue:e,onSliceValueChange:t})),a&&i.map(r=>Q9({group:r,sliceValue:e,onSliceValueChange:t}))]})}),(0,uO.jsx)(Ys,{hasEmptySlicerItems:s,showEmptySlicerItems:a,setShowEmptySlicerItems:n})]})},Yt={display:"flex",gap:"4px",alignItems:"center",justifyContent:"flex-end"},Yr={color:"fg.muted",overflow:"hidden",textAlign:"left",whiteSpace:"normal",textDecoration:"none",textOverflow:"ellipsis",fontSize:0,wordBreak:"break-all"},Ya=({item:e,onSliceValueChange:t,sliceValue:r,onOpenSidePanel:a})=>{let n=e.columns,l=n.Repository,i=n.Title,s=js(e.getTitle()),o=n.Tracks,d=i&&"number"in i.value?`#${i.value.number}`:"",c=l?`${l.nameWithOwner}${d}`:"",u=r===c;return(0,uO.jsxs)(Ko.HC,{isActive:u,onClick:()=>t(c),children:[(0,uO.jsx)(Q1,{children:i?.contentType===mA.Issue&&(0,uO.jsx)(jg,{title:i})}),(0,uO.jsxs)(Ko.HC.MainContent,{children:[(0,uO.jsx)(Ko.HC.Title,{title:s}),c&&(0,uO.jsx)(uO.Fragment,{children:u?(0,uO.jsx)(w3.Z,{sx:Yr,target:"_blank",rel:"noreferrer",href:e.content.url,onClick:t=>a(t,e),...(0,mp.f)("issue-link"),children:c}):(0,uO.jsx)(mF.Z,{sx:Yr,children:c})})]}),(0,uO.jsx)(Ko.HC.TrailingContent,{children:o&&(0,uO.jsx)(mF.Z,{sx:Yt,children:(0,uO.jsx)(DS,{progress:o})})})]})},Yn=({item:e,...t})=>e.contentType===mA.Issue?(0,uO.jsx)(Ya,{item:e,...t},e.id):null,Yl=({sliceValue:e,onSliceValueChange:t,onOpenSidePanel:r})=>{let{filteredItems:a}=Ns({applyTransientFilter:"exclude"});return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(QG,{filterCount:(0,uq.useDeferredValue)(a.length),hideSaveButton:!0,hideResetChangesButton:!0,...(0,mp.f)("slicer-panel-filter-input")}),(0,uO.jsx)(Q5,{children:(0,uO.jsx)(Ko.Bv,{variant:"sidebar",children:a.map(a=>Yn({item:a,sliceValue:e,onSliceValueChange:t,onOpenSidePanel:r}))})})]})},Yi=({slicerItems:e,sliceValue:t,onSliceValueChange:r,showEmptySlicerItems:a,setShowEmptySlicerItems:n})=>{let l=[],i=new Map,s=null;for(let t of e)if(t.sourceObject.dataType===mD.Iteration){if("empty"!==t.sourceObject.kind){let e=t.sourceObject.value.iteration;l.push(e),i.set(e.id,t)}else s=t}let o=gP(l);if(!o.iterations.length&&!o.completedIterations.length)return null;let d=e.some(e=>0===e.rows.length);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(Q5,{children:[(0,uO.jsxs)(Ko.Bv,{variant:"sidebar",children:[o.iterations.length>0&&(0,uO.jsx)(uO.Fragment,{children:o.iterations.map(e=>{let n=i.get(e.id);return n&&(a||n.rows.length)?Q9({group:n,sliceValue:t,onSliceValueChange:r}):null})}),s&&Q9({group:s,sliceValue:t,onSliceValueChange:r})]}),o.completedIterations.length>0&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mF.Z,{"data-testid":"completed-iteration-header",sx:QJ,children:fE.iterationLabel.completed}),(0,uO.jsx)(Ko.Bv,{variant:"sidebar",children:o.completedIterations.map(e=>{let n=i.get(e.id);return n&&(a||n.rows.length)?n&&Q9({group:n,sliceValue:t,onSliceValueChange:r}):null})})]})]}),(0,uO.jsx)(Ys,{hasEmptySlicerItems:d,showEmptySlicerItems:a,setShowEmptySlicerItems:n})]})},Ys=({hasEmptySlicerItems:e,showEmptySlicerItems:t,setShowEmptySlicerItems:r})=>{let a=()=>r(!t);return e?(0,uO.jsxs)(jI.z,{onClick:a,size:"small",variant:"invisible",sx:Q0,...(0,mp.f)("toggle-empty-slicer-items"),children:[t?"Hide":"Show"," empty values"]}):null};try{(oM=Q1).displayName||(oM.displayName="ListItemLeadingIcon")}catch{}try{(oL=Q2).displayName||(oL.displayName="ListItemCountMetadata")}catch{}try{(oF=Q5).displayName||(oF.displayName="ListContainer")}catch{}try{(oZ=Q3).displayName||(oZ.displayName="SlicerEmptyItem")}catch{}try{(oO=Q4).displayName||(oO.displayName="SlicerSingleSelectItem")}catch{}try{(oB=Q6).displayName||(oB.displayName="SlicerIterationItem")}catch{}try{(oV=Q7).displayName||(oV.displayName="SlicerAssigneesItem")}catch{}try{(o$=Q8).displayName||(o$.displayName="SlicerLabelsItem")}catch{}try{(oz=Ye).displayName||(oz.displayName="SlicerGroupByItems")}catch{}try{(oU=Ya).displayName||(oU.displayName="SlicerTrackedByItem")}catch{}try{(oW=Yl).displayName||(oW.displayName="SlicerTrackedByItems")}catch{}try{(oH=Yi).displayName||(oH.displayName="SlicerIterationItems")}catch{}try{(oG=Ys).displayName||(oG.displayName="ToggleItemsButton")}catch{}let Yo="368px",Yd={position:"absolute",left:0,backgroundColor:k3("colors.canvas.default"),color:k3("colors.fg.default"),minWidth:Yo,maxWidth:Yo,height:"100%",overflow:"auto",borderColor:k3("colors.border.muted"),borderWidth:"1px",borderRightStyle:"solid"},Yc={display:"flex",justifyContent:"space-between"},Yu={minHeight:"34px",display:"flex",alignItems:"center",margin:"12px 12px 0",color:"fg.default"},Ym={...Yu,color:"fg.muted",fontWeight:"normal"},Yp={fontSize:1,fontWeight:"bold"},Yf={baseQuery:"-no:tracks",isMainProjectFilter:!1,viewStateActionType:kc.SetSliceByFilter,getSearchQueryFromView:e=>e?.localViewState?.sliceBy?.filter??"",getSearchIsDirty:e=>e?.isSliceByFilterDirty??!1};function Yh({slicerItems:e,openSidePanel:t}){let{sliceField:r,sliceValue:a,setSliceValue:n}=Bl(),[l,i]=(0,uq.useState)(!1),[s,o]=(0,uq.useState)(!1),{currentView:d}=bP(),c=(0,uq.useRef)(null),u=(0,uq.useCallback)(e=>{r&&d&&n(d.number,e===a?null:e)},[r,d,n,a]),m=(0,uq.useCallback)((e,r)=>{let n=e.ctrlKey||e.metaKey;(a===e.currentTarget.innerText||n)&&e.stopPropagation(),n||(t(r),e.preventDefault())},[t,a]),p=(0,uq.useCallback)(()=>{if(!r||!e)return null;switch(r.dataType){case mD.TrackedBy:return(0,uO.jsx)(kf,{config:Yf,children:(0,uO.jsx)(Yl,{sliceValue:a,onSliceValueChange:u,onOpenSidePanel:m})});case mD.Iteration:return(0,uO.jsx)(Yi,{sliceValue:a,onSliceValueChange:u,slicerItems:e,showEmptySlicerItems:s,setShowEmptySlicerItems:o});default:return(0,uO.jsx)(Ye,{sliceValue:a,onSliceValueChange:u,slicerItems:e,showEmptySlicerItems:s,setShowEmptySlicerItems:o})}},[r,e,a,u,m,s]),{memex_pivot_panel:f}=g9();return f?(0,uO.jsx)(mF.Z,{...(0,mp.f)("slicer-panel"),sx:Yd,children:r&&e?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(mF.Z,{sx:Yc,children:[(0,uO.jsx)(jI.z,{variant:"invisible",sx:Yu,ref:c,"aria-expanded":l,onClick:()=>i(!l),trailingIcon:mM.AS7,children:(0,uO.jsx)(Cz.Z,{...(0,mp.f)("slicer-panel-title"),title:r.name,sx:Yp,children:r.name})}),a&&(0,uO.jsx)(jI.z,{variant:"invisible",sx:Ym,"aria-label":"Deselect selection",title:"Deselect selection",onClick:()=>d&&n(d.number,null),size:"small",...(0,mp.f)("deselect-slice-selection"),children:"Deselect"})]}),(0,uO.jsx)(Kn,{anchorRef:c,open:l,setOpen:i,closeOnSelection:!0}),p()]}):null}):null}try{(oq=Yh).displayName||(oq.displayName="SlicerPanel")}catch{}let Yg=(0,uq.memo)((0,uq.forwardRef)(({onClick:e,sx:t},r)=>{let a=(0,uq.useRef)(null),n=(0,uq.useRef)(null),[l,i]=(0,uq.useReducer)(e=>e+1,0),[s,o]=(0,uq.useState)(!1),{dragType:d}=Ha(),{orderedTokenizedFilters:c,insertFilter:u}=kp(),{groupedByColumn:m}=NL(),{postStats:p}=bM(),{projectLimits:{singleSelectColumnOptionsLimit:f}}=yk();UT([n],()=>{o(!1)}),(0,uq.useEffect)(()=>{let e=e=>{"Escape"===e.key&&o(!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);let[h,g]=(0,uq.useMemo)(()=>{let e=g7(m),t=m?.name&&wb(m.name),r=c.filter(e=>"field"===e.type&&e.field===t),{included:a,excluded:n}=Yx(r),l=e.filter(e=>e.id!==g3).length,i=e.filter(e=>e.id!==g3).map(e=>({id:e.id,text:e.name,selected:Yy(e,a,n)}));return[i,l]},[m,c]),[x,y]=gy(h,e=>e.selected);(0,uq.useEffect)(()=>{l>0&&a.current&&a?.current?.scrollIntoView()},[l]);let b=(0,uq.useRef)(g);(0,uq.useEffect)(()=>{g>0&&g===b.current+1&&a?.current?.scrollIntoView({behavior:"smooth"}),b.current=g},[g]);let v=(0,uq.useCallback)(e=>{if(m?.name){let{dataType:t,databaseId:r,name:a}=m;u(wb(a),e),i(),p({name:"board_column_plus_show",context:JSON.stringify({dataType:t,databaseId:r,name:a})})}},[i,m,u,p]),w=(0,uq.useCallback)(e=>{if(m?.name){let{dataType:t,databaseId:r,name:a}=m;u(`-${wb(a)}`,e),i(),p({name:"board_column_plus_hide",context:JSON.stringify({dataType:t,databaseId:r,name:a})})}},[i,m,u,p]),j=(0,uq.useCallback)(()=>{o(!0)},[]);return"column"===d?null:(0,uO.jsx)(mF.Z,{sx:{pr:4,minWidth:"170px",display:"flex",...t},ref:a,children:s?(0,uO.jsx)(mF.Z,{sx:{borderColor:"border.default",borderWidth:0,borderStyle:"solid",borderRadius:"5px",boxShadow:k3("shadows.overlay.shadow"),height:"100%"},ref:n,children:(0,uO.jsxs)(Ia.S,{sx:{width:"max-content",overflowY:"auto",height:"100%"},role:"menu",...(0,mp.f)("add-new-column-menu"),children:[(0,uO.jsx)(Ia.S.Group,{children:(0,uO.jsxs)(Ia.S.Item,{"aria-label":"Add a new column to the board",role:"option",as:"button",onSelect:e,disabled:m?.dataType==="singleSelect"&&g>=f,ref:r,...(0,mp.f)("add-new-column-menu-plus-button"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.pOD,{})}),"New Column"]},"new-column-button")}),x.length>0&&(0,uO.jsx)(Ia.S.Group,{selectionVariant:"multiple",title:"Visible column(s)",children:x.map(e=>(0,uO.jsx)(Ia.S.Item,{selected:!0,onSelect:()=>w(e.text),role:"option",sx:{div:{display:"block",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},...(0,mp.f)(`board-visibility-column-${e.text.toLocaleLowerCase()}`),children:e.text},e.text))}),y.length>0&&(0,uO.jsx)(Ia.S.Group,{selectionVariant:"multiple",title:"Hidden column(s)",children:y.map(e=>(0,uO.jsx)(Ia.S.Item,{selected:!1,onSelect:()=>v(e.text),role:"option",sx:{div:{display:"block",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},...(0,mp.f)(`board-visibility-column-${e.text.toLocaleLowerCase()}`),children:e.text},e.text))})]})}):(0,uO.jsx)("span",{children:(0,uO.jsx)(kF.h,{icon:mM.pOD,"aria-label":"Add a new column to the board",onClick:j,size:"large",...(0,mp.f)("add-new-column-button")})})})}));function Yx(e){return e.reduce((e,t)=>{if("field"===t.type)for(let r of wf(t.value))e[t.exclude?"excluded":"included"].add(r);return e},{included:new Set,excluded:new Set})}function Yy(e,t,r){let a=NE(e);return!(t.size>0&&!vW(Array.from(t),a)||vW(Array.from(r),a))}Yg.displayName="AddNewColumnOption";let Yb={TOP:"top",BOTTOM:"bottom"},Yv=(0,uq.createContext)(null),Yw=({groupByFieldId:e,children:t})=>{let{updateAndReorderItem:r}=Py(),{itemsGroupedByField:a}=_l(),n=Zl(),l=(0,uq.useCallback)(async(t,a,n,l)=>{if(t===a)return;let i=l?{dataType:mD.SingleSelect,memexProjectColumnId:e,value:{id:l===g3?"":l}}:void 0,s=null!=a?{overItemId:a,side:n}:void 0,o=Pw(i,s);o&&await r(t,o,{})},[e,r]),i=(0,uq.useCallback)(async(e,t,n)=>{let l=a[t],i=n===Yb.TOP?l?.at(0):l?.at(-1);if(!i)return;let s={overItemId:i.id,side:n},o=Pw(void 0,s);o&&await r(e,o,{})},[a,r]),s=(0,uq.useCallback)(async(t,r)=>{if(YC(t,r,e))return;let a={dataType:mD.SingleSelect,memexProjectColumnId:e,value:{id:r===g3?"":r}};n(t,a)},[n,e]),o=(0,uq.useMemo)(()=>({moveCard:l,moveCards:s,moveCardToPosition:i}),[l,i,s]);return(0,uO.jsx)(Yv.Provider,{value:o,children:t})};function Yj(){let e=(0,uq.useContext)(Yv);if(null==e)throw Error("useBoardCardActions must be used within a BoardCardActionsContext");return e}function YC(e,t,r){return e.every(e=>{let a=e.columns[r];return a?fr(a)&&a.id===t:t===g3})}try{(oK=Yv).displayName||(oK.displayName="BoardCardActionsContext")}catch{}let Yk={RESET_STATE:"RESET_STATE",SET_DROP:"SET_DROP"},YS={BEFORE:"before",AFTER:"after"},YI={dropId:void 0,dropSide:void 0};function YN(e,t){switch(t.type){case Yk.RESET_STATE:return{...YI};case Yk.SET_DROP:return{...e,dropId:t.dropId,dropSide:t.dropSide};default:return e}}function Y_(){return(0,uq.useReducer)(YN,YI)}let YT={TOGGLE_SELECTED:"TOGGLE_SELECTED",TOGGLE_ALL_SELECTED:"TOGGLE_ALL_SELECTED",EXPAND_COLUMN_SELECTION:"EXPAND_COLUMN_SELECTION",EXPAND_COLUMN_SELECTION_VIA_KEYS:"EXPAND_COLUMN_SELECTION_VIA_KEYS",SELECT_ALL_CYCLE:"SELECT_ALL_CYCLE",INIT:"INIT"},YR=(e,t)=>({type:YT.TOGGLE_SELECTED,itemId:e,state:t}),YE=e=>({type:YT.TOGGLE_ALL_SELECTED,state:e}),YD=e=>({type:YT.INIT,state:e}),YP=(e,t,r)=>({type:YT.EXPAND_COLUMN_SELECTION,anchorColumnIndex:e,anchorId:t,targetId:r}),YA=(e,t,r)=>({type:YT.EXPAND_COLUMN_SELECTION_VIA_KEYS,anchorColumnIndex:e,anchorId:t,direction:r}),YM=e=>({type:YT.SELECT_ALL_CYCLE,columnIndex:e}),YL=()=>{let e=(0,uq.createContext)({state:{selected:{}},selectionDispatch:()=>void 0}),t=()=>{let t=(0,uq.useContext)(e);return t},r=(0,uq.memo)(function({initialState:t,metaRef:r,children:a}){let[n,l]=Y$(t,r),i=(0,uq.useMemo)(()=>({state:n,selectionDispatch:l}),[n,l]);return Fd("is-keyboard-moving-card",Object.keys(n.selected).length>0),(0,uO.jsx)(e.Provider,{value:i,children:a})});return{CardSelectionContext:e,CardSelectionProvider:r,useCardSelectionDispatch:t}},YF=(e,t)=>{let r=t.state,a=e.selected[t.itemId]??!1,n=void 0!==r?r:!a;return{selected:{...e.selected,[t.itemId]:n}}},YZ=(e,t)=>{if(!0!==t.state)return{selected:{}};{let t=e.current.cardGrid.reduce((e,t)=>e.concat(t.items),[]),r={selected:{}};return t.map(e=>r.selected[e.id]=!0),r}},YO=(e,t,r)=>{let a=t.current.cardGrid[r.anchorColumnIndex]?.items??[],n=a.findIndex(e=>e.id===r.anchorId),l=a.findIndex(e=>e.id===r.targetId);if(!(n>-1)||!(l>-1))return e;{let t=[];if(l<n?t=a.slice(l,n+1):l>n&&(t=a.slice(n,l+1)),!t.length)return e;{let e={selected:{}};for(let r of t)e.selected[r.id]=!0;return e}}},YB=(e,t,r)=>{let a=t.current.cardGrid[r.anchorColumnIndex]?.items??[],n=a.reduce((e,t,r)=>(e[t.id]=r,e),{}),l=n[r.anchorId];if(void 0===l)return e;{let{selected:t}=e,i=Object.keys(t).filter(e=>t[e]&&void 0!==n[e]).sort((e,t)=>(n[e]??0)-(n[t]??0)),s=n[gc(i[0])]??l,o=n[gc(i[i.length-1])]??l,d=r.direction===On.Up,c=r.direction===On.Down,u=[];if(i.length<=1?d?u=a.slice(s-1,s+1):c&&(u=a.slice(s,s+2)):l<o?d?u=a.slice(s,o):c&&(u=a.slice(s,o+2)):d&&0!==s?u=a.slice(s-1,l+1):c&&(u=a.slice(s+1,l+1)),!u.length)return e;{let e={selected:{}};return u.map(t=>e.selected[t.id]=!0),e}}},YV=(e,t,r)=>{let a=Object.keys(e.selected).filter(t=>!0===e.selected[t]),n=0;t.current.cardGrid.map(e=>n+=e.items.length);let l=t.current.cardGrid[r.columnIndex]?.items??[],i=0===a.length||a.length<l.length,s=a.length===n,o=l.every(e=>a.includes(e.id.toString()));if(i){let e={selected:{}};return l.map(t=>e.selected[t.id]=!0),e}return s?{selected:{}}:o?YZ(t,YE(!0)):e},Y$=(e,t)=>{let r=(e,r)=>{switch(r.type){case YT.TOGGLE_SELECTED:return YF(e,r);case YT.TOGGLE_ALL_SELECTED:return YZ(t,r);case YT.EXPAND_COLUMN_SELECTION:return YO(e,t,r);case YT.EXPAND_COLUMN_SELECTION_VIA_KEYS:return YB(e,t,r);case YT.SELECT_ALL_CYCLE:return YV(e,t,r);case YT.INIT:return r.state;default:return e}};return(0,uq.useReducer)(r,e)},{CardSelectionProvider:Yz,useCardSelectionDispatch:YU}=YL();try{(oQ=CardSelectionContext).displayName||(oQ.displayName="CardSelectionContext")}catch{}try{(oY=Yz).displayName||(oY.displayName="CardSelectionProvider")}catch{}let YW=(e,t,r)=>{let{selectionDispatch:a,state:{selected:n}}=YU(),{findMemexItem:l}=IO(),{navigationDispatch:i,stateRef:s}=xo(),o=(0,uq.useCallback)((e,t)=>{a(YR(e,t))},[a]),d=(0,uq.useCallback)(e=>{a(YE(e))},[a]),c=(0,uq.useCallback)(e=>{d(!1),o(e,!0)},[d,o]),u=(0,uq.useCallback)(()=>{a(YD({selected:{}}))},[a]),m=(0,uq.useCallback)((e,t,r)=>{a(YP(e,t,r))},[a]),p=(0,uq.useCallback)(e=>{if(s.current?.focus?.type==="coordinate"){let{x:t,y:r}=s.current.focus.details;a(YA(t,r,e))}},[s,a]),f=Object.keys(n).filter(e=>!0===n[e]).map(Number),h=(0,uq.useMemo)(()=>f.map(e=>l(e)).filter(fm).filter(e=>!YH(e)),[l,f]),[g,x]=(0,uq.useMemo)(()=>{let e=h.map(e=>e.id);return[e,new Set(e)]},[h]),y=(0,uq.useCallback)(a=>{if(!e||e.contentType===mA.RedactedItem||a.defaultPrevented)return;let n=t?.current?.contains(a.target);if(n){a.stopPropagation();return}if(a.shiftKey&&s.current?.focus?.type==="coordinate"){let{x:t,y:r}=s.current.focus.details;m(t,r,e.id)}else if(fh(a)&&s.current?.focus?.type==="coordinate"){let t=0===f.length;if(t){let{y:e}=s.current.focus.details;o(e,!0)}o(e.id),void 0!==r&&i(xm(r,e.id))}else h.length>1&&!x.has(e.id)?u():GY()||u();a.stopPropagation()},[r,t,m,x,h.length,s,e,i,u,f.length,o]),b=(0,uq.useCallback)(()=>{void 0!==r&&a(YM(r))},[r,a]);return{expandColumnSelectionViaKeys:p,onCardClick:y,resetSelection:u,filteredSelectedCardIds:g,selectSingleCard:c,state:n,toggleAllSelected:d,toggleCardSelected:o,selectAllCycle:b,filteredSelectedCards:h}};function YH(e){return e.contentType===mA.RedactedItem}let YG={CARD:"card",COLUMN:"column"};function Yq(e){return!!e&&"object"==typeof e&&"type"in e&&"string"==typeof e.type&&(e.type===YG.CARD||e.type===YG.COLUMN)}function YK(e){return Yq(e)&&e.type===YG.CARD}function YQ(e){return Yq(e)&&e.type===YG.COLUMN}function YY({children:e,setDraggingItem:t}){let{itemsGroupedByField:r}=_p(),{moveCard:a,moveCards:n}=Yj(),{resetSelection:l,filteredSelectedCards:i}=YW(),{navigationDispatch:s}=xo(),[{dropId:o,dropSide:d},c]=Y_(),{postStats:u}=bM(),{isSorted:m}=NO(),p=m||i.length>1,f=(0,GK.Dy)((0,GK.VT)(GK.we,{activationConstraint:{distance:2}})),h=Ru(),g=(0,uq.useRef)(!1),x=(0,uq.useCallback)(()=>{t(null),c({type:Yk.RESET_STATE}),requestAnimationFrame(()=>{W1()}),g.current=!1},[c,t]),y=(0,uq.useCallback)(e=>{x();let t=e.active.data.current,l=e.over?.data.current;if(YK(l)&&YK(t)){let e=r[l.column]??[],[c,m]=YX(e,o?Number(o):void 0,d===YS.BEFORE?"top":"bottom");s(xm(l.columnIndex,t.item.id)),i.length>1?n(i,l.column):a(t.item.id,c,m,l.column),u({name:go,ui:gd.MouseMove,context:JSON.stringify({fieldId:l.column,...i.length>1?{itemIds:i.map(e=>e.id)}:{itemId:t.item.id}})})}else YQ(l)&&YK(t)&&(s(xm(l.index,t.item.id)),i.length>1?n(i,l.option.id):a(t.item.id,o,"bottom",l.option.id),u({name:go,ui:gd.MouseMove,context:JSON.stringify({fieldId:l.option.id,...i.length>1?{itemIds:i.map(e=>e.id)}:{itemId:t.item.id}})}))},[o,d,r,a,n,s,x,i,u]),b=(0,uq.useCallback)(e=>{i.length<=1&&l(),g.current=!0;let r=e.active.data.current;YK(r)&&t(r.item)},[l,i.length,t]),v=(0,uq.useCallback)(()=>x(),[x]),w=(0,uq.useCallback)(e=>{if(!e.over||!g.current){W1();return}let t=e.over?.data.current;if(!t){c({type:Yk.RESET_STATE});return}if(YK(t)){let r=t?.item.id,a=Y0(e);t.ref.current&&r&&(c({type:Yk.SET_DROP,dropId:r,dropSide:a}),p||W0(t.ref.current,a,YG.CARD))}else if(YQ(t)){let e=r[t.option.id]?.at(-1)?.id,a=e?document.querySelector(`[data-board-card-id="${e}"]`):void 0,n=YS.AFTER;c({type:Yk.SET_DROP,dropId:e,dropSide:n}),!p&&a?W0(a,n,YG.CARD):W1()}},[p,c,r]);return(0,uO.jsx)(GK.LB,{sensors:f,autoScroll:!1,accessibility:(0,uq.useMemo)(()=>({container:h}),[h]),onDragStart:b,onDragMove:w,onDragEnd:y,onDragCancel:v,children:e})}function YX(e,t,r){if(null==t||"top"===r)return[t,r];let a=e.findIndex(({id:e})=>e===t),n=e[a+1];return n?[n.id,"top"]:[t,r]}function YJ(e){if(!(e.activatorEvent instanceof PointerEvent))return null;let t=e.active.rect.current?.initial,r=e.active.rect.current?.translated;if(!t||!r)return null;let a={x:e.activatorEvent.clientX-t.left,y:e.activatorEvent.clientY-t.top},n={x:r.left+a.x,y:r.top+a.y};return n}function Y0(e){let t=YJ(e);if(!t)return YS.BEFORE;let r=e.over?.rect;if(!r)return YS.BEFORE;let a=r.top+r.height/2,n=t.y>a?YS.AFTER:YS.BEFORE;return n}try{(oX=YY).displayName||(oX.displayName="BoardDndContext")}catch{}let Y1=()=>{let{navigationDispatch:e}=xo(),t=(0,uq.useCallback)((t={})=>{e(xg(t.columnId,t.horizontalGroupId))},[e]),r=(0,uq.useCallback)(()=>{e(xy())},[e]);return{enableOmnibar:t,disableOmnibar:r}},Y2=(0,uq.memo)(function(){let{navigationDispatch:e}=xo(),{state:{focus:t,previousFocus:r}}=xs(),a=(0,uq.useCallback)(()=>{e(xx())},[e]),{filteredItems:n,itemsGroupedByField:l,groupByFieldOptions:i}=_p(),{enableOmnibar:s}=Y1(),o=(0,uq.useCallback)(t=>{if(r&&kE(t)===k_.ESCAPE){e(xf());return}let a=!1;for(let t=0;t<i.length;t++){let r=i[t];(0,u0.Z)(r,"Option must exist");let n=r.id,s=l[n];if(s&&s.length>0){let r=s[0]?.id;if(!r)return;e(xm(t,r)),a=!0;return}}a||(s(),t.preventDefault(),t.stopPropagation())},[r,e,s,l,i]),{setShowFindInProject:d}=qr(),c=(0,uq.useCallback)(e=>{switch(kE(e)){case k_.ESCAPE:case k_.ARROW_DOWN:o(e);return}},[o]),u=(0,uq.useCallback)(e=>{if(kE(e)===k_.ARROW_DOWN){o(e);return}},[o]);return(0,uO.jsx)(QW,{onInputKeyDown:c,onClearButtonKeyDown:u,dispatchInputFocusEvent:a,isFocused:xu(t),setShowFindInProject:d,filterCount:(0,uq.useDeferredValue)(n.length)})});try{(oJ=Y2).displayName||(oJ.displayName="BoardFilterInput")}catch{}function Y5(e){return{...e.reviewer,hovercardUrl:"User"===e.reviewer.type?`/hovercards?user_id=${e.reviewer.id}`:`${e.reviewer.url}/hovercard`}}let Y3=(0,uq.forwardRef)(({reviews:e,...t},r)=>(0,uO.jsx)(Pt,{ref:r,avatars:e.map(Y5),text:fE.reviewersCount(e.length),...(0,mp.f)("reviewers-token"),...t}));Y3.displayName="ReviewersToken";let Y4=(e,t)=>{let{toggleFilter:r}=kp();return(0,uq.useCallback)(a=>{a.target instanceof HTMLAnchorElement?a.stopPropagation():a.shiftKey||a.metaKey||r(e,t)},[r,e,t])},Y6=({label:e,children:t})=>(0,uO.jsxs)(mO.Z,{as:"li",sx:{p:0,m:0,maxWidth:"100%"},children:[null!==e&&(0,uO.jsxs)(kr,{children:[e,": "]}),t]}),Y7=({content:e,fieldName:t,filterValue:r})=>{let a=(0,uq.useRef)(null);IC(a);let[n,l]=kL({contentRef:a,"aria-label":`${t}: ${p8(e.toString())}`});return(0,uO.jsxs)(Y6,{label:t,children:[(0,uO.jsx)(DC.Z,{onClick:Y4(t,r),as:"button",ref:a,text:(0,uO.jsx)(jc,{children:e}),...(0,mp.f)(`custom-label-${t}`),...n,"aria-describedby":void 0}),l]})},Y8=({fieldName:e,milestone:t})=>{let r=(0,uq.useRef)(null);IC(r);let[a,n]=kL({contentRef:r,"aria-label":`${e}: ${t.title}`});return(0,uO.jsxs)(Y6,{label:e,children:[(0,uO.jsx)(AM,{ref:r,...a,milestone:t,onClick:Y4(e,t.title),as:"button"}),n]})},Y9=({fieldName:e,iteration:t})=>{let r=(0,uq.useRef)(null);IC(r);let[a,n]=kL({contentRef:r,"aria-label":`${e}: ${t.title}
${g_(t)}`});return(0,uO.jsxs)(Y6,{label:e,children:[(0,uO.jsx)(Ac,{ref:r,...a,iteration:t,onClick:Y4(e,t.title),as:"button"}),n]})},Xe=({progress:e,item:t})=>{let{openPane:r}=b1(),a=(0,uq.useRef)(null);IC(a);let n=(0,uq.useCallback)(()=>{t&&t.contentType===mA.Issue&&r(t)},[t,r]),l=fE.progressPercentCount(e.percent),[i,s]=kL({contentRef:a,"aria-label":l});return 0===e.total?null:(0,uO.jsxs)(Y6,{label:"Progress",children:[(0,uO.jsx)(DS,{ref:a,constantWidth:!0,progress:e,onClick:n,...i,...(0,mp.f)("tracks-label")}),s]})},Xt=({trackedByItem:e,projectOwner:t})=>{let r=(0,uq.useRef)(null);return IC(r),(0,uO.jsx)(Y6,{label:null,children:(0,uO.jsx)(Pi,{...(0,mp.f)(`tracked-by-label-${e.key.itemId}`),as:"button",ref:r,onClick:Y4("tracked-by",xD(e)),trackedBy:e,projectOwner:t})})},Xr=({fieldName:e,label:t})=>(0,uO.jsx)(Y6,{label:"Label",children:(0,uO.jsx)(AC,{label:t,as:"button",onClick:Y4(e,t.name),...(0,mp.f)("issue-label")})});function Xa({field:e,option:t}){let r=(0,uq.useRef)(null),[a,n]=kL({contentRef:r,"aria-label":`${e.name}: ${t.name}`});return IC(r),(0,uO.jsxs)(Y6,{label:e.name,children:[(0,uO.jsx)(Mr,{option:t,...a,onClick:Y4(e.name,t.name),as:"button",ref:r}),n]})}function Xn({fieldName:e,repository:t}){let r=(0,uq.useRef)(null),[a,n]=kL({contentRef:r,"aria-label":`${e}: ${t.nameWithOwner}`});return IC(r),(0,uO.jsxs)(Y6,{label:e,children:[(0,uO.jsx)(Pn,{withOwner:!0,repository:t,...a,onClick:Y4(e,t.nameWithOwner),as:"button",ref:r,...(0,mp.f)("repository-label")}),n]})}let Xl=(0,uq.memo)(({field:e,columnData:t,item:r})=>{let{projectOwner:a}=yk(),n=null;switch(e.dataType){case mD.Labels:n=t[mP.Labels]?.map(t=>(0,uO.jsx)(Xr,{fieldName:e.name,label:t},t.id));break;case mD.LinkedPullRequests:n=t[mP.LinkedPullRequests]?.slice(0,10).map(e=>(0,uO.jsx)(Y6,{label:"Linked pull request",children:(0,uO.jsx)(Pa,{linkedPullRequest:e})},e.id));break;case mD.Reviewers:{let e=t[mP.Reviewers];n=e&&e.length>0&&(0,uO.jsx)(Y6,{label:"Reviewers",children:(0,uO.jsx)(Y3,{reviews:e,sx:{bg:"canvas.default"}})});break}case mD.Milestone:{let r=t[mP.Milestone];n=r&&(0,uO.jsx)(Y8,{milestone:r,fieldName:e.name});break}case mD.Iteration:{let r=t[e.id],a=r&&fr(r)?gR(e).find(e=>e.id===r.id):void 0;n=a&&(0,uO.jsx)(Y9,{iteration:a,fieldName:e.name});break}case mD.Tracks:{let e=t[mP.Tracks];n=e&&(0,uO.jsx)(Xe,{progress:e,item:r});break}case mD.TrackedBy:n=t[mP.TrackedBy]?.slice(0,10).map(e=>(0,uO.jsx)(Xt,{trackedByItem:e,projectOwner:a},e.key.itemId));break;case mD.SingleSelect:{let r=t[e.id],a=r&&fr(r)?e.settings.options?.find(e=>e.id===r.id):void 0;n=a&&(0,uO.jsx)(Xa,{option:a,field:e});break}case mD.Date:{let r=t[e.id];if(r&&ft(r)){let t=pY(r),a=p2(new Date(r.value));n=t&&(0,uO.jsx)(Y7,{content:t,fieldName:e.name,filterValue:a})}break}case mD.Number:{let r=t[e.id];n=r&&fe(r)&&(0,uO.jsx)(Y7,{content:r.value.toString(),fieldName:e.name,filterValue:r.value.toString()});break}case mD.Text:{let r=t[e.id];n=r&&p9(r)&&(0,uO.jsx)(Y7,{content:r.raw,fieldName:e.name,filterValue:r.raw});break}case mD.Repository:{let r=t[mP.Repository];n=r&&(0,uO.jsx)(Xn,{fieldName:e.name,repository:r})}case mD.Assignees:case mD.Title:}return(0,uO.jsx)(uO.Fragment,{children:n})});Xl.displayName="CardLabel";try{(o0=Y6).displayName||(o0.displayName="LabelledLabel")}catch{}try{(o1=Y7).displayName||(o1.displayName="CustomFieldLabel")}catch{}try{(o2=Y8).displayName||(o2.displayName="MilestoneLabel")}catch{}try{(o5=Y9).displayName||(o5.displayName="IterationLabel")}catch{}try{(o3=Xe).displayName||(o3.displayName="TracksLabel")}catch{}try{(o4=Xt).displayName||(o4.displayName="TrackedByLabel")}catch{}try{(o6=Xr).displayName||(o6.displayName="LabelLabel")}catch{}try{(o7=Xa).displayName||(o7.displayName="SingleSelectLabel")}catch{}try{(o8=Xn).displayName||(o8.displayName="RepositoryLabel")}catch{}let Xi=e=>{let t=Xs();return t(e)};function Xs(){let{hasColumnData:e}=Bp();return t=>e(t)}let Xo={zIndex:0},Xd=({assignee:e,...t})=>{let{toggleFilter:r}=kp(),a=(0,uq.useCallback)(t=>{t.shiftKey||t.metaKey||r("assignee",e.login)},[r,e.login]),n=(0,uq.useCallback)(t=>{"Enter"===t.key&&r("assignee",e.login)},[r,e.login]),l=(0,uq.useRef)(null),[i,s]=kL({contentRef:l,"aria-label":e.login});return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(C$.O,{...t,ref:l,loading:"lazy",sx:{...t.sx,cursor:"pointer"},onClick:a,onKeyDown:n,tabIndex:0,role:"button",alt:e.login,src:e.avatarUrl,"aria-label":e.login,...i}),s]})};function Xc(e,t={reverse:!1}){if(0===e.length)return"none";let r=e.map(e=>e.login);return fn(t.reverse?r.reverse():r)}let Xu={all:"unset",m:0,p:0},Xm=({assignees:e,alignRight:t=!1,sx:r,avatarProps:a,wrapperSx:n,...l})=>{let i=Xi(mP.Assignees);return void 0===e||0===e.length?null:i?(0,uO.jsxs)(mF.Z,{as:"figure",...l,sx:{...Xu,...n},children:[(0,uO.jsxs)(kr,{as:"figcaption",children:["Assignees: ",Xc(e,{reverse:t})]}),(0,uO.jsx)(PI.Z,{alignRight:t,sx:{...Xo,...r},children:e.map(e=>(0,uO.jsx)(Xd,{assignee:e,...a},e.id))})]}):(0,uO.jsx)(Kt,{})};try{(o9=Xd).displayName||(o9.displayName="ClickableAvatar")}catch{}try{(de=Xm).displayName||(de.displayName="AssigneeStack")}catch{}let Xp=()=>(0,uO.jsx)(mF.Z,{sx:{width:"16px",height:"16px",bg:"border.muted",borderRadius:10,borderWidth:"0",borderStyle:"solid",borderColor:"border.default"}}),Xf=(0,uq.memo)(function({item:e,columnData:t,archiveItem:r,removeItem:a,moveItemToTop:n,moveItemToBottom:l,contextMenuRef:i,disableContextMenu:s,column:o,...d}){let c=t.Assignees,{postStats:u}=bM(),m=(0,uq.useRef)(null),[p,f]=(0,uq.useState)(!1),{hasWritePermissions:h}=yI(),g=null,x=(0,uO.jsx)(Xm,{assignees:c,alignRight:!0,...(0,mp.f)("board-card-assignees")}),y=t.Title;if(!y)return null;switch(y.contentType){case mA.RedactedItem:g=(0,uO.jsx)(Xh,{contextMenuRef:i,Icon:(0,uO.jsx)(mL.Z,{icon:mM.mBM,sx:{color:"fg.muted"}}),Title:(0,uO.jsx)(mF.Z,{sx:{width:"48px",height:"4px",bg:"border.muted",borderRadius:1,borderWidth:"0",borderStyle:"solid",borderColor:"border.default"}}),Avatars:(0,uO.jsx)(Xp,{}),item:e,disableContextMenu:!0,removeItem:a,column:o});break;case mA.DraftIssue:{let t=()=>u({name:hN,ui:"card-context-menu",memexProjectItemId:e.id});g=(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Xh,{ref:m,contextMenuRef:i,Icon:(0,uO.jsx)(mL.Z,{icon:mM.aNF,"aria-label":"Draft issue",sx:{color:"fg.muted"}}),Title:(0,uO.jsx)(mO.Z,{sx:{fontSize:0,color:"fg.muted"},children:"Draft"}),Avatars:x,item:e,convertToIssue:()=>f(!0),removeItem:a,archiveItem:r,disableContextMenu:s||!h,moveItemToTop:n,moveItemToBottom:l,column:o}),(0,uO.jsx)(MI,{anchorRef:m,isOpen:p,item:e,onOpenChange:e=>f(e),onSuccess:t,...(0,mp.f)("card-menu-repo-picker")})]});break}case mA.Issue:case mA.PullRequest:{let d=t.Repository?.name;g=(0,uO.jsx)(Xh,{ref:m,contextMenuRef:i,Icon:(0,uO.jsx)(jg,{title:y,size:16}),Title:(0,uO.jsxs)(mO.Z,{sx:{fontSize:0,color:"fg.muted"},children:[d," #",y.value.number]}),Avatars:x,item:e,archiveItem:r,removeItem:a,disableContextMenu:s||!h,moveItemToTop:n,moveItemToBottom:l,column:o})}}return g?(0,uO.jsx)(mF.Z,{...d,children:g}):null}),Xh=(0,uq.forwardRef)(({Avatars:e,...t},r)=>(0,uO.jsxs)(mF.Z,{sx:{display:"flex",justifyContent:"space-between"},ref:r,children:[(0,uO.jsx)(Xy,{...t}),(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexShrink:0,justifyContent:"flex-end",alignItems:"center"},children:e})]}));Xh.displayName="HeaderInternal";let Xg=(0,uJ.ZP)(mF.Z)`
  user-select: none;
  cursor: default;
  display: flex;

  &:not(.js-disable-context-menu):not(.js-context-menu-open) .js-context-menu-trigger {
    /* if we switch this to display: none or visibility: hidden,
    we will not be able to focus the menu button with the Tab key or ESC key when closing  the menu
    because of the event loop rendering process */
    opacity: 0;
  }

  .js-context-menu-trigger:hover > div,
  &.js-context-menu-open .js-context-menu-trigger > div {
    background-color: ${(0,uG.U2)("colors.canvas.subtle")};
  }
`,Xx={ARCHIVE_ITEM:"archive-item",DELETE_FROM_PROJECT:"delete-from-project"},Xy=({Icon:e,Title:t,contextMenuRef:r,item:a,convertToIssue:n,archiveItem:l,removeItem:i,moveItemToBottom:s,moveItemToTop:o,disableContextMenu:d,column:c})=>{let[u,m]=(0,uq.useState)(!1),[p,f]=(0,uq.useState)(""),{filteredSelectedCardIds:h,state:g}=YW(),x=a.contentType!==mA.RedactedItem&&g[a.id],y=h.length<=1,b=a.contentType===mA.Issue||a.contentType===mA.PullRequest,v=a.contentType===mA.Issue||a.contentType===mA.DraftIssue,{isSorted:w}=NO(),{itemsGroupedByField:j,groupByField:C,groupByFieldOptions:k}=_p(),S=(0,uq.useRef)(null),[I,N]=(0,uq.useState)(!1),[_,T]=(0,uq.useState)(null);(0,uq.useEffect)(()=>{let e=new URL(window.location.href);e.searchParams.append(yW,hk.ISSUE),e.searchParams.append(yH,a.id.toString()),f(e.href)},[a.id]),(0,uq.useEffect)(()=>{_?.current&&u&&(setTimeout(()=>{_?.current?.focus()}),T(null))},[u,_]);let R=(0,uq.useCallback)((e,t)=>{"selection"===t?(N(!1),setTimeout(()=>{let e=document.querySelector(`[data-board-card-id="${a.id}"] [aria-label="More actions"]`);e?.focus()})):"click-outside"===t?N(!1):(N(!1),m(!0),T(S))},[a.id]),E=F7()({"js-disable-context-menu":d,"js-context-menu-open":u||I}),D=j[c],P=D?.at(0)?.id===a.id,A=D?.at(-1)?.id===a.id,M=j[g3]?.length??0,L=M>0,F=(0,uq.useCallback)(e=>{let t=k.some(t=>t.id===e);return e===g3?L:t},[k,L]),{postStats:Z}=bM(),O=(0,uq.useCallback)(e=>{C&&Z({name:go,ui:gd.ContextMenu,context:JSON.stringify({type:"column",itemId:a.id,fieldId:C.databaseId,nextValue:e.nextValue,currentValue:e.currentValue})})},[C,a.id,Z]),B=(0,uq.useCallback)(e=>{m(e),e&&N(!1)},[]);return(0,uO.jsxs)(Xg,{sx:{height:"24px",alignItems:"center"},className:E,children:[(0,uO.jsx)(mF.Z,{sx:{mr:1},children:e}),t,!d&&(0,uO.jsx)(mF.Z,{sx:{mr:0},className:"js-context-menu-trigger",children:(0,uO.jsxs)(In.P,{open:u,onOpenChange:B,anchorRef:r,children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsx)(kF.h,{variant:"invisible",icon:mM.Ui8,...(0,mp.f)("card-context-menu-trigger"),"aria-label":"More actions",sx:{ml:1,color:"fg.muted",width:"24px",height:"24px",padding:0}})}),(0,uO.jsx)(In.P.Overlay,{anchorSide:"inside-right",onMouseDown:e=>e.stopPropagation(),children:(0,uO.jsxs)(Ia.S,{children:[y&&(0,uO.jsxs)(uO.Fragment,{children:[n?(0,uO.jsxs)(Ia.S.Item,{onSelect:n,...(0,mp.f)("card-context-menu-convert-to-issue"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.hEv,{})}),"Convert to issue"]}):null,b?(0,uO.jsxs)(Ia.S.LinkItem,{target:"_blank",href:a.getUrl(),rel:"noopener noreferrer",...(0,mp.f)("card-context-menu-open-in-new-tab"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.Pfi,{})}),"Open in new tab"]}):null,b?(0,uO.jsx)(Xw,{label:"Copy link",url:a.getUrl(),testId:"card-context-menu-copy-link"}):null,v?(0,uO.jsx)(Xw,{label:"Copy link in project",url:p,testId:"card-context-menu-copy-link-in-project"}):null,(0,uO.jsx)(Ia.S.Divider,{}),!w&&(o||s)?(0,uO.jsxs)(uO.Fragment,{children:[o&&(0,uO.jsxs)(Ia.S.Item,{disabled:P,onSelect:()=>o(gd.ContextMenu),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.ySj,{})}),"Move to top"]}),s&&(0,uO.jsxs)(Ia.S.Item,{disabled:A,onSelect:()=>s(gd.ContextMenu),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.hdD,{})}),"Move to bottom"]})]}):null,(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>N(!0),ref:S,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.Wk_,{})}),"Move to column",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(mM.XCv,{})})]}),(0,uO.jsx)(Ia.S.Divider,{})]}),l?(0,uO.jsxs)(Ia.S.Item,{id:Xx.ARCHIVE_ITEM,onSelect:()=>l?.(h0),...(0,mp.f)("card-context-menu-archive-item"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.rKT,{})}),x&&h.length>1?`Archive ${h.length} selected items`:"Archive",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(F0,{})})]}):null,(0,uO.jsxs)(Ia.S.Item,{id:Xx.DELETE_FROM_PROJECT,variant:"danger",onSelect:()=>i(h0),...(0,mp.f)("card-context-menu-delete"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),x&&h.length>1?`Delete ${h.length} selected items from project`:"Delete from project",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(FJ,{})})]})]})})]})}),!d&&I&&C&&(0,uO.jsxs)(uO.Fragment,{children:[C.dataType===mD.SingleSelect&&(0,uO.jsx)(Xb,{model:a,groupByField:C,onOpenChange:R,anchorRef:r,isColumnVisible:F,onChangeField:O}),C.dataType===mD.Iteration&&(0,uO.jsx)(Xv,{model:a,groupByField:C,onOpenChange:R,anchorRef:r,isColumnVisible:F,onChangeField:O})]})]})};function Xb({model:e,groupByField:t,onOpenChange:r,anchorRef:a,isColumnVisible:n,onChangeField:l}){let[i,s]=(0,uq.useState)(""),o=pH(e.columns[t.id]),{options:d,saveSelected:c}=AJ({model:e,columnModel:t,selectedValueId:o?o.id:null}),u=(0,uq.useMemo)(()=>[...d,{id:g3,label:`No ${t.name}`,color:"GRAY",description:"",descriptionHtml:"",name:`No ${t.name}`,nameHtml:`No ${t.name}`,selected:null===o}],[t.name,d,o]),m=u.every(e=>"GRAY"===e.color),p=(0,uq.useCallback)(e=>AX(e,!m),[m]),f=(0,uq.useMemo)(()=>{let e=u.filter(e=>n(e.id));return""!==i?AK(i,e,10).filteredItems:e},[i,n,u]),h=(0,uq.useMemo)(()=>f.map(p),[p,f]),g=(0,uq.useMemo)(()=>h.find(e=>e.selected),[h]);return e.contentType===mA.RedactedItem?null:(0,uO.jsx)(Cf.b,{open:!0,onOpenChange:r,items:h,selected:g,filterValue:i,onFilterChange:s,onSelectedChange:e=>{if(e&&e.id!==g3){let t=d.filter(t=>t.id===e.id);c(t),l({nextValue:e.id??null,currentValue:o?o.id:null})}else c([]),l({nextValue:null,currentValue:o?o.id:null})},placeholderText:"Filter options",renderAnchor:({children:e,...t})=>(0,uO.jsx)("div",{...t,children:e}),anchorRef:a,...(0,mp.f)("move-to-single-select-field-menu")})}function Xv({model:e,groupByField:t,onOpenChange:r,anchorRef:a,isColumnVisible:n,onChangeField:l}){let[i,s]=(0,uq.useState)(""),o=e.getCustomField(t.id),d=gE(t.settings.configuration),c=d.find(e=>e.id===o?.id)??null,{activeOptions:u,completedOptions:m,filterChange:p,saveSelected:f}=Ad({model:e,columnModel:t,iteration:c}),h=(0,uq.useMemo)(()=>[...u,...m,{id:g3,label:`No ${t.name}`,selected:void 0===o,duration:0,startDate:"",title:`No ${t.name}`,titleHtml:`No ${t.name}`}],[u,m,t.name,o]),g=(0,uq.useMemo)(()=>{let e=""!==i?p(i,h,10).filteredItems:h;return e.filter(e=>n(e.id))},[p,i,n,h]),x=(0,uq.useMemo)(()=>g.map(Ai),[g]),y=(0,uq.useMemo)(()=>x.find(e=>e.selected),[x]);return e.contentType===mA.RedactedItem?null:(0,uO.jsx)(Cf.b,{open:!0,onOpenChange:r,items:x,selected:y,filterValue:i,onFilterChange:s,onSelectedChange:e=>{if(e&&e.id!==g3){let t=h.filter(t=>t.id===e.id);f(t),l({nextValue:e.id??null,currentValue:o?o.id:null})}else f([]),l({nextValue:null,currentValue:o?o.id:null})},placeholderText:"Filter options",renderAnchor:({children:e,...t})=>(0,uO.jsx)("div",{...t,children:e}),anchorRef:a,...(0,mp.f)("move-to-iteration-field-menu")})}let Xw=({url:e,label:t,testId:r})=>{let a=(0,uq.useCallback)(()=>{try{navigator.clipboard.writeText(e)}catch(e){}},[e]);return(0,uO.jsxs)(Ia.S.Item,{onSelect:a,...(0,mp.f)(r),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.TIy,{})}),t]})};try{(dt=Xp).displayName||(dt.displayName="RedactedAvatar")}catch{}try{(dr=Xf).displayName||(dr.displayName="Header")}catch{}try{(da=Xg).displayName||(da.displayName="StyledIconAndTitle")}catch{}try{(dn=Xy).displayName||(dn.displayName="IconAndTitle")}catch{}try{(dl=Xb).displayName||(dl.displayName="MoveToSingleSelectFieldMenu")}catch{}try{(di=Xv).displayName||(di.displayName="MoveToIterationFieldMenu")}catch{}try{(ds=Xw).displayName||(ds.displayName="CopyUrl")}catch{}let Xj={fontSize:1},XC=({item:e,disableFocus:t})=>{let r=e.columns,a=p3(r.Title),n=(0,uq.useRef)(null);IC(n);let l={"&:hover":{textDecoration:"underline",color:"accent.fg"}};switch(e.contentType){case mA.RedactedItem:return(0,uO.jsx)(jc,{ref:n,sx:Xj,children:a});case mA.DraftIssue:case mA.Issue:return(0,uO.jsx)(XS,{item:e,disableFocus:t,ref:n});case mA.PullRequest:return a?(0,uO.jsx)(w3.Z,{ref:n,href:e.content.url,target:"_blank",rel:"noreferrer",onClick:e=>e.stopPropagation(),sx:{code:{fontFamily:"fonts.mono",fontSize:0},color:"fg.default",textAlign:"left",fontSize:1,...l},tabIndex:t?-1:0,...(0,mp.f)("card-title-external-link"),children:(0,uO.jsx)(jc,{children:a})}):null}},Xk=(0,uq.memo)(XC);Xk.displayName="Title";let XS=(0,uq.forwardRef)(({item:e,disableFocus:t},r)=>{let a=e.getTitle(),{openProjectItemInPane:n}=bJ(),{openPane:l}=b1(),i="#";e.contentType===mA.Issue&&(i=e.getUrl());let s=(0,uq.useRef)(null),o=(0,uq.useCallback)(t=>{(t.metaKey||t.ctrlKey)&&e.contentType!==mA.DraftIssue||(s?.current===document.activeElement?n(e,()=>{s?.current&&s.current.focus()}):l(e),t.preventDefault())},[e,l,n]);return(0,uO.jsx)(w3.Z,{ref:s,role:"button",href:i,target:"_blank",rel:"noreferrer",onClick:o,tabIndex:t?-1:0,...(0,mp.f)("card-side-panel-trigger"),children:(0,uO.jsx)(jc,{ref:r,sx:{code:{fontFamily:"fonts.mono",fontSize:0},color:"fg.default","&:hover":{cursor:"pointer",color:"accent.fg",textDecoration:"underline"}},children:a})})});XS.displayName="SidePanelLink";try{(dd=XC).displayName||(dd.displayName="TitleFunc")}catch{}let XI="INPUT",XN=(0,uJ.ZP)(mF.Z)`
  &:hover {
    border-color: ${(0,uG.U2)("colors.border.default")};
  }

  body:not(.is-keyboard-moving-card) &:focus-within :not(.js-disable-context-menu).js-context-menu-trigger,
  body:not(.is-keyboard-moving-card) &:focus :not(.js-disable-context-menu).js-context-menu-trigger,
  &:hover :not(.js-disable-context-menu).js-context-menu-trigger {
    opacity: unset;
  }

  body:not(.is-keyboard-moving-card) &:focus,
  body:not(.is-keyboard-moving-card) &.suspended-focus,
  // Base styles overwrite box-shadow, so we need to add a more specific selector here
  // which overwrites these base styles: [role="button"]:focus:not(:focus-visible):not(.focus-visible)
  body:not(.is-keyboard-moving-card) &.board-view-column-card:focus,
  // show focus ring around selected focused card when keyboard moving card
  body.is-keyboard-moving-card &.selected:not(.show-sash):focus {
    outline: none;
    border-color: ${(0,uG.U2)("colors.accent.emphasis")};

    box-shadow: 0 0 0 1px ${(0,uG.U2)("colors.accent.emphasis")};
  }

  body.is-keyboard-moving-card & {
    outline: none;
  }

  &.selected:not(:focus, .suspended-focus),
  body.is-keyboard-moving-card &.selected {
    outline: none;
    border-color: ${(0,uG.U2)("colors.accent.emphasis")};
  }
`,X_=(0,uJ.ZP)(XN)`
  position: relative;

  &:after,
  &:before {
    content: '';
    display: none;
    position: absolute;
    width: 100%;
    background-color: ${(0,uG.U2)("colors.accent.emphasis")};
    height: ${(0,uG.U2)("space.1")};
    border: 0;
    border-radius: 6px;
    z-index: 12;
  }

  &.show-sash-card.show-sash-after {
    &:after {
      bottom: -7px;
      display: block;
    }
  }

  &.show-sash-card.show-sash-before {
    &:before {
      top: -7px;
      display: block;
    }
  }

  &.show-sash-card.show-sash-before:first-child {
    &:before {
      top: 0;
    }
  }
`,XT=(0,uq.memo)((0,uq.forwardRef)(function({item:e,index:t,column:r,columnIndex:a,onMouseDown:n,focusType:l,keyboardMovingCard:i,isDragDisabled:s,isVisible:o,size:d,...c},u){let m=(0,uq.useContext)(uJ.Ni),p=(0,uq.useRef)(null),f=(0,uq.useRef)(null);(0,CJ.z)(u,f);let{moveCard:h,moveCards:g,moveCardToPosition:x}=Yj(),{navigationDispatch:y,stateRef:b}=xo(),{expandColumnSelectionViaKeys:v,filteredSelectedCardIds:w,onCardClick:j,resetSelection:C,selectSingleCard:k,selectAllCycle:S,state:I}=YW(e,p,a),{clearClipboard:N,copyItems:_}=Z6(),{openPane:T}=b1(),{supportedItemTypes:R}=bJ(),{hasWritePermissions:E}=yI(),{findMemexItem:D}=IO(),{isSorted:P}=NO(),{postStats:A}=bM(),M=e.contentType===mA.RedactedItem,L=!M&&!!I[e.id],F=i?.cardIds.includes(e.id),Z=(i?.cardIds.length??0)>1,O=l===xl.Focus&&i&&i.cardIds.length<=1,B=l===xl.Focus?i?.sashSide:void 0,V=(0,uq.useCallback)(()=>{y(xm(a,e.id))},[a,e,y]),$=(0,uq.useCallback)(()=>{C(),y(xh(t,a,e.id,D))},[C,y,t,a,e.id,D]),{openRemoveConfirmationDialog:z}=D7(void 0,$,V),{openArchiveConfirmationDialog:U}=D5(void 0,$,V),W=(0,uq.useCallback)(t=>{let r=L&&w.length>1?w:[e.id],a=r.every(e=>{let t=D(e);return!!t&&DK(t.contentType)});a&&U(r,t)},[L,w,e.id,D,U]),H=(0,uq.useCallback)(t=>{let r=L&&w.length>1?w:[e.id];z(r,t)},[w,L,e.id,z]),G=(0,uq.useCallback)(t=>{E&&(x(e.id,r,"top"),A({name:go,ui:t,context:JSON.stringify({type:"top",fieldId:r,itemId:e.id})}))},[r,E,e.id,x,A]),q=(0,uq.useCallback)(t=>{E&&(x(e.id,r,"bottom"),A({name:go,ui:t,context:JSON.stringify({type:"bottom",fieldId:r,itemId:e.id})}))},[r,E,e.id,x,A]),K=(0,uq.useCallback)(()=>{let t=L&&w.length>1?w.reduce((e,t)=>{let r=D(t);return r&&e.push(r),e},[]):[e];_(t,{withHeaders:!0})},[L,w,e,D,_]),Q=o?"unset":`${d}px`,Y=(0,uq.useMemo)(()=>({...c.sx,borderRadius:2,borderColor:m.colors.border.muted,borderWidth:"1px",borderStyle:"solid",boxShadow:m.shadows.shadow.medium,height:Q,"&:hover":{cursor:M?"not-allowed":s?"default":"grab"}}),[c.sx,m.colors.border.muted,m.shadows.shadow.medium,Q,M,s]),X=(0,uq.useCallback)(()=>{if(i&&C(),0===w.length&&k(e.id),E){let t=w.length>1?w:[e.id],r=b.current?.focus?.type==="coordinate"?b.current.focus.details.y:void 0;r&&y(xp(r,a,t))}else y(xm(a,e.id))},[i,w,E,C,k,e.id,b,y,a]),J=(0,uq.useCallback)((t,n)=>{h(t,e.id,n,r),A({name:go,ui:gd.KeyboardShortcut,context:JSON.stringify({fieldId:r,itemId:t})}),C(),y(xm(a,t))},[r,a,e.id,h,y,C,A]),ee=(0,uq.useCallback)(e=>{let t=e.map(e=>D(e)).filter(fm);g(t,r),A({name:go,ui:gd.KeyboardShortcut,context:JSON.stringify({fieldId:r,itemIds:t.map(e=>e.id)})}),i&&y(xm(a,i.returnFocus.cardId))},[r,a,D,i,g,y,A]);(0,uq.useEffect)(()=>{l===xl.Focus&&f.current&&(f.current.focus(),f.current.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}))},[l,f]);let et=(0,uq.useCallback)(t=>{let r=b.current?.focus?.type==="coordinate";if(t.shiftKey||fh(t)&&r)return t.preventDefault();if(i&&C(),l!==xl.Edit){let r=XR(f,t);r?(t.stopPropagation(),y(xm(a,e.id,xl.Suspended))):(y(xm(a,e.id)),n&&n(t))}},[b,i,l,C,y,a,e.id,n]),er=(0,uq.useCallback)(t=>{let r=t.target;if(l===xl.Focus&&r.nodeName!==XI){let r=Or(IR.Z,t);if(r.action){if(Oe(t),(P||Z)&&i&&r.action.navigation.y)return;y(r.action),i||C()}else if((r.keyAsShortcut===k_.DELETE||r.keyAsShortcut===k_.BACKSPACE)&&E&&!M)H(h1),Oe(t);else if(r.keyAsShortcut===k_.ARCHIVE)W(h1),Oe(t);else if(r.keyAsShortcut===k_.SHIFT_ARROW_UP||r.keyAsShortcut===k_.SHIFT_ARROW_DOWN){i&&V();let e=r.keyAsShortcut===k_.SHIFT_ARROW_UP?On.Up:On.Down;v(e),Oe(t)}else if(r.keyAsShortcut===k_.ENTER&&i){if(1===i.cardIds.length){let e=i.cardIds[0];e&&J(e,"before"===B?"top":"bottom")}else ee(i.cardIds)}else r.keyAsShortcut!==k_.SHIFT_SPACE&&r.keyAsShortcut!==k_.ENTER||M?r.keyAsShortcut===k_.SPACE&&R.has(e.contentType)?T(e):r.keyAsShortcut===k_.META_A?(S(),Oe(t)):r.keyAsShortcut===k_.ESCAPE?(N(),C(),i&&y(xm(i.returnFocus.columnIndex,i.returnFocus.cardId))):r.keyAsShortcut===k_.META_C&&E&&!M?K():r.keyAsShortcut===k_.TAB&&(C(),i?y(xm(i.returnFocus.columnIndex,i.returnFocus.cardId)):y(xy())):X()}},[l,E,M,i,R,e,P,Z,y,C,H,W,v,V,B,J,ee,X,T,S,N,K]),ea=(0,uq.useCallback)(()=>{xw(b.current,e.id,a)||document.activeElement!==f.current||y(xm(a,e.id))},[b,a,y,e.id]),en=(0,uq.useCallback)(e=>{if(!e.relatedTarget){C(),y(xy());return}l===xl.Suspended&&f.current&&(f.current.contains(document.activeElement)||document.activeElement===document.body)&&e.preventDefault()},[l,C,y]),el=(0,uq.useMemo)(()=>O&&B&&!P?Object.fromEntries(WJ(B,"card",!0).map(e=>[e,!0])):{},[P,B,O]);return(0,uO.jsx)(X_,{...(0,mp.f)("board-view-column-card"),sx:{...Y,flexDirection:"column",flexShrink:0,mb:2,overflow:"visible"},ref:f,"data-board-card-id":e.id,"data-hovercard-subject-tag":y3(e),onMouseDown:et,onClick:j,onFocus:ea,onBlur:en,onKeyDown:er,className:F7()({...el,"keyboard-moving-card":F,"suspended-focus":l===xl.Suspended,selected:L,"board-view-column-card":!0}),...c,"data-test-card-is-selected":L||void 0,"data-test-keyboard-moving-card":F||void 0,"data-test-card-is-focused":l===xl.Focus||void 0,children:o?(0,uO.jsx)(XM,{item:e,column:r,archiveItem:W,removeItem:H,moveItemToTop:G,moveItemToBottom:q,contextMenuRef:p}):null})}));function XR(e,t){if(e.current){let r=t.target.closest("[data-suspend-card-focus]");return null!=r&&e.current.contains(r)}return!1}function XE({horizontalGroupId:e,...t}){return e?{horizontalGroupId:e,...t}:t}XT.displayName="Card";let XD=(0,uq.memo)(function(e){let t=(0,uq.useRef)(null),{isVisible:r,size:a}=ja({ref:t}),{item:n,column:l,columnIndex:i,isDragDisabled:s}=e,{attributes:o,listeners:d,setNodeRef:c}=(0,GK.O1)({id:n.id,data:XE({type:"card",item:n,ref:t,column:l,columnIndex:i,horizontalGroupId:e.horizontalGroupId}),disabled:s||!r}),{setNodeRef:u}=(0,GK.Zj)({id:n.id,data:XE({type:"card",item:n,ref:t,column:l,columnIndex:i,horizontalGroupId:e.horizontalGroupId}),disabled:!r});return u(t.current),c(t.current),(0,uO.jsx)(XT,{size:a,ref:t,...e,isVisible:r,...o,...d})});function XP({item:e}){return(0,uO.jsx)(X_,{inert:"inert",sx:{opacity:.5,borderRadius:2,borderColor:"border.muted",borderWidth:"1px",borderStyle:"solid",boxShadow:"shadow.medium"},...(0,mp.f)("drag-overlay"),children:(0,uO.jsx)(XM,{item:e,column:"",contextMenuRef:(0,uq.useRef)(null),removeItem:IR.Z,isDragging:!0})})}let XA=new Set([mP.Labels,mP.Milestone,mP.LinkedPullRequests,mP.Repository,mP.Reviewers,mP.Status,mP.Tracks,mP.TrackedBy]),XM=(0,uq.memo)(function({item:e,column:t,archiveItem:r,removeItem:a,moveItemToTop:n,moveItemToBottom:l,contextMenuRef:i,isDragging:s=!1}){let{groupedByColumnId:o}=NL(),{visibleFields:d}=ZB(),{state:c}=YW(),u=d.filter(e=>e.id!==o&&(e.userDefined||XA.has(e.id))),m=u.length>0,p=e.contentType===mA.RedactedItem,f=!p&&!!c[e.id],h=e.columns,g=(0,uq.useId)();return(0,uO.jsxs)(mF.Z,{sx:{borderRadius:2,borderWidth:"0",pt:2,pb:"12px",lineHeight:1.3,backgroundColor:e=>`${f?e.colors.accent.subtle:e.colors.canvas.overlay}`,borderStyle:"solid",borderColor:e=>`${e.colors.border.default}`,color:e=>`${p?e.colors.fg.muted:e.colors.fg.default}`},children:[(0,uO.jsxs)(mF.Z,{sx:{px:"12px"},children:[(0,uO.jsx)(Xf,{...(0,mp.f)("board-card-header"),item:e,column:t,columnData:h,mb:1,archiveItem:r,removeItem:a,moveItemToTop:n,moveItemToBottom:l,contextMenuRef:i,disableContextMenu:s}),(0,uO.jsx)(Xk,{item:e,disableFocus:s})]}),m&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mF.Z,{...(0,mp.f)("card-labels"),as:"ul","aria-label":"Fields","aria-describedby":g,sx:{flexWrap:"wrap",display:"flex",gap:1,m:0,p:0,mt:2,mb:0,px:"12px",listStyle:"none"},children:u.map(t=>(0,uO.jsx)(Xl,{field:t,item:e,columnData:h},t.id))}),(0,uO.jsx)(kr,{id:g,children:"Click a value to filter the view"})]})]})}),XL=(0,uJ.ZP)(mF.Z)`
  background-color: ${(0,uG.U2)("colors.accent.emphasis")};
  height: ${(0,uG.U2)("space.1")};
  border: 0;
  border-radius: 6px;
  z-index: 12;
  outline: none;
`,XF=(0,uq.memo)((0,uq.forwardRef)(function({keyboardMovingCard:e,column:t,columnIndex:r,focusType:a,...n},l){let i=(0,uq.useRef)(null);(0,CJ.z)(l,i);let{moveCard:s,moveCards:o}=Yj(),{navigationDispatch:d}=xo(),{resetSelection:c}=YW(void 0,void 0,r),{isSorted:u}=NO(),{findMemexItem:m}=IO(),{postStats:p}=bM(),f=(0,uq.useCallback)(()=>{if(1===e.cardIds.length){let r=e.cardIds[0];if(r){let a="after"===e.sashSide?"bottom":"top";s(r,void 0,a,t)}}else{let r=e.cardIds.map(e=>m(e)).filter(fm);o(r,t)}p({name:go,ui:gd.KeyboardShortcut,context:JSON.stringify({fieldId:t,...e.cardIds.length>1?{itemIds:e.cardIds}:{itemId:e.cardIds[0]}})}),d(xm(r,e.returnFocus.cardId))},[e.cardIds,e.returnFocus.cardId,e.sashSide,d,r,s,t,o,m,p]);(0,uq.useEffect)(()=>{i.current?.focus()},[i]);let h=(0,uq.useCallback)(t=>{let r=t.target;if(a===xl.Focus&&r.nodeName!==XI){let r=Or(d,t);r.action?Oe(t):r.keyAsShortcut===k_.ENTER?f():(r.keyAsShortcut===k_.ESCAPE||r.keyAsShortcut===k_.TAB)&&(c(),d(xm(e.returnFocus.columnIndex,e.returnFocus.cardId)))}},[a,d,f,c,e.returnFocus.columnIndex,e.returnFocus.cardId]),g=e.cardIds.length>1;return(0,uO.jsx)(XL,{...(0,mp.f)("board-view-keyboard-moving-card-placeholder"),ref:i,"data-board-card-id":-1,tabIndex:0,onKeyDown:h,className:F7()({"suspended-focus":a===xl.Suspended}),...n,"data-test-card-is-focused":!0,sx:{opacity:u||g?0:1}})}));try{(dc=XN).displayName||(dc.displayName="CardBase")}catch{}try{(du=X_).displayName||(du.displayName="CardBaseWithSash")}catch{}try{(dm=XD).displayName||(dm.displayName="DraggableCard")}catch{}try{(dp=XP).displayName||(dp.displayName="DragOverlayCard")}catch{}try{(df=XM).displayName||(df.displayName="CardInternalContent")}catch{}try{(dh=XL).displayName||(dh.displayName="StyledKeyboardMovingCardPlaceholder")}catch{}try{(dg=XF).displayName||(dg.displayName="KeyboardMovingCardPlaceholder")}catch{}try{(dx=XF).displayName||(dx.displayName="KeyboardMovingCardPlaceholder")}catch{}let XZ=(0,uJ.ZP)(mF.Z)`
  margin-right: ${(0,uG.U2)("space.2")};
  width: ${350}px;
  min-width: ${350}px;
  display: flex;
  flex-direction: column;
  overflow-y: hidden;
  border-radius: ${(0,uG.U2)("radii.2")};
  background-color: ${(0,uG.U2)("colors.canvas.inset")};

  &.only {
    border-radius: ${(0,uG.U2)("radii.2")} ${(0,uG.U2)("radii.2")} 0 0;
    border-bottom-color: transparent;
  }

  &.hidden:not(.last-group) {
    border-radius: 0;
    border-top-color: transparent;
    border-bottom-color: transparent;
  }

  &.hidden.last-group {
    border-radius: 0 0 ${(0,uG.U2)("radii.2")} ${(0,uG.U2)("radii.2")};
    border-top-color: transparent;
  }

  &:after,
  &:before {
    content: '';
    display: none;
    position: absolute;
    top: ${(0,uG.U2)("space.2")};
    width: ${(0,uG.U2)("space.1")};
    background-color: ${(0,uG.U2)("colors.accent.emphasis")};
    height: calc(100% - 16px);
    border: 0;
    border-radius: 6px;
    z-index: 12;
  }

  body.is-dragging &.show-sash-column.show-sash-after {
    &:after {
      margin-left: ${"352px"};
      display: block;
    }
  }

  /*The :not selector removes the 1st column (No Status) from the selection. */
  body.is-dragging &.show-sash-column.show-sash-before:not([${W$}='${g3}']) {
    &:before {
      margin-left: -6px;
      display: block;
    }
  }
`,XO={boxShadow:e=>`0 0 0 1px ${e.colors.accent.emphasis}`,borderColor:"accent.emphasis"},XB=(0,uq.memo)((0,uq.forwardRef)(({headerContent:e,testingName:t,showOutline:r=!1,children:a,sx:n,...l},i)=>{let s=r?{...n,...XO}:n;return(0,uO.jsxs)(XZ,{ref:i,"data-board-column":t,"data-board-column-has-outline":r,...(0,mp.f)("board-view-column"),sx:s,...l,children:[(0,uO.jsx)(mF.Z,{sx:{flexDirection:"column",flexShrink:0,display:"flex"},children:e}),a]})}));XB.displayName="ColumnFrame";try{(dy=XZ).displayName||(dy.displayName="StyledFrameWithSash")}catch{}let XV={loaded:"loaded",missing:"missing",loading:"loading"};function X$(){let[e,t]=(0,uq.useState)(!1),{missingRequiredColumnData:r}=bP();return((0,uq.useEffect)(()=>{if(!r)return;let e=!0,a=window.setTimeout(()=>{e&&t(!0)},300);return()=>{e=!1,window.clearTimeout(a)}},[r]),(0,uq.useEffect)(()=>{!r&&e&&t(!1)},[e,r]),e&&r)?{loadingState:XV.loading}:r?{loadingState:XV.missing}:{loadingState:XV.loaded}}let Xz=()=>(0,uO.jsx)(mF.Z,{sx:{content:"",display:"block",width:"100%",backgroundColor:"accent.emphasis",height:k3("space.1"),border:"0",borderRadius:2,zIndex:12}});try{(db=Xz).displayName||(db.displayName="EmptyColumnSash")}catch{}let XU=e=>{let{currentView:t,viewStateDispatch:r}=bP(),{groupedByColumn:a}=NL(),n=t?.number,l=a?.databaseId,i=(0,uq.useCallback)(async a=>{"number"==typeof n&&"number"==typeof l&&t&&(await M4({viewNumber:n,view:{...ht(t.serverViewState,["id","number","createdAt","updatedAt","priority"]),layoutSettings:{...t.serverViewState.layoutSettings,board:{...t.serverViewState.layoutSettings.board,columnLimits:{...t.serverViewState.layoutSettings.board?.columnLimits,[l]:{...t.serverViewState.layoutSettings.board?.columnLimits?.[l],[e.id]:a}}}}}}),r({type:kc.UpdateBoardColumnLimit,limit:a,columnDatabaseId:l,optionId:e.id,viewNumber:n}))},[n,l,t,r,e.id]),{perform:s}=b6({request:i});return{updateColumnLimit:s,columnLimit:a?t?.localViewStateDeserialized.layoutSettings.board?.columnLimits?.[a.databaseId]?.[e.id]:void 0}},XW=e=>{"Enter"===e.key&&fh(e)&&e.currentTarget.requestSubmit()},XH=({initialColumnLimit:e,onSave:t,onCancel:r})=>{let[a,n]=(0,uq.useState)(!1),[l,i]=(0,uq.useState)(e??""),s=(0,uq.useRef)(null),o=e=>(e.preventDefault(),t(""===l?void 0:l)),d=e=>{e.preventDefault(),n(!0)};(0,uq.useEffect)(()=>s.current?.focus(),[]);let c=(0,uq.useRef)(null);(0,A7.t)({containerRef:c,onClickOutside:e=>e.preventDefault()});let u=(0,uq.useId)();return(0,uO.jsx)(RV.V,{title:`${e&&e>0?fE.edit:fE.set} column limit`,onClose:r,role:"dialog","aria-modal":"true",width:"medium",ref:c,footerButtons:[{type:"button",onClick:r,content:"Cancel"},{form:u,type:"submit",content:"Save",buttonType:"primary"}],children:(0,uO.jsx)(mF.Z,{id:u,as:"form",onSubmit:o,onInvalid:d,onKeyDown:XW,children:(0,uO.jsx)(XG,{ref:s,value:l,onChange:i,invalidSubmission:a})})})},XG=(0,uq.forwardRef)(function({value:e,onChange:t,invalidSubmission:r},a){let n=Xq(e),l=r&&void 0!==n;return(0,uO.jsxs)(Cc.Z,{children:[(0,uO.jsx)(Cc.Z.Label,{children:"Column limit"}),(0,uO.jsx)(k4.Z,{ref:a,value:e,onChange:e=>t(Number.isNaN(e.target.valueAsNumber)?"":e.target.valueAsNumber),onKeyDown:e=>{["e","E","+","-","."].includes(e.key)&&e.preventDefault()},block:!0,name:"Column limit",validationStatus:l?"error":void 0,"aria-invalid":l?"true":void 0,type:"number",min:0,maxLength:9,...(0,mp.f)("column-limit-text-input")}),l&&(0,uO.jsx)(Cc.Z.Validation,{variant:"error",children:n}),(0,uO.jsx)(Cc.Z.Caption,{children:"A limit on the number of items in a column"})]})});function Xq(e){if(""!==e){if(Number.isNaN(e)||!Number.isInteger(e))return fE.fieldMustBeAnInteger;if(e<0)return fE.fieldMustBePositiveOrZero}}try{(dv=XH).displayName||(dv.displayName="ColumnLimitModal")}catch{}try{(dw=XG).displayName||(dw.displayName="ColumnLimitInput")}catch{}let XK="24px",XQ={fontSize:2,fontWeight:"bold"};function XY(e,t){return e?{boxShadow:"primer.shadow.focus",borderRadius:"2px"}:t?{"&:focus-within":{boxShadow:"primary.shadow.focus",borderRadius:"2"},"&:hover:not(:focus-within)":{boxShadow:e=>`0 0 0 3px ${e.colors.border.default}`,borderRadius:"2"}}:{}}let XX=(0,uq.memo)(({option:e,isEditing:t,setIsEditing:r,onNameChange:a,isUserEditable:n,initialFocus:l,placeholder:i})=>{let[s,o]=Eh(e.name),d=(0,uq.useRef)(null),c=(0,uq.useRef)(null),u=(0,uq.useRef)(t);(0,uq.useEffect)(()=>{t&&c.current?.focus()},[t]);let m=(0,uq.useRef)(l);(0,uq.useEffect)(()=>{m.current&&d.current?.focus()},[]),(0,uq.useEffect)(()=>{!t&&u.current&&d.current?.focus(),u.current=t},[t]);let p=C6(),f=(0,uq.useCallback)(e=>{o(e.currentTarget.value)},[o]),h=(0,uq.useCallback)(()=>{n&&(o(e.name),r(!0))},[n,e.name,r,o]),g=(0,uq.useCallback)(()=>{o(e.name),r(!1)},[e.name,r,o]),x=(0,uq.useCallback)(()=>{a(s),g()},[s,a,g]),y=(0,uq.useCallback)(e=>{switch(kE(e)){case k_.ESCAPE:t&&g();return;case k_.ENTER:t?x():h();return}},[t,h,g,x]),b=Eg(y),v=XY(t,n),w=ER();return(0,uO.jsx)(mF.Z,{ref:d,onClick:h,onKeyDown:t?void 0:y,tabIndex:n?0:-1,...(0,mp.f)("board-view-column-title-text"),sx:{...v,height:XK,my:1,overflow:"hidden",mr:2},children:t?(0,uO.jsx)(E_.Z,{...w,children:(0,uO.jsx)(k9,{as:Sa,ref:c,onChange:f,onBlur:x,onMouseDown:p,...b,type:"text",value:s,placeholder:i,sx:{height:XK},...XQ})}):(0,uO.jsx)(jc,{role:n?"button":void 0,sx:{lineHeight:XK,cursor:"default",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},...XQ,children:e.nameHtml})})});XX.displayName="EditableColumnName";let XJ=e=>void 0!==e.color&&void 0!==e.description&&void 0!==e.descriptionHtml,X0={borderRadius:2,transition:"transform 75ms",border:"1px solid",borderColor:"border.muted"},X1=(0,uq.memo)(function({option:e,items:t,index:r,shouldScrollToBottom:a,initialNameFocus:n,onDelete:l,onUpdateDetails:i,isDraggable:s,isUserEditable:o,isCurrentIteration:d,iterationDateRange:c,hidden:u,horizontalGroupId:m,headerType:p="visible",isLastGroup:f}){let{openArchiveConfirmationDialog:h}=D5(),{openRemoveConfirmationDialog:g}=D7(),{currentView:x}=bP(),y=x?.number,b=(0,uq.useRef)(null),v=(0,uq.useRef)(null),w=(0,GK.Cj)(),j=null!==w.active,[C,k]=(0,uq.useState)(!1),[S,I]=(0,uq.useState)(!1),[N,_]=(0,uq.useState)(!1),{enableOmnibar:T}=Y1(),{state:R}=xs(),{hasWritePermissions:E}=yI(),{resetSelection:D,filteredSelectedCards:P}=YW(),{insertFilter:A}=kp(),{groupedByColumn:M}=NL(),L=(0,uq.useMemo)(()=>t.filter(e=>e.contentType!==mA.RedactedItem),[t]),{postStats:F}=bM(),{isSorted:Z}=NO(),{columnLimit:O,updateColumnLimit:B}=XU(e),V=w.over?.data.current,$=w.active?.data.current,z=YQ(V)&&V.option.id===e.id&&m===V.horizontalGroupId,U=YK(V)&&V.column===e.id&&m===V.horizontalGroupId,W=z||U,H=W&&0===t.length&&!Z&&P.length<=1,G=(0,uq.useMemo)(()=>({id:e.id}),[e.id]);(0,uq.useEffect)(()=>{a&&v.current?.scrollTo({top:v.current?.scrollHeight,behavior:"smooth"})},[a,t]);let q=Ht({dragAxis:"horizontal",dragID:e.id,dragType:"column",dragIndex:r,dragRef:b,disable:!o||!s,metadata:G}),{setNodeRef:K}=(0,GK.Zj)({id:m?`${m}-${e.id}`:e.id,data:{option:e,type:"column",ref:b,index:r,horizontalGroupId:m}});K(b.current),Fi({active:YK($)&&U,scrollRef:v,strength:50,deadZoneRatioY:.5});let Q=R.focus?.type==="coordinate"?R.focus:null,Y=Q?.details.x===r&&!!Q?.details.meta.keyboardMovingCard,X=W||Y,J=X&&(P.length>1||(Q?.details.meta.keyboardMovingCard?.cardIds.length??0)>1),ee=(0,uq.useCallback)(()=>{l(e.id)},[l,e.id]),et=(0,uq.useCallback)(()=>{if(M?.name){let{dataType:t,databaseId:r,name:a}=M;A(`-${wb(M.name)}`,e.name),F({name:"board_column_menu_hide",context:JSON.stringify({dataType:t,databaseId:r,name:a})})}},[M,e.name,A,F]),er=(0,uq.useCallback)(()=>{if(0===t.length)return;let r=t.map(e=>e.id);h(r,h2,fE.archiveBoardColumnConfirmationTitle,fE.archiveBoardColumnConfirmationMessage({itemsCount:t.length,columnName:e.name}))},[h,e,t]),ea=(0,uq.useCallback)(()=>{if(0===t.length)return;let r=t.map(e=>e.id);g(r,h2,{title:fE.removeBoardColumnConfirmationTitle,content:fE.removeBoardColumnConfirmationMessage({itemsCount:t.length,columnName:e.name})})},[g,e.name,t]),en=(0,uq.useCallback)(()=>{k(!0)},[]),el=(0,uq.useCallback)(t=>{let r={id:e.id,name:t},a={id:e.id,name:e.nameHtml};i(r,a)},[e.id,i,e.nameHtml]),ei=async e=>{await B(e),_(!1)},es=t=>{i(t,e),I(!1)},eo=(0,uq.useCallback)(()=>{T({columnId:e.id,horizontalGroupId:m})},[T,e.id,m]),ed=(0,uq.useCallback)(e=>{e.stopPropagation(),eo()},[eo]),ec=(0,uq.useCallback)(()=>{D()},[D]),eu=!!xc(R.focus)&&R.focus.details.columnId===e.id&&m===R.focus.details.horizontalGroupId;(0,uq.useLayoutEffect)(()=>{Rp(v.current)},[y]);let{loadingState:em}=X$(),{hideItemsCount:ep,getAggregatesForItems:ef}=LG(),eh=(0,uq.useMemo)(()=>ef(t),[t,ef]),eg=g2(M)?"singleSelectDetails":"name",ex=F7()(p,{"last-group":f});return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(XB,{id:e.id,testingName:e.name,showOutline:Z&&X||J,sx:X0,ref:b,...q.props,onClick:ec,hidden:u,className:ex,headerContent:"hidden"===p?null:(0,uO.jsxs)(mF.Z,{sx:{bg:"canvas.inset",alignItems:"flex-start",justifyContent:"space-between",maxWidth:"350px",pt:2,pb:1,px:3,display:"flex"},...q.handle.props,children:[(0,uO.jsxs)(mF.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"90%",flexWrap:"wrap"},children:[e.color&&(0,uO.jsx)(CU,{color:e.color,sx:{mr:2}}),(0,uO.jsx)(XX,{option:e,onNameChange:el,isUserEditable:o&&"name"===eg,initialFocus:n,isEditing:C,setIsEditing:k}),em===XV.loaded&&(0,uO.jsx)(qG,{aggregates:eh,counterSx:{mr:2,mt:1,mb:1},hideItemsCount:ep,columnLimit:O,itemsCount:t.length}),d&&(0,uO.jsx)(At,{sx:{ml:2}})]}),(0,uO.jsx)(mF.Z,{sx:{backgroundColor:"canvas.inset",alignItems:"center",display:"flex"},children:em===XV.loading?(0,uO.jsx)(w4.Z,{size:"small","aria-label":"Loading data required to properly display view",...(0,mp.f)("view-loading-indicator")}):em===XV.missing?null:o&&(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsx)(kF.h,{variant:"invisible",icon:mM.Ui8,"aria-label":"Column context menu",...(0,mp.f)("column-context-menu-trigger"),sx:{color:"fg.muted",width:"24px",height:"24px",padding:0,pt:1}})}),(0,uO.jsx)(In.P.Overlay,{align:"end",children:(0,uO.jsxs)(Ia.S,{children:[(0,uO.jsxs)(Ia.S.Group,{title:"Item actions",children:[(0,uO.jsxs)(Ia.S.Item,{disabled:0===L.length,onSelect:er,...(0,mp.f)("column-context-menu-archive-cards"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.rKT,{})}),"Archive all"]}),(0,uO.jsxs)(Ia.S.Item,{disabled:0===L.length,onSelect:ea,variant:"danger",...(0,mp.f)("column-context-menu-delete-cards"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete all"]})]}),(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsxs)(Ia.S.Group,{title:"Column actions",children:["name"===eg&&(0,uO.jsxs)(Ia.S.Item,{onSelect:en,...(0,mp.f)("column-context-menu-rename"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.vdY,{})}),"Rename"]}),(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>_(!0),...(0,mp.f)("column-context-menu-set-column-limit"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.yEv,{})}),O&&O>0?fE.edit:fE.set," column limit"]}),"singleSelectDetails"===eg&&(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>I(!0),...(0,mp.f)("column-context-menu-edit-option"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.vdY,{})}),"Edit details"]}),(0,uO.jsxs)(Ia.S.Item,{onSelect:et,...(0,mp.f)("column-context-menu-hide-column"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.LAO,{})}),"Hide from view"]}),(0,uO.jsxs)(Ia.S.Item,{variant:"danger",onSelect:ee,...(0,mp.f)("column-context-menu-delete"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete"]})]})]})})]})})]}),children:["hidden"!==p&&c&&(0,uO.jsx)(mF.Z,{sx:{bg:"canvas.inset",maxWidth:"350px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",mt:-1,pb:2,px:3,color:"fg.muted",flexShrink:0},...(0,mp.f)(`${e.id}-date-range-board-header`),children:c}),"hidden"!==p&&(0,uO.jsx)(jc,{sx:{mt:-1,pb:2,px:3,maxWidth:"350px",color:"fg.muted"},children:e.descriptionHtml??""}),(0,uO.jsxs)(mF.Z,{ref:v,className:"column-drop-zone",...(0,mp.f)(`drop-zone-${e.name}`),[WU]:"card",sx:{flexDirection:"column",backgroundColor:"canvas.inset",flexGrow:1,overflowY:"auto",position:"relative",px:2,py:1,display:"flex",scrollPaddingBottom:"7px"},children:[H&&(0,uO.jsx)(Xz,{}),(0,uO.jsx)(jr,{rootRef:null,sizeEstimate:125,disableHide:j,children:"only"!==p&&t.length?t.map((t,a)=>{let n=Q?.details.x===r&&Q?.details.y===t.id?Q.focusType:void 0,l=!E||t.contentType===mA.RedactedItem;return(0,uO.jsx)(XD,{item:t,index:a,column:e.id,columnIndex:r,focusType:n,keyboardMovingCard:Q?.details.meta.keyboardMovingCard,isDragDisabled:l,horizontalGroupId:m},t.id)}):Q?.details.x===r&&Q?.details.meta.keyboardMovingCard?(0,uO.jsx)(XF,{column:e.id,columnIndex:r,focusType:Q.focusType,keyboardMovingCard:Q.details.meta.keyboardMovingCard}):void 0}),"only"!==p&&(0,uO.jsx)(X2,{isVisible:Boolean(eu)})]}),"only"!==p&&E&&(0,uO.jsx)(jI.z,{onClick:ed,variant:"invisible",sx:{color:"fg.muted",display:"flex",py:2,'& [data-component="buttonContent"]':{flex:0}},block:!0,size:"large",leadingIcon:mM.pOD,...(0,mp.f)("board-view-add-card-button"),children:"Add item"})]}),N&&(0,uO.jsx)(XH,{initialColumnLimit:O,onCancel:()=>_(!1),onSave:ei}),S&&XJ(e)&&(0,uO.jsx)(Ms,{initialOption:e,onCancel:()=>I(!1),onSave:t=>es({...e,...t})})]})}),X2=({isVisible:e})=>{let t=(0,uq.useRef)(null);return(0,uq.useEffect)(()=>{e&&t.current?.scrollIntoView({behavior:"smooth"})},[e]),e?(0,uO.jsx)(X3,{ref:t,sx:{flexShrink:0,height:"8px",bg:"accent.emphasis",border:"0",borderRadius:"6px",mb:"12px"},...(0,mp.f)("board-view-add-card-indicator")}):null},X5=uJ.F4`
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  `,X3=(0,uJ.ZP)(mF.Z)`
  animation: ${X5} 0.2s ease-out;
`;try{(dj=X1).displayName||(dj.displayName="Column")}catch{}try{(dC=X2).displayName||(dC.displayName="IsAddingItemsIndicator")}catch{}try{(dk=X3).displayName||(dk.displayName="StyledPlaceholder")}catch{}let X4=(e,t)=>{switch(e.dataType){case mD.Iteration:return gR(e).find(e=>e.id===t)??void 0;case mD.SingleSelect:return e.settings.options?.find(e=>e.id===t)??void 0}},X6=(e,t)=>{let r=X4(e,t);return r?"title"in r?r.title:r.name:void 0},X7=()=>{let{updateIterationConfiguration:e}=HT(),t=(0,uq.useCallback)(async(t,r)=>{if(t.dataType!==mD.Iteration)return;let a=X4(t,r.id);if(!a||!t.settings.configuration)return;let n=HF(t.settings.configuration,a);await e(t,n)},[e]);return{destroyColumnIteration:t}},X8=()=>{let{destroyColumnOption:e}=A4(),{destroyColumnIteration:t}=X7(),r=(0,uq.useCallback)(async(r,a)=>g2(r)?e(r,a):g1(r)?t(r,a):void 0,[t,e]);return{destroyVerticalGroup:r}},X9=(e,t)=>{let{workflowsUsingColumnOption:r}=w2(),{destroyVerticalGroup:a}=X8(),n=(0,uq.useCallback)((e,t)=>r(e,t),[r]),l=Hf(),i=(0,uq.useCallback)(async r=>{if(!t)return;let i=X6(t,r),s=e[r]?.length??0;if(!i||!t)return;let o=n(t.databaseId,r).length;await l({field:t,values:[i],affectedItems:s,affectedWorkflows:o})&&a(t,{id:r})},[t,e,n,l,a]);return{deleteColumn:i}},Je=()=>{let{updateIterationConfiguration:e}=HT(),t=(0,uq.useCallback)(async(t,r)=>{if(t.dataType!==mD.Iteration)return;let a=gR(t),n=a.find(e=>e.id===r.id);if(!n||!t.settings.configuration)return;n.title=r.name;let{iterations:l,completedIterations:i}=t.settings.configuration;await e(t,{iterations:l,completedIterations:i})},[e]);return{updateColumnIterationTitle:t}},Jt=()=>{let{updateColumnOption:e}=A4(),{updateColumnIterationTitle:t}=Je(),r=(0,uq.useCallback)(async(r,a,n=!1)=>g2(r)?e(r,a,n):g1(r)?t(r,a):void 0,[t,e]);return{updateVerticalGroup:r}},Jr=e=>{let{updateVerticalGroup:t}=Jt(),r=(0,uq.useCallback)(async r=>{e&&await t(e,r)},[e,t]),a=(0,uq.useCallback)(r=>{e&&t(e,r,!0)},[e,t]),{perform:n}=b6({request:r,rollback:a});return{updateColumnDetails:n}},Ja=[];function Jn({groupByFieldOptions:e,itemsGroupedByField:t,groupByField:r,columnShouldScroll:a,lastNewColumnNameRef:n,horizontalGroupId:l,headerType:i="visible",hideColumn:s,isLastGroup:o}){let{hasWritePermissions:d}=yI(),{deleteColumn:c}=X9(t,r),{updateColumnDetails:u}=Jr(r),m=(0,uq.useCallback)(e=>{if(!r||r.dataType!==mD.Iteration)return!1;let t=r.settings.configuration.iterations.find(t=>t.id===e.id);return!!t&&gj(new Date,t)},[r]),p=(0,uq.useMemo)(()=>{let e=g1(r)?r.settings.configuration:null;if(!e)return new Map;let t=gE(e),a=new Map;for(let e of t)a.set(e.id,g_(e));return a},[r]);return(0,uO.jsx)(uO.Fragment,{children:e.map((e,f)=>{let h=t[e.id]??Ja,g=d&&e.id!==g3,x=r?.dataType!==mD.Iteration;return(0,uO.jsx)(X1,{hidden:s(e),option:e,items:h,index:f,onDelete:c,onUpdateDetails:u,shouldScrollToBottom:a===e.id,initialNameFocus:n.current===e.name,isUserEditable:g,isDraggable:x,isCurrentIteration:m(e),iterationDateRange:p.get(e.id)??"",horizontalGroupId:l,headerType:i,isLastGroup:o},e.id)})})}try{(dS=Jn).displayName||(dS.displayName="Columns")}catch{}let Jl=e=>{let{addColumnOption:t}=A4(),r=(0,uq.useCallback)(async r=>{e?.dataType===mD.SingleSelect&&await t(e,r)},[t,e]),{perform:a}=b6({request:r});return{addColumn:a}},Ji=e=>{let{moveColumnOption:t}=A4(),r=(0,uq.useCallback)(async(r,a,n)=>{if(e?.dataType!==mD.SingleSelect||r===a)return;let l=e.settings.options.findIndex(e=>e.id===r)+1,i=e.settings.options.findIndex(e=>e.id===a)+1,s="before"===n?i:i+1;l<i&&s--,await t(e,{id:r,position:Math.max(s,1)})},[e,t]);return{moveColumn:r}},Js=e=>{let t=(0,uq.createContext)({slicerItems:null}),r=()=>{let e=(0,uq.useContext)(t);return e},a=N_(e,{useDistinctAssigneesGrouping:!0}),n=(0,uq.memo)(function({children:e,filteredItems:r}){let n=Bl(),{items:l}=bt(),i=(0,uq.useMemo)(()=>{if(!n.sliceField||n.sliceField.dataType===mD.TrackedBy)return[];let e=a[n.sliceField.dataType];return(0,u0.Z)(e,`No grouping configuration for column ${n.sliceField}`),_r(r,n.sliceField,e.getGroupingMetadata,e.getAllGroupMetadata,void 0,l)},[l,r,n.sliceField]),s=(0,uq.useMemo)(()=>({slicerItems:i}),[i]);return(0,uO.jsx)(t.Provider,{value:s,children:e})});return{context:t,SlicerItemsProvider:n,useSlicerItems:r}};try{(dI=SlicerItemsProvider).displayName||(dI.displayName="SlicerItemsProvider")}catch{}let{SlicerItemsProvider:Jo,useSlicerItems:Jd}=Js(e=>e.columns),Jc=(0,uq.memo)(function(){return(0,uO.jsx)(_m,{children:(0,uO.jsx)(Jb,{})})}),Ju=[],Jm={flex:"auto",height:"0",px:[3,4,5],py:2,overflowY:"hidden",position:"relative",display:"flex"},Jp={...Jm,flexDirection:"column",overflowY:"auto",py:0,pb:2},Jf={display:"flex",position:"sticky",top:0,zIndex:1},Jh={position:"absolute"},Jg={display:"flex",backgroundColor:"canvas.default"},Jx={isolation:"isolate",height:"fit-content",width:"fit-content"},Jy={selected:{}},Jb=(0,uq.memo)(function(){let{currentView:e}=bP(),{setGroupedBy:t}=NL(),{itemsGroupedByField:r,groupByFieldOptions:a,compatibleColumns:n}=_p(),{filteredItems:l}=Ns({applyTransientFilter:"exclude"}),i=(0,uq.useCallback)(()=>{for(let e=0;e<a.length;e++){let t=a[e],n=t&&r[t.id]?.[0]?.id;if(n)return xm(e,n).focus}return null},[a,r]),[s,o]=(0,uq.useState)(()=>({focus:i(),previousFocus:null})),d=e?.number,c=(0,uq.useRef)(d);(0,uq.useEffect)(()=>{c.current!==d&&(c.current=d,o({focus:i(),previousFocus:null}))},[d,i]),mm(()=>{if(!e)return null;let r=[];for(let[a,l]of Object.entries(n))r.push([a,`Column field by: ${l.name}`,"column.field",()=>t(e.number,l)]);return["c","Column field by...",r]},[n,e,t]);let u=m1({cardGrid:a.map(e=>({id:e.id,items:r[e.id]??Ju}))}),{showTemplateDialog:m}=Ln();return(0,uO.jsx)(Jo,{filteredItems:l,children:(0,uO.jsx)(W9,{children:(0,uO.jsx)(Yz,{initialState:Jy,metaRef:u,children:(0,uO.jsx)(xd,{initialState:s,metaRef:u,children:(0,uO.jsxs)(qt,{children:[(0,uO.jsx)(Y2,{}),(0,uO.jsx)(Jv,{omnibarInitialFocus:null==s.focus&&!m})]})})})})})}),Jv=(0,uq.memo)(function({omnibarInitialFocus:e}){let{itemsGroupedByField:t,groupByField:r,groupByFieldId:a,groupByFieldOptions:n,horizontalGroups:l}=_p(),{sliceField:i}=Bl(),{slicerItems:s}=Jd(),{addColumn:o}=Jl(r),{moveColumn:d}=Ji(r),{updateIterationConfiguration:c}=HT(),u=(0,uq.useRef)(null),[m,p]=(0,uq.useState)(!1),f=(0,uq.useRef)(null),h=(0,uq.useRef)(!1),g=(0,uq.useRef)(null),{navigationDispatch:x,stateRef:y}=xo(),{resetSelection:b,filteredSelectedCards:v}=YW(),{openPane:w}=b1(),{missingRequiredColumnData:j}=bP(),C=(0,uq.useCallback)(({dragMetadata:e,dropMetadata:r,side:a})=>{if(!e||!r)return;let n=e.id,l=r.id;if(l===g3){let e=Object.keys(t);l=gc(e[1]),a="before"}d(n,l,a||"before")},[t,d]),[k,S]=(0,uq.useState)(null),I=(0,uq.useMemo)(()=>v.length>1?v:k?[k]:Ju,[k,v]),N=Hr({dropID:"board",dropType:"column",dropRef:u,onDrop:C});Fi({active:!!k,scrollRef:u,strength:50,deadZoneRatioX:.5,maxBufferX:350});let _=(0,uq.useCallback)(e=>{g.current=e.name,o(e),p(!1)},[o]),T=(0,uq.useCallback)(()=>{h.current=!0,p(!1)},[]);(0,uq.useLayoutEffect)(()=>{h.current&&(h.current=!1,f.current?.focus())});let R=(0,uq.useRef)(null),{enableOmnibar:E,disableOmnibar:D}=Y1(),{horizontalScrollbarSize:P}=GJ(u),A=e=>{if(!e)return;let r=t[e];if(r)return r[r.length-1]?.id},M=(0,uq.useCallback)(e=>{switch(kE(e)){case k_.CTRL_SPACE:R.current?.isInputElement(e.target)?D():E();break;case k_.ESCAPE:R.current?.isInputElement(e.target)&&D()}},[D,E]),L=(0,uq.useCallback)(()=>{y.current&&xc(y.current.focus)&&D()},[D,y]),F=(0,uq.useCallback)(e=>{if(e.defaultPrevented)return;let t=e.relatedTarget,r=e.currentTarget.contains(t);r||R.current?.isInputElement(t)||(x(xy()),GY()||b())},[b,x]);(0,uq.useEffect)(()=>(addEventListener("keydown",M),()=>{removeEventListener("keydown",M)}),[M]);let{columnShouldScroll:Z,onNewItem:O}=Jj(),{hasWritePermissions:B}=yI(),V=(0,uq.useCallback)(async()=>{if(!r)return;let e=r.dataType;if(e===mD.Iteration){let{configuration:e}=r.settings;if(!e)return;let t=r.name,a=HM(e,t);await c(r,a);return}p(!0)},[r,c]);Fd("is-dragging",!!k);let{hideItemsCount:$,getAggregatesForItems:z}=LG(),{setShowAddFieldModal:U,showAddFieldModal:W}=G2(),{anchorRef:H}=G4(),G=(0,uq.useCallback)(e=>{let r=t[e.id]??Ju;return 0===r.length&&e.id===g3&&!j},[t,j]),q=(0,uq.useRef)(null);return(0,uO.jsxs)(uO.Fragment,{children:[i&&(0,uO.jsx)(Yh,{slicerItems:s,openSidePanel:w}),(0,uO.jsx)(Yw,{groupByFieldId:a,children:(0,uO.jsxs)(YY,{setDraggingItem:S,children:[(0,uO.jsxs)(mF.Z,{sx:{flexDirection:"column",flex:"auto",overflowY:"hidden",display:"flex",position:"relative"},"data-hpc":!0,children:[(0,uO.jsxs)(mF.Z,{...(0,mp.f)("board-view"),ref:u,onPointerDown:L,onBlur:F,...N.props,sx:l?Jp:Jm,children:[l?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(mF.Z,{sx:Jf,children:[(0,uO.jsx)(mF.Z,{ref:q,sx:Jg,children:(0,uO.jsx)(Jn,{groupByFieldOptions:n,itemsGroupedByField:t,groupByField:r,columnShouldScroll:Z,lastNewColumnNameRef:g,headerType:"only",hideColumn:G})}),B&&!m&&(0,uO.jsx)("div",{children:(0,uO.jsx)(Yg,{ref:f,onClick:V,sx:Jh})})]}),(0,uO.jsx)(mF.Z,{sx:Jx,...(0,mp.f)("swimlanes-container"),children:l.map((e,t)=>{let a=z(e.rows);return(0,uO.jsxs)(uq.Fragment,{children:[(0,uO.jsx)(G9,{sticky:!0,isCollapsed:e.isCollapsed,metadata:e,numberOfRows:e.rows.length,swimlanesHeaderRef:q,children:(0,uO.jsx)(Ka,{sourceObject:e.sourceObject,rowCount:e.rows.length,aggregates:a,hideItemsCount:$})}),e.isCollapsed?null:(0,uO.jsx)(mF.Z,{sx:Jg,children:(0,uO.jsx)(Jn,{groupByFieldOptions:n,itemsGroupedByField:e.itemsGroupedByField,groupByField:r,columnShouldScroll:Z,lastNewColumnNameRef:g,headerType:"hidden",hideColumn:G,horizontalGroupId:e.value,isLastGroup:l.length-1===t})})]},e.value)})})]}):(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Jn,{groupByFieldOptions:n,itemsGroupedByField:t,groupByField:r,columnShouldScroll:Z,lastNewColumnNameRef:g,hideColumn:G}),B&&!m&&(0,uO.jsx)(Yg,{ref:f,onClick:V})]}),m?(0,uO.jsx)(Ms,{initialOption:AH,onSave:_,onCancel:T}):null]}),B&&(0,uO.jsx)(Jw,{omnibarRef:R,horizontalScrollbarSize:P,getPreviousItemId:A,groupByFieldId:a,onNewItem:O,omnibarInitialFocus:e}),W&&(0,uO.jsx)(GZ,{isOpen:W,setOpen:U,anchorRef:H,onSave:IR.Z})]}),(0,uO.jsx)(GK.y9,{dropAnimation:null,children:I.map(e=>(0,uO.jsx)(XP,{item:e},e.id))})]})})]})}),Jw=(0,uq.memo)(function({omnibarRef:e,horizontalScrollbarSize:t,onNewItem:r,omnibarInitialFocus:a,getPreviousItemId:n,groupByFieldId:l}){let i=(0,uq.useRef)(null),s=(0,uq.useRef)(null),{state:o,navigationDispatch:d}=xs(),{enableOmnibar:c,disableOmnibar:u}=Y1(),m=xc(o.focus);(0,uq.useLayoutEffect)(()=>{m?(e.current?.focus(),i.current&&(i.current.scrollTop=0)):e.current?.blur()},[u,m,c,e]),(0,uq.useEffect)(()=>{a&&c({columnId:g3})},[a,c]);let p=(0,uq.useMemo)(()=>{let e=xc(o.focus)?o.focus.details.columnId:null;if(null==e)return null;let t=null==e||e===g3?void 0:{dataType:mD.SingleSelect,memexProjectColumnId:l,value:{id:e}},r=n(e);return{setField:t,previousItemId:r}},[o.focus,n,l]),f=(0,uq.useCallback)(e=>{let t=Or(d,e);t.action?Ot(e,t.keyAsShortcut):t.keyAsShortcut===k_.ESCAPE&&(d(xf()),Oe(e))},[d]);return(0,uO.jsx)(qW,{ref:i,horizontalScrollbarSize:t,children:(0,uO.jsx)(qU,{ref:s,horizontalScrollbarSize:t,disableBlur:!0,isFixed:!0,sx:{position:"static",bottom:"unset",transition:"opacity 0.2s ease-in-out",display:m?"block":"none",opacity:`${m?"1":"0"}`},children:(0,uO.jsx)(qF,{ref:e,newItemAttributes:p??void 0,onAddItem:r,onKeyDown:f,isFixed:!0,defaultPlaceholder:qh})})})}),Jj=()=>{let e=(0,uq.useRef)(null);(0,uq.useEffect)(()=>{e.current=null});let t=(0,uq.useCallback)(t=>{t&&t.setField&&t.setField.dataType===mD.SingleSelect&&t.setField.value?e.current=t.setField.value.id:e.current=g3},[]);return{columnShouldScroll:e.current,onNewItem:t}};try{(dN=Jc).displayName||(dN.displayName="Board")}catch{}try{(d_=Jb).displayName||(d_.displayName="InnerBoard")}catch{}try{(dT=Jv).displayName||(dT.displayName="BoardInner")}catch{}try{(dR=Jw).displayName||(dR.displayName="BoardOmnibar")}catch{}function JC(e,{autoFocus:t}){if(!t)return null;let r=e.flatRows.find(e=>!e.isGrouped),a=e.visibleColumns.find(e=>!FV(e));return a&&r?x0(r.id,a.id).focus:null}function Jk({currentViewNumber:e,setInitialFocalPoint:t,table:r,autoFocus:a,missingRequiredColumnData:n}){let l=(0,uq.useRef)(n),i=(0,uq.useRef)(e);(0,uq.useEffect)(()=>{if(n)return;let s=l.current&&!n,o=i.current===e;(!o||s)&&(s&&document.activeElement?.id===Si||t({focus:JC(r,{autoFocus:a}),previousFocus:null}))},[a,n,e,t,r]),(0,uq.useEffect)(()=>{l.current=n,i.current=e})}let JS=(e,t)=>{let{currentView:r,missingRequiredColumnData:a}=bP(),[n,l]=(0,uq.useState)(()=>{let r=JC(e,{autoFocus:t});return r?{focus:r,previousFocus:null}:{focus:xQ().focus,previousFocus:null}});return Jk({currentViewNumber:r?.number,missingRequiredColumnData:a,setInitialFocalPoint:l,table:e,autoFocus:t}),n},JI=(0,uq.createContext)(null),JN=(0,uq.memo)(function({children:e}){let{showInput:t}=IN(),{navigationDispatch:r}=x3(),a=(0,uq.useCallback)(()=>{r(x2({focusType:xl.Suspended})),t(()=>{r(x2({focusType:xl.Focus}))})},[r,t]);return(0,uO.jsx)(JI.Provider,{value:(0,uq.useMemo)(()=>({setShowFindInProject:a}),[a]),children:e})});function J_(){let e=(0,uq.useContext)(JI);if(!e)throw Error("useTableFindInProject must be used within a TableFindInProjectContext");return e}try{(dE=JN).displayName||(dE.displayName="TableFindInProjectProvider")}catch{}function JT(e,t,r){let a=(0,uq.useRef)(!1),n=(0,uq.useRef)(t);(0,uq.useLayoutEffect)(()=>{a.current&&t!==n.current&&(a.current=!1,e.current?.scrollTo({left:r,top:e.current?.scrollHeight,behavior:"smooth"})),n.current=t});let l=(0,uq.useCallback)(()=>{a.current=!0},[]);return{onNewItem:l}}var JR=r(79521);function JE(e,t,r){return[...e].sort((e,a)=>{for(let n=0;n<t.length;n+=1){let l=t[n],i=!1===r[n]||"desc"===r[n],s=l?.(e,a)??0;if(0!==s)return i?-s:s}return e.index-a.index})}let JD=()=>({total:0,groups:{}});JD();let JP=(e,t,r)=>{},JA=(e,t,r)=>{(0,uq.useEffect)(()=>{JP(e,t,r)})},JM=JA.bind(null,"CellRenderer"),JL=JA.bind(null,"CellEditor"),JF=(0,uq.forwardRef)(({...e},t)=>(0,uO.jsx)(jI.z,{...e,sx:{border:"none",boxShadow:"none",minWidth:"16px",p:0,ml:"auto",bg:"transparent",":hover":{bg:"transparent",boxShadow:"none"}},"aria-label":"Dropdown button",tabIndex:-1,ref:t,children:(0,uO.jsx)(mL.Z,{icon:mM.AS7,className:"table-row-dropdown-caret",size:"small",sx:{verticalAlign:"middle",color:"fg.muted",opacity:.3,".is-focused &":{opacity:1}}})}));JF.displayName="DropdownCaret";let JZ=(0,uq.forwardRef)(({children:e,isDisabled:t},r)=>(0,uO.jsxs)(F4,{sx:{paddingRight:"4px",alignItems:"center",flexGrow:1,display:"flex",justifyContent:"space-between"},disallowSelection:!0,children:[e,t?null:(0,uO.jsx)(JF,{ref:r,sx:{mx:1}})]}));JZ.displayName="DropdownCell";var JO=r(8679),JB=r.n(JO);function JV(e,{nullWhenRedacted:t=!0}={}){let r=e.displayName||e.name||"withCellRenderer(anonymous)",a=r=>t&&r.model.contentType===mA.RedactedItem?null:(0,uO.jsx)(e,{...r});return JB()(a,e),a.displayName=`withCellRenderer(${r})`,(0,uq.memo)(a)}let J$=JV(function({currentValue:e,model:t,dropdownRef:r,isDisabled:a}){return(JM("AssigneesRenderer",t.id),VM(e))?(0,uO.jsxs)(F4,{children:[(0,uO.jsx)(Kt,{...(0,mp.f)("placeholder")}),(0,uO.jsx)(q9,{ml:2,minWidth:30,maxWidth:50})]}):VF(e)?(0,uO.jsx)(JZ,{ref:r,isDisabled:a,children:(0,uO.jsx)(PE,{users:e.value,isDisabled:a})}):t.contentType===mA.DraftIssue?(0,uO.jsx)(JZ,{ref:r,isDisabled:a}):null});J$.displayName="AssigneesRenderer";let Jz={width:"small",onMouseDown:e=>{e.stopPropagation()}};function JU({contentType:e},t){if(e!==mA.DraftIssue)return!1;let r=pB(t);return!!r&&!bc(r)}function JW({model:e,columnId:t,rowId:r,renderButton:a,height:n,maxHeight:l,...i}){let{postStats:s}=bM(),{navigationDispatch:o}=x3(),d=x6(),c=(0,uq.useRef)(null),u=(0,uq.useCallback)(e=>{let t=e=>{e.stopPropagation(),e.preventDefault(),e.nativeEvent.detail<=1&&o(x2({focusType:xl.Focus}))};return c.current=e.ref.current,(0,uO.jsx)("summary",{...e,onClick:t,style:{height:36,outline:"none",listStyle:"none"},children:a()})},[a,o]);(0,uq.useEffect)(()=>{o(x2({focusType:xl.Suspended}))},[e.contentType,o]);let m=(0,uq.useCallback)((e,r,a)=>{if(!e)switch(r){case"selection":case"escape":case"click-outside":{let e={focusType:xl.Focus},t=a&&"key"in a&&"Enter"===a.key;return"selection"===r&&t&&(e.y=xi.Next),o(x2(e))}case"convert-confirmation":if(t===mP.Repository)return o(x2({y:xi.Next,focusType:xl.Focus}));return;default:return}},[t,o]),p=(0,uq.useCallback)(e=>{if(e.target instanceof Element){let t=e.target.closest("summary");if(t===c.current)return}m(!1,"click-outside")},[m]),f=PH({...i,model:e,initialFilterValue:d,onOpenChange:m,columnId:t,renderAnchor:u});if(JU(e,t)){let r=()=>s({name:hN,ui:"cell-editor",memexProjectItemId:e.id});return(0,uO.jsx)(MI,{renderAnchor:u,isOpen:!0,showPrompt:t!==mP.Repository,item:e,onOpenChange:m,onSuccess:r})}return(0,uO.jsx)(Cf.b,{...f,overlayProps:{...Jz,height:n,maxHeight:l,sx:{...Jz.sx,animationDuration:"80ms"},onClickOutside:p,...(0,mp.f)(`TableCellEditor{row: ${r}, column: ${t}}`)}})}JW.displayName="SelectPanelEditor";let JH=({currentValue:e,model:t,columnId:r,...a})=>{JL("AssigneesEditor",t.id);let{fetchOptions:n,saveSelected:l}=PS({model:t}),i=(0,uq.useMemo)(()=>{let t=VF(e)?e.value:[];return t},[e]),s=(0,uq.useCallback)(()=>(0,uO.jsx)(J$,{currentValue:e,model:t}),[e,t]);return(0,uO.jsx)(JW,{model:t,placeholderText:"Search people",selected:i,fetchOptions:n,filterOptions:Pf,getSortAttribute:PC,convertOptionToItem:Pk,saveSelected:l,renderButton:s,columnId:r,groupMetadata:[{groupId:"assigned"},{groupId:"suggestions",header:{title:"Suggestions",variant:"filled"}}],...a})},JG=(0,uq.memo)(JH);JG.displayName="AssigneesEditor";try{(dO=JH).displayName||(dO.displayName="AssigneesEditorFunc")}catch{}let Jq=JV(function({currentValue:e,model:t,isDisabled:r}){JM("DateRenderer",t.id);let a=(0,uq.useRef)(null);if(IC(a),VM(e))return(0,uO.jsx)(F4,{children:(0,uO.jsx)(q9,{minWidth:80,maxWidth:100,...(0,mp.f)("placeholder")})});if(VL(e))return null;let n=p1(e.value.value);return(0,uO.jsx)(F4,{sx:{justifyContent:"flex-start"},children:(0,uO.jsx)(PN,{ref:a,dangerousHtml:n,isDisabled:r})})});try{(dB=Jq).displayName||(dB.displayName="DateRenderer")}catch{}let JK=({labels:e,dropdownRef:t,isDisabled:r})=>(0,uO.jsx)(JZ,{ref:t,isDisabled:r,children:(0,uO.jsx)(mF.Z,{sx:{overflow:"hidden",display:"flex",gap:1},children:e?.map(e=>(0,uO.jsx)(AC,{label:e},e.id))})});try{(dV=JK).displayName||(dV.displayName="LabelGroup")}catch{}let JQ=JV(function({currentValue:e,model:t,dropdownRef:r,isDisabled:a}){JM("LabelsRenderer",t.id);let n=VF(e)?e.value:void 0;return VM(e)?(0,uO.jsx)(F4,{children:(0,uO.jsx)(Ke,{minWidth:30,maxWidth:60,...(0,mp.f)("placeholder")})}):t.contentType===mA.DraftIssue?(0,uO.jsx)(JZ,{ref:r,isDisabled:a}):(0,uO.jsx)(JK,{labels:n,dropdownRef:r,isDisabled:a})});JQ.displayName="LabelsRenderer";let JY=(0,uq.forwardRef)((e,t)=>{let r=(0,uq.useRef)(null);(0,CJ.z)(t,r);let a=e.isDisabled?{color:"fg.muted",...e.sx}:e.sx;return(0,uO.jsx)(w3.Z,{target:"_blank",rel:"noreferrer",tabIndex:-1,...e,sx:{textAlign:"left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",...a},ref:r})});JY.displayName="LinkCell";let JX=(0,uq.memo)(function({milestone:e,isDisabled:t}){let r=(0,uq.useRef)(null);return IC(r),(0,uO.jsx)(mF.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",height:"20px",display:"flex"},children:e&&(0,uO.jsx)(JY,{ref:r,href:e.url,muted:!0,isDisabled:t,children:e.title})})});try{(d$=JX).displayName||(d$.displayName="Milestone")}catch{}let JJ=JV(function({currentValue:e,model:t,dropdownRef:r,isDisabled:a}){if(JM("MilestoneRenderer",t.id),VM(e))return(0,uO.jsx)(F4,{children:(0,uO.jsx)(q9,{minWidth:50,maxWidth:100,...(0,mp.f)("placeholder")})});if(t.contentType===mA.DraftIssue)return(0,uO.jsx)(JZ,{ref:r,isDisabled:a});let n=VF(e)?e.value:void 0;return(0,uO.jsx)(JZ,{ref:r,isDisabled:a,children:(0,uO.jsx)(JX,{milestone:n,isDisabled:a})})});JJ.displayName="MilestoneRenderer";let J0=JV(function({currentValue:e,model:t,isDisabled:r}){JM("NumberRenderer",t.id);let a=(0,uq.useRef)(null);return(IC(a),VM(e))?(0,uO.jsx)(F4,{children:(0,uO.jsx)(q9,{minWidth:20,maxWidth:30,...(0,mp.f)("placeholder")})}):VL(e)?null:(0,uO.jsx)(F4,{sx:{justifyContent:"flex-end"},children:(0,uO.jsx)(PN,{ref:a,dangerousHtml:e.value,isDisabled:r})})});J0.displayName="NumberRenderer";let J1=JV(function({currentValue:e,model:t,dropdownRef:r,isDisabled:a}){JM("RepositoryRenderer",t.id);let n=(0,uq.useRef)(null);if(IC(n),VM(e))return(0,uO.jsx)(F4,{children:(0,uO.jsx)(q9,{minWidth:50,maxWidth:120,...(0,mp.f)("placeholder")})});if(VF(e)){let t=e.value;return(0,uO.jsx)(F4,{children:(0,uO.jsxs)(JY,{ref:n,href:t.url,muted:!0,isDisabled:a,children:[(0,uO.jsx)(Cv,{repository:t}),(0,uO.jsx)(mO.Z,{sx:{ml:1},children:t.nameWithOwner})]})})}return t.contentType===mA.DraftIssue?(0,uO.jsx)(JZ,{ref:r,isDisabled:a}):null});J1.displayName="RepositoryRenderer";let J2=JV(function({currentValue:e,model:t,columnId:r,dropdownRef:a,options:n,isDisabled:l}){JM("SingleSelectRenderer",t.id);let i=(0,uq.useRef)(null);IC(i);let s=pB(r);if(!s)return null;let o=VF(e)?e.value.id:null,d=n.find(e=>e.id===o);return VM(e)?(0,uO.jsx)(F4,{children:(0,uO.jsx)(Ke,{minWidth:40,maxWidth:80,...(0,mp.f)("placeholder")})}):d?(0,uO.jsx)(JZ,{ref:a,isDisabled:l,sx:{overflow:"hidden",display:"flex"},children:(0,uO.jsx)(mF.Z,{sx:{overflow:"hidden",display:"flex"},ref:i,children:(0,uO.jsx)(Mr,{option:d})})}):(0,uO.jsx)(JZ,{ref:a,isDisabled:l})});J2.displayName="SingleSelectRenderer";let J5=JV(function({currentValue:e,model:t,isDisabled:r}){JM("TextRenderer",t.id);let a=(0,uq.useRef)(null);return(IC(a),VM(e))?(0,uO.jsx)(F4,{children:(0,uO.jsx)(q9,{minWidth:80,maxWidth:200,...(0,mp.f)("placeholder")})}):VL(e)?null:(0,uO.jsx)(F4,{children:(0,uO.jsx)(PN,{ref:a,dangerousHtml:e.value.html,isDisabled:r})})});J5.displayName="TextRenderer";let J3=JV(function({currentValue:e,model:t,isDisabled:r}){JM("TitleRenderer",t.id);let a=VF(e)?e.value:void 0,n=p4(a),{openPane:l}=b0(),{memex_new_issue_viewer:i}=g9(),s=(0,vZ.useRelayEnvironment)(),o=(0,uq.useCallback)(()=>{if(i&&t.contentType===mA.Issue){let e=t.getItemIdentifier();if(!e)return;let{number:r,owner:a,repo:n}=e;(0,Dq.tU)(s,a,n,r)}},[s,i,t]);return(0,uO.jsxs)(F4,{children:[(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,uO.jsx)(VZ,{titleColumn:e})}),(0,uO.jsx)(VV,{model:t,isDisabled:r,currentValue:e,openPane:l,onHover:o}),pG(n)&&(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,ml:2,display:"flex"},children:(0,uO.jsxs)(mO.Z,{sx:{color:"fg.muted"},children:[" #",n]})})]})},{nullWhenRedacted:!1});J3.displayName="TitleRenderer";let J4=JV(function({currentValue:e,model:t}){JM("TracksRenderer",t.id);let{openPane:r}=b0(),a=(0,uq.useRef)(null);IC(a);let n=(0,uq.useRef)(null),[l,i]=(0,uq.useState)(!1),s=qu(a,n,l,[e],{xAlign:"center",yAlign:"top"}),o=(0,uq.useCallback)(()=>{t.contentType===mA.Issue&&r(t)},[t,r]);if(VM(e))return(0,uO.jsx)(F4,{children:(0,uO.jsx)(Ke,{minWidth:30,maxWidth:60,...(0,mp.f)("placeholder")})});if(VL(e)||t.contentType===mA.DraftIssue||t.contentType===mA.PullRequest||0===e.value.total)return null;let d=`${t.id}-tracks-completion-value`;return(0,uO.jsxs)(F4,{children:[(0,uO.jsx)(q5.h,{direction:"n",open:l,"aria-label":fE.progressPercentCount(Math.floor(e.value.completed/e.value.total*100)),ref:n,id:d,"aria-live":"polite",portalProps:{onMount:s.adjustPickerPosition}}),(0,uO.jsx)(DS,{progress:e.value,"aria-describedby":d,as:"button",onClick:o,tabIndex:-1,ref:a,onPointerEnter:()=>i(!0),onPointerLeave:()=>i(!1)})]})});J4.displayName="TracksRenderer";let J6=({currentValue:e,model:t,...r})=>{let{fetchOptions:a,saveSelected:n}=Av({model:t});JL("LabelsEditor",t.id);let l=(0,uq.useMemo)(()=>{let t=VF(e)?e.value:[];return t.map(e=>({...e,selected:!0}))},[e]),i=(0,uq.useCallback)(()=>(0,uO.jsx)(JQ,{currentValue:e,model:t}),[e,t]);return(0,uO.jsx)(JW,{model:t,placeholderText:"Search labels",selected:l,fetchOptions:a,filterOptions:Ax,getSortAttribute:Ay,convertOptionToItem:Ab,saveSelected:n,renderButton:i,...r})},J7=(0,uq.memo)(J6);try{(dz=J6).displayName||(dz.displayName="LabelsEditorFunc")}catch{}try{(dU=J7).displayName||(dU.displayName="LabelsEditor")}catch{}let J8=({currentValue:e,model:t,...r})=>{JL("MilestoneEditor",t.id);let{fetchOptions:a,saveSelected:n}=AA({model:t}),l=(0,uq.useMemo)(()=>{let t=VF(e)?[e.value]:[];return t},[e]),i=(0,uq.useCallback)(()=>(0,uO.jsx)(JJ,{currentValue:e,model:t}),[e,t]);return(0,uO.jsx)(JW,{model:t,placeholderText:"Search milestones",blankslateText:"No milestones to show.",selected:l,fetchOptions:a,filterOptions:AR,getSortAttribute:AD,convertOptionToItem:AP,groupMetadata:[{groupId:"open",header:{title:"Open",variant:"filled"}},{groupId:"closed",header:{title:"Closed",variant:"filled"}}],saveSelected:n,renderButton:i,...r,singleSelect:!0,height:"auto",maxHeight:"large"})},J9=(0,uq.memo)(J8);try{(dW=J8).displayName||(dW.displayName="MilestoneEditorFunc")}catch{}try{(dH=J9).displayName||(dH.displayName="MilestoneEditor")}catch{}function eee(e,t){let[r,a]=(0,uq.useState)(!1);(0,uq.useLayoutEffect)(()=>{!r&&e.current&&(a(!0),t&&t(),e.current.focus())},[r,e,t])}let eet=({submitValue:e,cleanupFn:t,defaultValue:r})=>{let a=(0,uq.useRef)(r),n=(0,uq.useCallback)(e=>{a.current=e.target.value},[a]),l=(0,uq.useCallback)(()=>{if(null!==a.current){let t=e(a.current.toString());return a.current=null,t}},[a,e]),i=(0,uq.useCallback)(()=>{a.current=null},[]);return(0,uq.useLayoutEffect)(()=>function(){l(),t&&t()},[]),{onChange:n,protectedSubmitValue:l,cancelSaveOnBlur:i}},eer=({model:e,align:t,columnId:r,defaultValue:a,rowId:n,onUpdate:l,validationFn:i,type:s,emojiPickerDisabled:o=!1})=>{let d=(0,uq.useRef)(null),{postStats:c}=bM(),{navigationDispatch:u}=x3();eee(d);let m=(0,uq.useRef)(!0),{setValidationMessage:p,clearValidationMessage:f,validationMessageId:h}=_x(n,r),g=(0,uq.useCallback)(t=>{let n=a||"number"==typeof a&&0!==a;if(c({name:n?hQ:hY,memexProjectColumnId:r,memexProjectItemId:e.content.id}),!i)return l(t);let s=!1;return m.current&&(s=l(t)),s&&f(),s},[f,r,a,e.content.id,l,c,i]),{cancelSaveOnBlur:x,protectedSubmitValue:y,onChange:b}=eet({submitValue:g,cleanupFn:f,defaultValue:a}),v=(0,uq.useCallback)(e=>{if(b(e),!i){m.current=!0,f();return}let t=i(e.target.value);t?(m.current=!1,p(t,n,r)):(m.current=!0,f())},[b,i,p,n,r,f]),w=(0,uq.useCallback)(e=>{switch(kE(e)){case k_.ENTER:y()&&u(x2({y:xi.Next,focusType:xl.Focus})),e.stopPropagation(),e.preventDefault();return;case k_.SHIFT_TAB:y()&&u(x2({x:xi.Previous,focusType:xl.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case k_.TAB:y()&&u(x2({x:xi.Next,focusType:xl.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case k_.ESCAPE:x(),u(x2({focusType:xl.Focus})),e.stopPropagation(),e.preventDefault();return}},[x,u,y]),j=Eg(w),C="right"===t?{justifyContent:"flex-end"}:void 0,k="right"===t?"right":"left",S=(0,uO.jsx)(Sa,{...j,onChange:v,defaultValue:a,ref:d,"aria-describedby":h,"aria-invalid":!m.current,type:s,sx:{textAlign:k,fontSize:1}}),I=ER();return(0,uO.jsx)(F4,{editing:!0,sx:C,children:o?(0,uO.jsx)(mO.Z,{sx:{width:"100%"},children:S}):(0,uO.jsx)(E_.Z,{...I,sx:{width:"100%"},children:S})})};try{(dG=eer).displayName||(dG.displayName="TextCellEditor")}catch{}let eea=(0,uq.memo)(function(e){let{currentValue:t,model:r,columnId:a,rowId:n,replaceContents:l}=e,i=x6(),s=VF(t)?t.value:null,{updateItem:o}=Py(),d=l||!s?i:s.value,c=(0,uq.useCallback)(e=>{let t;let n=s?.value;if(""!==e){let r=pV(e);Number.isNaN(r)?null!=n&&(t={value:n}):t={value:r}}return o(r,{dataType:mD.Number,memexProjectColumnId:a,value:t}),!0},[a,r,s?.value,o]);return(0,uO.jsx)(eer,{model:r,columnId:a,rowId:n,defaultValue:d,onUpdate:c,validationFn:AO,align:"right",emojiPickerDisabled:!0})});eea.displayName="NumberEditor";let een=(0,uq.memo)(function(e){let{currentValue:t,model:r,rowId:a,columnId:n}=e,l=x6(),i=VF(t)?t.value.raw:"",{updateItem:s}=Py(),o=e.replaceContents||!i?l:i,d=(0,uq.useCallback)(e=>(s(r,{dataType:mD.Text,memexProjectColumnId:n,value:RQ(e)}),!0),[n,r,s]);return(0,uO.jsx)(eer,{model:r,columnId:n,rowId:a,defaultValue:o,onUpdate:d,validationFn:AB})});function eel(e){return VF(e)?p5(e.value):""}een.displayName="TextEditor";let eei=(0,uq.memo)(function(e){let{model:t,currentValue:r}=e,a=t.columns,{navigationDispatch:n}=x3(),l=x6(),i=(0,uq.useRef)(null),s=(0,uq.useRef)(!0),{updateItem:o}=Py(),{postStats:d}=bM(),{setColumnValue:c}=IL();eee(i);let{addToast:u}=m7(),m=e.replaceContents?l:eel(r),p=(0,uq.useCallback)(async e=>{if(i.current){let r=RQ(i.current.value);await o(t,{dataType:mD.Title,value:{...e,title:{raw:r,html:r}}})}},[t,o]),f=(0,uq.useCallback)(async e=>{c(t,{memexProjectColumnId:mP.Title,value:e})},[t,c]),{perform:h}=b6({request:p,rollback:f}),g=(0,uq.useCallback)(e=>{let r=a.Title;return!!r&&r.contentType!==mA.RedactedItem&&(""===e?u({message:fE.titleCannotBeBlank,type:mB.warning}):(h(r.value,r.value),d({name:hV,ui:"title field",memexProjectItemId:t.content.id})),!0)},[u,a,t.content.id,h,d]),{cancelSaveOnBlur:x,protectedSubmitValue:y,onChange:b}=eet({submitValue:g,defaultValue:m}),v=(0,uq.useCallback)(e=>{switch(kE(e)){case k_.ENTER:y()&&n(x2({y:xi.Next,focusType:xl.Focus})),e.stopPropagation(),e.preventDefault();return;case k_.SHIFT_TAB:y()&&n(x2({x:xi.Previous,focusType:xl.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case k_.TAB:y()&&n(x2({x:xi.Next,focusType:xl.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case k_.ESCAPE:x(),n(x2({focusType:xl.Focus})),e.stopPropagation(),e.preventDefault();return}},[n,x,y]),w=(0,uq.useCallback)(e=>{b(e),s.current=!0},[b]),j=Eg(v),C={onChange:w,...j},k=ER(),S=a.Title;if(!S)return null;switch(S.contentType){case mA.DraftIssue:return(0,uO.jsxs)(F4,{editing:!0,children:[(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,uO.jsx)(mL.Z,{icon:mM.aNF,sx:{color:"fg.muted"},"aria-label":"Draft issue"})}),(0,uO.jsx)(E_.Z,{...k,sx:{width:"100%"},children:(0,uO.jsx)(Sa,{sx:{color:"fg.muted",fontSize:1},...C,defaultValue:m,ref:i})})]});case mA.Issue:case mA.PullRequest:return(0,uO.jsxs)(F4,{editing:!0,children:[(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,uO.jsx)(jg,{title:S})}),(0,uO.jsx)(E_.Z,{...k,sx:{width:"100%"},children:(0,uO.jsx)(Sa,{sx:{color:"fg.default",fontSize:1},...C,defaultValue:m,ref:i})})]});default:return null}});eei.displayName="TitleEditor";let ees=e=>e?{value:new Date((0,P5.Z)(e,{representation:"date"}))}:void 0,eeo=(0,uq.memo)(function(e){let{model:t,rowId:r,columnId:a,currentValue:n}=e,{updateItem:l}=Py(),{postStats:i}=bM(),[s,o]=(0,uq.useState)(!0),{navigationDispatch:d}=x3(),c=!e.replaceContents&&VF(n)?n.value:null,u=(0,uq.useCallback)(e=>{o(!1),"submit-key-press"===e?d(x2({y:xi.Next,focusType:xl.Focus})):d(x2({focusType:xl.Focus}))},[d]),m=(0,uq.useCallback)(async e=>{await l(t,{dataType:mD.Date,memexProjectColumnId:a,value:ees(e)}),i({name:c?hQ:hY,memexProjectColumnId:a,memexProjectItemId:t.id})},[a,c,t,i,l]),p=(0,uq.useRef)(null),f=(0,uq.useCallback)(e=>{let r=e=>{e.stopPropagation(),e.preventDefault(),e.nativeEvent.detail<=1&&u()};return p.current=e.ref.current,(0,uO.jsx)("summary",{...e,...(0,mp.f)("table-cell-date-editor"),onClick:r,style:{height:36,outline:"none",listStyle:"none"},children:(0,uO.jsx)(Jq,{currentValue:n,model:t})})},[u,n,t]),h=(0,uq.useCallback)(e=>{if(e.target instanceof Element){let t=e.target.closest("summary");if(t===p.current)return}},[]);return(0,uO.jsx)(P2.Mt,{open:s,onChange:m,onClose:u,value:c?new Date(p1(c.value)):null,showTodayButton:!1,showClearButton:!0,anchoredOverlayProps:{overlayProps:{onEscape:()=>u(),onClickOutside:h,onMouseDown:e=>{e.preventDefault()},...(0,mp.f)(`TableCellEditor{row: ${r}, column: ${a}}`)},focusTrapSettings:{restoreFocusOnCleanUp:!1}},anchor:f})});eeo.displayName="DateEditor";let eed=JV(function({currentValue:e,model:t,dropdownRef:r,columnId:a,isDisabled:n}){JM("IterationRenderer",t.id);let l=pB(a),i=(0,uq.useRef)(null);return(IC(i),l)?VM(e)?(0,uO.jsx)(F4,{children:(0,uO.jsx)(Ke,{minWidth:40,maxWidth:80,...(0,mp.f)("placeholder")})}):VL(e)?(0,uO.jsx)(JZ,{ref:r,isDisabled:n}):(0,uO.jsx)(JZ,{ref:r,isDisabled:n,children:(0,uO.jsx)(mF.Z,{sx:{overflow:"hidden",display:"flex"},children:(0,uO.jsx)(EL.Z,{sx:{bg:"canvas.subtle",color:"fg.muted",my:0},ref:i,children:(0,uO.jsx)(jc,{children:e.value.titleHtml})})})}):null});eed.displayName="IterationRenderer";let eec=({currentValue:e,model:t,columnModel:r,...a})=>{let n=VF(e)?e.value:null,{activeOptions:l,completedOptions:i,selected:s,saveSelected:o,filterChange:d}=Ad({model:t,iteration:n,columnModel:r}),c=(0,uq.useCallback)(()=>(0,uO.jsx)(eed,{currentValue:e,model:t,columnId:a.columnId}),[e,t,a.columnId]);return(0,uO.jsx)(JW,{model:t,fetchOptions:IR.Z,placeholderText:"Filter options",selected:s,options:[...l,...i.slice(0,3)],filterOptions:d,getSortAttribute:As,convertOptionToItem:Ai,saveSelected:o,renderButton:c,getOptionMatchingFilterValue:Ao,groupMetadata:[{groupId:"active"},{groupId:"completed",header:{title:"Completed",variant:"filled"}}],...a,singleSelect:!0,height:"auto",maxHeight:"large"})},eeu=(0,uq.memo)(eec);try{(dq=eec).displayName||(dq.displayName="IterationEditorFunc")}catch{}try{(dK=eeu).displayName||(dK.displayName="IterationEditor")}catch{}let eem=({model:e,...t})=>(0,uO.jsx)(JW,{model:e,fetchOptions:IR.Z,placeholderText:"",selected:[],filterOptions:IR.Z,getSortAttribute:IR.Z,convertOptionToItem:IR.Z,saveSelected:IR.Z,renderButton:IR.Z,...t}),eep=(0,uq.memo)(eem);try{(dQ=eem).displayName||(dQ.displayName="RepositoryEditorFunc")}catch{}try{(dY=eep).displayName||(dY.displayName="RepositoryEditor")}catch{}let eef=(0,uq.memo)(({model:e,columnModel:t,currentValue:r,...a})=>{let{navigationDispatch:n}=x3(),{addColumnOption:l}=A4(),{findColumn:i}=Tk(),{projectLimits:{singleSelectColumnOptionsLimit:s}}=yk(),o=VF(r)?r.value.id:null,{saveSelected:d,options:c,selected:u}=AJ({columnModel:t,model:e,selectedValueId:o}),m=(0,uq.useCallback)(()=>(0,uO.jsx)(J2,{currentValue:r,model:e,columnId:a.columnId,options:t.settings.options}),[r,e,a.columnId,t]),p=yS(c),[f,h]=(0,uq.useState)(null),g=(0,uq.useCallback)(async e=>{h(null),await l(t,e);let r=i(t.id),a=g2(r)?r.settings.options.find(({name:t})=>t===e.name):void 0;a&&d([{...a,selected:!0}]),n(x2({focusType:xl.Focus}))},[l,t,i,d,n]),x=(0,uq.useCallback)(e=>{let t=RQ(e);return p?{...(0,mp.f)("table-cell-editor-max-options-length-row"),text:fE.singleSelectOptionLimitWarning(s),disabled:!0}:{description:"Create new option",descriptionVariant:"block",leadingVisual:mM.pOD,children:(0,uO.jsx)(mO.Z,{sx:{color:"accent.emphasis",wordBreak:"break-all"},children:(0,uO.jsx)("strong",{children:t})}),onAction:async(e,r)=>{r.preventDefault(),h({...AH,name:t})},...(0,mp.f)("add-column-option")}},[p,s]),y=c.every(e=>"GRAY"===e.color),b=(0,uq.useCallback)(e=>AX(e,!y),[y]);return f?(0,uO.jsx)(Ms,{initialOption:f,onSave:g,onCancel:()=>h(null)}):(0,uO.jsx)(JW,{model:e,fetchOptions:IR.Z,placeholderText:"Filter options",selected:u,options:c,filterOptions:AK,getSortAttribute:AY,convertOptionToItem:b,saveSelected:d,renderButton:m,renderCreateNewOption:x,getOptionMatchingFilterValue:AQ,singleSelect:!0,height:"initial",maxHeight:"large",...a})});eef.displayName="SingleSelectEditor";let eeh=(0,uq.memo)(eef);try{(dX=eeh).displayName||(dX.displayName="SingleSelectEditor")}catch{}let eeg=({linkedPullRequests:e})=>(0,uO.jsx)(F4,{sx:{overflow:"hidden",display:"flex",gap:1},children:e?.map(e=>(0,uO.jsx)(Pa,{linkedPullRequest:e,tabIndex:-1},e.id))});try{(dJ=eeg).displayName||(dJ.displayName="LinkedPullRequestGroup")}catch{}let eex=JV(function({currentValue:e,model:t}){return(JM("LinkedPullRequestsRenderer",t.id),VM(e))?(0,uO.jsx)(F4,{children:(0,uO.jsx)(Ke,{minWidth:30,maxWidth:60,...(0,mp.f)("placeholder")})}):t.contentType===mA.DraftIssue||VL(e)?null:(0,uO.jsx)(eeg,{linkedPullRequests:e.value})});eex.displayName="LinkedPullRequestsRenderer";let eey=JV(function({currentValue:e,model:t}){return(JM("ReviewersRenderer",t.id),VM(e))?(0,uO.jsx)(F4,{children:(0,uO.jsx)(Ke,{minWidth:30,maxWidth:60,...(0,mp.f)("placeholder")})}):t.contentType===mA.DraftIssue||VL(e)?null:(0,uO.jsx)(F4,{children:(0,uO.jsx)(PE,{users:e.value})})});eey.displayName="ReviewersRenderer";let eeb=JV(({currentValue:e,model:t,projectOwner:r})=>{let a=(0,uq.useRef)(null);IC(a),JM("TrackedByRenderer",t.id);let n=VF(e)?e.value:void 0;return n?(0,uO.jsx)(F4,{ref:a,children:n.map(e=>(0,uO.jsx)(Pi,{trackedBy:e,projectOwner:r,noPrefix:!0},e.key.itemId))}):null});eeb.displayName="TrackedByRenderer";let eev={title:{typeToEditEnabled:!1,Cell(e){let t=mP.Title,r=e.row.original.columns[t],a=Xi(t),n=(0,uq.useMemo)(()=>a?r?VD(r):VA:VP,[r,a]);return(0,uO.jsx)(J3,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,{replaceContents:r}=e,a=mP.Title,n=e.row.original.columns[a],l=Xi(a),i=(0,uq.useMemo)(()=>l?n?VD(n):VA:VP,[n,l]);return(0,uO.jsx)(eei,{model:t,replaceContents:r,currentValue:i})}},text:{Cell(e){let t=e.column.columnModel?.id||-1,r=e.row.original.columns[t],a=Xi(t),n=(0,uq.useMemo)(()=>{if(!a)return VP;let e=pU(r);return e?VD(e):VA},[r,a]);return(0,uO.jsx)(J5,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original;if(!e.column.columnModel||!e.column.columnModel.userDefined)throw Error(`${fE.textEditor} ${fE.requiresCustomColumn}`);let{replaceContents:r}=e,a=e.column.columnModel.id,n=e.row.original.columns[a],l=Xi(a),i=(0,uq.useMemo)(()=>{if(!l)return VP;let e=pU(n);return e?VD(e):VA},[n,l]);return(0,uO.jsx)(een,{currentValue:i,model:t,replaceContents:r,columnId:a,rowId:e.row.id})}},number:{Cell(e){let t=e.column.columnModel?.id||-1,r=e.row.original.columns[t],a=Xi(t),n=(0,uq.useMemo)(()=>{if(!a)return VP;let e=pW(r);return e?VD(e.value.toString()):VA},[r,a]);return(0,uO.jsx)(J0,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,{replaceContents:r}=e;if(!e.column.columnModel||!e.column.columnModel.userDefined)throw Error(`${fE.numberEditor} ${fE.requiresCustomColumn}`);let a=e.column.columnModel.id,n=e.row.original.columns[a],l=Xi(a),i=(0,uq.useMemo)(()=>{if(!l)return VP;let e=pW(n);return e?VD(e):VA},[n,l]);return(0,uO.jsx)(eea,{currentValue:i,model:t,replaceContents:r,rowId:e.row.id,columnId:a})}},singleSelect:{Cell(e){let t=e.column.columnModel?.id||-1,r=e.row.original.columns[t],a=Xi(t),n=(0,uq.useMemo)(()=>{if(!a)return VP;let e=pH(r);return e?VD(e):VA},[r,a]);if(e.column.columnModel?.dataType!==mD.SingleSelect)throw Error(fE.singleSelectCustomModelError);return(0,uO.jsx)(J2,{currentValue:n,model:e.row.original,options:e.column.columnModel.settings.options,columnId:e.column.id,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=e.column.columnModel?.id||-1,a=e.row.original.columns[r],n=Xi(r),l=(0,uq.useMemo)(()=>{if(!n)return VP;let e=pH(a);return e?VD(e):VA},[a,n]);if(t.contentType===mA.RedactedItem)return null;if(e.column.columnModel?.dataType!==mD.SingleSelect)throw Error(fE.singleSelectCustomModelError);return(0,uO.jsx)(eeh,{currentValue:l,model:t,rowId:e.row.id,columnModel:e.column.columnModel,columnId:e.column.id})}},date:{Cell(e){let t=e.column.columnModel?.id||-1,r=e.row.original.columns[t],a=Xi(t),n=(0,uq.useMemo)(()=>{if(!a)return VP;let e=pQ(r);return e?VD(e):VA},[r,a]);return(0,uO.jsx)(Jq,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,{replaceContents:r}=e;if(!e.column.columnModel||!e.column.columnModel.userDefined)throw Error(`${fE.dateEditor} ${fE.requiresCustomColumn}`);let a=e.column.columnModel?.id||-1,n=e.row.original.columns[a],l=Xi(a),i=(0,uq.useMemo)(()=>{if(!l)return VP;let e=pQ(n);return e?VD(e):VA},[n,l]);return(0,uO.jsx)(eeo,{currentValue:i,model:t,replaceContents:r,rowId:e.row.id,columnId:e.column.columnModel.id})}},assignees:{Cell(e){let t=mP.Assignees,r=Xi(t),a=e.row.original.columns[t],n=(0,uq.useMemo)(()=>r?a?VD(a.map(PT)):VA:VP,[a,r]);return(0,uO.jsx)(J$,{currentValue:n,model:e.row.original,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=mP.Assignees,a=Xi(r),n=e.row.original.columns[r],l=(0,uq.useMemo)(()=>a?n?VD(n.map(PT)):VA:VP,[n,a]);return t.contentType===mA.RedactedItem?null:(0,uO.jsx)(JG,{currentValue:l,model:t,rowId:e.row.id,columnId:e.column.id})}},iteration:{Cell(e){let t=e.column.columnModel?.id||-1,r=e.row.original.columns[t],a=Xi(t),n=(0,uq.useMemo)(()=>{if(!a)return VP;let t=pH(r);if(!t)return VA;let n=g1(e.column.columnModel)?gR(e.column.columnModel):[],l=n.find(e=>e.id===t.id);return l?VD(l):VA},[r,a,e.column.columnModel]);return(0,uO.jsx)(eed,{currentValue:n,model:e.row.original,columnId:e.column.id,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=e.column.columnModel?.id||-1,a=e.row.original.columns[r],n=Xi(r),l=(0,uq.useMemo)(()=>{if(!n)return VP;let t=pH(a);if(!t)return VA;let r=g1(e.column.columnModel)?gR(e.column.columnModel):[],l=r.find(e=>e.id===t.id);return l?VD(l):VA},[a,n,e.column.columnModel]);if(t.contentType===mA.RedactedItem)return null;if(e.column.columnModel?.dataType!==mD.Iteration)throw Error(fE.iterationCustomModelError);return(0,uO.jsx)(eeu,{currentValue:l,model:t,rowId:e.row.id,columnModel:e.column.columnModel,columnId:e.column.id})}},milestone:{Cell(e){let t=mP.Milestone,r=e.row.original.columns[t],a=Xi(t),n=(0,uq.useMemo)(()=>a?r?VD(r):VA:VP,[r,a]);return(0,uO.jsx)(JJ,{currentValue:n,model:e.row.original,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=mP.Milestone,a=e.row.original.columns[r],n=Xi(r),l=(0,uq.useMemo)(()=>n?a?VD(a):VA:VP,[a,n]);return t.contentType===mA.RedactedItem?null:(0,uO.jsx)(J9,{currentValue:l,model:t,rowId:e.row.id,columnId:e.column.id})}},labels:{Cell(e){let t=mP.Labels,r=Xi(t),a=e.row.original.columns[t],n=(0,uq.useMemo)(()=>r?a?VD(a):VA:VP,[a,r]);return(0,uO.jsx)(JQ,{currentValue:n,model:e.row.original,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=mP.Labels,a=Xi(r),n=e.row.original.columns[r],l=(0,uq.useMemo)(()=>a?n?VD(n):VA:VP,[n,a]);return t.contentType===mA.RedactedItem?null:(0,uO.jsx)(J7,{currentValue:l,model:t,rowId:e.row.id,columnId:e.column.id})}},repository:{Cell(e){let t=mP.Repository,r=Xi(t),a=e.row.original.columns[t],n=(0,uq.useMemo)(()=>r?a?VD(a):VA:VP,[a,r]);return(0,uO.jsx)(J1,{currentValue:n,dropdownRef:e.dropdownRef,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original;return t.contentType===mA.DraftIssue?(0,uO.jsx)(eep,{model:t,rowId:e.row.id,columnId:e.column.id}):null}},linkedPullRequests:{Cell(e){let t=mP.LinkedPullRequests,r=Xi(t),a=e.row.original.columns[t],n=(0,uq.useMemo)(()=>r?a?VD(a):VA:VP,[a,r]);return(0,uO.jsx)(eex,{model:e.row.original,currentValue:n})},CellEditor:()=>null},reviewers:{Cell(e){let t=mP.Reviewers,r=Xi(t),a=e.row.original.columns[t],n=(0,uq.useMemo)(()=>{if(!r)return VP;if(a){let e=a.map(P_);return VD(e)}return VA},[a,r]);return(0,uO.jsx)(eey,{model:e.row.original,currentValue:n})},CellEditor:()=>null},tracks:{Cell(e){let t=mP.Tracks,r=Xi(t),a=e.row.original.columns[t],n=(0,uq.useMemo)(()=>r?a?VD(a):VA:VP,[a,r]);return(0,uO.jsx)(J4,{model:e.row.original,currentValue:n})},CellEditor:()=>null},trackedBy:{Cell(e){let t=mP.TrackedBy,r=Xi(t),a=e.row.original.columns[t],{projectOwner:n}=yk(),l=(0,uq.useMemo)(()=>r?a?VD(a):VA:VP,[a,r]);return(0,uO.jsx)(eeb,{model:e.row.original,currentValue:l,projectOwner:n})},CellEditor:()=>null}},eew=N_(e=>e.original.columns,{useDistinctAssigneesGrouping:!1}),eej=N_(e=>e.original.columns,{useDistinctAssigneesGrouping:!0});function eeC(e){return Object.keys(eev).reduce((t,r)=>(t[r]={...t[r],groupingConfiguration:e[r]},t),{...eev})}let eek=eeC(eew),eeS=eeC(eej);function eeI(e,{useDistinctAssigneesGrouping:t}){return t?eeS[e.dataType]:eek[e.dataType]}function eeN(e,t){return{...e,id:`${t}-${e.id}`}}let ee_=(e,t)=>r=>_r(r,e,t.getGroupingMetadata,t.getAllGroupMetadata,eeN),eeT=(e,t)=>r=>t.getGroupingMetadata(e,r),eeR=(0,uq.createContext)(null),eeE=(0,uq.memo)(function({isFieldVisible:e,children:t}){let{allColumns:r}=CB(),{memex_group_by_multi_value_changes:a}=g9(),{getWidth:n}=O3(),l=(0,uq.useMemo)(()=>r.map(e=>eeD(e,{memex_group_by_multi_value_changes:a},n(e.id))),[r,a,n]),i=(0,uq.useMemo)(()=>r.filter(t=>!e(t)).map(e=>`${e.id}`),[r,e]),s=(0,uq.useMemo)(()=>({columnDefinitions:l,hiddenColumns:i}),[l,i]);return(0,uO.jsx)(eeR.Provider,{value:s,children:t})});function eeD(e,t={memex_group_by_multi_value_changes:!1},r){let a=eeI(e,{useDistinctAssigneesGrouping:t.memex_group_by_multi_value_changes});return eeP(e,a,r)}function eeP(e,t,r){let{groupingConfiguration:a,...n}=t,l=N4(e),i=(e,t,r,a)=>e.isGrouped&&t.isGrouped?0:l(e.original,t.original,a,!0),s=a?{canGroupBy:ND(e),getGroupedRows:ee_(e,a),getGroupValue:eeT(e,a)}:{canGroupBy:!1};return{canSort:!0,sortType:i,Header:e.name,id:e.id.toString(),minWidth:75,width:r,columnModel:e,...s,...n}}try{(d0=eeR).displayName||(d0.displayName="TableColumnsContext")}catch{}try{(d1=eeE).displayName||(d1.displayName="TableColumnsProvider")}catch{}let eeA=()=>{let e=(0,uq.useContext)(eeR);if(null===e)throw Error("useTableColumns must be accessed from within a TableColumnsContext.Provider");return e};var eeM=r(45587);let eeL={SET_DRAGGING_COLUMN:"useColumnReordering.SET_DRAGGING_COLUMN",SET_DRAG_TARGET:"useColumnReordering.SET_DRAG_TARGET",RESET:"useColumnReordering.RESET"};function eeF(){return{type:eeL.RESET}}function eeZ(e){return{type:eeL.SET_DRAGGING_COLUMN,columnId:e}}function eeO(e,t){return e&&t?{type:eeL.SET_DRAG_TARGET,overColumn:{column:e,side:t}}:{type:eeL.SET_DRAG_TARGET,overColumn:null}}function eeB(){let{moveField:e,visibleFields:t}=ZB(),{currentView:r}=bP(),a=_D(),n=(0,uq.useRef)(!1),l=(0,uq.useCallback)(e=>{let{column:t}=e.active.data.current;n.current=!0,a(eeZ(t.id))},[a]),i=(0,uq.useCallback)(e=>{if(!e.over||!n.current){a(eeF());return}let{column:t}=e.over.data.current,r=eeW(e,t);a(eeO(t,r))},[a]),s=(0,uq.useCallback)(()=>{n.current=!1,a(eeF())},[a]),o=(0,uq.useCallback)(l=>{n.current=!1;let{columnOrder:i,column:s,overColumn:o}=l.active.data.current;if(!r||!o||s.id===o.column.id){a(eeF());return}let d=eeW(l,o.column),c=i.indexOf(s.id),u=i.indexOf(o.column.id);a(eeF());let m=t.find(e=>`${e.id}`===s.id);if(!m)throw Error("No field found for dragging column");e(r.number,m,("left"===d?c<u?u-1:u:c<u?u:u+1)-1)},[r,a,e,t]);return{onDragStart:l,onDragMove:i,onDragEnd:o,onDragCancel:s}}function eeV(e){let{visibleFields:t}=ZB(),r=(0,uq.useMemo)(()=>t.map(e=>e.id.toString()),[t]);e.useOptions.push(ee$(r)),e.getHeaderProps.push(eez),e.stateReducers.push(eeU)}function ee$(e){return t=>({...t,initialState:{...t.initialState,columnOrder:e}})}function eez(e,t){let{hasWritePermissions:r}=yI(),a=!r||!1===t.column.canReorder,n={column:t.column,columnOrder:t.instance.state.columnOrder,overColumn:t.instance.state.overColumn},l=(0,eeM.nB)({disabled:a,id:t.column.id,data:n});return Fd("is-dragging",l.isDragging),[e,{dragProps:l}]}function eeU(e,t){if(!eeG(t))return e;switch(t.type){case eeL.RESET:{let t={...e,draggingColumnId:null,overColumn:null};if(fl(e,t))return e;return t}case eeL.SET_DRAGGING_COLUMN:{let r={...e,draggingColumnId:t.columnId};if(fl(e,r))return e;return r}case eeL.SET_DRAG_TARGET:{let r={...e,overColumn:t.overColumn};if(fl(e.overColumn??{},r.overColumn??{}))return e;return r}}}function eeW(e,t){if(!1===t.canBeShifted)return FV(t)?"right":"left";{let t=e.over?.rect;if(!t||!(e.activatorEvent instanceof PointerEvent))return"right";let r=t.width,a=e.activatorEvent?.clientX+e.delta.x-t.left;return a>r/2?"right":"left"}}let eeH=Object.values(eeL);function eeG(e){return eeH.includes(e.type)}let eeq="useCustomGroupBy",eeK="useRanking",eeQ="useCustomGlobalFilter",eeY="useSortedByGroupOrdering",eeX=e=>[JR.useColumnOrder.pluginName,JR.useSortBy.pluginName,eeq,...e?[eeQ,eeY,eeK]:[eeK,eeQ,eeY]];function eeJ(e,t,r){let a=[],n=eeX(r),l=n.indexOf(t);return l>-1&&(a=n.slice(0,l)),(0,JR.ensurePluginOrder)(e,a,t)}let ee0=e=>{e.useInstance.push(ee1)};function ee1(e){let{rows:t,flatRows:r,rowsById:a,groupedRows:n,globalFilter:l,plugins:i}=e,{memex_pivot_panel:s,memex_table_filter_before_rank:o}=g9();eeJ(i,ee0.pluginName,o);let[d,c,u,m]=(0,uq.useMemo)(()=>{if(!l||"string"==typeof l)return[t,r,a,r];let e=[],i={},o=s?l(t,"exclude"):t,d=t=>{for(let r of t=l(t))r.isGrouped||(e.push(r),i[r.id]=r),r.subRows=r.subRows&&r.subRows.length?d(r.subRows):r.subRows;return t};return[d(n||t),e,i,o]},[r,l,n,s,t,a]);Object.assign(e,{rows:d,flatRows:c,rowsById:u,preTransientFilteredFlatRows:m})}ee0.pluginName=eeQ;let ee2={RESET_GROUP_BY:"useCustomGroupBy.RESET_GROUP_BY",SET_GROUP_BY:"useCustomGroupBy.SET_GROUP_BY",TOGGLE_GROUP_BY:"useCustomGroupBy.TOGGLE_GROUP_BY"},ee5=e=>{e.stateReducers.push(ee3),e.visibleColumnsDeps.push((e,{instance:t})=>[...e,t.state.groupByColumnIds]),e.visibleColumns.push(ee4),e.useInstance.push(ee6)};function ee3(e,t,r,a){if(!ee8(t))return e;switch(t.type){case ee2.RESET_GROUP_BY:{let t=a&&a.initialState&&a.initialState.groupByColumnIds||[],r={...e,groupByColumnIds:t};if(fl(e,r))return e;return r}case ee2.SET_GROUP_BY:{let r={...e,groupByColumnIds:t.groupedColumnIds};if(fl(e,r))return e;return r}case ee2.TOGGLE_GROUP_BY:{let{columnId:r,value:a}=t,n=void 0!==a?a:!e.groupByColumnIds.includes(r);if(n)return{...e,groupByColumnIds:[...e.groupByColumnIds,r]};return{...e,groupByColumnIds:e.groupByColumnIds.filter(e=>e!==r)}}}}function ee4(e,t){let r=t.instance.state.groupByColumnIds||[];for(let t of e)t.isGrouped=r.includes(t.id);return e}function ee6(e){let{rows:t,flatRows:r,rowsById:a,allColumns:n,plugins:l,state:{groupByColumnIds:i,collapsedGroups:s},dispatch:o}=e,{memex_table_filter_before_rank:d}=g9();for(let t of(eeJ(l,ee5.pluginName,d),n))t.canGroupBy&&(t.toggleGroupBy=()=>e.toggleGroupBy(t.id));let c=(0,uq.useCallback)((e,t)=>{o({type:ee2.TOGGLE_GROUP_BY,columnId:e,value:t})},[o]),u=(0,uq.useCallback)(e=>{o({type:ee2.SET_GROUP_BY,value:e})},[o]),[m,p,f]=(0,uq.useMemo)(()=>{if(!i.length)return[t,r,a];let e=i.filter(e=>n.find(t=>t.id===e)),l=[],o={},d=(t,r=0,a)=>{if(r===e.length){for(let e of t)l.push(e),o[e.id]=e;return t}let i=gc(e[r]),c=n.find(e=>e.id===i);if(!c)throw Error(`Column with id ${i} is used for grouping but could not be found`);if(!c.getGroupedRows)throw Error(`Column with id ${i} is used for grouping but does not have a valid grouping function`);if(!c.columnModel)throw Error(`Column with id ${i} is used for grouping but does not have a valid model`);let u=c.getGroupedRows(t),m=u.map(({value:e,sourceObject:t,rows:n})=>{let l=`${i}:${e}`;l=a?`${a}>${l}`:l;let o=d(n,r+1,l),c={id:l,isGrouped:!0,groupedColumnId:i,groupedValue:e,groupedSourceObject:t,subRows:o,isCollapsed:s.indexOf(e)>-1};return c});return m},c=d(t);return[c,l,o]},[i,t,r,a,n,s]);Object.assign(e,{groupedRows:i.length>0?m:void 0,rows:p,flatRows:p,rowsById:f,toggleGroupBy:c,setGroupBy:u})}ee5.pluginName=eeq;let ee7=Object.values(ee2);function ee8(e){return ee7.includes(e.type)}function ee9(e){e.useInstance.push(ete)}function ete(e){let t=(0,uq.useRef)(e.state.columnResizing.isResizingColumn),{updateWidth:r}=O3();(0,uq.useEffect)(()=>{if(null!=t.current&&!e.state.columnResizing.isResizingColumn){let a=e.columns.find(e=>e.id===t.current);a&&null!==a.width&&r(t.current,Number(a.width))}t.current=e.state.columnResizing.isResizingColumn},[e.columns,e.state.columnResizing,r])}function ett(e){e.useInstance.push(etr)}function etr(e){Object.assign(e,{autoResetResize:!e.state.columnResizing.isResizingColumn})}let eta=e=>{e.useInstance.push(etn)};function etn(e){let{rows:t,plugins:r}=e,{memex_table_filter_before_rank:a}=g9();eeJ(r,eta.pluginName,a),(0,uq.useMemo)(()=>{let e=0;for(let r of t)if(r.isGrouped)for(let t of r.subRows)t.index=e++;else r.index=e++;return t},[t])}function etl(e){e.useInstance.push(eti)}function eti(e){let{rows:t,flatRows:r,groupedRows:a,state:{sortBy:n,groupByColumnIds:l},plugins:i}=e,{memex_table_filter_before_rank:s}=g9();eeJ(i,etl.pluginName,s);let[o,d]=(0,uq.useMemo)(()=>{if(!a)return[t,r];let e=n[0]&&n[0].id,i=n[0]&&n[0].desc?"desc":"asc",s=l[0],o=e&&s&&e===s&&"desc"===i,d=o?a.slice().reverse():a,c=o?d.map(e=>[...e.subRows]).flat():r;return[d,c]},[r,l,a,t,n]);Object.assign(e,{rows:d,flatRows:d,groupedRows:a?o:void 0})}function ets({fields:e,plugins:t}){let{items:r}=bt(),{sorts:a}=NO(),{groupedByColumnId:n,collapsedGroups:l}=NR(),{columnDefinitions:i,hiddenColumns:s}=eeA(),o=(0,uq.useMemo)(()=>a.map(e=>({id:e.column.id.toString(),desc:"desc"===e.direction})),[a]),d=(0,uq.useMemo)(()=>n?[`${n}`]:[],[n]),c=(0,uq.useMemo)(()=>[FO,...e.map(e=>e.id.toString())],[e]),{memex_table_filter_before_rank:u}=g9(),m=u?[ee0,etl,eta]:[eta,ee0,etl],p=[JR.useBlockLayout,JR.useColumnOrder,JR.useSortBy,ee5,...m,eeV,OS,OZ,ett,JR.useResizeColumns,ee9,JR.useRowSelect,Zc,...t],{query:f,globalFilter:h}=kp(),g=(0,JR.useTable)({columns:i,data:r,globalFilter:h,orderByFn:JE,initialState:{hiddenColumns:s,sortBy:o,groupByColumnIds:d,collapsedGroups:l,globalFilter:f,columnOrder:c},autoResetSortBy:!1,disableMultiSort:!0,autoResetHiddenColumns:!1,autoResetSelectedRows:!1,autoResetResize:!0,useControlledState:e=>(0,uq.useMemo)(()=>({...e,sortBy:o,globalFilter:f,groupByColumnIds:d,collapsedGroups:l,hiddenColumns:s,columnOrder:c}),[e,c,o,f,d,s,l])},...p);return g}eta.pluginName=eeK,etl.pluginName=eeY;let{SlicerItemsProvider:eto,useSlicerItems:etd}=Js(e=>e.original.columns);var etc=r(35447);let etu=(0,uq.memo)(e=>{let t=_E(),r=t?.column,a=e.visibleColumns.at(-1)===r,n=t?.side;if(r){let t=r.totalLeft;return("right"===n&&(t+=r.totalWidth),a&&"right"===n?t-=3:t-=Math.ceil(1.5),e.sticky&&e.height)?(0,uO.jsx)(mF.Z,{sx:{bg:"accent.emphasis",top:0,ml:t,mt:-e.height,height:e.height,width:3,zIndex:1,pointerEvents:"none",position:"sticky"}}):(0,uO.jsx)(mF.Z,{sx:{bg:"accent.emphasis",left:t,top:0,bottom:0,width:3,height:"100%",position:"absolute"}})}return null});etu.displayName="ColumnDropZoneSash";let etm=(0,uq.memo)(e=>{let t=_R()?.over,r=_M();if(!Fq(t))return null;let a=r.flatRows.findIndex(e=>e.original.id===t.itemId),n=t.side,l="bottom"===n?e.rowHeight:0,i=a+1,s=0;return s=a===e.rowCount-1&&"bottom"===n?i*e.rowHeight+l-6:i*e.rowHeight+l-3,(0,uO.jsx)(mF.Z,{sx:{bg:"accent.emphasis",top:s,left:0,right:0,height:3,zIndex:1,cursor:"grabbing",pointerEvents:"none",position:"absolute"}})});etm.displayName="RowDropZoneSash";let etp={backgroundColor:"canvas.inset",zIndex:-1,padding:0,height:`${F9}px`,display:"flex","&:last-child":{flexGrow:1}},etf=(0,uq.memo)(function(){return(0,uO.jsx)(mF.Z,{sx:etp})});try{(d2=etf).displayName||(d2.displayName="TableGroupSeparator")}catch{}let eth=(e,t)=>{if(!Fq(t))return null;let r=e.findIndex(e=>e.original.id===t.itemId&&e.id===t.id);if(-1===r)return null;let a=37*r,n="bottom"===t.side?37:0;return F8+a+n-3},etg=(0,uq.memo)(({rows:e,over:t})=>{let{ctrlKey:r}=FZ();if(!Fq(t))return null;let a=eth(e,t);return a?(0,uO.jsx)(mF.Z,{sx:{bg:"accent.emphasis",top:a,left:0,right:0,height:3,zIndex:1,cursor:"grabbing",pointerEvents:"none",position:"absolute"},...(0,mp.f)("group-row-drop-zone-sash"),children:r?(0,uO.jsx)(mL.Z,{icon:mM.pOD,sx:{bg:"accent.emphasis",borderRadius:"100%",color:"fg.onEmphasis",position:"relative",left:42,top:"-9px",padding:"2px"},size:16}):null}):null});function etx(e){let{state:{focus:t},navigationDispatch:r}=x5(),a=(0,uq.useRef)(null),n=(0,uq.useCallback)(()=>!!(e&&t&&xH(t,e))||!!(t&&xz(t)),[t,e]),l=(0,uq.useCallback)(()=>{e?r(xX(e)):r(xQ())},[r,e]);(0,uq.useEffect)(()=>{n()&&a.current?.focus()},[n]);let i=(0,uq.useCallback)(()=>{l()},[l]),s=(0,uq.useCallback)(e=>{let t=Or(r,e);t.action?Ot(e,t.keyAsShortcut):t.keyAsShortcut===k_.ESCAPE&&(r(x2({focusType:xl.Focus,details:{previousFocus:!0}})),Oe(e))},[r]);return(0,uq.useMemo)(()=>({onKeyDown:s,onFocus:i,omnibarRef:a}),[i,s,a])}etg.displayName="GroupRowDropZoneSash";let ety=(0,uq.memo)(function(e){let t=(0,uq.useRef)(null),{isVisible:r,size:a}=ja({ref:t,defaultHeight:37*e.rows.length}),{state:{focus:n}}=x5(),l=!!n&&"coordinate"===n.type&&e.rows.some(e=>e.id===n.details.y),i=r?"unset":`${a}px`,s=(0,uq.useMemo)(()=>({height:i}),[i]);return(0,uO.jsx)("div",{style:s,ref:t,children:r||l?e.rows.map(t=>(0,uO.jsx)(Ov,{row:t,index:t.index,data:e.itemData},t.original.id)):null})});try{(d5=ety).displayName||(d5.displayName="TableRowChunk")}catch{}function etb({trackedBy:e}){let{memex_tracked_by_add_missing_items:t,memex_tracked_by_items:r}=g9(),{addAllItemsText:a,itemsNotInProjectText:n}=fq,{postStats:l}=bM(),{parentIssuesById:i,getChildrenTrackedByParent:s,removeChildIssues:o}=IU(),{createMemexItemOptimisitcally:d}=_8(),{setChildParentRelationship:c}=IH(),{addSelectedItemsRequest:u}=vo(),{items:m}=bt(),p=yk().projectLimits.projectItemLimit,{addToast:f}=m7(),h=(0,uq.useRef)(null),[g,x]=(0,uq.useState)(!1),[y,b]=(0,uq.useState)([]),[v,w]=(0,uq.useState)(!1),{clientHeight:j}=Do({onResize:()=>{g&&((0,w8.flushSync)(()=>{x(!1)}),x(!0))}}),C=(0,uq.useCallback)(async e=>{let t=await s(e);t&&t.count&&b(t.items.map(e=>Dm(e)))},[s]);(0,uq.useEffect)(()=>{C(e.key.itemId)},[e.key.itemId,C]);let k=(0,uq.useCallback)(()=>{x(!0)},[]),S=(0,uq.useCallback)(t=>{let r=[],a=N8({dataType:mD.TrackedBy,value:e,kind:"group"});if(a){let e=vr(a);e&&r.push(e)}for(let a of t)d({contentType:mA.Issue,content:{id:a.key.itemId,repositoryId:a.repoId},localColumnValues:r},[{memexProjectColumnId:"Title",value:{title:{raw:a.title,html:a.title},state:a.state,number:a.number,issueId:a.key.itemId}},{memexProjectColumnId:mP.TrackedBy,value:[e]}],a.url),c(a.key.itemId)},[d,c,e]),I=(0,uq.useCallback)(async(e=y)=>{if(m.length+e.length>p){f({message:`Adding these items will exceed the ${p} project item limit`,type:mB.error});return}w(!0),await u.perform(e),l({name:"bulk_add_tracked_by_items",context:e.length.toString()}),S(e);let t=y.map(e=>e.key.itemId);o(t),w(!1)},[y,u,l,o,S,f,m.length,p]);if(!r||!t)return null;let N=i.get(e.key.itemId)?.count??0,_=(0,uO.jsx)(In.P,{anchorRef:h,open:g,onOpenChange:IR.Z,children:(0,uO.jsx)(In.P.Overlay,{sx:{width:"353px",maxHeight:j,overflow:"auto"},onEscape:()=>x(!1),onClickOutside:()=>x(!1),children:v?(0,uO.jsx)(mF.Z,{sx:{justifyContent:"center",my:4,display:"flex"},children:(0,uO.jsx)(w4.Z,{size:"medium"})}):(0,uO.jsxs)(Ia.S,{...(0,mp.f)("tracked-by-missing-issues-menu"),children:[N>1&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ia.S.Group,{children:(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>I(void 0),...(0,mp.f)("tracked-by-missing-issues-menu-add-all"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.pOD,{})}),a(N)]})}),(0,uO.jsx)(Ia.S.Divider,{})]}),(0,uO.jsx)(Ia.S.Group,{...(0,mp.f)("tracked-by-missing-issues-menu-add-individual"),children:y.map(e=>(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>I([e]),...(0,mp.f)(`tracked-by-missing-issue-row-${e.title}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(jh,{type:"Issue",state:e.state,stateReason:e.stateReason,isDraft:!1})}),e.title]},e.key.primaryKey.uuid))})]})})});return 0===N?null:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ox,{sx:{borderBottom:"1px solid",borderColor:"border.muted"},children:(0,uO.jsx)(F4,{sx:{pl:"50px"},children:(0,uO.jsxs)(jI.z,{ref:h,onClick:k,variant:"invisible",...(0,mp.f)("tracked-by-missing-issues-row"),children:[(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted",fontWeight:"normal",pr:2},children:n(N)}),(0,uO.jsx)(mL.Z,{icon:mM.AS7,size:"small",sx:{verticalAlign:"middle",color:"fg.muted"}})]})})}),_]})}function etv(e){return e.dataType===mD.TrackedBy&&"group"===e.kind}try{(d3=etb).displayName||(d3.displayName="TrackedByMissingIssuesRow")}catch{}let etw=(0,uq.memo)(function({groupId:e,scrollRef:t,metadata:r,shouldDisableFooter:a,footerPlaceholder:n}){let{omnibarRef:l,onFocus:i,onKeyDown:s}=etx(e),o=(0,uq.useMemo)(()=>({setField:N8(r.sourceObject)}),[r.sourceObject]),d=xV(r.sourceObject),c=etv(r.sourceObject)?(0,uO.jsx)(etb,{trackedBy:r.sourceObject.value}):null;return(0,uO.jsxs)(uO.Fragment,{children:[c,(0,uO.jsx)(mF.Z,{sx:(0,uq.useMemo)(()=>({alignItems:"center",height:"37px",width:"100%",pl:"12px",bg:a?"canvas.subtle":"canvas.default",color:a?"fg.muted":"inherit",backdropFilter:"unset",pointerEvents:"none",borderBottom:"unset",borderBottomColor:"unset",boxShadow:"unset",left:0,marginTop:"1px",position:"sticky",display:"flex",">:first-child":{pointerEvents:"all"}}),[a]),...(0,mp.f)(`table-group-footer-${d}`),children:(0,uO.jsx)(qF,{ref:l,role:"row",isFixed:!1,newItemAttributes:o,defaultPlaceholder:n,onKeyDown:s,onInputFocus:i,disabled:a,scrollRef:t})})]})});function etj({groupId:e,firstRowIndex:t,isCollapsed:r,itemData:a,isEditable:n,metadata:l,rows:i,scrollRef:s,shouldDisableFooter:o,footerPlaceholder:d}){let c=_R();if(r)return null;let u=c&&c.over?(0,uO.jsx)(etg,{rows:i,over:c.over}):null;return(0,uO.jsxs)(uO.Fragment,{children:[(0,etc.Z)(i,5).map((e,r)=>(0,uO.jsx)(ety,{rows:e,rowOffset:t+5*r,chunkIndex:r,chunkSize:5,itemData:a},r)),u,n&&(0,uO.jsx)(etw,{groupId:e,scrollRef:s,metadata:l,shouldDisableFooter:o,footerPlaceholder:d})]})}try{(d4=etw).displayName||(d4.displayName="TableGroupFooter")}catch{}try{(d6=etj).displayName||(d6.displayName="TableGroupContents")}catch{}let etC=F8+1+F9;function etk(e,t,r){return xG(e)?t.some(t=>t.id===e.details.y):xH(e,r)}let etS=(0,uq.memo)(function({groupId:e,metadata:t,rows:r,firstRowIndex:a,itemData:n,scrollRef:l,isCollapsed:i,shouldDisableFooter:s,footerPlaceholder:o,isEditable:d}){let c=(0,uq.useRef)(null),{missingRequiredColumnData:u}=bP(),m=xV(t.sourceObject),p=i?0:37*r.length+39,{isVisible:f,size:h}=ja({ref:c,defaultHeight:p+etC}),g=f?"unset":`${h}px`,x=(0,uq.useMemo)(()=>({height:g}),[g]),{state:{focus:y}}=x5(),{hideItemsCount:b,getAggregatesForItems:v}=LG(),w=(0,uq.useMemo)(()=>r.map(e=>e.original),[r]),j=(0,uq.useMemo)(()=>v(w),[v,w]),C=f||y&&etk(y,r,e),{isDraggedOver:k,containerProps:S}=O$({metadata:t,isCollapsed:i});return(0,uO.jsx)(mF.Z,{sx:x,ref:c,...(0,mp.f)(`table-group-${m}`),role:"rowgroup",...S,children:C?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsxs)(mF.Z,{sx:{boxShadow:"shadow.medium",borderTop:"1px solid",borderBottom:"1px solid",borderColor:k?"accent.fg":"border.muted",position:"relative",zIndex:0},children:[(0,uO.jsx)(G9,{isCollapsed:i,metadata:t,numberOfRows:r.length,children:(0,uO.jsx)(Ka,{sourceObject:t.sourceObject,rowCount:r.length,aggregates:j,hideItemsCount:b})}),u?null:(0,uO.jsx)(etj,{groupId:e,firstRowIndex:a,isCollapsed:i,itemData:n,metadata:t,rows:r,scrollRef:l,shouldDisableFooter:s,footerPlaceholder:o,isEditable:d})]}),(0,uO.jsx)(etf,{})]}):null})});try{(d7=etS).displayName||(d7.displayName="TableGroup")}catch{}var etI=r(32339);let etN=(0,uq.forwardRef)((e,t)=>{let{sx:r,...a}=e,n={display:"flex",flexDirection:"row",textAlign:"center",fontWeight:"bold",fontSize:"0",whiteSpace:"nowrap",cursor:"grab",userSelect:"none",borderColor:"border.default",borderWidth:"1px",borderStyle:"solid",borderRight:"none",borderTop:"none",borderBottom:0,outline:"none","&.readonly, &.readonly:active":{cursor:"default"},"&:active":{cursor:"grabbing"},"&.inactive, &.inactive:active":{cursor:"default"},"&.hoverable:hover":{backgroundColor:"canvas.default"},"&:last-child":{borderRight:"1px solid transparent"},...r};return(0,uO.jsx)(mF.Z,{ref:t,role:"columnheader","aria-colspan":1,sx:n,...a})});etN.displayName="HeaderGridCell";let et_=(0,uq.forwardRef)((e,t)=>{let{children:r,sx:a,...n}=e;return(0,uO.jsx)(mF.Z,{sx:{alignItems:"center",py:2,px:3,overflow:"hidden",display:"flex",...a},ref:t,...n,children:r})});et_.displayName="HeaderGridCellLayout";let etT=e=>{let{dragProps:t,...r}=e.header.getHeaderProps({style:{minWidth:e.header.width,height:e.height}});return e.header.id===FB?(0,uO.jsx)(etN,{tabIndex:-1,...r,...t.listeners,...(0,mp.f)(Z7(e.header.id)),ref:t.setNodeRef,children:(0,uO.jsx)(et_,{sx:{padding:0,flexGrow:1},children:e.header.render("Header")})}):(0,uO.jsx)(mF.Z,{...r,...t.listeners,ref:t.setNodeRef})};try{(d8=etT).displayName||(d8.displayName="DummyHeaderCell")}catch{}let etR=(e,t,r)=>{let a=e.name,{postStats:n}=bM(),{updateName:l,setName:i}=H_(),{findColumn:s}=Tk(),o=(0,uq.useCallback)(async()=>{r!==e.name&&(await l(e,r),n({name:"field_rename",ui:hL,context:`new name: ${r}, original name: ${a}`,memexProjectColumnId:e.id}))},[r,e,l,n,a]),d=(0,uq.useCallback)(async()=>{let r=s(e.id);r&&(i(r,a),t(a))},[e.id,s,a,t,i]),{perform:c}=b6({request:o,rollback:d});return{updateColumnName:c}};function etE(e,t){if(e)return void 0===t?"none":t?"descending":"ascending"}let etD=(0,uq.memo)(e=>{let t=gc(e.header.columnModel),{currentView:r}=bP(),{groupByColumn:a,header:n}=e,l=(0,uq.useRef)(null),i=(0,uq.useRef)(null),s=(0,uq.useRef)(null),[o,d]=Eh(t.name),[c,u]=(0,uq.useState)(!1),{updateColumnName:m}=etR(t,d,o),{sortBy:p}=_T(),{canSort:f,isSorted:h,isSortedDesc:g,sortedIndex:x}=n,{appendFilter:y,focusFilterInput:b}=kp(),{postStats:v}=bM(),{hideField:w}=ZB(),{hasWritePermissions:j}=yI(),{allColumns:C}=CB(),{reservedColumnNames:k}=G_(),{setColumnSort:S}=NO(),I=Zj(),N=_M(),{memex_sort_multiple:_,memex_table_without_limits:T}=g9(),R=(0,uq.useMemo)(()=>C.filter(e=>e.name!==t.name),[C,t.name]),{isValid:E,message:D}=GR({allColumns:R,reservedColumnNames:k},o),P=!!o,A=CD(c&&t.userDefined?s.current:null),M=(0,uq.useCallback)(async(e,r=!0)=>{if(u(e),!e){let e=E&&P;r&&e&&await m(),e||d(t.name)}},[m,u,E,d,t.name,P]),{safeSetTimeout:L}=(0,VO.Z)(),F=(0,uq.useCallback)(e=>{L(()=>{e.target.setSelectionRange(0,e.target.value.length)},0)},[L]),Z=(0,uq.useCallback)(e=>{e.defaultPrevented||d(e.target.value)},[d]),O=(0,uq.useCallback)(e=>{"Enter"===e.key&&E&&P&&(e.preventDefault(),M(!1)),"Escape"===e.key&&(M(!1,!1),d(t.name),e.preventDefault())},[E,P,M,d,t.name]),B=Eg(O),V=(0,uq.useCallback)(()=>{r&&(w(r.number,t),v({name:hF,ui:hL,memexProjectColumnId:t.id}))},[t,w,v,r]),$=(0,uq.useCallback)(e=>{let r;if(!t)return;let a="desc"===e,n=a===g?null:e;S(t,n,r=_?h?x:1===p.length?1:0:0),M(!1,!1),v({name:a?hM:hA,ui:hL,context:t.id,index:r})},[t,g,h,x,p.length,S,M,v,_]),z=(0,uq.useCallback)(()=>e.header.isGrouped?(0,uO.jsx)(mF.Z,{sx:{color:"fg.muted",bg:"canvas.default"},...(0,mp.f)(`grouped-label-${t.name}`),children:(0,uO.jsx)(mL.Z,{icon:mM.NoV})}):null,[t.name,e.header.isGrouped]),U=(0,uq.useCallback)(()=>{let e=p.length>1,r=e?`${Bo(x)} `:"";return h?(0,uO.jsx)(jI.z,{variant:"invisible",size:"small","aria-label":`Change ${r}sort direction to ${g?"ascending":"descending"}`,onClick:()=>$(g?"asc":"desc"),sx:{color:"fg.muted",px:1},...(0,mp.f)(`sorted-label-${t.id}`),children:(0,uO.jsx)(KI,{direction:g?"desc":"asc",index:e?x:void 0})}):null},[h,g,t.id,p.length,x,$]),W=Lo(t.dataType),H=Ld(t.dataType),G=(0,uq.useMemo)(()=>{if(!f)return[];{let e=h&&!g,r=h&&g;return[(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>$("asc"),disabled:T,sx:{fontWeight:e?(0,uG.U2)("fontWeights.bold"):(0,uG.U2)("fontWeights.normal")},...(0,mp.f)(`sort-toggle-asc-${t.id}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.aoE,{})}),e?`Sorted ascending ${W}`:`Sort ascending ${W}`,(0,uO.jsx)(Ia.S.TrailingVisual,{children:e&&(0,uO.jsx)(mM.b0D,{})})]},`sort-ascending-${t.id}`),(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>$("desc"),disabled:T,sx:{fontWeight:r?(0,uG.U2)("fontWeights.bold"):(0,uG.U2)("fontWeights.normal")},...(0,mp.f)(`sort-toggle-asc-${t.id}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.k6S,{})}),r?`Sorted descending ${H}`:`Sort descending ${H}`,(0,uO.jsx)(Ia.S.TrailingVisual,{children:r&&(0,uO.jsx)(mM.b0D,{})})]},`sort-descending-${t.id}`)]}},[f,T,h,g,t.id,W,H,$]),q=yq(),K=(0,uq.useMemo)(()=>j&&(g2(t)||g1(t))?[(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>{q({pathname:mj.generatePath({fieldId:t.id})}),v({name:hW,ui:"column header",memexProjectColumnId:t.id}),M(!1)},...(0,mp.f)(`edit-${t.id}`),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.vdY,{})}),fE.editField]},`edit-${t.id}`)]:[],[j,t,q,v,M]),{navigationDispatch:Q}=x3(),Y=(0,uq.useCallback)((e,t)=>{y(e),b(),Q(xY()),t.stopPropagation()},[y,b,Q]),X=(0,uq.useMemo)(()=>{let e=[(0,uO.jsxs)(Ia.S.Item,{onSelect:e=>{(0,w8.flushSync)(()=>{M(!1)}),Y(o,e)},disabled:T,...(0,mp.f)("create-filter-trigger"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.k1n,{})}),"Filter by values"]},`filter-by-values-${t.id}`)];return t.dataType===mD.Title&&e.push((0,uO.jsxs)(Ia.S.Item,{onSelect:e=>{Y("is",e),M(!1)},disabled:T,...(0,mp.f)("create-is-filter-trigger"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.k1n,{})}),"Filter by item state or type"]},`filter-by-is-${t.id}`)),e},[T,t.id,t.dataType,Y,o,M]),J=(0,uq.useCallback)(()=>{a(e.header,hL),M(!1)},[a,e.header,M]),ee=(0,uq.useMemo)(()=>e.header.canGroupBy?[(0,uO.jsxs)(Ia.S.Item,{onSelect:J,sx:{fontWeight:e.header.isGrouped?(0,uG.U2)("fontWeights.bold"):(0,uG.U2)("fontWeights.normal")},disabled:T,...(0,mp.f)("group-by-trigger"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.NoV,{})}),e.header.isGrouped?"Grouped by field":"Group by values",(0,uO.jsx)(Ia.S.TrailingVisual,{children:e.header.isGrouped&&(0,uO.jsx)(mM.b0D,{})})]},`group-by-${t.id}`)]:[],[e.header.canGroupBy,e.header.isGrouped,T,t.id,J]),et=e.header.getResizerProps(),er=(0,uq.useCallback)(e=>{e.stopPropagation(),et.onMouseDown(e)},[et]),ea=(0,uq.useCallback)(()=>e.header.canResize&&j?(0,uO.jsx)(mF.Z,{sx:{pl:2,right:"-8px",top:0,bottom:0,width:"16px",zIndex:1,position:"absolute"},...et,onMouseDown:er,...(0,mp.f)(`${t.name}-column-resizer`)}):null,[er,e.header.canResize,et,t,j]),en=(0,GK.Cj)(),el=e.header.getHeaderProps({className:`${j?en.active?"":"hoverable":"readonly"}`,style:{minWidth:e.header.width,height:e.height}});Fd("is-resizing",e.header.isResizing);let ei=ER(),es=(0,uq.useCallback)(()=>{let t=N.flatRows[0];t&&I&&setTimeout(()=>{I.selectColumn(e.header.id),Q(x0(t.id,e.header.id))})},[I,Q,e.header.id,N]);return(0,uq.useMemo)(()=>{let r={boxShadow:e=>`inset 0 -2px 0 ${U()||z()?e.colors.neutral.emphasis:e.colors.border.default}, inset 0 1px 0 ${e.colors.border.default}`},a=(0,uO.jsx)(mF.Z,{sx:{position:"relative",px:2,pt:2},children:(0,uO.jsx)("form",{ref:s,onSubmit:e=>e.preventDefault(),children:(0,uO.jsxs)(Cc.Z,{children:[(0,uO.jsx)(Cc.Z.Label,{visuallyHidden:!0,children:"Column name"}),(0,uO.jsx)(E_.Z,{...ei,sx:{display:"block",width:"100%"},children:(0,uO.jsx)(k4.Z,{ref:i,value:o,tabIndex:-1,block:!0,placeholder:"Column name",onChange:Z,onFocus:F,...B,disabled:!j,validationStatus:E?void 0:"error","aria-invalid":!E})}),!E&&(0,uO.jsx)(Cc.Z.Validation,{variant:"error",sx:{maxWidth:A?.clientWidth?`${A.clientWidth}px`:"unset"},children:D})]})})}),{dragProps:n,...d}=el,u=[...K,...X,...ee],m=null!==I;return(0,uO.jsxs)(etN,{...d,...(0,mp.f)(Z7(e.header.id)),"aria-sort":etE(e.header.canSort,e.header.isSortedDesc),children:[(0,uO.jsxs)(et_,{sx:{...r,flexGrow:1,paddingLeft:"12px",paddingRight:"12px",height:e.height},ref:n.setNodeRef,...n.listeners,children:[(0,uO.jsx)(mO.Z,{sx:{color:"fg.muted",textOverflow:"ellipsis",overflow:"hidden",textAlign:"left",flexGrow:1},children:e.header.render("Header")}),(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",px:0,py:0,gap:1},children:[(0,uO.jsx)(U,{}),(0,uO.jsx)(z,{}),(0,uO.jsxs)(In.P,{open:c,onOpenChange:e=>M(e),anchorRef:l,children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsx)(kF.h,{ref:l,icon:mM.Ui8,variant:"invisible",sx:{display:"flex",alignItems:"center",justifyContent:"center",color:"fg.muted"},size:"small","aria-label":`${t.name} column options`,...(0,mp.f)(`${t.name}-column-menu-trigger`)})}),(0,uO.jsxs)(In.P.Overlay,{...(0,mp.f)(`${t.name}-column-menu`),initialFocusRef:l,children:[(0,uO.jsx)(uO.Fragment,{children:t.userDefined&&a}),(0,uO.jsxs)(Ia.S,{children:[t.userDefined&&(0,uO.jsx)(In.P.Divider,{sx:{mt:0}}),G,G.length>0&&u.length>0&&(0,uO.jsx)(In.P.Divider,{}),u,u.length>0&&(0,uO.jsx)(In.P.Divider,{}),(0,uO.jsxs)(Ia.S.Item,{onSelect:V,disabled:t.dataType===mD.Title||h,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.LAO,{})}),"Hide field"]}),j&&(0,uO.jsxs)(Ia.S.Item,{variant:"danger",onSelect:()=>{q({pathname:mj.generatePath({fieldId:t.id})})},disabled:!t.userDefined||!j,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete field..."]}),m&&(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsxs)(Ia.S.Item,{onSelect:es,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.uQ0,{})}),"Select column"]})]})]})]})]})]})]}),(0,uO.jsx)(ea,{})]})},[ei,o,Z,F,B,j,E,A.clientWidth,D,el,K,X,ee,I,t.dataType,t.name,t.userDefined,t.id,e.header,e.height,U,z,c,G,V,h,es,ea,M,q])});etD.displayName="TableHeaderCell";try{(d9=GroupedLabel).displayName||(d9.displayName="GroupedLabel")}catch{}try{(ce=SortedLabel).displayName||(ce.displayName="SortedLabel")}catch{}try{(ct=ColumnResizeDragger).displayName||(ct.displayName="ColumnResizeDragger")}catch{}let etP=e=>e.columnModel&&!(e.columnModel?.dataType===mD.Title||e.isGrouped),etA=()=>{let{currentView:e}=bP(),{allColumns:t}=_M(),{hiddenColumns:r}=_T(),{setShowAddFieldModal:a}=G2(),{toggleField:n}=ZB(),{hasWritePermissions:l}=yI(),{isProjectViewRoute:i}=kd();mm(()=>{if(!i||!e)return null;let r=[];return l&&r.push(["c","Create new field","field.create",()=>a(!0)]),r.push(...t.filter(etP).map((t,r)=>[String(r+1),`${t.isVisible?"Hide:":"Show:"} ${t.columnModel?.name}`,`column.${t.isVisible?"hide":"show"}`,()=>{t.columnModel&&n(e.number,t.columnModel,void 0,hZ)}])),["m","Manage fields...",r]},[i,r,e,l,t,a,n])},etM=e=>{let{allColumns:t}=_M(),{groupByColumnIds:r,hiddenColumns:a}=_T(),{isProjectViewRoute:n}=kd();mm(()=>{if(!n)return null;let a=[],l=["g","Group by...",a];r.length>0&&a.push(["g","Remove group-by","grouping.clear",()=>t.filter(e=>e.isGrouped).map(t=>e(t,hZ))]);let i=t.filter(e=>e.canGroupBy&&e.isVisible);for(let[t,r]of Object.entries(i)){let n=r.columnModel;n&&a.push([t,`${r.isGrouped?"Ungroup by:":"Group by:"} ${n.name}`,`column.${r.isGrouped?"ungroup":"group"}`,()=>e(r,hZ)])}return l},[n,a,r.length,t,e])},etL={threshold:{x:.3,y:.2}},etF=[etI.K7],etZ=(0,uq.memo)(e=>{_F();let{currentView:t}=bP(),{postStats:r}=bM();JA("Table","TableHeader","");let{clearGroupedBy:a,setGroupedBy:n}=NR(),{groupByColumnIds:l}=_T(),{toggleGroupBy:i}=_M(),s=(0,uq.useCallback)((e,s)=>{let o=e.columnModel;if(o&&t){if(e.isGrouped?a(t.number):n(t.number,o),l.length&&!e.isGrouped)for(let e of l)i(e,!1);r({groupByEnabled:!e.isGrouped,memexProjectColumnId:o.id,key:hE,ui:s}),e.toggleGroupBy()}},[l,r,a,t,n,i]);etA(),etM(s);let o=(0,GK.Dy)((0,GK.VT)(GK.we,{activationConstraint:{distance:2}})),d=eeB(),c=Ru();return(0,uO.jsx)(GK.LB,{modifiers:etF,sensors:o,collisionDetection:GK.j2,autoScroll:etL,accessibility:(0,uq.useMemo)(()=>({container:c}),[c]),...d,children:(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexDirection:"column",position:"sticky",top:0,zIndex:1,backgroundColor:"canvas.default",height:e.height,minWidth:e.tableWidth,boxShadow:e=>`inset 0 -2px 0 ${e.colors.border.default}, inset 0 1px 0 ${e.colors.border.default}`},children:e.headerGroups.map(t=>{let r=t.getHeaderGroupProps({style:{width:"100%"}});return(0,uq.createElement)(mF.Z,{sx:{"> div:nth-child(2)":{borderLeft:"none"}},...r,key:r.key},t.headers.map(r=>r.columnModel?(0,uO.jsx)(etD,{header:r,headers:t.headers,groupByColumn:s,height:e.height},r.id):(0,uO.jsx)(etT,{header:r,height:e.height},r.id)))})})})});etZ.displayName="TableHeader";let etO={flexDirection:"column",position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"auto",userSelect:"none",scrollBehavior:"smooth","@media (prefers-reduced-motion)":{scrollBehavior:"auto"},display:"flex"};function etB({scrollRef:e,containerRef:t,table:r,isOmnibarFixed:a,loadingState:n,tableGroups:l,itemData:i,hasWritePermissions:s}){return(0,uO.jsx)(jr,{rootRef:e,sizeEstimate:185,children:(0,uO.jsx)(mF.Z,{sx:etO,...(0,mp.f)("table-scroll-container"),ref:e,children:(0,uO.jsxs)("div",{style:{userSelect:"none",position:"relative",width:r.totalColumnsWidth,minWidth:"100%",paddingBottom:a?"69px":"unset"},children:[(0,uO.jsx)(etZ,{headerGroups:r.headerGroups,height:34,scrollRef:e,tableWidth:r.totalColumnsWidth}),(0,uO.jsx)(etu,{visibleColumns:r.visibleColumns,height:34,sticky:!0}),(0,uO.jsx)("div",{ref:t,children:(0,uO.jsx)(Fu,{scrollAxis:"y",scrollRef:e,children:(0,uO.jsx)(vs,{children:n===XV.loading?(0,uO.jsxs)(Ox,{style:Ob,sx:{display:"flex",alignItems:"center",pl:3,gap:1},...(0,mp.f)("view-loading-indicator"),children:[(0,uO.jsx)(w4.Z,{size:"small"}),"Loading..."]}):n===XV.missing?null:l?l.map(t=>(0,uO.jsx)(etS,{groupId:t.id,rows:t.subRows,metadata:{value:t.groupedValue,sourceObject:t.groupedSourceObject},firstRowIndex:t.subRows[0]?.index??0,itemData:i,isCollapsed:t.isCollapsed,scrollRef:e,shouldDisableFooter:xL(t.groupedSourceObject),footerPlaceholder:xZ(t),isEditable:s},t.id)):(0,etc.Z)(r.rows,5).map((e,t)=>(0,uO.jsx)(ety,{rows:e,rowOffset:5*t,chunkIndex:t,chunkSize:5,itemData:i},t))})})}),(0,uO.jsx)(etu,{visibleColumns:r.visibleColumns}),!l&&(0,uO.jsx)(etm,{rowHeight:37,rowCount:r.rows.length})]})})})}try{(cr=etB).displayName||(cr.displayName="TableBodyWithObserver")}catch{}let etV=(0,uq.memo)(function({filterCount:e}){let{state:{focus:t},navigationDispatch:r}=x5(),a=(0,uq.useCallback)(()=>{r(xY())},[r]),n=(0,uq.useCallback)(e=>{if(kE(e)===k_.ARROW_DOWN){r(x2({x:xi.First,y:xi.First,focusType:xl.Focus})),Oe(e);return}},[r]),l=(0,uq.useCallback)(e=>{if(kE(e)===k_.ARROW_DOWN){r(x2({x:xi.First,y:xi.First,focusType:xl.Focus})),Oe(e);return}},[r]),{setShowFindInProject:i}=J_();return(0,uO.jsx)(QW,{onInputKeyDown:n,onClearButtonKeyDown:l,dispatchInputFocusEvent:a,isFocused:xU(t),setShowFindInProject:i,filterCount:e})});try{(ca=etV).displayName||(ca.displayName="TableFilterInput")}catch{}let et$=(0,uq.memo)(function({onAddItem:e,isFixed:t}){let{omnibarRef:r,onFocus:a,onKeyDown:n}=etx();return(0,uO.jsx)(qF,{ref:r,role:"row",childElementRole:"gridcell",onAddItem:e,onKeyDown:n,onInputFocus:a,isFixed:t,defaultPlaceholder:qh})});try{(cn=et$).displayName||(cn.displayName="TableOmnibar")}catch{}let etz=(0,uq.forwardRef)(({showAddFieldModal:e,columnMenuTriggerRef:t},r)=>{let[a,n]=(0,uq.useState)(!1),{stateRef:l,navigationDispatch:i}=x3(),s=(0,uq.useCallback)(()=>{let e=l.current&&l.current.focus;e&&xG(e)&&i(x2({focusType:xl.Suspended})),n(!0)},[i,l]);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(kF.h,{size:"small",variant:"invisible",icon:mM.pOD,"aria-label":"Add field",ref:r,onClick:s,onKeyPress:s,disabled:e||a,...(0,mp.f)("column-visibility-menu-trigger"),sx:{color:"fg.muted",width:"100%",height:32,display:"flex",alignItems:"center",justifyContent:"center"}}),(0,uO.jsx)(Kb,{open:a,setOpen:n,anchorRef:t})]})});etz.displayName="AddColumnMenu";let etU=(0,uq.memo)(()=>{let{setShowAddFieldModal:e,showAddFieldModal:t}=G2(),{stateRef:r,navigationDispatch:a}=x3(),n=(0,uq.useCallback)(e=>{let t=r.current&&r.current.focus||void 0;t&&xG(t)?a(x0(t.details.y,e.id.toString())):a(x0("0",e.id.toString()))},[a,r]),l=(0,uq.useRef)(null);return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(etz,{showAddFieldModal:t,columnMenuTriggerRef:l,ref:l}),(0,uO.jsx)(GZ,{isOpen:t,setOpen:e,anchorRef:l,onSave:n})]})});etU.displayName="AddColumnHeader";let etW=e=>{e.columns.push(etG)},etH={Header:etU,id:FB,width:50,canSort:!1,nonNavigable:!0,canBeShifted:!1,canReorder:!1,Cell:"",CellEditor:""},etG=e=>[...e,etH],etq=null;function etK(){if(null!=etq)return etq;let e=navigator.userAgent.toLowerCase();return etq=e.includes("webkit")&&!e.includes("chrome")}function etQ(e,t){let r=!!t?.sticky,{currentView:a}=bP(),n=a?.number,l=(0,uq.useRef)(n),{firstNavigableColumnId:i,lastNavigableColumnId:s}=(0,uq.useMemo)(()=>({firstNavigableColumnId:e.visibleColumns.find(e=>!e.nonNavigable)?.id,lastNavigableColumnId:e.visibleColumns.slice().reverse().find(e=>!e.nonNavigable)?.id}),[e.visibleColumns]),o=(0,uq.useCallback)((e,t,{isSuspended:a})=>{let o=e===document.activeElement,d=!o&&e.contains(document.activeElement);if(d)return;let c="nearest";l.current!==n?(l.current=n,r||(c="end")):t===i&&o&&!r?c="end":t===s&&o&&!r&&(c="start"),e.focus({preventScroll:!0}),!a&&(etK()?"scrollIntoViewIfNeeded"in e&&"function"==typeof e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded(!1):e.scrollIntoView({block:"nearest",inline:c}))},[n,i,s,r]);return(0,uq.useMemo)(()=>({prepareRow:e.prepareRow,focusCellElement:o}),[o,e.prepareRow])}let etY=()=>{let e=(0,uq.useRef)(null),t=Oi(),r=_D();return(0,uq.useEffect)(()=>{function a(a){let n=a.target;e.current?.contains(n)||GX(n)||(t(),r(FY(null)))}return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[t,r]),{containerRef:e}},etX=()=>{let{state:{focus:e},navigationDispatch:t}=x5(),r=_D(),a=_P(),{clearClipboard:n}=Z6(),l=Oi(),i=(0,uq.useCallback)(t=>{!(!e||xG(e)&&e.details.meta.editing)&&"\\"===t.key&&((0,m8.eE)()?t.metaKey:t.ctrlKey)&&t.shiftKey&&xG(e)&&(t.stopPropagation(),t.preventDefault(),r(Ok(e)))},[e,r]),s=(0,uq.useCallback)(r=>{let a=r.relatedTarget,n=r.currentTarget.contains(a),l=GX(a),i=!l&&!n,s=e?.type==="coordinate"&&e.details.meta.suspended;i&&!s&&t(x1())},[t,e]);return(0,uq.useEffect)(()=>{let e=e=>{let i=kE(e);i===k_.CTRL_SPACE&&(e.stopPropagation(),e.preventDefault(),t(xJ())),i===k_.ESCAPE&&(a&&r(FY(null)),n(),l())};return addEventListener("keydown",e),()=>removeEventListener("keydown",e)},[r,a,t,n,l]),{onKeyDown:i,onBlur:s}},etJ=[etW],et0=()=>xY().focus,et1=(0,uq.memo)(function({focusOnInit:e}){JA("Table","ReactTable","");let{visibleFields:t}=ZB(),r=(0,uq.useMemo)(()=>({fields:t,plugins:etJ}),[t]),a=ets(r),n=JS(a,e),l=(0,uq.useRef)({instance:a,getHeaderFocus:et0});return(0,uO.jsx)(__,{table:a,cellHeight:37,children:(0,uO.jsx)(x4,{initialState:n,metaRef:l,children:(0,uO.jsx)(Zv,{children:(0,uO.jsx)(ZT,{children:(0,uO.jsx)(eto,{filteredItems:a.preTransientFilteredFlatRows,children:(0,uO.jsx)(Z4,{children:(0,uO.jsxs)(JN,{children:[(0,uO.jsx)(etV,{filterCount:(0,uq.useDeferredValue)(a.flatRows.length)}),(0,uO.jsx)(et5,{table:a})]})})})})})})})}),et2={position:"relative",flex:"1 1 auto",width:"100%"},et5=({table:e})=>{let{onKeyDown:t,onBlur:r}=etX(),a=(0,uq.useRef)(null),{hasWritePermissions:n}=yI(),{loadingState:l}=X$(),{openPane:i}=b0(),s=l===XV.loaded?37*e.rows.length+34:71,o=et3({table:e,totalHeight:s,scrollRef:a}),{horizontalScrollbarSize:d,verticalScrollbarSize:c}=GJ(a),{onNewItem:u}=JT(a,e.rows.length,0),{currentView:m}=bP(),p=m?.number,{containerRef:f}=etY(),{sliceField:h}=Bl(),{slicerItems:g}=etd(),x=etQ(e);(0,uq.useLayoutEffect)(()=>{Rp(a.current)},[p]);let y=e?.groupedRows?xF(e.groupedRows):void 0,b=(0,uq.useMemo)(()=>({flex:"1 1 auto",flexDirection:"column",width:"100%",position:"relative",backgroundImage:t=>e.groupedRows?"none":`url("data:image/svg+xml,%3Csvg viewBox='0 0 1 1' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='1' height='1' fill='transparent' /%3E%3C/svg%3E"), url("data:image/svg+xml,%3Csvg viewBox='0 0 1 1' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='1' height='1' fill='${encodeURIComponent(t.colors.border.muted)}' /%3E%3C/svg%3E")`,backgroundSize:"1px 37px",backgroundPositionY:"15px",backgroundRepeat:"repeat-x, repeat",bg:e.groupedRows?e=>`${e.colors.canvas.inset}`:o?e=>`${e.colors.canvas.default}`:e=>`${e.colors.canvas.inset}`,display:"flex"}),[o,e.groupedRows]);return(0,uO.jsxs)(uO.Fragment,{children:[h&&(0,uO.jsx)(Yh,{slicerItems:g,openSidePanel:i}),(0,uO.jsxs)(mF.Z,{...e.getTableProps({onKeyDown:t,onBlur:r,role:"grid"}),...(0,mp.f)("table-root"),sx:b,children:[(0,uO.jsx)(mF.Z,{sx:et2,"data-hpc":!0,children:(0,uO.jsx)(uU.Z,{fontSize:"14px",children:(0,uO.jsx)(etB,{scrollRef:a,containerRef:f,table:e,tableGroups:y,isOmnibarFixed:o,loadingState:l,hasWritePermissions:n,itemData:x})})}),(!y||0===y.length)&&n&&(0,uO.jsx)(qU,{horizontalScrollbarSize:d,verticalScrollbarSize:c,isFixed:o,effectiveTableHeight:s,children:(0,uO.jsx)(et$,{onAddItem:u,isFixed:o})})]})]})};function et3({totalHeight:e,scrollRef:t,table:r}){return(0,uq.useSyncExternalStore)(et4,()=>{let a=void 0!==r.groupedRows,n=e+45>(t.current?.clientHeight??0);return!a&&n})}function et4(e){return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}try{(cl=et1).displayName||(cl.displayName="ReactTable")}catch{}try{(ci=et5).displayName||(ci.displayName="InnerTable")}catch{}let et6=(0,uq.memo)(function({children:e}){let{isFieldVisible:t}=ZB();return(0,uO.jsx)(eeE,{isFieldVisible:t,children:e})});try{(cs=et6).displayName||(cs.displayName="TableColumnsProviderForTable")}catch{}var et7=r(31147);function et8(e){return(0,uq.useSyncExternalStore)(et9,()=>ere(e.current))}function et9(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}function ere(e){if(!e)return!1;let t=e.style.overflow;t&&"visible"!==t||(e.style.overflow="hidden");let r=e.offsetWidth<e.scrollWidth;return e.style.overflow=t,r}let ert={[_z.Board]:mM.Rg1,[_z.List]:mM.Rg1,[_z.Roadmap]:mM.Bjy,[_z.Table]:mM.$eq},err=(e,t)=>t?mM.XHJ:ert[e],era=({selected:e,viewLayout:t,isDeleted:r,isViewStateDirty:a})=>{let{memex_header_redesign:n}=g9(),l=(0,uO.jsx)(mL.Z,{icon:err(_G(t),r),sx:{color:r?"fg.subtle":e?"fg.default":"fg.muted"}});return n?(0,uO.jsx)(QR,{isViewStateDirty:a,children:l}):l},ern={display:"flex",maxWidth:"100%",width:"100%",gap:2,position:"relative","&::after, &::before":{content:'""',display:"none",position:"absolute",top:"-8px",width:"4px",bg:"accent.emphasis",height:"calc(100% + 16px)",border:0,borderRadius:"6px",zIndex:12},"body.is-dragging &.show-sash-view.show-sash-after":{"&::after":{right:"-20px",display:"block"},"&.selected::after":{right:"-20px"}},"body.is-dragging &.show-sash-view.show-sash-before":{"&::before":{left:"-18px",display:"block"},"&.selected::before":{right:"-21px"}}},erl=(0,uq.forwardRef)(function({view:e,selected:t},r){let{memex_header_redesign:a}=g9(),n=(0,uq.useRef)(null);(0,uq.useImperativeHandle)(r,()=>n.current);let l=(0,uq.useRef)(null),i=(0,uq.useRef)(null),s=(0,uq.useRef)(null),{renameView:o}=bP(),[d,c]=Eh(e.name),[u,m]=(0,uq.useState)(!1),{hasWritePermissions:p}=yI(),f=(0,uq.useMemo)(()=>({id:e.id,number:e.number}),[e.id,e.number]),h=Ht({dragAxis:"horizontal",dragID:`${e.number}`,dragType:"view",dragIndex:e.number,dragRef:s,disable:!p,metadata:f});(0,uq.useEffect)(()=>{u&&l.current?.focus()},[u,l]);let g=(0,uq.useCallback)(()=>{p&&m(!0)},[p,m]),x=(0,uq.useCallback)(()=>{m(!1)},[m]),y=(0,uq.useCallback)(e=>{c(e.target.value)},[c]),b=(0,uq.useCallback)(e=>{e.stopPropagation()},[]),v=(0,uq.useCallback)(()=>{c(e.name)},[c,e.name]),w=(0,uq.useCallback)(t=>{switch(t.key){case"Enter":u||g(),d.trim().length>0&&d!==e.name&&o(e.number,d,{ui:hR}),t.preventDefault(),(0,w8.flushSync)(()=>{x()}),i.current?.focus();break;case"Escape":v(),u&&x()}},[u,d,e.name,e.number,x,o,g,v]),j=Eg(w),C=(0,uq.useCallback)(()=>{document.hasFocus()&&(0===d.trim().length?v():o(e.number,d,{ui:hR}),x())},[d,v,x,o,e.number]);IC(n);let k=ER();return(0,uO.jsxs)(mF.Z,{className:F7()({selected:t}),ref:s,...h.props,sx:ern,...h.handle.props,children:[(0,uO.jsx)(mF.Z,{children:(0,uO.jsx)(era,{selected:t,viewLayout:e.localViewState.layout,isViewStateDirty:e.isViewStateDirty,isDeleted:e.isDeleted})}),(0,uO.jsx)(mF.Z,{onClick:g,sx:p&&u?{px:1,ml:-1,"&:focus-within":{boxShadow:"primer.shadow.focus",borderRadius:"2"},"&:hover:not(:focus-within)":{boxShadow:"primer.shadow.focus",borderRadius:"2"}}:{pl:1,ml:-1,overflow:"hidden"},children:t&&u?(0,uO.jsx)(E_.Z,{...k,children:(0,uO.jsx)(k9,{as:Sa,ref:l,sx:{fontSize:1},autoComplete:"off",value:d,onChange:y,onMouseDown:b,onBlur:C,"aria-label":"Change view name",disabled:!p||e.isDeleted,...j,...(0,mp.f)("view-name-input")})}):(0,uO.jsx)(mO.Z,{ref:n,sx:{display:"inline-block",color:t?"fg.default":"fg.muted","&:hover":{color:"fg.default"},whiteSpace:"nowrap",maxWidth:"100%",pr:0},...(0,mp.f)("view-name-static"),children:d})}),!a&&t?(0,uO.jsx)(mF.Z,{sx:{ml:2},children:(0,uO.jsx)(Kg.Provider,{value:hR,children:(0,uO.jsx)(QF,{viewOptionMenuTriggerRef:i,view:e,viewNameInputRef:l,startEditing:g})})}):null]})});try{(co=era).displayName||(co.displayName="ViewTypeIcon")}catch{}try{(cd=erl).displayName||(cd.displayName="ViewTab")}catch{}let eri=({projectViewId:e})=>(0,uO.jsx)(W9,{children:(0,uO.jsx)(ers,{projectViewId:e})}),ers=(0,uq.memo)(function({projectViewId:e}){let{views:t,viewsMap:r,currentView:a,setCurrentViewNumber:n,updateViewPriority:l}=bP(),{hasWritePermissions:i}=yI(),s=(0,uq.useRef)(null),o=(0,uq.useCallback)(async({dragMetadata:e,dropMetadata:a,side:n})=>{let s;if(!i||!a||!e)return;let o=r[e.number],d=t.findIndex(t=>t.id===e?.id),c=t.findIndex(e=>e.id===a?.id);if(!o||d===c||("before"===n?s=t[c]:"after"===n&&c!==t.length-1&&(s=t[c+1]),o.number===s?.number))return;let u=d!==t.length-1?t[d+1]:void 0;await l(o.number,s?.id||"",s?.number,u?.number)},[t,r,i,l]),d=Hr({dropID:"views",dropType:"view",dropRef:s,onDrop:o});return(0,uO.jsx)("div",{...d.props,ref:s,children:(0,uO.jsxs)(et7.Z,{"aria-label":"Select view",sx:{isolation:"isolate",bg:"canvas.inset","> nav":{px:[3,4,5]},"& .TabNav-item:not(.selected):not(:first-child):not(.TabNav-item.selected + .TabNav-item)::before":{content:'""',position:"absolute",backgroundColor:"border.muted",width:"1.5px",height:"19px",top:"50%",right:"100%",transform:"translateY(-50%)"},"& .TabNav-item.TabNav-item-truncate:not(.selected)::after":{content:"''",position:"absolute",right:1,top:"50%",width:"30px",height:"21px",transform:"translateY(-50%)",backgroundImage:e=>`linear-gradient(to right, transparent, ${e.colors.canvas.inset} 75%, ${e.colors.canvas.inset} 50%, ${e.colors.canvas.inset} 25%)`}},...(0,mp.f)("tab-nav"),children:[t.map(t=>{let r=t.number===a?.number;return(0,uO.jsx)(eru,{selected:r,projectViewId:e,onTabChange:e=>{e.preventDefault(),r||n(t.number,{ui:hz})},view:t},t.number)}),i&&t.length<42&&(0,uO.jsx)(erd,{})]})})}),ero={"&:hover":{color:"fg.default"},overflow:"hidden",whiteSpace:"nowrap",color:"fg.muted",alignSelf:"center"};function erd(){let{createNewDefaultView:e,duplicateCurrentViewState:t,currentView:r}=bP(),{memex_table_without_limits:a}=g9();return(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Button,{...(0,mp.f)("view-navigation-create-new-view"),role:"tab",sx:ero,variant:"invisible",leadingIcon:mM.pOD,trailingAction:null,children:"New View"}),(0,uO.jsx)(In.P.Overlay,{...(0,mp.f)("view-navigation-create-new-view-overlay"),children:(0,uO.jsxs)(Ia.S,{children:[(0,uO.jsxs)(Ia.S.Group,{title:"Layout",children:[(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>e({layout:_Z.Table},{ui:hz}),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.$eq,{})}),"Table"]}),(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>e({layout:_Z.Board},{ui:hz}),disabled:a,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.Rg1,{})}),"Board"]}),(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>e({layout:_Z.Roadmap},{ui:hz}),disabled:a,children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.Bjy,{})}),"Roadmap"]})]}),r?(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(Ia.S.Divider,{}),(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>{t(r.number,void 0,{ui:hz})},children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.TIy,{})}),fE.duplicateView({isDirty:r.isViewStateDirty})]})]}):null]})})]})}let erc=(0,uq.forwardRef)(function({sx:e,...t},r){return(0,uO.jsx)(Uu,{...t,ref:r})}),eru=({selected:e,onTabChange:t,view:r,projectViewId:a})=>{let{memex_header_redesign:n}=g9(),{hasWritePermissions:l}=yI(),i=(0,uq.useRef)(null);(0,uq.useEffect)(()=>{let{current:t}=i;e&&t&&t.scrollIntoView()},[e]);let s=(0,uq.useRef)(null),o=et8(s);return(0,uO.jsxs)(et7.Z.Link,{ref:i,className:o&&!e?"TabNav-item-truncate":"",selected:e,"aria-selected":e?"true":void 0,as:e?"div":erc,"aria-controls":e?a:void 0,to:e?void 0:my.generatePath({viewNumber:r.number}),sx:{position:"relative",cursor:"pointer",display:"flex",alignItems:"center",margin:0,flexGrow:1,width:"200px",maxWidth:"max-content",minWidth:e?"min-content":o?"140px":void 0,px:3,pr:e?void 0:3},title:r.name,onMouseDown:t,onClick:t,...(0,mp.f)("view-navigation-view-tab-link"),children:[(0,uO.jsx)(erl,{ref:s,view:r,selected:e}),!n&&r.isViewStateDirty&&!e&&(0,uO.jsx)(Uv,{isDirty:!0,hideDirtyState:!l,sx:{top:"-5px",left:"-4px",zIndex:1}},`dirty-for-${r.number}`)]})};try{(cc=eri).displayName||(cc.displayName="ViewNavigation")}catch{}try{(cu=ers).displayName||(cu.displayName="ViewNavigationInner")}catch{}try{(cm=erd).displayName||(cm.displayName="NewViewMenu")}catch{}try{(cp=erc).displayName||(cp.displayName="TabNavLink")}catch{}try{(cf=eru).displayName||(cf.displayName="ViewNavigationTab")}catch{}let erm=()=>{let{currentView:e}=bP(),{allColumns:t}=CB(),{visibleFields:r}=ZB(),{getColumnSort:a,isSorted:n,clearSortedBy:l,setColumnSort:i}=NO(),{isProjectViewRoute:s}=kd(),{postStats:o}=bM(),d=(0,uq.useMemo)(()=>t.slice().sort((e,t)=>fb(e,t,r)),[t,r]),c=(0,uq.useCallback)((t,r)=>{e&&(i(t,r,0),o({name:"desc"===r?hM:hA,ui:hZ,context:t.id,index:0}))},[e,o,i]);mm(()=>{if(!s||!e)return null;let t=[],r=["s","Sort by...",t];for(let[e,r]of(n&&t.push(["s","Remove sort-by","sorting.clear",()=>l()]),Object.entries(d))){let n=a(r),i=()=>c(r,"asc"),s=()=>c(r,"desc");n?"asc"===n.direction?t.push([e,`${fE.sortBy}: ${r.name}, desc`,"column.sort",s]):t.push([e,`${fE.unsortBy}: ${r.name}`,"column.unsort",()=>l()]):t.push([e,`${fE.sortBy}: ${r.name}, asc`,"column.sort",i])}return r},[s,e,n,l,d,a,c])},erp=e=>{e.columns.push(erg)},erf="roadmap-pill-area",erh={Header:"",id:erf,width:50,canSort:!1,nonNavigable:!1,canBeShifted:!1,canReorder:!1,Cell:"",CellEditor:""},erg=e=>[...e,erh],erx=(0,uq.createContext)(null);function ery(){let e=(0,uq.useContext)(erx);return e}try{(ch=erx).displayName||(ch.displayName="DraggingRowContext")}catch{}let erb=(e,t)=>{let r=e?.rect?.current?.translated?.top,a=t?.rect.top;return"number"!=typeof r||"number"!=typeof a?null:r<=a?Px.Top:Px.Bottom},erv=(e,t)=>e?t===Px.Top?e.rect.top:e.rect.bottom:null,erw=({rows:e,isGrouped:t,scrollRef:r,headerHeight:a,tableWidth:n})=>{let{active:l,over:i}=(0,GK.Cj)(),{ctrlKey:s}=FZ(),o=(0,uq.useMemo)(()=>{let r=[];if(t)for(let t of e){let e=t.subRows[t.subRows.length-1]?.original?.id;void 0!==e&&r.push(e)}else{let t=e[e.length-1]?.original?.id;void 0!==t&&r.push(t)}return r},[e,t]),d=(0,uq.useCallback)(e=>o.includes(e),[o]),c=l?erb(l,i):null,u=c?erv(i,c):null,m=i?.data?.current?.itemId,p=!!m&&d(m),f=c===Px.Bottom&&p?-2:0,h=ery(),g=null!==h&&(h!==m||h===m&&c===Px.Bottom),x=(0,uq.useMemo)(()=>{if(r?.current&&null!==u){let e=r.current.getBoundingClientRect(),t=a??0,l=`${n}px`??0;return{top:r.current.scrollTop-e.top-t+f+u-1,left:r.current.scrollLeft,width:l}}return{}},[r,n,a,u,f]);return(0,uO.jsx)(uO.Fragment,{children:g&&null!=l&&null!==u&&m&&c&&(0,uO.jsx)(mF.Z,{sx:{bg:"accent.emphasis",height:3,pointerEvents:"none",display:"flex",position:"absolute",zIndex:3},style:x,children:t&&s?(0,uO.jsx)(mL.Z,{icon:mM.pOD,sx:{bg:"accent.emphasis",borderRadius:"100%",color:"fg.onEmphasis",position:"relative",left:52,top:"-7px",padding:"2px",zIndex:3},size:16}):null})})};try{(cg=erw).displayName||(cg.displayName="RowReorderSash")}catch{}let erj=[etI.DL,etI.lv],erC={threshold:{x:0,y:.4}},erk=(0,uq.memo)(function({children:e}){let t=_D(),{navigationDispatch:r}=x3(),a=_M(),{flatRows:n}=a,l=Oi(),{groupedByColumnId:i}=NR(),s=(0,uq.useCallback)(()=>n.filter(e=>!e.isGrouped),[n]),o=(0,uq.useCallback)(()=>s().map(e=>e.original.id),[s]),d=(0,uq.useCallback)(e=>{let t=s().find(t=>t.original.id===e);return(0,u0.Z)(t,"Row must exist"),t},[s]),c=(0,uq.useCallback)(e=>d(e).original,[d]),u=(0,uq.useCallback)(e=>{if(!i)return;let t=d(e);return _t(a,t)},[d,a,i]),[m,p]=(0,uq.useState)(null),[f,h]=(0,uq.useState)(!1);Fd("is-dragging",f);let g=(0,uq.useMemo)(()=>o(),[o]),x=FG(),y=(0,uq.useCallback)(e=>{let t=e.active?.data;return t?.current?.itemId},[]),b=(0,uq.useRef)(!1),v=(0,uq.useRef)(null),w=(0,uq.useCallback)(e=>{p(e),b.current=!0,v.current=null,l()},[p,l]),j=m2(w,200),C=(0,uq.useCallback)(()=>{v.current?.cancel(),v.current=null,b.current=!1},[]),k=(0,uq.useCallback)(e=>{let a=e.active?.data;a?.current?.onRowMouseDown(),C(),t(FY(null)),h(!0);let n=y(e);n&&(v.current=j(n),r(x1()))},[C,t,y,j,r]),S=(0,uq.useCallback)(e=>{if(!b.current){C();let t=y(e);t&&w(t)}},[w,C,y]),I=(0,uq.useCallback)(e=>{let r=y(e);r&&t(FY(r)),C(),h(!1),p(null)},[y,C,t]),N=(0,uq.useCallback)(async e=>{if(!b.current&&e.activatorEvent instanceof PointerEvent){let t=e.active?.data;t?.current?.onRowClick(e.activatorEvent)}C(),h(!1);let{over:r,active:a}=e,n=r?.data;if(m&&n?.current?.itemId){let e=erb(a,r),l=c(m),i=u(m),s=c(n.current.itemId),o=u(n.current.itemId);l&&s&&e&&(await x({movingItem:l,movingItemGroup:i,overItemGroup:o,overItem:s,side:e}),t(FY(m))),p(null)}else{p(null);let r=y(e);r&&t(FY(r))}},[C,m,y,t,c,u,x]),_=(0,GK.Dy)((0,GK.VT)(GK.we)),T=Ru();return(0,uO.jsx)(GK.LB,{collisionDetection:GK.pE,modifiers:erj,onDragStart:k,onDragEnd:N,onDragMove:S,onDragCancel:I,autoScroll:erC,sensors:_,accessibility:(0,uq.useMemo)(()=>({container:T}),[T]),children:(0,uO.jsx)(eeM.Fo,{items:g,strategy:eeM.qw,children:(0,uO.jsx)(erx.Provider,{value:m,children:e})})})});try{(cx=erk).displayName||(cx.displayName="RowReorderingProvider")}catch{}var erS=r(11640);let erI=(0,uq.createContext)(null),erN=(0,uq.createContext)(null),er_=(0,uq.createContext)(null),erT=(0,uq.createContext)(null),erR=(0,uq.createContext)(null),erE=(0,uq.createContext)(null),erD={month:{columnWidth:48,timeRangeMonths:6},quarter:{columnWidth:16,timeRangeMonths:18},year:{columnWidth:4,timeRangeMonths:72}},erP=(0,uq.memo)(function({children:e}){let t=(0,uq.useMemo)(()=>fN(new Date),[]),r=OK(),a=OJ(),{disableDateFieldsPopover:n}=OG(),[l,i]=(0,uq.useState)(a),s=(0,uq.useMemo)(()=>erD[l].columnWidth,[l]),[{timeRangeStart:o,timeRangeEnd:d},c]=(0,uq.useState)({timeRangeStart:fN((0,erS.Z)(t,-erD[a].timeRangeMonths)),timeRangeEnd:fN((0,erS.Z)(t,erD[a].timeRangeMonths))}),u=(0,uq.useRef)(null),m=(0,uq.useRef)(null),p=(0,uq.useMemo)(()=>Math.abs((0,gg.Z)(d,o)),[d,o]),f=p*s,h=(0,uq.useCallback)(e=>{let t=d.getTime()-o.getTime(),r=e.getTime()-o.getTime();return 0+r/t*(f-0)},[f,0,d,o]),g=(0,uq.useCallback)(e=>{if(u&&u.current){let t=u.current.getBoundingClientRect().left;return u.current.scrollLeft+e-t}return 0},[]),x=(0,uq.useCallback)(e=>{let t=o.getTime(),r=d.getTime()-t,a=new Date(new Date(e*(r/f)+t).setUTCHours(0,0,0,0));return a},[d,o,f]),y=(0,uq.useCallback)(e=>{if(u&&u.current){let t=u.current.getBoundingClientRect().left;return x(u.current.scrollLeft+e-t)}},[x]),b=(0,uq.useSyncExternalStore)((0,uq.useCallback)(e=>{let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.disconnect()}},[]),(0,uq.useCallback)(()=>u.current?.clientWidth??1,[u])),v=(0,uq.useCallback)(()=>{if(u&&u.current){let e=u.current.scrollLeft+r;return{left:e,right:e+b-r}}return{left:0,right:0}},[r,b]),w=S5(e=>{j(e)},500),j=(0,uq.useCallback)(e=>{let t=m.current;if(!t||t.completed){m.current=e;let t=e.zoomLevel||l;c({timeRangeStart:fN((0,erS.Z)(e.date,-erD[t].timeRangeMonths)),timeRangeEnd:fN((0,erS.Z)(e.date,erD[t].timeRangeMonths))})}},[l]),C=(0,uq.useCallback)(()=>{w({date:d,direction:"next"})},[w,d]),k=(0,uq.useCallback)(()=>{w({date:o,direction:"prev"})},[w,o]),S=(0,uq.useCallback)(()=>{let e=window.innerWidth-r;return Math.floor(r+e*(1/3)-s/2)},[r,s]),I=(0,uq.useCallback)((e,t=!1)=>{if(u&&u.current){let r=h(e),a=S();r-a<1?j({date:e,direction:"prev"}):r+a>f-1?j({date:e,direction:"next"}):u.current?.scrollTo({left:r-a,behavior:t?"smooth":"auto"})}},[h,j,S,f]),N=(0,uq.useCallback)((e=!1)=>{if(u&&u.current){let t=u.current.scrollLeft-r,a=t+u.current.offsetWidth-50;u.current?.scrollTo({left:a,behavior:e?"smooth":"auto"})}},[r]),_=(0,uq.useCallback)((e=!1)=>{if(u&&u.current){let t=u.current.scrollLeft+r,a=t-u.current.offsetWidth+50;u.current?.scrollTo({left:a,behavior:e?"smooth":"auto"})}},[r]),[T,R]=(0,uq.useState)(!1),E=(0,uq.useCallback)(e=>{n(),R(e)},[n]),{allColumns:D}=CB(),{dateFields:P}=OH(),A=(0,uq.useMemo)(()=>{let e=D.reduce((e,t)=>{if(g1(t)){let r=gR(t),a=r.map(e=>{let{startDate:t,duration:r}=e,a=gN({startDate:t,duration:r});return{...e,start:a.startDate,end:a.endDate}});e[t.id]=a}return e},{});return e},[D]),M=(0,uq.useCallback)((e,t)=>{let r=A[e.id]?.find(e=>t>=e.start&&t<=e.end);return r},[A]),L=(0,uq.useCallback)(e=>{let t=P[0]??_V,r=P[1]??_V,a={start:e,end:e};if(t!==_V&&g1(t)){let n=M(t,e);n?(a.start=n.start,a.startIteration=n,r===_V&&(a.end=n.end,a.endIteration=n)):a.start=void 0}if(r!==_V&&g1(r)){let n=M(r,e);n?(a.end=n.end,a.endIteration=n,t===_V&&(a.start=n.start,a.startIteration=n)):a.end=void 0}return a},[P,M]);(0,uq.useLayoutEffect)(()=>{if(a!==l&&u&&u.current){let e=S()+u.current.scrollLeft,t=x(e);i(a),j({date:t,direction:"none",zoomLevel:a})}},[a,j,l,S,s,x]),(0,uq.useLayoutEffect)(()=>{if(m.current&&u.current){let{date:e,direction:t,completed:r}=m.current;if(!r){let r=h(e),a="next"===t?u.current.offsetWidth:"prev"===t?0:S();u.current?.scrollTo({left:r-a})}}},[s,h,d,o,S]),(0,uq.useEffect)(()=>{if(m.current&&u.current){let{date:e,completed:t}=m.current;t||(I(e,!0),m.current={...m.current,completed:!0})}},[I,d,o]);let[F,Z]=(0,uq.useState)(!1);return(0,uO.jsx)(er_.Provider,{value:L,children:(0,uO.jsx)(erN.Provider,{value:v,children:(0,uO.jsx)(erI.Provider,{value:(0,uq.useMemo)(()=>({columnWidth:s,getX:h,getXFromClientX:g,getDateFromClientX:y,getDateFromX:x,timeRangeEnd:d,timeRangeStart:o,totalWidth:f,today:t}),[s,h,g,y,x,d,o,f,t]),children:(0,uO.jsx)(erE.Provider,{value:Z,children:(0,uO.jsx)(erR.Provider,{value:F,children:(0,uO.jsx)(erT.Provider,{value:(0,uq.useMemo)(()=>({roadmapRef:u,scrollToDate:I,scrollToNextPage:N,scrollToPrevPage:_,shiftToNextRange:C,shiftToPrevRange:k}),[I,N,_,C,k]),children:(0,uO.jsx)(Kf.Provider,{value:(0,uq.useMemo)(()=>({isDateConfigurationMenuOpen:T,setOpenDateConfigurationMenu:E}),[T,E]),children:e})})})})})})})}),erA=()=>{let e=(0,uq.useContext)(erI);if(null===e)throw Error("useRoadmapView must be used within a RoadmapViewContext");return e},erM=()=>{let e=(0,uq.useContext)(er_);return(0,u0.Z)(null!=e,"useRoadmapGetTimeSpan must be used within a RoadmapGetTimeSpanContext"),e},erL=()=>{let e=(0,uq.useContext)(erN);return(0,u0.Z)(null!=e,"useRoadmapGetViewport must be used within a RoadmapGetViewportContext"),e},erF=()=>{let e=(0,uq.useContext)(erT);if(null===e)throw Error("useRoadmapNavigation must be used within a RoadmapNavigationContext");return e},erZ=()=>{let e=(0,uq.useContext)(erR);return(0,u0.Z)(null!==e),e},erO=()=>{let e=(0,uq.useContext)(erE);return(0,u0.Z)(null!==e),e};try{(cy=erP).displayName||(cy.displayName="RoadmapViewProvider")}catch{}let erB={CustomDate:"custom-date",Iteration:"iteration",IterationBreak:"iteration-break",Milestone:"milestone"},erV=(0,uq.createContext)(null),er$=(0,uq.createContext)(null),erz=(0,uq.createContext)(null),erU=(0,uq.memo)(function({children:e,rows:t}){let{dateFields:r,markerFields:a}=OH(),{timeRangeStart:n,timeRangeEnd:l}=erA(),{allColumns:i}=CB(),s=(0,uq.useMemo)(()=>{let e=[];for(let t of a)g5(t)&&e.push(t);return e},[a]),o=!!a.find(e=>e.id===mP.Milestone),d=(0,uq.useMemo)(()=>{let e=new Map;if(!o)return e;for(let r of t)!function(t){let r=t.getMilestone();if(!r?.dueDate)return;let a=new Date(r.dueDate);if(a<n||a>l)return;let i=e.get(r.dueDate)??new Map;e.set(r.dueDate,i.set(r.id,r))}(r.original);return e},[o,t,l,n]),c=(0,uq.useMemo)(()=>t.map(e=>e.original),[t]),u=(0,uq.useMemo)(()=>erQ(c,s,n,l),[s,c,l,n]),m=(0,uq.useMemo)(()=>erq(i,a,erY(r),n,l),[i,a,r,n,l]),p=(0,uq.useMemo)(()=>erK(d),[d]),f=(0,uq.useMemo)(()=>{let e=new Map([...u,...p]),t=[...m.values(),...e.values()].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime());return{markersInRange:t,singleDayMarkerMap:e}},[u,m,p]);return(0,uO.jsx)(erV.Provider,{value:f,children:(0,uO.jsx)(er$.Provider,{value:d.size,children:(0,uO.jsx)(erz.Provider,{value:m.size,children:e})})})}),erW=()=>{let e=(0,uq.useContext)(erV);return(0,u0.Z)(null!=e,"useRoadmapMarkersInRange must be used within a RoadmapMarkersInRangeProvider"),e};function erH(){let e=(0,uq.useContext)(er$);return(0,u0.Z)(null!=e,"useRoadmapMilestoneMarkersSize must be used within a RoadmapMarkersInRangeProvider"),e}function erG(){let e=(0,uq.useContext)(erz);return(0,u0.Z)(null!=e,"useRoadmapIterationMarkersSize must be used within a RoadmapMarkersInRangeProvider"),e}function erq(e,t,r,a,n){let l=new Map,i=e.reduce((e,t)=>(g1(t)&&e.push(t),e),[]),s=new Set(r.map(e=>e===_V?_V:e.databaseId)),o=new Set([...t.map(e=>e.databaseId)]);function d(e,t,r,i){let s=new Date(e);if(s>=a&&s<=n){let a=l.get(e);if(a){let t=a.options;t.push(i),l.set(e,{...a,title:`${t.length} iterations`,duration:a.duration>i.duration?a.duration:i.duration,options:t})}else l.set(e,{id:i.id,type:r,title:i.title,date:i.startDate,duration:i.duration,isDateField:t,options:[i]})}}for(let e of i)if(o.has(e.databaseId)){let t=gR(e).sort(gM),r=t.entries();for(let[a,n]of r){let r=erX(t[a-1],n);void 0!==r&&d(r.startDate,s.has(e.databaseId),erB.IterationBreak,r),d(n.startDate,s.has(e.databaseId),erB.Iteration,n)}}return l}function erK(e){let t=new Map;for(let[r,a]of e.entries()){let e=[...a.values()],[n,l]=e.reduce((e,t)=>(e[0].push(t.title),e[1].push(`${t.title} (${t.repoNameWithOwner})`),e),[[],[]]);t.set(r,{id:`milestone:${r}`,type:erB.Milestone,title:e.length>1?`${e.length} milestones`:fn(n),description:fn(l),date:r,options:e})}return t}function erQ(e,t,r,a){let n=new Map;function l(e){for(let l of t){let t=e.getCustomField(l.id);if(t?.value){let i=vV(t.value),s=new Date(i);if(s<r||s>a)continue;n.set(i,{id:`${e.id}:${l.id}`,type:erB.CustomDate,title:l.name,date:i})}}}for(let t of e){if("rows"in t){for(let e of t.rows)l(e);continue}l(t)}return n}function erY(e){return e.filter(e=>e!==_V&&g1(e))}function erX(e,t){let r=gH(e,t);if(void 0!==r)return{id:`break-${e?.id}-${t?.id}`,title:"Break",titleHtml:"Break",startDate:vV(r.startDate.toString()),duration:r.duration}}let erJ=e=>{if(e.type!==erB.Iteration||!e.isDateField)return!1;let t=new Date,r=new Date(e.date),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=(0,pl.Z)(gv(e.date,e.duration||0),1);return(0,gu.Z)(a,(0,gm.Z)(r,1))&&(0,gp.Z)(a,n)};try{(cb=erV).displayName||(cb.displayName="RoadmapMarkersInRangeContext")}catch{}try{(cv=er$).displayName||(cv.displayName="RoadmapMilestoneMarkersSizeContext")}catch{}try{(cw=erz).displayName||(cw.displayName="RoadmapIterationMarkersSizeContext")}catch{}try{(cj=erU).displayName||(cj.displayName="RoadmapMarkersInRangeProvider")}catch{}let er0=()=>{let e=erH(),t=erG();return t>0||e>0},er1=()=>{let e=er0();return e?88:64},er2=()=>{let e=er1(),{groupedByColumnId:t}=NR();return(0,uq.useMemo)(()=>({scrollMarginTop:`${e+1+(t?F8:0)}px`,scrollMarginBottom:"64px"}),[e,t])};function er5({children:e,sx:t}){return(0,uO.jsx)(mF.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden",padding:"12px",position:"relative",height:"40px",borderBottom:"1px solid",borderColor:"border.muted",...t},children:e})}let er3={cursor:"default",backgroundColor:"canvas.default",zIndex:2},er4=(0,uq.memo)((0,uq.forwardRef)(function(e,t){let{children:r,sx:a,role:n="gridcell",style:l,...i}=e;return(0,uO.jsx)(mF.Z,{ref:t,role:n,sx:{...er3,...a},style:l,...i,children:r})})),er6={display:"flex",height:"40px",alignItems:"center","body.roadmap-date-tooltip-visible:not(.is-dragging) &.roadmap-row:hover":{zIndex:1},"body:not(.is-dragging) &.roadmap-row:hover, &.pill-drag":{"& .roadmap-table-cell":{backgroundColor:"canvas.subtle","&:before":{backgroundColor:"canvas.subtle"}},"& .roadmap-pill:not(.is-focused)":{border:"1px solid",borderColor:"fg.muted",borderRadius:1},"& .row-menu-trigger":{opacity:1},"&.row-highlight":{zIndex:3}},"&.roadmap-row.row-highlight:not(.row-selected)":{"& .roadmap-table-cell, & .roadmap-table-cell:hover":{boxShadow:e=>`0 -1px 0 0 ${e.colors.accent.emphasis}, 0 1px 0 0 ${e.colors.accent.emphasis}`}},"&.roadmap-row.row-highlight, &.roadmap-row.row-selected":{zIndex:3,"& .roadmap-table-cell, & .roadmap-table-cell:hover":{backgroundColor:"canvas.default","&:before":{zIndex:-1,content:'""',position:"absolute",backgroundColor:e=>`${e.colors.accent.subtle}`},":not(.is-focused):before":{inset:0}},"&.selection-top-edge .roadmap-table-cell":{boxShadow:e=>`0 -1px 0 0 ${e.colors.accent.emphasis}`},"&.selection-bottom-edge .roadmap-table-cell":{boxShadow:e=>`0 1px 0 0 ${e.colors.accent.emphasis}`},"&.selection-top-edge.selection-bottom-edge .roadmap-table-cell":{boxShadow:e=>`0 -1px 0 0 ${e.colors.accent.emphasis}, 0 1px 0 0 ${e.colors.accent.emphasis}`}},"& .roadmap-table-cell.is-focused":{zIndex:3,position:"sticky","& .roadmap-drag-sash:after":{borderColor:"transparent"}}},er7={boxShadow:"shadow.medium","&::after":{content:'""',position:"absolute",inset:0,borderBottom:"1px solid",borderBottomColor:"border.default",zIndex:-1}},er8=(0,uq.forwardRef)(function({row:e,children:t,isSelected:r,isDraggingPill:a,isHighlighted:n,...l},i){let{flatRows:s,groupedRows:o}=_M(),d=e?Oo(e,s,o):null,c=void 0!==e&&r&&e.original.contentType!==mA.RedactedItem,u=OK(),m=F7()("roadmap-row",{"row-highlight":n,"row-selected":c,"selection-top-edge":c&&d&&(!d.beforeSelected||d.firstInGroup),"selection-bottom-edge":c&&d&&(!d.afterSelected||d.lastInGroup),"pill-drag":a}),p=er2();return(0,uO.jsx)(mF.Z,{ref:i,role:"row",className:m,sx:er6,style:{...p,marginLeft:`-${u}px`},"data-test-row-is-selected":r,...l,children:t})});try{(cC=er5).displayName||(cC.displayName="RoadmapCellContent")}catch{}try{(ck=er4).displayName||(ck.displayName="RoadmapCell")}catch{}try{(cS=er4).displayName||(cS.displayName="RoadmapCell")}catch{}try{(cI=er8).displayName||(cI.displayName="RoadmapRow")}catch{}function er9(e,t){let{groupedByColumnId:r}=NR(),{hasWritePermissions:a}=yI(),n=eae(t),l=(0,uq.useCallback)(t=>{let r=new ResizeObserver(t);return e.current&&r.observe(e.current),()=>{r.disconnect()}},[e]),i=(0,uq.useCallback)(()=>{if(!e.current)return!1;let t=n+90>eae(e);return void 0===r&&t&&a},[e,r,a,n]);return(0,uq.useSyncExternalStore)(l,i)}function eae(e){return e.current?.clientHeight??0}let eat="data-row-selection-handle",ear=e=>e&&(e.hasAttribute(eat)||e.closest(".row-menu-trigger")),eaa=()=>{let e=_P(),t=_D(),r=Oi();(0,uq.useEffect)(()=>{function e(e){let a=e.target;ear(a)||GX(a)||(t(FY(null)),r())}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r,t,e])},ean=(0,uq.createContext)(null),eal=(0,uq.memo)(function({children:e,selectedRowIds:t}){return(0,uO.jsx)(ean.Provider,{value:(0,uq.useMemo)(()=>({selectedRowIds:t}),[t]),children:e})});function eai(){let e=(0,uq.useContext)(ean);if(!e)throw Error("useSelectedRows must be used inside a SelectedRowsContext");return e}try{(cN=ean).displayName||(cN.displayName="SelectedRowsContext")}catch{}try{(c_=eal).displayName||(c_.displayName="SelectedRowsProvider")}catch{}let eas=()=>null,eao=e=>xG(e)&&e.details.x===erf,ead=(e,t,r)=>{if(e.original.contentType===mA.RedactedItem)return!1;if(t)return!0;let a=r(e.original.columns);return!!(a.start||a.end)},eac=({hasWritePermissions:e,getTimeSpanFromColumnData:t})=>(r,a,n,l)=>{if(!(n.y===xi.Next||n.y===xi.Previous))return!0;let i=eao(r),s=xz(r)||xW(r),o=s&&a&&eao(a),d=i||o;return!d||ead(l,e,t)},eau=({hasWritePermissions:e,getTimeSpanFromColumnData:t})=>(r,a,n)=>a.x!==xi.Next&&a.x!==xi.Previous||r!==erf||!n||ead(n,e,t),eam={color:"fg.muted",fontWeight:"normal"},eap={position:"absolute",top:"3px",right:3,zIndex:4,pr:[0,2,3],my:0,"&:before":{content:'""',position:"absolute",top:0,left:"-20px",width:"20px",height:"100%",backgroundColor:"canvas.default",maskImage:"linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%)"},display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:"canvas.default",listStyle:"none"},eaf=(0,uq.memo)(function(){let e=(0,uq.useRef)(null);(0,EW.v)({containerRef:e,bindKeys:EU.Qw.ArrowHorizontal});let{memex_header_redesign:t}=g9();return(0,uO.jsx)(mF.Z,{role:"menubar",ref:e,as:"ul",sx:eap,...(0,mp.f)("quick-action-toolbar"),children:(0,uO.jsxs)(Kg.Provider,{value:hT,children:[t?null:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(eah,{}),(0,uO.jsx)(eab,{}),(0,uO.jsx)(eaw,{}),(0,uO.jsx)(eav,{})]}),(0,uO.jsx)(eag,{}),(0,uO.jsx)(eax,{}),(0,uO.jsx)(eay,{})]})})}),eah=()=>{let e=(0,uq.useId)(),t=(0,uq.useRef)(null),[r,a]=(0,uq.useState)(!1);return(0,uO.jsxs)(mF.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,uO.jsx)(jI.z,{...(0,mp.f)("quick-action-toolbar-markers-menu"),ref:t,"aria-haspopup":"true","aria-expanded":r,"aria-controls":e,trailingIcon:null,variant:"invisible",size:"small",sx:eam,leadingIcon:K$,onClick:()=>a(e=>!e),children:"Markers"}),(0,uO.jsx)(In.P,{anchorRef:t,open:r,children:(0,uO.jsx)(In.P.Overlay,{role:"dialog",onEscape:()=>a(!1),onClickOutside:()=>a(!1),children:(0,uO.jsx)(Kz,{id:e})})})]})};function eag(){let{today:e}=erA(),{scrollToDate:t}=erF(),r=()=>{t(e,!0)},a=(0,uq.useRef)(null),[n,l]=kL({contentRef:a,"aria-label":fW.scrollToDateText(e)});return(0,uO.jsxs)(mF.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,uO.jsx)(jI.z,{onClick:r,size:"small",variant:"invisible",sx:eam,...n,ref:a,children:fW.toolbarToday}),l]})}function eax(){let{scrollToPrevPage:e}=erF(),t=()=>{e(!0)},r=(0,uq.useRef)(null),[a,n]=kL({contentRef:r,"aria-label":fW.scrollToPreviousPage,direction:"nw"});return(0,uO.jsxs)(mF.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,uO.jsx)(kF.h,{onClick:t,size:"small",variant:"invisible","aria-label":fW.scrollToPreviousPage,icon:mM.wyc,sx:eam,ref:r,...a}),n]})}function eay(){let{scrollToNextPage:e}=erF(),t=()=>{e(!0)},r=(0,uq.useRef)(null),[a,n]=kL({contentRef:r,"aria-label":fW.scrollToNextPage,direction:"nw"});return(0,uO.jsxs)(mF.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,uO.jsx)(kF.h,{onClick:t,size:"small",variant:"invisible","aria-label":fW.scrollToNextPage,icon:mM.XCv,sx:eam,ref:r,...a}),n]})}function eab(){let{isSorted:e,sorts:t}=NO(),r=(0,uq.useRef)(null),[a,n]=(0,uq.useState)(!1),l=()=>{n(!a)},{sortLabel:i,sortText:s}=(0,uq.useMemo)(()=>e?{sortLabel:`Sorted by: ${t.map(e=>`${e.column.name} ${"asc"===e.direction?"ascending":"descending"}`).join(", ")}`,sortText:t.map(e=>e.column.name).join(", ")}:{sortLabel:"No sort applied",sortText:"Sort"},[e,t]),o=C0("quick-action-toolbar-sort-by-menu");return(0,uO.jsxs)(mF.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,uO.jsx)(jI.z,{ref:r,"aria-haspopup":"true","aria-expanded":a,onClick:l,variant:"invisible",size:"small",sx:eam,"aria-controls":o,...(0,mp.f)("quick-action-toolbar-sort-by-menu"),children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},"aria-label":i,children:[(0,uO.jsx)(K3,{}),(0,uO.jsx)(mO.Z,{sx:{ml:2},children:s})]})}),(0,uO.jsx)(KY,{id:o,anchorRef:r,open:a,setOpen:n})]})}function eav(){let{hasWritePermissions:e}=yI(),t=OJ(),{isRoadmapZoomLevelDirty:r}=OH(),a=(0,uq.useRef)(null),[n,l]=(0,uq.useState)(!1),i=()=>{l(!n)},s=C0("roadmap-zoom-level-menu");return(0,uO.jsxs)(mF.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,uO.jsx)(jI.z,{ref:a,"aria-haspopup":"true","aria-expanded":n,onClick:i,variant:"invisible",size:"small","aria-label":fW.toolbarZoomAriaLabel(t),sx:eam,"aria-controls":s,...(0,mp.f)("quick-action-toolbar-zoom-level"),children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(Uv,{isDirty:r,hideDirtyState:!e,...(0,mp.f)("roadmap-zoom-level-dirty"),children:(0,uO.jsx)(KQ,{})}),(0,uO.jsx)(mO.Z,{sx:{ml:2},children:fW.zoomLevelOptions[t]})]})}),(0,uO.jsx)(KW,{id:s,anchorRef:a,open:n,setOpen:l})]})}function eaw(){let{dateFields:e,areDateFieldsDefault:t}=OH(),{isDateFieldsPopoverDisabled:r}=OG(),a=new Set(e.filter(L8).map(e=>e.name)),{isDateConfigurationMenuOpen:n,setOpenDateConfigurationMenu:l}=Kh(),{currentView:i}=bP(),{postStats:s}=bM(),o=0===a.size,d=i?.serverViewState.layout!==_Z.Roadmap&&i?.localViewState.layout===_Z.Roadmap,c=!o&&t&&d,u=e.some(e=>L8(e)&&"iteration"===e.dataType)?"iteration":"date",m=(0,uq.useRef)(null),p=!r&&(o||c),f=()=>{l(!n)},h=()=>{l(!0),s({name:hP,ui:hD,context:JSON.stringify(Kp(a.size,u))})},g=C0("roadmap-date-fields-menu");return(0,uO.jsxs)(mF.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,uO.jsx)(jI.z,{ref:m,"aria-haspopup":"true","aria-expanded":n,onClick:f,variant:"invisible",size:"small","aria-label":fW.toolbarDateFieldsAriaLabel,sx:eam,"aria-controls":g,...(0,mp.f)("quick-action-toolbar-date-fields-menu"),children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex"},children:[(0,uO.jsx)(K6,{}),(0,uO.jsx)(mO.Z,{sx:{ml:2},children:fW.toolbarDateFields})]})}),p&&(0,uO.jsx)(T1.Z,{relative:!1,open:p,caret:"top",sx:{top:"24px",left:"-54px"},children:(0,uO.jsxs)(T1.Z.Content,{sx:{mt:2},children:[(0,uO.jsx)(mF.Z,{sx:{fontSize:2,fontWeight:"bold"},children:fW.gettingStarted.popoverTitle}),(0,uO.jsx)(mF.Z,{sx:{marginTop:2,marginBottom:3},children:c?fW.gettingStarted.fieldsSelectedByDefault(u):fW.gettingStarted.projectNeedsField}),(0,uO.jsx)(jI.z,{onClick:h,children:fW.gettingStarted.popoverDismissButton})]})}),(0,uO.jsx)(KP,{id:g,anchorRef:m,open:n,setOpen:l})]})}try{(cT=eaf).displayName||(cT.displayName="RoadmapControls")}catch{}try{(cR=eah).displayName||(cR.displayName="RoadmapMarkerButton")}catch{}try{(cE=eag).displayName||(cE.displayName="TodayButton")}catch{}try{(cD=eax).displayName||(cD.displayName="PrevPageButton")}catch{}try{(cP=eay).displayName||(cP.displayName="NextPageButton")}catch{}try{(cA=eab).displayName||(cA.displayName="RoadmapSortByMenu")}catch{}try{(cM=eav).displayName||(cM.displayName="ZoomLevelMenu")}catch{}try{(cL=eaw).displayName||(cL.displayName="DateConfigurationMenu")}catch{}let eaj={zIndex:"5",boxShadow:"unset",borderBottom:"1px solid",borderBottomColor:"border.muted"},eaC=(0,uq.memo)(function({filterCount:e}){let{searchInputRef:t,searchToggleButtonRef:r}=kp(),a=(0,uq.useCallback)(()=>{t.current?.focus()},[t]),n=(0,uq.useCallback)(e=>{if(kE(e)===k_.ESCAPE){r.current?.focus();return}},[r]);return(0,uO.jsx)(QW,{containerSx:eaj,onInputKeyDown:n,dispatchInputFocusEvent:a,filterCount:e})});try{(cF=eaC).displayName||(cF.displayName="RoadmapFilterInput")}catch{}function eak(e,t){let{start:r,end:a,startIteration:n,endIteration:l}=e;if(n&&r)return a?l?n===l?`${f_(r,a)} [${n.title}]`:`${f_(r,a)} [${n.title} start - ${l.title} end]`:r.getTime()===a.getTime()?`${fI(r)} [${n.title} start]`:`${f_(r,a)} [${n.title} start - ${fI(a,"MMM d")}]`:`${fI(r)} [${n.title} start]`;return l&&a?r?r.getTime()===a.getTime()?`${fI(a)} [${l.title} end]`:`${f_(r,a)} [${fI(r,"MMM d")} - ${l.title} end]`:`${fI(a)} [${l.title} end]`:r&&a&&r.getTime()!==a.getTime()?f_(r,a):r?fI(r):a?fI(a):t&&!eaS(t)?fW.noDateFieldsConfiguredTooltip:void 0}function eaS(e){return e.filter(L8).length>0}let eaI={PillLink:"pill_link",ArrowButton:"arrow_button",AddDateButton:"add_dates_button"},eaN=(0,uq.createContext)(null),ea_=(0,uq.memo)(function({children:e,cell:t,rowRef:r}){let{state:{focus:a},navigationDispatch:n}=x5(),[l,i]=(0,uq.useState)(null),s=(0,uq.useMemo)(()=>!!(a&&xG(a)&&a.details.y===t.row.id&&a.details.x===t.column.id),[t,a]),o=(0,uq.useRef)(null),d=(0,uq.useRef)(null),c=(0,uq.useRef)(null),u=(0,uq.useRef)(null),m=(0,uq.useCallback)(()=>c.current?{type:eaI.ArrowButton,element:c.current}:u.current?{type:eaI.AddDateButton,element:u.current}:d.current?{type:eaI.PillLink,element:d.current}:null,[]),p=(0,uq.useCallback)(e=>e?o.current!==e:!!o.current,[]),f=(0,uq.useCallback)(e=>{let t=m(),a=p(t?.element);if(a&&(i(t),o.current=t?.element??null),t?.element){if(t.element.focus({preventScroll:!0}),!e.scrollIntoView)return;r.current&&(etK()?"scrollIntoViewIfNeeded"in r.current&&"function"==typeof r.current.scrollIntoViewIfNeeded&&r.current.scrollIntoViewIfNeeded(!1):r.current.scrollIntoView({block:"nearest",inline:"nearest"}))}},[m,p,r]),h=(0,uq.useCallback)(()=>{s&&f({scrollIntoView:!1})},[s,f]);(0,uq.useLayoutEffect)(()=>{s?f({scrollIntoView:!0}):(i(null),o.current=null)},[s,f,i]);let{openProjectItemInPane:g}=bJ(),x=(0,uq.useRef)(!1),y=(0,uq.useCallback)((e=200)=>{x.current=!0,window.setTimeout(()=>{x.current=!1},e)},[]),b=t.row.original,v=b.contentType===mA.DraftIssue||b.contentType===mA.Issue,w=(0,uq.useCallback)(e=>{if(x.current){e.preventDefault();return}!v||(e.metaKey||e.ctrlKey)&&b.contentType!==mA.DraftIssue||(g(b,()=>{d.current?.focus()}),e.preventDefault())},[g,b,d,v]),j=l?.type,C=(0,uq.useCallback)(e=>{let t=kE(e),r=Or(n,e);r.action?Oe(e):j===eaI.PillLink&&t===k_.SPACE&&v&&(g(b,()=>{d.current?.focus()}),Oe(e))},[n,v,g,b,j]),k=(0,uq.useCallback)(()=>{s||n(x0(t.row.id,t.column.id,!1))},[s,n,t]),S=(0,uq.useCallback)(()=>{s||n(x0(t.row.id,t.column.id,!1))},[s,n,t]);return(0,uO.jsx)(eaN.Provider,{value:(0,uq.useMemo)(()=>({wrapperProps:{onKeyDown:C,onPointerDown:k,tabIndex:-1},onFocusInternalElement:S,linkRef:d,onClickPillLink:w,temporarilyIgnorePillLinkClick:y,arrowButtonRef:c,addDateButtonRef:u,refocusPillArea:h,focusType:j}),[C,k,S,w,y,h,j]),children:e})}),eaT=()=>{let e=(0,uq.useContext)(eaN);if(!e)throw Error("useRoadmapPillAreaFocus must be used within a RoadmapPillAreaFocusContext");return e};try{(cZ=ea_).displayName||(cZ.displayName="RoadmapPillAreaFocusProvider")}catch{}let eaR=(e,t,r)=>{if("none"!==t&&"number"==typeof t.id){let a=t.id,n=e.id,l=t.dataType;if(l===mD.Iteration){let t=e.getCustomField(a),i=t?hQ:hY;if(!t||t.id!==r?.id)return{memexProjectColumnId:a,action:{dataType:l,memexProjectColumnId:a,value:r},stats:{payload:{name:i,memexProjectColumnId:a,memexProjectItemId:n}}}}else if(l===mD.Date){let t={value:r},i=e.getCustomField(a),s=i?.value?new Date(i.value):void 0,o=s?hQ:hY;if(!s||s.getTime()!==t.value?.getTime())return{memexProjectColumnId:a,action:{dataType:l,memexProjectColumnId:a,value:t},stats:{payload:{name:o,memexProjectColumnId:a,memexProjectItemId:n}}}}}};function eaE(){let{updateMultipleSequentially:e}=IF(),{postStats:t}=bM(),{dateFields:[r=_V,a=_V]}=OH(),n=(0,uq.useCallback)((n,l)=>{let i=new Map,s=eaR(n,r,l.startIteration||l.start),o=eaR(n,a,l.endIteration||l.end);s&&i.set(s.memexProjectColumnId,s),o&&i.set(o.memexProjectColumnId,o);let d=Array.from(i.values()).map(e=>e.action),c=Array.from(i.values()).map(e=>e.stats),u=d.length>0?e(n,d):Promise.resolve();for(let e of c)t(e.payload);return u},[r,a,t,e]);return(0,uq.useMemo)(()=>({updateItemDates:n}),[n])}let eaD={borderRadius:"5px",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.muted",padding:"0",color:"fg.muted",width:22,position:"relative","&.is-focused":{outline:"none"},"&.is-focused::before":{content:'""',position:"absolute",width:"calc(100% - 2px)",height:"calc(100% - 2px)",border:"2px solid",borderColor:"accent.emphasis",inset:-1,borderRadius:"5px"}},eaP={...eaD,backgroundColor:"unset",border:"none","&.roadmap-add-date-button:hover":{backgroundColor:"unset",border:"none"}},eaA={position:"absolute",height:28,backgroundColor:"canvas.default",borderStyle:"dotted",borderWidth:"1px",borderColor:"fg.muted",borderRadius:"5px",opacity:.7},eaM=(0,uq.memo)(function({isBefore:e,startDate:t,endDate:r,role:a,wrapperProps:n,onFocusInternalElement:l,arrowButtonRef:i,className:s}){let{scrollToDate:o}=erF(),d=erL(),c=OK(),u=d(),m=(0,uq.useCallback)(()=>{t&&o(t,!0)},[o,t]),p=t?fW.scrollToDateText(t):r?fW.scrollToDateText(r):"";return(0,uO.jsx)(mF.Z,{role:a,sx:{position:"sticky",zIndex:1},style:{left:e?c+8:c+(u.right-u.left)-30},...n||{},children:(0,uO.jsx)(kK.Z,{"aria-label":p,direction:e?"e":"w",children:(0,uO.jsx)(kF.h,{onClick:m,variant:"invisible",icon:e?mM.Y4O:mM.LZ3,...(0,mp.f)("roadmap-navigation-button"),sx:eaD,"aria-label":p,ref:i??null,className:F7()(s),...l?{onFocus:l}:{}})})})}),eaL=(0,uq.memo)(function(e){let{wrapperProps:t,onFocusInternalElement:r,arrowButtonRef:a,focusType:n}=eaT();return(0,uO.jsx)(eaM,{wrapperProps:t,onFocusInternalElement:r,arrowButtonRef:a,className:n===eaI.ArrowButton?"is-focused":void 0,...e})}),eaF=(0,uq.memo)(function({item:e,date:t,offsetX:r,isDefaultAddButton:a,hideTooltip:n,hidePlaceholder:l}){let i;let s=erM(),{today:o}=erA(),{updateItemDates:d}=eaE(),{dateFields:c}=OH(),u=OK(),{setOpenDateConfigurationMenu:m}=Kh(),p=yq(),{wrapperProps:f,onFocusInternalElement:h,addDateButtonRef:g,focusType:x}=eaT(),y=eaS(c),b=a||!t,v=b?o:t,w=s(v),j=!w.start||!w.end;j?i=fW.noIterationConfiguredTooltip(fI(v)):y?(i=eak(w),i=b?`Add to today at ${i}`:`Add to ${i}`):i=fW.noDateFieldsConfiguredTooltip;let C=(0,uq.useCallback)(()=>{if(y){if(j){let e=eaO(w.start?gc(c[1]):gc(c[0]));e&&p({pathname:mj.generatePath({fieldId:e.id})})}else v&&d(e,w)}else m(!0)},[c,y,j,e,p,m,v,w,d]),[k,S]=(0,uq.useState)(!1),I=(0,uq.useCallback)(e=>{S(!0),h&&h(e)},[h]),N=(0,uq.useCallback)(()=>S(!1),[]),_=(!a||k)&&j?mM.H9J:mM.pOD,{sx:T,style:R}=a?{sx:{position:"sticky",zIndex:1},style:{left:u+8}}:{sx:{position:"absolute",zIndex:1},style:{left:r-11}},E=(0,uq.useRef)(null),[D,P]=kL({"aria-label":i,...!y||j||b?{direction:"e",anchorSide:"outside-right"}:{direction:"n",anchorSide:"outside-top"},contentRef:E});return(0,uO.jsxs)(uO.Fragment,{children:[!l&&!(a&&!k)&&!j&&(0,uO.jsx)(eaZ,{timeSpan:w}),(0,uO.jsx)(mF.Z,{sx:T,style:R,role:"gridcell",ref:E,...f,...D,children:(0,uO.jsx)(kF.h,{onClick:C,onFocus:I,onBlur:N,variant:"invisible",icon:_,sx:b||j?eaD:eaP,...(0,mp.f)("roadmap-add-date-button"),className:F7()("roadmap-add-date-button",{"is-focused":x===eaI.AddDateButton}),"aria-label":i,ref:g})}),n?null:P]})}),eaZ=({timeSpan:e})=>{let{getX:t,columnWidth:r}=erA(),a=e.start?t(e.start):0,n=e.end?t(e.end):0;return(0,uO.jsx)(mF.Z,{role:"gridcell",sx:eaA,style:{width:n-a+r,left:a},children:"\xa0"})};function eaO(e){if(e&&"none"!==e&&g1(e))return e}try{(cO=eaM).displayName||(cO.displayName="NavigationArrow")}catch{}try{(cB=eaL).displayName||(cB.displayName="NavigationArrowWithFocusContext")}catch{}try{(cV=eaF).displayName||(cV.displayName="AddDateButton")}catch{}try{(c$=eaZ).displayName||(c$.displayName="PillPlaceholder")}catch{}let eaB={backgroundColor:"initial",zIndex:0,display:"flex",alignItems:"center",width:"100%"},eaV={display:"flex",flexShrink:0,alignItems:"center",lineHeight:1.5,left:0,height:28,fontSize:"14px",fontWeight:"normal",backgroundColor:"canvas.default",padding:"0 16px",borderColor:"border.default",borderRadius:"14px",borderWidth:"2px"},ea$=(0,uq.memo)(function({startDate:e,endDate:t,pillOffsetLeft:r,pillWidth:a}){let n=erL(),l=OK(),i=(0,uq.useRef)(null),{isVisible:s}=ja({ref:i}),o=(0,uq.useRef)(null),{isVisible:d}=ja({ref:o}),c=n(),u=!s&&r+a<=c.left+1,m=!s&&r>=c.right-1,p=eak({start:e,end:t}),f=(0,uO.jsx)(EL.Z,{sx:eaV,style:{width:a},className:"roadmap-pill",...(0,mp.f)("roadmap-view-group-header-item")}),h=(0,uO.jsx)(uO.Fragment,{children:(0,uO.jsx)(mF.Z,{sx:{display:"flex",flexShrink:0,color:"fg.muted",alignItems:"center",whiteSpace:"nowrap",textAlign:"left",width:"min-content"},children:p})});return(0,uO.jsxs)(er4,{role:"gridcell","data-date-start":e?p2(e):void 0,"data-date-end":t?p2(t):void 0,sx:eaB,children:[(0,uO.jsx)(mF.Z,{ref:o,role:"presentation",sx:{position:"absolute",width:8},style:{left:r}}),(0,uO.jsx)(mF.Z,{ref:i,sx:{position:"absolute",display:"flex",alignItems:"center"},style:{left:r},children:f}),s?(0,uO.jsx)(mF.Z,{sx:{position:d?"absolute":"sticky",display:"flex",alignItems:"center"},style:{left:d?r+16:l+8},children:h}):u||m?(0,uO.jsx)(eaM,{isBefore:u,startDate:e,endDate:t}):null]})});try{(cz=ea$).displayName||(cz.displayName="RoadmapGroupPill")}catch{}let eaz=(0,uq.memo)(function({rows:e}){let t,r;let{getTimeSpanFromColumnData:a}=OH(),{getX:n,totalWidth:l}=erA();for(let n of e){let e=a(n.original.columns),[l,i]=fT([e.start,e.end]);l&&(!t||l<t)&&(t=l),i&&(!r||i>r)&&(r=i)}let i={start:t,end:r},s=i.start?n(i.start):0,o=i.end?n((0,pl.Z)(i.end,1))-s:0,d=s+o<=0,c=i.start||i.end;return c?d||s>=l?c?(0,uO.jsx)(eaM,{role:"gridcell",isBefore:d,startDate:i.start,endDate:i.end}):null:(0,uO.jsx)(ea$,{startDate:i.start,endDate:i.end,pillOffsetLeft:s,pillWidth:o}):null});try{(cU=eaz).displayName||(cU.displayName="RoadmapGroupPillArea")}catch{}let eaU=(e,t,{leading:r=!0,trailing:a=!0,onChangeBehavior:n="flush"}={})=>{let l=m1(e),i=(0,uq.useMemo)(()=>(0,Fl.Z)((...e)=>l.current(...e),t,{leading:r,trailing:a}),[l,t,r,a]);return(0,uq.useEffect)(()=>()=>{i?.[n]()},[i,n]),i},eaW=()=>{let[e,t]=(0,uq.useState)({isHovered:!1,mouseX:null,mouseY:null,buttonPressedOnEntry:!1}),r=(0,uq.useCallback)(e=>t(t=>({...t,isHovered:!0,buttonPressedOnEntry:!!e.buttons})),[]),a=eaU(e=>{t(t=>({...t,mouseX:e.clientX,mouseY:e.clientY}))},16),n=(0,uq.useCallback)(()=>t(e=>({...e,isHovered:!1,buttonPressedOnEntry:!1})),[]);return(0,uq.useMemo)(()=>({mouseState:e,onMouseEnter:r,onMouseMove:a,onMouseLeave:n}),[e,r,a,n])};var eaH=r(92300);function eaG(){let{hasWritePermissions:e}=yI(),t=(0,uq.useCallback)(t=>e&&t.contentType!==mA.RedactedItem,[e]);return(0,uq.useMemo)(()=>({canUpdate:e,canUpdateItem:t}),[t,e])}let eaq=(e,t)=>(0,gh.Z)(e,24*t),eaK=e=>e!==_V&&g1(e),eaQ=e=>e!==_V&&g5(e);function eaY(){let e=erM(),{getX:t}=erA(),{dateFields:r}=OH(),a=r[0]??_V,n=r[1]??_V,l=(0,uq.useCallback)((e,r,a,n=!1)=>{let[l,i]=fT([e.start,e.end]);if(!(l&&i))return{startX:0,endX:0};let s={startX:t(l),endX:t(eaq(i,1))};switch(r){case"move":s.startX+=a,s.endX+=a;break;case"expand-leading":n?(s.startX=t(i),s.endX=t(l),s.endX+=a):s.startX+=a;break;case"expand-trailing":n?(s.startX=t(eaq(i,1)),s.endX=t(eaq(l,1)),s.startX+=a):s.endX+=a}return s},[t]),i=(0,uq.useCallback)((t,r,l)=>{let i=e(l);if(eaK(a)&&eaK(n)&&t.startIteration===t.endIteration||eaK(a)&&n===_V||a===_V&&eaK(n));else if(eaK(a)&&eaQ(n))switch(r){case"move":if(t.start&&t.end){let e=(0,eaH.Z)(t.end,t.start);i.end=i.start&&eaq(i.start,e)}else t.start?(i.end=void 0,i.endIteration=void 0):(i.start=void 0,i.startIteration=void 0);break;case"expand-leading":t.end&&(i.end=t.end,i.endIteration=t.endIteration);break;case"expand-trailing":t.start&&(i.start=t.start,i.startIteration=t.startIteration);break;default:xE(r)}else if(eaQ(a)&&eaK(n))switch(r){case"move":if(t.start&&t.end){let e=(0,eaH.Z)(t.end,t.start);i.start=i.end&&eaq(i.end,-e)}else t.start?(i.end=void 0,i.endIteration=void 0):(i.start=void 0,i.startIteration=void 0);break;case"expand-leading":t.end&&(i.end=t.end,i.endIteration=t.endIteration);break;case"expand-trailing":t.start&&(i.start=t.start,i.startIteration=t.startIteration);break;default:xE(r)}else switch(r){case"move":if(t.startIteration&&t.endIteration&&t.start&&t.end){let r=(0,eaH.Z)(t.end,t.start),a=i.start&&e(eaq(i.start,r));i.end=a?.end,i.endIteration=a?.endIteration}else t.start?(i.end=void 0,i.endIteration=void 0):(i.start=void 0,i.startIteration=void 0);break;case"expand-leading":t.end&&(i.end=t.end,i.endIteration=t.endIteration);break;case"expand-trailing":t.start&&(i.start=t.start,i.startIteration=t.startIteration);break;default:xE(r)}if(!(i.start&&i.end&&(0,gu.Z)(i.start,i.end)))return i},[n,e,a]),s=(0,uq.useCallback)((e,t,r)=>{let{start:a,end:n}=e,l=a,i=n;switch(t){case"move":l=a?eaq(a,r):void 0,i=n?eaq(n,r):void 0;break;case"expand-leading":a?(l=eaq(a,r),n||(i=a)):n&&(l=eaq(n,r));break;case"expand-trailing":n?(i=eaq(n,r),a||(l=n)):a&&(i=eaq(a,r))}let s=!!(l&&i&&(0,gu.Z)(l,i));s&&("expand-leading"===t&&l&&(l=eaq(l,-1)),"expand-trailing"===t&&i&&(i=eaq(i,1)),[l,i]=[i,l]);let o={start:l,end:i};return{swapHandles:s,nextTimeSpan:o}},[]);return(0,uq.useMemo)(()=>({getNextTimeSpanWithDates:s,getNextTimeSpanWithIterations:i,getGhostSpan:l}),[s,i,l])}let eaX=new Set(["move","expand-leading","expand-trailing"]);function eaJ(e){return!!e&&eaX.has(e)}function ea0({timeSpan:e,onSaveDate:t,onCancel:r,disabled:a}){let{getDateFromClientX:n,getXFromClientX:l,getDateFromX:i}=erA(),s=erL(),{dateFields:o}=OH(),{getNextTimeSpanWithDates:d,getNextTimeSpanWithIterations:c,getGhostSpan:u}=eaY(),m=(0,uq.useRef)(null),p=o[0]??_V,f=o[1]??_V,h=eaK(p)||eaK(f),g=e.start&&e.end&&(0,gu.Z)(e.start,e.end),x=eaG().canUpdate&&!a,y=x&&!o.some(e=>e===_V)&&!(h&&p===f)&&!(h&&g),b=(0,GK.O1)({id:"pill",disabled:!x}),{isDragging:v,activatorEvent:w,transform:j}=b;Fd("is-dragging",v),(0,uq.useEffect)(()=>{!v&&m.current&&(m.current=null)},[v]);let C=(0,uq.useMemo)(()=>{let e=new Set;return x&&e.add("allowed-drag-update"),y&&e.add("allowed-drag-expand"),e},[y,x]),k=(0,uq.useMemo)(()=>{if(w&&w.target instanceof HTMLElement){let e=w.target.closest("[data-dnd-operation]");if(e&&e instanceof HTMLElement){let t=e.dataset.dndOperation;if(eaJ(t))return t}}return"move"},[w]),S=(()=>{let t;let r=w&&"clientX"in w?w.clientX:null;if(!k||!r)return null;if(!m.current){let e=l(r),t=n(r);if(!t)return null;m.current={x:e,date:t}}let a=s(),o=Math.min(a.right-m.current.x,Math.max(a.left-m.current.x,j?.x??0)),p=m.current.date,f=i(m.current.x+o);if(!f||!p)return null;let x={...e};g&&(x.start=e.end,x.startIteration=e.endIteration,x.end=e.start,x.endIteration=e.startIteration);let y=(0,eaH.Z)(f,p),b=!1;if(h){let e;switch(k){case"move":e=f;break;case"expand-leading":e=x.start?eaq(x.start,y):f;break;case"expand-trailing":e=x.end?eaq(x.end,y):f;break;default:xE(k)}if(!(t=c(x,k,e)))return null}else{let{nextTimeSpan:e,swapHandles:r}=d(x,k,y);t=e,b=r}let v=u(x,k,o,b);return{operation:k,adjustedTimeSpan:t,dragGhostSpan:v,swapHandles:b}})(),I=(0,uq.useCallback)(async()=>{S?.adjustedTimeSpan&&C.has("allowed-drag-update")&&await t(S.adjustedTimeSpan)},[C,S?.adjustedTimeSpan,t]);return(0,GK.IJ)({onDragEnd:I,onDragCancel:r}),{dragProps:b,allowedOperations:C,dragDetails:S}}function ea1(){let{navigationDispatch:e}=x3();return(0,uq.useCallback)(()=>{e(x1())},[e])}let ea2={display:"block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"middle",whiteSpace:"nowrap"},ea5={color:"fg.muted",textAlign:"left",whiteSpace:"nowrap",textDecoration:"none"},ea3={flexShrink:0,left:0,height:28,backgroundColor:"canvas.default",boxShadow:"shadow.medium",borderColor:"border.default",padding:"0 8px",borderRadius:"5px"},ea4={position:"absolute",right:"0",width:"1px",height:"16px",backgroundColor:"canvas.subtle"},ea6={display:"flex",flexShrink:0,alignItems:"center",lineHeight:1.5,left:0,height:28,fontSize:"14px",fontWeight:"normal",backgroundColor:"transparent",padding:"0 8px",borderColor:"transparent",borderRadius:1,cursor:"default"},ea7={...ea6,cursor:"grab"},ea8={position:"absolute",height:28,backgroundColor:"accent.muted",borderStyle:"dotted",borderWidth:"1px",borderColor:"accent.muted",borderRadius:1,opacity:.5},ea9={position:"absolute",left:0,right:0,height:"100%","body.is-dragging &:hover":{" &:not(.active)":{backgroundColor:"transparent","&::after, &::before":{opacity:0,display:"none"}}}},ene={...ea9,display:"none"},ent={width:21,height:21,cursor:"col-resize",position:"absolute",zIndex:1,"& .roadmap-item-drag-handle":{content:'""',width:"3px",height:21,backgroundColor:"transparent",boxShadow:"none",borderRadius:"2px",position:"absolute",top:"50%",transform:"translateY(-50%)",bottom:0,"&.active":{backgroundColor:"fg.default",borderColor:"black",borderWidth:1,borderStyle:"solid",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"}},"&.expand-trailing":{left:"100%","& .roadmap-item-drag-handle":{left:"50%",transform:"translate(-50%, -50%)"}},"&.expand-leading":{right:"100%","& .roadmap-item-drag-handle":{left:"50%",transform:"translate(-50%, -50%)"}},"&:hover":{"& .roadmap-item-drag-handle":{backgroundColor:"fg.subtle","&.active":{backgroundColor:"fg.default",borderColor:"black"}}},"body.is-dragging &:hover":{"& .roadmap-item-drag-handle:not(.active)":{backgroundColor:"transparent"}}},enr=(0,uq.memo)((0,uq.forwardRef)(function({tooltip:e,operation:t,active:r,containerRef:a,...n},l){let[i,s]=kL({contentRef:a,"aria-label":e,className:"roadmap-item-drag-handle-tooltip",direction:"n",alignmentOffset:-10.5,anchorOffset:-10.5,anchorSide:"expand-leading"===t?"inside-left":"inside-right",open:!!r||void 0});return(0,uO.jsxs)(mF.Z,{...(0,mp.f)(`roadmap-view-item-${t}-handle`),className:t,"data-dnd-operation":t,sx:ent,...n,ref:l,...i,children:[(0,uO.jsx)(mF.Z,{className:F7()("roadmap-item-drag-handle",{active:r})}),s]})})),ena=[],enn=(0,uq.memo)(function({titleHtml:e,renderLink:t,titleColumnValue:r,timeSpan:a,pendingTimeSpan:n,url:l,number:i,assignees:s=ena,allowedOperations:o,dragProps:d,dragDetails:c,index:u}){let m=erL(),{getX:p}=erA(),f=OK(),{isVisible:h}=ja({ref:d.node}),g=null!==n,{wrapperProps:x,focusType:y,refocusPillArea:b,onFocusInternalElement:v,linkRef:w,onClickPillLink:j}=eaT(),C=(0,uq.useRef)(null),{isVisible:k}=ja({ref:C}),[S,I]=n?fT([n.start,n.end]):fT([a.start,a.end]),N=S?p(S):0,_=I?p((0,pl.Z)(I,1))-N:0,T=m(),R=!h&&N+_<=T.left+1,E=!h&&N>=T.right-1,D=ea1(),[P,A]=(0,uq.useState)(void 0);Fd("roadmap-date-tooltip-visible",void 0!==P),(0,uq.useLayoutEffect)(()=>{d.isDragging,b()},[h,d.isDragging,b]);let{roadmapTruncateTitles:M}=Bt(),L=(0,uO.jsx)(jc,{sx:ea2,children:e}),F=o.has("allowed-drag-update"),Z=d.isDragging&&!!c,O=Z&&!g?c.dragGhostSpan.endX-c.dragGhostSpan.startX:0,{theme:B}=(0,uz.Fg)(),V=B?.shadows.shadow.medium;"string"==typeof V&&(V.startsWith("0 3px 6px rgb")||V.startsWith("0 3px 6px #"))&&(V=V.replace("0 3px 6px","-3px 6px 6px -3px"));let $=V?{...ea3,boxShadow:V}:ea3,z=(0,uO.jsx)(EL.Z,{sx:$,style:{width:_}}),U=(0,uO.jsx)(EL.Z,{ref:w,as:"a",href:l,target:"_blank",rel:"noreferrer",onClick:j,onFocus:v,sx:{...F?ea7:ea6,pointerEvents:Z?"none":"auto",outline:"none","&.is-focused::before":{content:'""',position:"absolute",width:"calc(100% - 4px)",height:"calc(100% - 4px)",border:"2px solid",borderColor:"accent.emphasis",borderRadius:"5px",inset:0}},style:{width:Z?O:_},...d.attributes,...d.listeners,onMouseOver:e=>{if(Z)return;let t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientX-t.left>t.width/2,n=a?0:2*r-t.width,l=a?t.width-2*r:0;A({left:n,right:l})},onMouseOut:()=>{Z||A(void 0)},className:F7()("roadmap-pill",{"is-focused":y===eaI.PillLink}),...(0,mp.f)("roadmap-view-item-pill"),children:(0,uO.jsx)(kK.Z,{"aria-label":eak(Z?c.adjustedTimeSpan:a),className:F7()("roadmap-pill-tooltip",{active:c?.operation==="move"}),sx:Z&&"move"!==c.operation?ene:ea9,style:P,direction:0===u?"s":"n"})}),W=(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(mF.Z,{sx:{flexShrink:0,mr:2,display:"flex",pointerEvents:"none"},children:(0,uO.jsx)(VZ,{titleColumn:r})}),t?(0,uO.jsx)(w3.Z,{href:l,target:"_blank",rel:"noreferrer",onClick:j,sx:{...ea5,pointerEvents:Z?"none":"auto"},hoverColor:"accent.fg",draggable:!1,tabIndex:-1,...(0,mp.f)("roadmap-item-link"),children:L}):L,i&&(0,uO.jsx)(mO.Z,{sx:{ml:1,color:"fg.muted"},children:`#${i}`}),(0,uO.jsx)(Xm,{assignees:s,sx:{ml:2},wrapperSx:{zIndex:1},avatarProps:{onFocus:D},...(0,mp.f)("roadmap-item-assignees")})]}),H=c?.operation==="expand-leading"&&!c?.swapHandles||c?.operation==="expand-trailing"&&c?.swapHandles,G=c?.operation==="expand-trailing"&&!c?.swapHandles||c?.operation==="expand-leading"&&c?.swapHandles;return(0,uO.jsxs)(er4,{role:"gridcell",...(0,mp.f)("roadmap-pill"),"data-date-start":S?p2(S):void 0,"data-date-end":I?p2(I):void 0,sx:{backgroundColor:"initial",zIndex:0,display:"flex",alignItems:"center",width:"100%"},children:[(0,uO.jsx)(mF.Z,{ref:C,role:"presentation",sx:{position:"absolute",width:0},style:{left:N}}),(0,uO.jsxs)(mF.Z,{ref:d.setNodeRef,sx:{position:"absolute",display:"flex",alignItems:"center"},style:{left:N},...(0,mp.f)("roadmap-view-pill-background"),children:[z,!M.enabled&&(0,uO.jsx)(mF.Z,{sx:ea4})]}),Z&&!g&&(0,uO.jsx)(enl,{timeSpan:c.adjustedTimeSpan}),(0,uO.jsxs)(mF.Z,{ref:d.setNodeRef,sx:{position:"absolute",display:"flex",alignItems:"center",zIndex:1},style:{left:N,transform:`translateX(${Z&&c.dragGhostSpan.startX?c.dragGhostSpan.startX-N:0}px) translateZ(0)`},...x,...(0,mp.f)("roadmap-view-pill-foreground"),children:[U,o.has("allowed-drag-expand")&&S&&I?(0,uO.jsxs)(uO.Fragment,{children:[G?null:(0,uO.jsx)(enr,{tooltip:eak({start:Z?c.adjustedTimeSpan.start:a.start,startIteration:Z?c.adjustedTimeSpan.startIteration:a.startIteration,end:void 0})||fW.noDateSet,operation:"expand-leading",active:H,ref:d.setActivatorNodeRef,containerRef:d.node,...d.attributes,...d.listeners,tabIndex:-1,"aria-label":"Resize the item by dragging the earlier date"}),H?null:(0,uO.jsx)(enr,{tooltip:eak({start:void 0,end:Z?c.adjustedTimeSpan.end:a.end,endIteration:Z?c.adjustedTimeSpan.endIteration:a.endIteration})||fW.noDateSet,operation:"expand-trailing",active:G,ref:d.setActivatorNodeRef,containerRef:d.node,...d.attributes,...d.listeners,tabIndex:-1,"aria-label":"Resize the item by dragging the later date"})]}):null]}),h||Z?(0,uO.jsx)(mF.Z,{sx:{position:k||Z||g||M.enabled?"absolute":"sticky",display:"flex",alignItems:"center"},style:{left:k||Z||g||M.enabled?N+8:f+8,opacity:Z||g?.3:void 0},...(0,mp.f)("roadmap-view-item-pill-content"),children:M.enabled?(0,uO.jsx)(Cz.Z,{title:e,expandable:!0,sx:{maxWidth:_-16,display:"flex",alignItems:"center"},children:W}):W}):R||E?(0,uO.jsx)(eaL,{isBefore:R,startDate:S,endDate:I}):null]})}),enl=({timeSpan:e})=>{let{getX:t}=erA(),[r,a]=fT([e.start,e.end]),n=r?t(r):0,l=a?t((0,pl.Z)(a,1))-n:0;return(0,uO.jsx)(mF.Z,{sx:ea8,style:{width:l,left:n},...(0,mp.f)("roadmap-view-pill-drag-target"),children:"\xa0"})};try{(cW=enr).displayName||(cW.displayName="RoadmapPillDragHandle")}catch{}try{(cH=enr).displayName||(cH.displayName="RoadmapPillDragHandle")}catch{}try{(cG=enn).displayName||(cG.displayName="RoadmapPill")}catch{}try{(cq=enl).displayName||(cq.displayName="TargetPill")}catch{}let eni=(0,uq.memo)(function({item:e,mouseState:t,setIsDragging:r,...a}){let n=erM(),l=erL(),{getX:i,getDateFromClientX:s,totalWidth:o}=erA(),{canUpdateItem:d}=eaG(),{dateFields:c,getTimeSpanFromColumnData:u}=OH(),m=OK(),{updateItemDates:p}=eaE(),{roadmapRef:f}=erF(),{temporarilyIgnorePillLinkClick:h}=eaT(),[g,x]=(0,uq.useState)(null),[y,b]=(0,uq.useState)(void 0),v=(0,uq.useMemo)(()=>u(e.columns),[e.columns,u]),w=f.current?.getBoundingClientRect().left??0,j=(0,uq.useCallback)(e=>v.startIteration&&!e.startIteration&&c[0]?ens(c[0]):v.endIteration&&!e.endIteration&&c[1]?ens(c[1]):void 0,[c,v]),C=(0,uq.useCallback)(t=>{let r=j(t);return r?(b(r.id),Promise.resolve()):(x(t),h(),p(e,t).finally(()=>{x(null)}))},[j,e,p,h]),k=(0,uq.useCallback)(()=>{h(2e3)},[h]),{allowedOperations:S,dragProps:I,dragDetails:N}=ea0({timeSpan:v,disabled:e.contentType===mA.RedactedItem||!!g,onSaveDate:C,onCancel:k});Fi({active:I.isDragging,axis:"x",scrollRef:f,strength:20,bufferX:[m,50],bufferY:[20,20],ease:e=>Math.pow(e,5)}),(0,uq.useLayoutEffect)(()=>{if(y){if(t&&t.isHovered&&t.mouseX){let e=t.mouseX>w+m+8,r=e?s(t.mouseX):void 0,a=r&&n(r),l=!!(a&&(!a.start||!a.end));l||b(void 0)}else b(void 0)}},[t?.isHovered,y,t,w,m,s,n]),(0,uq.useEffect)(()=>{r(I.isDragging)},[I.isDragging,r]);let[_,T]=fT([v.start,v.end]),R=_?i(_):0,E=T?i((0,pl.Z)(T,1))-R:0,D=R+E<=0,P=_||T,A=!!(I.isDragging&&N&&j(N.adjustedTimeSpan)),M=!P&&d(e);if((M||P&&y||A)&&t&&t.isHovered&&t.mouseX){let r=t.mouseX>w+m+8,a=r?s(t.mouseX):void 0;if(a){let r;let n=l().left,i=t.mouseX<w+m+30,s=t.buttonPressedOnEntry&&!I.isDragging;return i&&!y||s?(r=n+8+11,a=void 0):r=n-w-m+t.mouseX,(0,uO.jsx)(eaF,{item:e,date:a,offsetX:r,hideTooltip:I.isDragging,hidePlaceholder:s})}}return A?null:D||R>=o?P?(0,uO.jsx)(eaL,{role:"gridcell",isBefore:D,startDate:_,endDate:T}):d(e)&&!y?(0,uO.jsx)(eaF,{isDefaultAddButton:!0,item:e,date:void 0,offsetX:0}):null:(0,uO.jsx)(enn,{item:e,timeSpan:v,allowedOperations:S,dragProps:I,dragDetails:N,pendingTimeSpan:g,...a})});function ens(e){if(e&&e!==_V&&g1(e))return e}try{(cK=eni).displayName||(cK.displayName="RoadmapPillArea")}catch{}let eno="data-row-item-index",end={position:"absolute",left:"2px",opacity:0,"&&":{width:"18px",height:"18px"},display:"flex",alignItems:"center",justifyContent:"center",zIndex:1,"&:focus":{opacity:1}},enc=e=>{for(let t of e)t.isSelected||t.toggleRowSelected()},enu=e=>{for(let t of e)t.isSelected&&t.toggleRowSelected()},enm=(0,uq.memo)(function({index:e,row:t,cellHeight:r,onFocus:a,focusLastRowIndex:n}){let l=_D(),{postStats:i}=bM(),s=t.original,{contentType:o}=s,[d,c]=(0,uq.useState)(!1),[u,m]=(0,uq.useState)(!1),p=(0,uq.useRef)(null),f=(0,uq.useRef)(!1),h=(0,uq.useRef)(null),{hasWritePermissions:g}=yI(),{selectedFlatRows:x}=_M(),y=(0,uq.useMemo)(()=>x.filter(e=>Os(e)),[x]),b=Os(t),v=b&&y.length>1,w=(0,uq.useCallback)(()=>{let t=document.querySelector(`[${eno}="${e}"]`);t&&t?.focus()},[e]),j=(0,uq.useCallback)(()=>{c(!0),p.current&&p.current.focus()},[]),C=(0,uq.useCallback)(()=>{p.current&&p.current.blur(),c(!1)},[c]),k=(0,uq.useCallback)(e=>e?j():C(),[j,C]),S=(0,uq.useCallback)(()=>{f.current=!0;let e=-1!==y.findIndex(e=>e.id===t.id);e?enc(y):(enu(y),enc([t]))},[t,y]),I=(0,uq.useCallback)(()=>{f.current=!1,C(),w(),n()},[C,w,n]),N=(0,uq.useCallback)(()=>{f.current=!1,w(),l(Zd()),n()},[l,w,n]),{openRemoveConfirmationDialog:_}=D7(S,N,I),{openArchiveConfirmationDialog:T}=D5(S,N,I),R=(0,uq.useCallback)(()=>{_([s.id],h5)},[_,s.id]),E=(0,uq.useCallback)(()=>{T([s.id],h5)},[T,s.id]),D=(0,uq.useCallback)(()=>{let e=y.map(e=>e.original.id);T(e,h5)},[T,y]),P=(0,uq.useCallback)(()=>{let e=y.map(e=>e.original.id);_(e,h5)},[_,y]),A=DK(o)&&g,M=(0,uq.useCallback)(()=>{i({name:hN,ui:hI,memexProjectItemId:s.id})},[i,s.id]);return(0,uO.jsxs)(mF.Z,{ref:h,sx:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",left:"5px",padding:"0",background:"transparent",height:"18px",width:"18px",top:`${r/2-9}px`},children:[(0,uO.jsxs)(In.P,{open:d,onOpenChange:k,children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsx)(kF.h,{icon:mM.AS7,"aria-label":"Row actions",className:"row-menu-trigger",sx:end,tabIndex:-1,onFocus:a,[eno]:e,...(0,mp.f)("row-menu-trigger")})}),(0,uO.jsx)(In.P.Overlay,{...(0,mp.f)("row-menu"),children:(0,uO.jsxs)(Ia.S,{children:[v||o!==mA.DraftIssue?null:(0,uO.jsxs)(Ia.S.Item,{onSelect:()=>m(!0),...(0,mp.f)("row-menu-convert-to-issue"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.hEv,{})}),"Convert to issue"]}),A?(0,uO.jsx)(uO.Fragment,{children:v?(0,uO.jsxs)(Ia.S.Item,{onSelect:D,...(0,mp.f)("row-menu-archive-multiple"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.rKT,{})}),"Archive ",y.length," items",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(F0,{})})]}):(0,uO.jsxs)(Ia.S.Item,{onSelect:E,...(0,mp.f)("row-menu-archive"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.rKT,{})}),"Archive",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(F0,{})})]})}):null,v?(0,uO.jsxs)(Ia.S.Item,{variant:"danger",onSelect:P,...(0,mp.f)("row-menu-delete-multiple"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete ",y.length," selected items from project",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(FJ,{})})]}):(0,uO.jsxs)(Ia.S.Item,{variant:"danger",onSelect:R,...(0,mp.f)("row-menu-delete"),children:[(0,uO.jsx)(Ia.S.LeadingVisual,{children:(0,uO.jsx)(mM.XHJ,{})}),"Delete from project",(0,uO.jsx)(Ia.S.TrailingVisual,{children:(0,uO.jsx)(FJ,{})})]})]})})]}),(0,uO.jsx)(MI,{anchorRef:h,isOpen:u,item:s,onOpenChange:e=>m(e),onSuccess:M,...(0,mp.f)("row-menu-repo-picker")})]})});try{(cQ=enm).displayName||(cQ.displayName="RowItemMenu")}catch{}let enp="is-roadmap-table-expanding-dragging",enf=[etI.K7],enh={start:["Space","Enter"],cancel:["Escape"],end:["Space","Enter","Tab"]},eng=(0,uq.memo)(function({children:e,focusable:t}){let{columnWidth:r}=erA(),{roadmapRef:a}=erF(),n=erO(),[l,i]=(0,uq.useState)(!1),s=(0,uq.useCallback)(()=>{i(!0),n(!0)},[n]),o=(0,uq.useCallback)(()=>{i(!1),n(!1)},[n]),{updateTitleColumnWidth:d,updateLocalTitleColumnWidth:c}=OH(),u=OY();Fd("is-dragging",l),Fd("is-roadmap-table-expanding-dragging",l);let m=(0,uq.useCallback)(e=>{let t=e.active.rect.current.initial;if(!t)return;let r=e.delta.x,n=Math.floor((t.left+t.width/2)??0),l=a.current?.getBoundingClientRect().left??0;return Math.min(Math.max(Math.round(n+r-u-l),75),1e3)},[u,a]),p=(0,uq.useCallback)(e=>{s();let t=m(e);t&&c(t)},[m,s,c]),f=(0,uq.useCallback)(async e=>{o();let t=m(e);if(t)try{await d(t)}finally{c(null)}},[o,m,d,c]),h=(0,uq.useCallback)(async e=>{o(),c(null)},[c,o]),g=(0,uq.useCallback)((e,t)=>{let{currentCoordinates:a}=t,n=kE(e);switch(n){case k_.ARROW_RIGHT:return{...a,x:a.x+r};case k_.ARROW_LEFT:return{...a,x:a.x-r}}},[r]),x=(0,GK.VT)(GK.we),y=(0,GK.VT)(GK.Lg,{coordinateGetter:g,keyboardCodes:enh}),b=(0,GK.Dy)(x,t?y:null),v=Ru();return(0,uO.jsx)(GK.LB,{autoScroll:!1,onDragStart:s,onDragMove:p,onDragEnd:f,onDragCancel:h,modifiers:enf,sensors:b,accessibility:(0,uq.useMemo)(()=>({container:v}),[v]),children:e})});try{(cY=eng).displayName||(cY.displayName="RoadmapTableColumnResizeProvider")}catch{}let enx={cursor:"col-resize",paddingLeft:"8px",position:"absolute",top:0,right:"-8px",width:"16px",height:"100%",zIndex:3,"&::after":{content:'""',position:"absolute",top:"-1px",right:"8px",bottom:"-1px",borderRight:"1px solid",borderColor:"border.muted"},[`body.${enp} &`]:{"&::after":{borderRightColor:"accent.fg"}}},eny=e=>{e.stopPropagation(),e.preventDefault()},enb=e=>{e.stopPropagation(),e.preventDefault()},env=e=>{e.stopPropagation(),e.preventDefault()},enw=(0,uq.memo)(function({id:e}){let t=OK(),r=OY(),{attributes:a,listeners:n,setNodeRef:l}=(0,GK.O1)({id:e,attributes:{role:"separator",tabIndex:-1}});return(0,uO.jsx)(mF.Z,{sx:enx,className:"roadmap-drag-sash",ref:l,"aria-label":fW.dragSashAriaLabel,"aria-valuenow":t+60,"aria-valuemin":135+r,"aria-valuemax":1060+r,"aria-orientation":"vertical",...n,onClick:eny,onFocus:env,onMouseDown:enb,...a,...(0,mp.f)("roadmap-table-drag-sash")})}),enj={cursor:"col-resize",display:"flex",position:"sticky",width:"18px",height:"32px",zIndex:3,alignItems:"center",top:"-32px",justifyContent:"center","& > svg":{backgroundColor:"canvas.default",transform:"rotate(90deg)"},[`&:hover, &:focus-visible, .${enp} &`]:{"& > svg":{color:"accent.fg"}}},enC=(0,uq.memo)(function({id:e}){let t=OK(),r=OY(),a=ea1(),{attributes:n,listeners:l,setNodeRef:i}=(0,GK.O1)({id:e,attributes:{role:"separator"}}),s=(0,uq.useRef)(null),[o,d]=kL({contentRef:s,"aria-label":fW.dragSashAriaLabel});return(0,uO.jsxs)(mF.Z,{sx:enj,ref:e=>{s.current=e,i(e)},style:{left:t-8-1},"aria-label":fW.dragSashAriaLabel,"aria-valuenow":t+60,"aria-valuemin":135+r,"aria-valuemax":1060+r,"aria-orientation":"vertical",onFocus:a,...l,...n,...o,...(0,mp.f)("roadmap-table-drag-sash"),children:[(0,uO.jsx)(mM.NoM,{}),d]})});try{(cX=enw).displayName||(cX.displayName="RoadmapTableDragSash")}catch{}try{(cJ=enC).displayName||(cJ.displayName="RoadmapTableHeaderDragSash")}catch{}let enk={...er3,height:40,position:"sticky",flexGrow:1,left:60},enS=(0,uq.memo)(function({number:e,cell:t,focusCellElement:r,rowIndex:a,isLastCell:n}){let{titleColumnWidth:l}=OH(),{hasWritePermissions:i}=yI(),s=er2();return(0,uO.jsx)(Op,{row:t.row,column:t.column,render:t.render,getCellProps:t.getCellProps,isDragging:!1,focusCellElement:r,sx:enk,styles:{...s,maxWidth:l,minWidth:l},className:"roadmap-table-cell",rowId:a,children:i&&n&&(0,uO.jsx)(eng,{children:(0,uO.jsx)(enw,{id:`RoadmapTableDragSash-${e}`})})})}),enI={position:"sticky",left:"0px",flexShrink:0,width:60,minWidth:60},enN=(0,uq.memo)(function({index:e,row:t,ranking:r,canDrag:a,...n}){let l=t.original,i=ea1(),s=(0,uq.useRef)(null),o=(0,uq.useRef)(null),d=(0,uq.useMemo)(()=>[s,o],[s,o]),{onRowClick:c,onRowMouseDown:u,focusLastRowIndex:m}=Oc(t,d),{setNodeRef:p,node:f,listeners:h}=(0,eeM.nB)({id:l.id,data:{itemId:l.id,onRowClick:c,onRowMouseDown:u}});(0,uq.useEffect)(()=>{o.current=f.current},[f]);let g=a?{...h,ref:p,[eat]:!0,role:"button",tabIndex:-1}:{};return(0,uO.jsxs)(er4,{className:"roadmap-table-cell",sx:enI,ref:s,...n,children:[(0,uO.jsx)(mF.Z,{...g,sx:{cursor:a?"grab":"default",height:40},children:(0,uO.jsx)(er5,{sx:{pointerEvents:"none",pr:1},children:(0,uO.jsx)(F2,{ranking:r})})}),(0,uO.jsx)(enm,{index:e,row:t,cellHeight:40,onFocus:i,focusLastRowIndex:m})]})}),en_={...er3,height:40,position:"sticky",flexGrow:1,maxWidth:120,minWidth:120},enT=(0,uq.memo)(function({number:e,startCell:t,endCell:r,focusCellElement:a,rowIndex:n}){let{hasWritePermissions:l}=yI(),{titleColumnWidth:i}=OH(),s=r&&t!==r;return(0,uO.jsxs)(uO.Fragment,{children:[t&&(0,uO.jsx)(Op,{row:t.row,column:t.column,render:t.render,getCellProps:t.getCellProps,isDragging:!1,focusCellElement:a,sx:en_,styles:{maxWidth:120,minWidth:120,left:60+i},className:"roadmap-table-cell",rowId:n,children:!s&&l&&(0,uO.jsx)(eng,{children:(0,uO.jsx)(enw,{id:`RoadmapTableDragSash-${e}`})})}),s&&(0,uO.jsx)(Op,{row:r.row,column:r.column,render:r.render,getCellProps:r.getCellProps,isDragging:!1,focusCellElement:a,sx:en_,styles:{maxWidth:120,minWidth:120,left:60+i+(t?120:0)},className:"roadmap-table-cell",rowId:n,children:l&&(0,uO.jsx)(eng,{children:(0,uO.jsx)(enw,{id:`RoadmapTableDragSash-${e}`})})})]})});try{(c0=enS).displayName||(c0.displayName="RoadmapTitleCell")}catch{}try{(c1=enN).displayName||(c1.displayName="RoadmapNumberCell")}catch{}try{(c2=enT).displayName||(c2.displayName="RoadmapTimeSpanCells")}catch{}let enR=(0,uq.memo)(function({row:e,index:t,itemData:r}){let a=(0,uq.useRef)(null),{isVisible:n}=ja({ref:a}),l=ery(),{selectedRowIds:i}=eai(),[s,o]=(0,uq.useState)(!1),{groupedByColumn:d}=NR(),{showDateFields:c}=OH(),{dateFields:u}=OH(),m=_P(),{mouseState:p,...f}=eaW(),h=(0,GK.Dy)((0,GK.VT)(GK.we,{activationConstraint:{distance:2}})),g=[etI.K7],x=e.original,y=x.getTitle(),b=x.getUrl(),v=x.columns,w=v[mP.Title],j=(0,uq.useMemo)(()=>w?VD(w):VA,[w]),C=v[mP.Assignees],k=p4(w),{hasWritePermissions:S}=yI(),I=F1(d)&&S&&x.contentType!==mA.RedactedItem,N=Ru(),{roadmapShowDateFields:_}=Bt();r.prepareRow(e);let T=e.cells.find(e=>e.column.columnModel?.id===mP.Title),R=c?e.cells.find(e=>u[0]!==_V&&e.column.columnModel?.id===u[0]?.id):void 0,E=c?e.cells.find(e=>u[1]!==_V&&e.column.columnModel?.id===u[1]?.id):void 0,D=e.cells.find(e=>e.column.id===erf),P=(0,uq.useMemo)(()=>({container:N,screenReaderInstructions:{draggable:_.enabled?"To update the start and target dates, drag item or edit date fields":'To update the start and target dates, drag item or enable the user setting "Show date fields" in the views options menu to edit date fields'}}),[N,_.enabled]);return n&&T&&D?(0,uO.jsxs)(er8,{ref:a,row:e,...(0,mp.f)(`TableRow{id: ${t}}`),isSelected:i.includes(e.id),isDraggingPill:s,isHighlighted:l===x.id||m===x.id&&!i.length,...null!==l?{}:f,children:[(0,uO.jsx)(enN,{index:t,row:e,ranking:e.index+1,canDrag:I,...(0,mp.f)(`TableCell{row: ${t}, column: Rank}`)}),(0,uO.jsx)(enS,{cell:T,focusCellElement:r.focusCellElement,number:k,rowIndex:t,isLastCell:!c||!R&&!E}),c&&(0,uO.jsx)(enT,{startCell:R,endCell:E,focusCellElement:r.focusCellElement,number:k,rowIndex:t}),(0,uO.jsx)(GK.LB,{sensors:h,autoScroll:!1,modifiers:g,accessibility:P,children:(0,uO.jsx)(ea_,{cell:D,rowRef:a,children:(0,uO.jsx)(eni,{titleHtml:y,renderLink:x.contentType!==mA.RedactedItem,url:b,titleColumnValue:j,number:k,assignees:C,index:t,item:x,mouseState:p,setIsDragging:o})})})]}):(0,uO.jsx)(er8,{"aria-hidden":"true",ref:a})});try{(c5=enR).displayName||(c5.displayName="RoadmapItem")}catch{}let enE=e=>{if(!e||!xL(e.sourceObject))return fE.addItem;switch(e.sourceObject.dataType){case mD.Milestone:return fE.cannotAddItemsWhenGroupByMilestone;case mD.Repository:return fE.cannotAddItemsWhenGroupByRepository;default:return fE.addItem}},enD={position:"sticky",left:0},enP=(0,uq.memo)(function({groupId:e,groupRows:t,groupMetadata:r,...a}){let n=(0,uq.useRef)(null),{omnibarRef:l,onFocus:i,onKeyDown:s}=etx(e),{isVisible:o}=ja({ref:n}),d=(0,uq.useRef)(!1),c=!!r&&xL(r.sourceObject),u=enE(r),m=OK(),p=(0,uq.useMemo)(()=>{if(!r||!t)return null;let e=N8(r.sourceObject),a=t[t.length-1]?.original?.id;return{setField:e,previousItemId:a}},[r,t]);(0,uq.useLayoutEffect)(()=>{d.current&&(d.current=!1,n?.current&&("scrollIntoViewIfNeeded"in n.current&&"function"==typeof n.current.scrollIntoViewIfNeeded?n.current.scrollIntoViewIfNeeded(!1):n.current.scrollIntoView({block:"nearest"})))});let f=(0,uq.useCallback)(()=>{d.current=o},[o]);return(0,uO.jsx)(er8,{ref:n,...(0,mp.f)("roadmap-omnibar-item"),children:(0,uO.jsx)(er4,{sx:enD,style:{width:m},...a,children:(0,uO.jsxs)(er5,{sx:{padding:"0 0 0 12px",bg:c?"canvas.subtle":"canvas.default",color:c?"fg.muted":"inherit"},children:[(0,uO.jsx)(qF,{ref:l,newItemAttributes:p??void 0,defaultPlaceholder:u,onFocus:i,onKeyDown:s,onAddItem:f,disabled:c}),(0,uO.jsx)(eng,{children:(0,uO.jsx)(enw,{id:"RoadmapTableDragSash-omnibar"})})]})})})});try{(c3=enP).displayName||(c3.displayName="RoadmapOmnibarItem")}catch{}let enA=(0,uq.memo)(function({groupMetadata:e,groupId:t,rows:r,isOmnibarFixed:a,itemData:n}){let{hasWritePermissions:l}=yI();return(0,uO.jsxs)(uq.Fragment,{children:[r.map((e,t)=>(0,uO.jsx)(enR,{index:t,row:e,itemData:n},e.original.id)),l&&!a&&(0,uO.jsx)(enP,{groupMetadata:e,groupRows:r,groupId:t})]})});try{(c4=enA).displayName||(c4.displayName="RoadmapItems")}catch{}function enM({collapsedGroupIds:e,toggleGroupCollapsed:t,tableGroups:r,itemData:a}){return(0,uO.jsx)(uq.Fragment,{children:r.map((r,n)=>{let l=e.includes(r.groupedValue);return(0,uO.jsxs)(uq.Fragment,{children:[(0,uO.jsx)(enL,{metadata:{value:r.groupedValue,sourceObject:r.groupedSourceObject},index:n,collapsed:l,toggleGroupCollapsed:t,rows:r.subRows,itemData:a,groupId:r.id}),(0,uO.jsx)(etf,{})]},r.id)})})}let enL=(0,uq.memo)(function({collapsed:e,metadata:t,toggleGroupCollapsed:r,rows:a,itemData:n,groupId:l}){let i=(0,uq.useCallback)(()=>{r(t.value)},[r,t.value]),{hideItemsCount:s,getAggregatesForItems:o}=LG(),d=(0,uq.useMemo)(()=>a.map(e=>e.original),[a]),c=(0,uq.useMemo)(()=>o(d),[o,d]),u=xO(t.sourceObject),{hasWritePermissions:m}=yI();return(0,uO.jsxs)(mF.Z,{...(0,mp.f)(`roadmap-group-${u}`),role:"rowgroup",sx:e?enZ:enF,children:[(0,uO.jsxs)(enO,{children:[(0,uO.jsxs)(enV,{collapsed:e,toggleExpansion:i,name:u,children:[(0,uO.jsx)(Ka,{sourceObject:t.sourceObject,aggregates:c,hideItemsCount:s,rowCount:a.length,titleSx:{flexShrink:1},showTrackedByOwnerOnFocus:!0}),m&&(0,uO.jsx)(eng,{children:(0,uO.jsx)(enw,{id:`RoadmapTableDragSash-${t.value}`})})]}),(0,uO.jsx)(eaz,{rows:a})]}),!e&&(0,uO.jsx)(enA,{groupMetadata:t,rows:a,isOmnibarFixed:!1,itemData:n,groupId:l})]})}),enF={position:"relative",display:"flex",flexDirection:"column",borderTop:"1px solid",borderTopColor:"border.default","&:first-child":{borderTop:"none"},...er7},enZ={...enF,borderBottom:"1px solid",borderBottomColor:"border.default","&::after":{borderBottom:"none"}},enO=({children:e})=>(0,uO.jsx)(mF.Z,{sx:enB,role:"row",...(0,mp.f)("roadmap-group-header-row"),children:e}),enB={display:"flex",position:"relative",alignItems:"center",height:`${F8}px`};function enV({name:e,children:t,collapsed:r,toggleExpansion:a}){let n=(0,uq.useCallback)(()=>{a()},[a]);return(0,uO.jsx)(en$,{collapsed:r,children:(0,uO.jsxs)(mF.Z,{sx:{display:"flex",alignItems:"center",padding:"4px",whiteSpace:"nowrap",overflow:"hidden",height:`${F8}px`},children:[(0,uO.jsx)(G6,{onCollapseToggle:n,isCollapsed:r,expandCollapseLabel:r?`Expand group ${e}`:`Collapse group ${e}`}),t]})})}let en$=({collapsed:e,children:t})=>{let r=OK();return(0,uO.jsx)(mF.Z,{role:"gridcell",style:{width:r,minWidth:r},sx:e?enU:enz,children:t})},enz={backgroundColor:"canvas.default",borderColor:"border.default",borderStyle:"solid",borderWidth:"0 0 1px 0",position:"sticky",left:"0px",display:"flex",alignItems:"center",zIndex:2,height:`${F8}px`},enU={...enz,borderBottomColor:"transparent"};try{(c6=enM).displayName||(c6.displayName="GroupedRoadmapItems")}catch{}try{(c7=enL).displayName||(c7.displayName="RoadmapGroup")}catch{}try{(c8=enO).displayName||(c8.displayName="RoadmapGroupHeaderRow")}catch{}try{(c9=enV).displayName||(c9.displayName="GroupHeaderTable")}catch{}try{(ue=en$).displayName||(ue.displayName="GroupHeaderCell")}catch{}var enW=r(48030),enH=r(41905),enG=r(43703),enq=r(52605),enK=r(63500),enQ=r(69295),enY=r(584);let enX={today:{nub:"danger.fg",marker:"danger.muted"},customDate:{nub:"fg.subtle",marker:"fg.muted"},iteration:{nub:"fg.subtle",marker:"fg.muted"},currentIteration:{nub:"accent.fg",marker:"accent.muted"},iterationBreak:{nub:"canvas.default"},milestone:{nub:"success.fg",marker:"success.muted"},divider:{marker:"border.default"}},enJ={position:"absolute",width:"1px",borderLeftWidth:1,borderLeftStyle:"solid",top:"1px",bottom:0,zIndex:-1},en0={...enJ,borderLeftColor:enX.today.marker},en1={...enJ,borderLeftColor:enX.iteration.marker,opacity:.33},en2={...enJ,borderLeftColor:enX.milestone.marker},en5={...enJ,borderLeftColor:enX.customDate.marker,opacity:.33},en3={...enJ,borderLeftColor:enX.currentIteration.marker},en4={...enJ,borderLeftColor:enX.divider.marker},en6={display:"inline-block",position:"absolute",height:"7px",width:"7px",borderRadius:0,zIndex:2,top:"-4.5px"},en7={...en6,borderRadius:"100%",backgroundColor:enX.today.nub},en8={...en6,backgroundColor:"transparent"},en9={...en6,backgroundColor:"transparent",borderColor:enX.iteration.nub,borderStyle:"solid",borderWidth:2,borderRadius:"100%"},ele={...en6,borderRadius:"2px",backgroundColor:enX.milestone.nub,transform:"rotate(45deg)"},elt={...en6,height:"4px",width:"4px",borderRadius:0,backgroundColor:enX.customDate.nub,top:"-4.5px",borderTopRightRadius:"50%",transform:"translate(1.5px, 2px) rotate(120deg) skewX(-30deg) scale(1,.866)","&::before":{content:'""',position:"absolute",height:"4px",width:"4px",backgroundColor:"inherit",borderTopRightRadius:"50%",transform:"rotate(-135deg) skewX(-45deg) scale(1.414,.707) translate(0,-50%)"},"&::after":{content:'""',position:"absolute",height:"4px",width:"4px",backgroundColor:"inherit",borderTopRightRadius:"50%",transform:"rotate(135deg) skewY(-45deg) scale(.707,1.414) translate(50%)"}},elr={...en9,backgroundColor:enX.iterationBreak.nub},ela={...en9,borderColor:enX.currentIteration.nub};function eln(){return(0,uO.jsxs)(mF.Z,{role:"row",sx:{position:"relative"},children:[(0,uO.jsx)(eli,{}),(0,uO.jsx)(elo,{})]})}function ell(){return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(elf,{}),(0,uO.jsx)(els,{}),(0,uO.jsx)(elu,{})]})}function eli(){let{getX:e,today:t}=erA(),{singleDayMarkerMap:r}=erW(),a=(0,uq.useMemo)(()=>(0,gh.Z)(t,12),[t]),n=e(a)-3.5,l=(0,uq.useRef)(null),{isVisible:i}=ja({ref:l}),[s,o]=kL({contentRef:l,"aria-label":`Today: ${eak({start:t,end:t})}`}),d=vV(t.toISOString()),c=r.has(d);return(0,uO.jsx)(mF.Z,{as:"time",role:"gridcell",dateTime:d,ref:l,sx:i&&!c?en7:en8,style:{left:`${n}px`},...s,...(0,mp.f)("roadmap-today-marker-nub"),children:o})}function els(){let{getX:e,today:t,totalWidth:r}=erA(),{singleDayMarkerMap:a}=erW(),n=(0,uq.useMemo)(()=>(0,gh.Z)(t,12),[t]),l=e(n);if(!(l>0&&l<r))return null;let i=vV(t.toISOString());return a.has(i)?null:(0,uO.jsx)(mF.Z,{sx:en0,style:{left:`${l}px`,height:"100%"},...(0,mp.f)("roadmap-today-marker")})}function elo(){let{markersInRange:e}=erW();return(0,uO.jsx)(uO.Fragment,{children:e.map(e=>(0,uO.jsx)(elc,{marker:e,isCurrent:erJ(e)},e.id))})}let eld={[erB.CustomDate]:elt,[erB.Iteration]:en9,[erB.IterationBreak]:elr,[erB.Milestone]:ele};function elc({isCurrent:e=!1,marker:t}){let{getX:r,today:a}=erA(),{startDate:n,endDate:l}=(0,uq.useMemo)(()=>{let e="duration"in t?new Date(t.date):(0,gh.Z)(new Date(t.date),12),r="duration"in t?(0,pl.Z)(e,t.duration):new Date(t.date);return{startDate:e,endDate:r}},[t]),i=r(new Date(n))-3,s=(0,uq.useRef)(null),{isVisible:o}=ja({ref:s}),d=vV(a.toISOString()),c=t.date===d&&!("duration"in t),{startDate:u,endDate:m}="duration"in t?gI({startDate:t.date,duration:t.duration}):{startDate:n,endDate:l},p="duration"in t&&t.options.length>1?Fn(t.options):`${t.title}: ${eak({start:u,end:m})}`,[f,h]=kL({contentRef:s,"aria-label":p}),g=e?ela:eld[t.type];return(0,uO.jsx)(mF.Z,{as:"time",role:"gridcell",dateTime:t.date,ref:s,sx:c?{...g,backgroundColor:enX.today.nub}:g,style:{left:`${i}px`,...o?{}:{backgroundColor:"transparent",borderColor:"transparent"}},...f,...(0,mp.f)(`${t.type}-marker-nub-${t.id}`),children:h})}let elu=(0,uq.memo)(function(){let{markersInRange:e}=erW();return(0,uO.jsx)(uO.Fragment,{children:e.map(e=>(0,uO.jsx)(elp,{marker:e,isCurrent:erJ(e)},e.id))})}),elm={[erB.CustomDate]:en5,[erB.Iteration]:en1,[erB.IterationBreak]:en1,[erB.Milestone]:en2};function elp({marker:e,isCurrent:t=!1}){let{getX:r,today:a}=erA(),n=(0,uq.useMemo)(()=>"duration"in e?new Date(e.date):(0,gh.Z)(new Date(e.date),12),[e]),l=r(new Date(n)),i=vV(a.toISOString()),s=e.date===i&&!("duration"in e),o=t?en3:elm[e.type],d=s?{...o,borderLeftColor:enX.today.marker,opacity:1}:o;return(0,uO.jsx)(mF.Z,{...(0,mp.f)(`${e.type}-marker-line`),sx:d,style:{left:`${l}px`,height:"100%"}})}function elf(){let{getX:e,timeRangeEnd:t,timeRangeStart:r}=erA(),a=OJ(),n=a===_$.Month?Math.abs((0,enQ.Z)(t,r))+1:Math.abs((0,enq.Z)(t,r))+1,l=Array.from({length:n},(e,t)=>a===_$.Month?fN((0,enK.Z)((0,enY.Z)(r,{weekStartsOn:1}),t)):fN((0,erS.Z)((0,enG.Z)(r),t)));return(0,uO.jsx)(uO.Fragment,{children:l.map(t=>{let r=e(t);return(0,uO.jsx)(mF.Z,{sx:en4,style:{left:`${r}px`,height:"100%"}},r)})})}try{(ut=eln).displayName||(ut.displayName="RoadmapMarkerHeaderNubs")}catch{}try{(ur=ell).displayName||(ur.displayName="RoadmapMarkers")}catch{}try{(ua=eli).displayName||(ua.displayName="TodayMarkerNub")}catch{}try{(un=els).displayName||(un.displayName="TodayMarkerLine")}catch{}try{(ul=elo).displayName||(ul.displayName="MarkerNubs")}catch{}try{(ui=elc).displayName||(ui.displayName="MarkerNub")}catch{}try{(us=elu).displayName||(us.displayName="MarkerLines")}catch{}try{(uo=elp).displayName||(uo.displayName="MarkerLine")}catch{}try{(ud=elf).displayName||(ud.displayName="DividerMarkersLines")}catch{}let elh={position:"sticky",left:"4px",paddingLeft:"12px",paddingTop:"8px",fontSize:"12px",backgroundColor:"canvas.default",whiteSpace:"nowrap",flexShrink:0,flexGrow:0,"&:before":{content:'""',position:"absolute",top:0,left:"-20px",width:"20px",height:"100%",backgroundColor:"canvas.default",maskImage:"linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%)"}},elg={position:"absolute",paddingTop:"6px",display:"flex",justifyContent:"center",fontSize:"12px"},elx={...elg,color:enX.today.nub,fontWeight:"bold"},ely={position:"relative",width:"100%",top:"-32px"},elb=(0,uq.memo)(function(){let{totalWidth:e}=erA(),t=er0(),r=er1(),{hasWritePermissions:a}=yI();return(0,uO.jsxs)(mF.Z,{role:"rowgroup",sx:{height:r,borderBottomStyle:"solid",borderBottomWidth:2,borderBottomColor:"border.default",position:"sticky",top:0,zIndex:3,backgroundColor:"canvas.default",width:`${e}px`,color:"fg.muted",contain:"layout"},...(0,mp.f)("roadmap-header"),children:[(0,uO.jsx)(elj,{}),t&&(0,uO.jsx)(elk,{}),(0,uO.jsx)(elw,{}),(0,uO.jsx)(eln,{}),a?(0,uO.jsx)(mF.Z,{role:"row",sx:ely,children:(0,uO.jsx)("div",{role:"gridcell",children:(0,uO.jsx)(eng,{focusable:!0,children:(0,uO.jsx)(enC,{id:"RoadmapTableHeaderDragSash"})})})}):null]})}),elv={[_$.Month]:1,[_$.Quarter]:7,[_$.Year]:14},elw=(0,uq.memo)(function(){let{columnWidth:e,getX:t,timeRangeEnd:r,timeRangeStart:a,today:n}=erA(),l=OJ(),i=(0,uq.useMemo)(()=>{let i=a.getUTCDay(),s=elv[l],o=(0,pl.Z)(a,(s-i+1)%s),d=Math.floor((0,gg.Z)(r,o)/s),c=o.getTime();return Array.from({length:d},(r,a)=>{let l=new Date(c+a*s*864e5),i=l.getTime()===n.getTime(),o=`${l.getUTCFullYear()}-${(l.getUTCMonth()+1).toString().padStart(2,"0")}-${l.getUTCDate().toString().padStart(2,"0")}`;return(0,uO.jsx)(mF.Z,{sx:i?elx:elg,role:"columnheader",style:{left:t(l),width:e},as:"time","data-index":a,dateTime:o,"aria-current":i?"date":void 0,children:l.getUTCDate()},o)})},[e,t,r,a,n,l]);return(0,uO.jsx)(mF.Z,{role:"row",sx:{position:"relative",display:"flex",height:"32px"},children:i})}),elj=(0,uq.memo)(function(){let{timeRangeEnd:e,timeRangeStart:t,getX:r}=erA(),a=OJ(),n=(0,enG.Z)(t),l=fN((0,erS.Z)(n,1)),i=r(l)-12,s=(0,uq.useMemo)(()=>(0,enq.Z)(e,t)+1,[e,t]),o=a===_$.Year,d=(0,uq.useMemo)(()=>Array.from({length:s},(a,l)=>{let d=(0,erS.Z)(n,l),c=fN(d),u=fN((0,erS.Z)(d,1)),m=0,p=4,f=12;if(0===l)p=0,i<=0?(f=0,m=0):i<16?(f=i,m=i):(f=16,m=i);else if(1===l&&i<0){if(c.getTime()===t.getTime())m=r(u)-r(c)-12;else{let e=12+i;f=e,p=-e,m=r(u)-r(c)-12+e}}else if(l===s-1){let t=r(e)-r(c)+12-32;t<=0?(f=0,m=0):(t<12&&(f=t),m=t)}else m=r(u)-r(c);return(0,uO.jsx)(mF.Z,{role:"columnheader",sx:elh,style:{width:`${m}px`,left:`${p}px`,paddingLeft:`${f}px`},children:(0,P2.p6)(d,o?"MMM yyyy":"MMMM yyyy")},d.getTime())}),[s,o,n,i,t,r,e]);return(0,uO.jsxs)(mF.Z,{role:"row",sx:{position:"relative",display:"flex",height:"32px"},children:[d,(0,uO.jsx)(elC,{})]})}),elC=()=>(0,uO.jsx)(mF.Z,{sx:{position:"sticky",width:"32px}",right:0,backgroundColor:"canvas.default"}}),elk=(0,uq.memo)(function(){let{getX:e}=erA(),{markersInRange:t}=erW(),r=erG(),a=erH(),{milestoneMarkers:n,iterationMarkers:l}=(0,uq.useMemo)(()=>t.reduce((e,t)=>(t.type===erB.Iteration||t.type===erB.IterationBreak?e.iterationMarkers.push(t):t.type===erB.Milestone&&e.milestoneMarkers.push(t),e),{iterationMarkers:[],milestoneMarkers:[]}),[t]),i=l[0],s=i?e(new Date(i.date)):0;return t.length>0||a>0?(0,uO.jsxs)(mF.Z,{role:"row",sx:{position:"relative",display:"flex",height:"24px"},children:[(0,uO.jsx)(mF.Z,{role:"presentation",sx:elS,style:{width:`${s-12}px`},...(0,mp.f)("roadmap-iteration-marker-header-spacer")}),l.map((e,t)=>(0,uO.jsx)(elT,{marker:e,nextMarker:l[t+1]},e.id)),r>0&&(0,uO.jsx)(mF.Z,{role:"presentation",sx:{...elS,width:"200px"},...(0,mp.f)("roadmap-iteration-marker-header-fill")}),n.map(e=>(0,uO.jsx)(el_,{marker:e},e.id))]}):null}),elS={position:"sticky",color:enX.iteration.nub,fontWeight:600,left:"4px",paddingLeft:"12px",paddingTop:"6px",fontSize:"12px",lineHeight:"12px",backgroundColor:"canvas.default",whiteSpace:"nowrap",flexShrink:0,flexGrow:0,"&:before":{content:'""',position:"absolute",top:0,left:"-20px",width:"20px",height:"100%",backgroundColor:"canvas.default",maskImage:"linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%)",pointerEvents:"none"}},elI={...elS,color:enX.milestone.nub,position:"absolute",pl:0,boxShadow:e=>`0px 0px 11px 1px ${e.colors.canvas.default}`,"&:hover":{boxShadow:e=>`10px 0 11px 1px ${e.colors.canvas.default}, -10px 0 11px 1px ${e.colors.canvas.default}`,zIndex:1}},elN={...elS,color:enX.currentIteration.nub};function el_({marker:e}){let{getX:t}=erA(),r=(0,uq.useMemo)(()=>(0,gh.Z)(new Date(e.date),12),[e.date]),a=t(r),n=(0,uq.useRef)(null),[l,i]=kL({contentRef:n,"aria-label":eak({start:r,end:r})});return(0,uO.jsxs)(mF.Z,{ref:n,role:"columnheader",sx:elI,style:{left:a},...l,...(0,mp.f)("roadmap-milestone-marker-header"),children:[(e.options.length||0)>1?(0,uO.jsx)(elE,{marker:e}):(0,uO.jsx)(elR,{marker:e}),i]})}function elT({marker:e,nextMarker:t}){let{getX:r,timeRangeEnd:a}=erA(),n=erJ(e),l=new Date(e.date),i=t?new Date(t.date):(0,pl.Z)(l,e.duration||0),s=r(l),o=r(a<i?a:i),d=(0,uq.useRef)(null),[c,u]=kL({contentRef:d,"aria-label":Fn(e.options),anchorOffset:6});return(0,uO.jsxs)(mF.Z,{ref:d,role:"columnheader",sx:n?elN:elS,style:{width:`${o-s}px`},...(0,mp.f)(`roadmap-iteration-marker-header-${e.id}`),children:[(0,uO.jsx)(elD,{ref:d,sx:n?elN:elS,...c,children:1===e.options.length?(0,uO.jsx)(uO.Fragment,{children:e.title}):(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsxs)(jI.z,{title:e.title,"aria-label":e.title,sx:{all:"unset",cursor:"pointer","&:hover":{backgroundColor:"inherit",textDecoration:"underline"}},children:[e.title,e.date&&(0,uO.jsxs)(kr,{children:["(Starting on ",(0,uO.jsx)("time",{dateTime:e.date,children:fI(new Date(e.date))}),")"]})]})}),(0,uO.jsx)(In.P.Overlay,{sx:{marginTop:"7px"},children:(0,uO.jsx)(Ia.S,{...(0,mp.f)("roadmap-iteration-marker-selector"),children:e.options.map(e=>{let{startDate:t,endDate:r}=gI({startDate:e.startDate,duration:e.duration});return(0,uO.jsxs)(Ia.S.Item,{active:!1,selected:!1,sx:{cursor:"default",pointerEvents:"none","&:hover":{backgroundColor:"unset",color:"unset"}},children:[e.title,(0,uO.jsx)(Ia.S.Description,{children:eak({start:t,end:r})})]},e.id)})})})]})}),u]})}function elR({marker:e}){let t=e.options[0],r=t?.url;return(0,uO.jsxs)(w3.Z,{sx:{all:"unset",cursor:"pointer",display:"inline-block"},target:"_blank",rel:"noopener noreferrer",href:r,title:e.description,children:[e.title,e.date&&(0,uO.jsxs)(kr,{children:["(Due on ",(0,uO.jsx)("time",{dateTime:e.date,children:fI(new Date(e.date))}),")"]})]})}function elE({marker:e}){return(0,uO.jsxs)(In.P,{children:[(0,uO.jsx)(In.P.Anchor,{children:(0,uO.jsxs)(jI.z,{as:"button",title:e.description,"aria-label":e.description,sx:{all:"unset",cursor:"pointer","&:hover":{backgroundColor:"inherit",textDecoration:"underline"}},children:[e.options.length," milestones",e.date&&(0,uO.jsxs)(kr,{children:["(Due on ",(0,uO.jsx)("time",{dateTime:e.date,children:fI(new Date(e.date))}),")"]})]})}),(0,uO.jsx)(In.P.Overlay,{sx:{marginTop:"7px"},children:(0,uO.jsx)(Ia.S,{...(0,mp.f)("roadmap-milestone-marker-selector"),children:e.options.map(e=>(0,uO.jsxs)(Ia.S.LinkItem,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[e.title,(0,uO.jsx)(Ia.S.Description,{children:e.repoNameWithOwner})]},e.id))})})]})}let elD=(0,uq.forwardRef)(function({children:e,sx:t,...r},a){let n=(0,uq.useRef)(null);(0,uq.useImperativeHandle)(a,()=>n.current);let[l,i]=(0,uq.useState)(!1);return(0,uO.jsxs)(mF.Z,{ref:n,...r,sx:{display:"inline-block"},onPointerEnter:e=>{i(!0),r.onPointerEnter?.(e)},onPointerLeave:e=>{i(!1),r.onPointerLeave?.(e)},children:[e,l?(0,uO.jsx)(elP,{sx:t,contentRef:n,children:e}):null]})});function elP({contentRef:e,children:t,sx:r}){let a=(0,uq.useRef)(null),{left:n,top:l}=elA(a,e);return(0,uO.jsx)(enH.h,{children:(0,uO.jsx)(mF.Z,{role:"presentation","aria-hidden":!0,sx:{...r,position:"absolute",fontSize:"12px",lineHeight:"12px",backgroundColor:"canvas.default",pointerEvents:"none",padding:0,boxShadow:e=>`10px 0 11px 1px ${e.colors.canvas.default}, -10px 0 11px 1px ${e.colors.canvas.default}`},style:{left:n,top:l},ref:a,children:t})})}let elA=(e,t)=>{let{roadmapRef:r}=erF(),a=(0,uq.useRef)({top:0,left:0});return(0,uq.useSyncExternalStore)((0,uq.useCallback)(e=>(r.current?.addEventListener("scroll",e),()=>{r.current?.removeEventListener("scroll",e)}),[r]),(0,uq.useCallback)(()=>{if(!e.current||!t.current)return a.current;let{left:r,top:n}=(0,enW.N)(e.current,t.current,{side:"inside-top",align:"start",alignmentOffset:0,anchorOffset:0});return(a.current.left!==r||a.current.top!==n)&&(a.current={left:r,top:n}),a.current},[t,e]))};try{(uc=elb).displayName||(uc.displayName="RoadmapHeader")}catch{}try{(uu=elw).displayName||(uu.displayName="RoadmapDays")}catch{}try{(um=elj).displayName||(um.displayName="RoadmapMonths")}catch{}try{(up=elC).displayName||(up.displayName="RoadmapControlsCaulk")}catch{}try{(uf=elk).displayName||(uf.displayName="RoadmapMarkerHeaders")}catch{}try{(uh=el_).displayName||(uh.displayName="RoadmapMilestoneHeader")}catch{}try{(ug=elT).displayName||(ug.displayName="RoadmapIterationHeader")}catch{}try{(ux=elR).displayName||(ux.displayName="RoadmapMilestoneMarkerHeaderLink")}catch{}try{(uy=elE).displayName||(uy.displayName="RoadmapMilestoneMarkerActionMenu")}catch{}try{(ub=elD).displayName||(ub.displayName="HoverOverPortalContent")}catch{}try{(uv=elP).displayName||(uv.displayName="OverlayingContent")}catch{}let elM=(0,uq.memo)(function({rowCount:e}){let{omnibarRef:t,onFocus:r,onKeyDown:a}=etx(),{roadmapRef:n}=erF(),{horizontalScrollbarSize:l,verticalScrollbarSize:i}=GJ(n),{onNewItem:s}=JT(n,e,void 0);return(0,uO.jsx)(qU,{horizontalScrollbarSize:l,verticalScrollbarSize:i,isFixed:!0,children:(0,uO.jsx)(qF,{ref:t,onKeyDown:a,onInputFocus:r,role:"row",childElementRole:"gridcell",onAddItem:s,defaultPlaceholder:qh,isFixed:!0})})});try{(uw=elM).displayName||(uw.displayName="RoadmapFixedOmnibar")}catch{}let elL=[erp],elF=(0,uq.memo)(function(){let{addPotentiallyMissingFieldIds:e}=By(),{hasWritePermissions:t}=yI(),{dateFields:r,markerFields:a,getTimeSpanFromColumnData:n}=OH(),{allColumns:l}=CB(),i=(0,uq.useMemo)(()=>({fields:l.filter(e=>e.id===mP.Title),plugins:elL}),[l]),s=ets(i),o=JS(s,!0),d=(0,uq.useRef)({instance:s,getHeaderFocus:eas,focusableRowFilter:eac({hasWritePermissions:t,getTimeSpanFromColumnData:n}),focusableColumnFilter:eau({hasWritePermissions:t,getTimeSpanFromColumnData:n})});return(0,uq.useEffect)(()=>{d.current.focusableRowFilter=eac({hasWritePermissions:t,getTimeSpanFromColumnData:n}),d.current.focusableColumnFilter=eau({hasWritePermissions:t,getTimeSpanFromColumnData:n})},[t,n]),(0,uq.useEffect)(()=>{let t=[...new Set([...r.filter(L8).map(e=>e.id),...a.map(e=>e.id)])];e(t)},[r,a,e]),(0,uO.jsx)(erP,{children:(0,uO.jsx)(__,{table:s,cellHeight:40,children:(0,uO.jsx)(x4,{initialState:o,metaRef:d,children:(0,uO.jsxs)(eto,{filteredItems:s.preTransientFilteredFlatRows,children:[(0,uO.jsx)(eaC,{filterCount:(0,uq.useDeferredValue)(s.flatRows.length)}),(0,uO.jsx)(erU,{rows:s.flatRows,children:(0,uO.jsx)(elV,{table:s})})]})})})})}),elZ={flex:"1 1 auto",position:"relative",display:"flex",flexDirection:"column"},elO={...elZ},elB={flex:"1 1 auto",display:"flex",flexDirection:"column",position:"absolute",inset:0,backgroundColor:"canvas.subtle",overflow:"auto",scrollbarGutter:"stable","&.is-scrolling-locked":{overflow:"hidden"},"&.is-omnibar-fixed":{paddingBottom:"57px"},"&.horizontal-scrollbar-hidden":{paddingBottom:"69px"},"&.is-grouped":{paddingBottom:0}},elV=({table:e})=>{let t=erZ(),{onKeyDown:r,onBlur:a}=etX(),{toggleGroupCollapsed:n,collapsedGroups:l}=NR(),{today:i}=erA(),s=OK(),o=er1(),{roadmapRef:d,scrollToDate:c,shiftToNextRange:u,shiftToPrevRange:m}=erF(),{horizontalScrollbarSize:p}=GJ(d),{rows:f,selectedFlatRows:h,groupedRows:g}=e,x=(0,uq.useMemo)(()=>h.map(e=>e.id),[h]),y=(0,uq.useRef)(null),b=(0,uq.useRef)(null),v=er9(y,b),{sliceField:w}=Bl(),{slicerItems:j}=etd(),{openProjectItemInPane:C}=bJ(),k=(0,uq.useRef)(!0);(0,uq.useEffect)(()=>{k.current&&(k.current=!1,c(i))},[i,c]);let S=(0,uq.useCallback)(()=>{if(d?.current){let{scrollLeft:e,scrollWidth:t,clientWidth:r}=d.current;e+r+1>t?u():e<=0&&m()}},[u,m,d]),I=(0,uq.useSyncExternalStore)(elG,()=>window.innerWidth),N=(0,uq.useMemo)(()=>s<I?`400px 0px 400px -${s}px`:"400px 0px 400px 0px",[s,I]),_=g?xF(g):void 0,T=void 0!==_,R=etQ(e,{sticky:!0});return(0,uO.jsxs)(uO.Fragment,{children:[w&&(0,uO.jsx)(Yh,{slicerItems:j,openSidePanel:C}),(0,uO.jsx)(jr,{rootRef:d,rootMargin:N,sizeEstimate:40,children:(0,uO.jsxs)(mF.Z,{sx:elZ,children:[(0,uO.jsx)(eaf,{}),(0,uO.jsxs)(mF.Z,{ref:y,role:"grid",sx:elO,"data-hpc":!0,onKeyDown:r,onBlur:a,...(0,mp.f)("roadmap-view"),children:[(0,uO.jsxs)(mF.Z,{ref:d,onScroll:S,className:F7()({"is-scrolling-locked":t,"is-grouped":T,"is-omnibar-fixed":v,"horizontal-scrollbar-hidden":0===p}),sx:elB,...(0,mp.f)("roadmap-scroll-container"),children:[(0,uO.jsx)(elb,{}),(0,uO.jsx)(eal,{selectedRowIds:x,children:(0,uO.jsx)(erk,{children:(0,uO.jsxs)(elH,{isGrouped:T,ref:b,children:[(0,uO.jsx)(ell,{}),T?(0,uO.jsx)(enM,{collapsedGroupIds:l,toggleGroupCollapsed:n,tableGroups:_,itemData:R}):(0,uO.jsx)(enA,{rows:f,isOmnibarFixed:v,itemData:R}),(0,uO.jsx)(erw,{rows:T?_:f,isGrouped:T,scrollRef:d,headerHeight:o,tableWidth:s})]})})})]}),v&&(0,uO.jsx)(elM,{rowCount:f.length})]})]})})]})},el$={position:"relative",flex:"1 1 auto",display:"flex",flexDirection:"column",contain:"content"},elz={...el$,boxShadow:"shadow.medium"},elU={position:"relative",display:"flex",flexDirection:"column"},elW={...elU,boxShadow:"shadow.medium",...er7},elH=(0,uq.memo)((0,uq.forwardRef)(function({isGrouped:e,children:t},r){let{totalWidth:a}=erA();return eaa(),(0,uO.jsx)(uU.Z,{fontSize:"14px",children:(0,uO.jsx)(mF.Z,{sx:e?el$:elz,style:{width:a},ref:r,...(0,mp.f)("roadmap-items"),children:(0,uO.jsx)(mF.Z,{sx:e?elU:elW,children:t})})})}));function elG(e){return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}try{(uj=elF).displayName||(uj.displayName="RoadmapView")}catch{}try{(uC=elV).displayName||(uC.displayName="RoadmapContent")}catch{}try{(uk=elH).displayName||(uk.displayName="RoadmapItemsArea")}catch{}try{(uS=elH).displayName||(uS.displayName="RoadmapItemsArea")}catch{}let elq=({children:e})=>{let{roadmapShowDateFields:t}=Bt(),{dateFields:r}=OH(),a=(0,uq.useMemo)(()=>t.enabled?r.filter(L8).map(e=>e.id):[],[t,r]),n=(0,uq.useCallback)(e=>e.id===mP.Title||a.includes(e.id),[a]);return(0,uO.jsx)(eeE,{isFieldVisible:n,children:e})};try{(uI=elq).displayName||(uI.displayName="TableColumnsProviderForRoadmap")}catch{}function elK(){b2();let{memex_table_without_limits:e}=g9(),t=C0("project-view");return(0,uO.jsxs)(mF.Z,{id:"memex-project-view-root",...(0,mp.f)("app-root"),sx:{flexDirection:"column",flex:"auto",position:"relative",zIndex:1,display:"flex",height:"100%"},children:[(0,uO.jsx)(eri,{projectViewId:t}),(0,uO.jsxs)(mF.Z,{id:t,role:"tabpanel",sx:{flexDirection:"column",flex:"auto",position:"relative",zIndex:1,display:"flex"},children:[e&&(0,uO.jsx)(vd.Z,{sx:{mx:1,mt:1},...(0,mp.f)("no-project-limits-banner"),children:fE.noProjectLimitBanner}),(0,uO.jsx)(elY,{})]})]})}let elQ=({type:e})=>{switch(e){case _z.Table:return(0,uO.jsx)(FF,{children:(0,uO.jsx)(et6,{children:(0,uO.jsx)(et1,{focusOnInit:!0})})});case _z.Roadmap:return(0,uO.jsx)(FF,{children:(0,uO.jsx)(elq,{children:(0,uO.jsx)(elF,{})})});case _z.List:default:return(0,uO.jsx)(Jc,{})}},elY=(0,uq.memo)(function(){let{currentView:e,views:t,duplicateCurrentViewState:r}=bP(),{partialFailures:a}=yk(),{viewType:n}=_Y(),{addToast:l}=m7(),i=m1(l),{memex_pivot_panel:s}=g9(),{sliceField:o}=Bl();return((0,uq.useEffect)(()=>{let e=a?.[0];e&&i.current({message:e.message,type:mB.warning,keepAlive:!0})},[a,i]),erm(),e)?(0,uO.jsxs)(uO.Fragment,{children:[s&&o?(0,uO.jsxs)(mF.Z,{sx:{flexDirection:"row",flex:"auto",display:"flex"},children:[(0,uO.jsx)(mF.Z,{sx:{minWidth:Yo}}),(0,uO.jsx)(mF.Z,{sx:{flexDirection:"column",flex:"auto",display:"flex",overflow:"auto"},children:(0,uO.jsx)(elQ,{type:n})})]}):(0,uO.jsx)(elQ,{type:n}),e.isDeleted?(0,uO.jsxs)(mX,{role:"status",...(0,mp.f)("deleted-view-toast"),children:[(0,uO.jsx)(mY,{sx:{bg:mz[mB.warning]},children:mH}),(0,uO.jsxs)(mF.Z,{sx:{py:1},children:[(0,uO.jsx)(mO.Z,{sx:{fontSize:1,mx:2,color:"fg.onEmphasis"},children:"This view has been deleted."}),t.length<42?(0,uO.jsx)(mJ,{...(0,mp.f)("deleted-view-toast-action"),sx:{mt:0,mb:0},onClick:()=>{r(e.number,void 0,{ui:"deleted view toast"})},children:e.isViewStateDirty?"Save a copy to make changes.":"Duplicate it to make changes."}):null]})]}):null]}):(0,uO.jsx)(elX,{})}),elX=(0,uq.memo)(function(){return(0,uO.jsxs)(w7,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1},"data-hpc":!0,children:[(0,uO.jsx)(mL.Z,{icon:mM.wNq,size:30,sx:{color:"danger.fg"}}),(0,uO.jsx)(mO.Z,{as:"h2",children:"This view no longer exists"}),(0,uO.jsx)(mO.Z,{as:"p",sx:{color:"fg.muted"},children:"Select another view to use this project."})]})});try{(uN=elK).displayName||(uN.displayName="ProjectView")}catch{}try{(u_=elQ).displayName||(u_.displayName="ProjectViewInner")}catch{}try{(uT=elY).displayName||(uT.displayName="MainView")}catch{}try{(uR=elX).displayName||(uR.displayName="NoViewFound")}catch{}async function elJ(e){let t=f8("memex-chart-create-api-data"),{data:r}=await hh(t.url,{method:"POST",body:e,token:t.token});return r}async function el0(e){let t=f8("memex-chart-delete-api-data"),{data:r}=await hh(t.url,{method:"DELETE",body:e,token:t.token});return r}async function el1(e){let t=f8("memex-chart-update-api-data"),{data:r}=await hh(t.url,{method:"PUT",body:e,token:t.token});return r}function el2(e,t){let{configuration:{description:r,...a}}=e,{time:n,xAxis:l}=a;return n||"time"!==l.dataSource.column||(a.time={period:"2W"}),{number:e.number,name:e.name,description:r,localVersion:{configuration:{...a,...t}},serverVersion:{configuration:a}}}function el5(){let{hasUnlimitedSavedCharts:e}=LN(),t=(0,uq.useCallback)(t=>{let r={};if(e){let e=t.get(yR);null!=e&&$_(e)&&(r.type=e);let a=t.get(y$),n=t.get(yV);null!=a&&null!=n&&(r.xAxis={dataSource:"time"===a?{column:"time"}:{column:parseInt(a,10)},groupBy:n?{column:parseInt(n,10)}:void 0});let l=t.get(yU),i=t.get(yz);null!=l&&null!=i&&$R(l)&&(r.yAxis={aggregate:{operation:l,columns:i?[parseInt(i,10)]:void 0}})}let a=t.get(yT);return null!=a&&(r.filter=a),r},[e]);return{getOverrides:t}}function el3(e,t){return t&&$j(t).isDirty?{...t,name:e.name,serverVersion:{configuration:e.configuration}}:el2(e)}let el4=(0,uq.memo)(function({children:e}){let{isInsightsEnabled:t,hasUnlimitedSavedCharts:r,savedChartsLimit:a}=LN(),{getChartLinkParameters:n}=zo(),{getInitialChartState:l}=el6(),{getOverrides:i}=el5(),{findColumn:s}=Tk(),{findColumnByDatabaseId:o}=j5(),{postStats:d}=bM(),c=(0,EA.Z)(),u=(0,uq.useRef)({}),m=(0,uq.useCallback)(()=>{let e=gc(s("Status"));return{chart:{configuration:{filter:"",type:"stacked-area",xAxis:{dataSource:{column:"time"},groupBy:{column:e.databaseId}},yAxis:{aggregate:{operation:"count"}},time:{period:"2W"}}}}},[s]),p=(0,uq.useCallback)(()=>{let e=gc(s("Status"));return{chart:{configuration:{filter:"",type:"column",xAxis:{dataSource:{column:e.databaseId}},yAxis:{aggregate:{operation:"count"}}}}}},[s]),f=(0,uq.useCallback)(()=>t?m():p(),[m,p,t]),h=(0,uq.useCallback)(()=>p(),[p]),[g,x]=(0,uq.useState)(()=>l(f().chart.configuration)),y=(0,uq.useCallback)(()=>r||Object.values(g).filter(e=>!$k(e)).length<a,[g,r,a]),b=(0,uq.useCallback)(e=>g[e],[g]),v=(0,uq.useCallback)(e=>{let t=b(e);if(!t){let e=mk.generatePath();return{url:e,pathname:e,search:""}}let r=$k(t)?mk.generatePath():mS.generatePath({insightNumber:t.number}),a=n(t),l=a.toString();return{url:`${r}${l?`?${l}`:""}`,pathname:r,search:l}},[b,n]),w=(0,uq.useCallback)((e,t,r)=>{u.current[t]&&window.clearTimeout(u.current[t]),u.current[t]=window.setTimeout(()=>{if(c()){let a={};if(e===gt||e===gr){let e=r?.xAxis?.dataSource?.column;a.dataSourceName=pG(e)?o(e)?.name:e;let t=r?.xAxis?.groupBy?.column;a.groupByName=pG(t)?o(t)?.name:t;let n=r?.yAxis?.aggregate?.columns?.[0];a.aggregateName=pG(n)?o(n)?.name:n}d({name:e,context:JSON.stringify({chartNumber:t,...a,...r})})}},250)},[o,c,d]),j=b6({request:(0,uq.useCallback)(async function(e){let t=await elJ(e);return x(e=>({...e,[t.chart.number]:el2(t.chart)})),w(gt,t.chart.number,t.chart.configuration),t},[w])}),C=b6({request:(0,uq.useCallback)(async function(e){if(e.chartNumber<0)throw Error("Invalid chart number");let t=await el1(e);return x(e=>({...e,[t.chart.number]:{...e[t.chart.number],name:t.chart.name}})),w("insights_chart_rename",t.chart.number,t.chart.configuration),t},[w])}),k=b6({request:(0,uq.useCallback)(async function(e){if(e.chartNumber<0)throw Error("Invalid chart number");let t=await el1(e);return x(e=>({...e,[t.chart.number]:el2(t.chart)})),w(gr,t.chart.number,t.chart.configuration),t},[w])}),S=b6({request:(0,uq.useCallback)(async function(e){if(e<0)throw Error("Invalid chart number");await el0({chartNumber:e}),x(t=>{if(!t[e])return t;let{[e]:r,...a}=t;return a}),w("insights_chart_delete",e)},[w])}),I=(0,uq.useCallback)((e,t)=>{x(r=>{let a=r[e],n=!a||void 0!==t.filter&&1===Object.keys(t).length&&t.filter===a.localVersion.configuration.filter;return n?r:(w("insights_chart_update_local",e,t),{...r,[e]:{...a,localVersion:{configuration:{...a.localVersion.configuration,...t}}}})})},[w]),N=(0,uq.useCallback)(e=>{x(t=>{let r=t[e];return r?{...t,[e]:{...r,localVersion:r.serverVersion}}:t}),w("insights_chart_discard_local",e)},[w]),_=m1(b);(0,uq.useEffect)(function(){function e(){let e;let t=mS.matchFullPath(window.location.pathname),r=mk.matchFullPath(window.location.pathname);if(t&&t.params.insightNumber)e=parseInt(t.params.insightNumber,10);else{if(!r)return;e=0}let a=_.current(e),n=new URLSearchParams(window.location.search);a&&I(a.number,{...a.serverVersion.configuration,...i(n)})}return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[_,i,I]);let T=(0,uq.useCallback)(e=>{x(t=>{let r=Object.fromEntries(e.map(e=>{let r=el3(e,t[e.number]);return[r.number,r]}));return r[0]=gc(t[0]),r})},[]);return(0,uO.jsx)(Tw.Provider,{value:(0,uq.useMemo)(()=>({chartConfigurations:g,getChartConfigurationByNumber:b,getChartLinkTo:v,getDefaultChart:f,getCreateChartRequest:h,canCreateChart:y,updateChartConfigurations:T}),[g,b,v,f,h,y,T]),children:(0,uO.jsx)($E.Provider,{value:(0,uq.useMemo)(()=>({createChartConfiguration:j,updateChartConfiguration:k,updateChartName:C,destroyChartConfiguration:S,updateLocalChartConfiguration:I,resetLocalChangesForChartNumber:N}),[j,S,k,C,I,N]),children:e})})});function el6(){let{getOverrides:e}=el5(),t=(0,uq.useCallback)(t=>{let r=mT("memex-charts-data")??[],a="time"===t.xAxis.dataSource.column,n=a?fU.defaultBurnupChartName:fU.defaultStatusChartName,l=a?fU.defaultBurnupChartDescription:fU.defaultStatusChartDescription,i={number:0,name:n,configuration:{...t,description:l}},s=[i,...r],o=mS.matchFullPath(window.location.pathname),d=mk.matchFullPath(window.location.pathname),c=null;o&&o.params.insightNumber?c=parseInt(o.params.insightNumber,10):d&&(c=0);let u=new URLSearchParams(window.location.search);return Object.fromEntries(s.map(t=>{let r=el2(t,t.number===c?e(u):void 0);return[r.number,r]}))},[e]);return{getInitialChartState:t}}try{(uE=el4).displayName||(uE.displayName="ChartStateProvider")}catch{}var el7=r(55946);let el8=void 0,el9=(0,el7.r)("github/memex",el8),eie=({children:e,environment:t})=>(0,uO.jsx)(vZ.RelayEnvironmentProvider,{environment:t||el9,children:e});try{(uD=eie).displayName||(uD.displayName="RelayProvider")}catch{}let eit=uJ.vJ`
  html {
    color-scheme: ${e=>e.$colorScheme?.startsWith("dark")?"dark":"light"};
  }

  body.is-dragging {
    overflow-x: hidden;
  }

  body.is-dragging,
  body.is-dragging *,
  body.is-resizing,
  body.is-resizing * {
    user-select: none !important;
  }

  body.is-dragging,
  body.is-dragging * {
    cursor: grabbing !important;

    & a:hover {
      color: inherit;
      text-decoration: inherit;
    }
  }

  #memex-root {
    background-color: ${(0,uG.U2)("colors.canvas.default")};

    mark.find-in-project-highlight {
      background-color: yellow;
      color: black;
    }
  }

  code {
    font-size: 0.9em;
    background-color: ${(0,uG.U2)("colors.neutral.muted")};
    padding: 0.1em;
    border-radius: 0.25em;
  }

  .hide-copy-project-button-in-memex {
    display: none;
  }
`;function eir(){let e=(0,uQ.lk)();if(e)throw e;return null}let eia=(0,uq.memo)(function({basename:e,children:t=null}){let{isInsightsChartViewEnabled:r}=LN(),{isOrganization:a}=yk(),n=UO(),l=UH(),i=(0,uq.useCallback)(e=>r?e:null,[r]),s=(0,uq.useMemo)(()=>{let r=(0,uO.jsx)(MU,{mainAppContent:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(LO,{isProjectPath:!0,children:(0,uO.jsx)(L$,{})}),(0,uO.jsx)(elK,{})]})}),s=(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(LO,{children:(0,uO.jsx)(LU,{title:"Workflows"})}),(0,uO.jsx)(Ih,{})]});return(0,uY.aj)([{path:mx.path,errorElement:(0,uO.jsx)(ErrorBoundary,{fallback:(0,uO.jsx)(Ix,{}),children:(0,uO.jsx)(eir,{})}),element:(0,uO.jsxs)(eil,{children:[(0,uO.jsx)(eii,{}),(0,uO.jsx)(TF,{}),(0,uO.jsx)(Lg,{}),(0,uO.jsx)(Rn,{}),(0,uO.jsx)(uQ.j3,{}),(0,uO.jsx)(LW,{}),t]}),children:fu([{path:mx.path,element:r},{path:my.path,element:r},Vu({children:fu([{path:mI.path,element:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(LO,{children:(0,uO.jsx)(LU,{title:"Archive"})}),(0,uO.jsx)($w,{})]})},{path:mw.path,element:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(LO,{children:(0,uO.jsx)(LU,{title:"Settings"})}),(0,uO.jsx)(Gq,{})]}),children:fu([Vm({path:mC.path,element:(0,uO.jsx)(WB,{}),loader:async()=>(0,uX.PQ)({collaborators:l(),organizationAccessRole:a?await n():null})}),{path:mj.path,element:(0,uO.jsx)(Gs,{})},{path:mw.path,element:(0,uO.jsx)(GN,{})}])},Vd({children:fu([{path:mb.path,element:s},{path:mv.path,element:s}])}),Vo({children:fu([i({path:mk.path,element:(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(LO,{children:(0,uO.jsx)(LU,{title:"Insights"})}),(0,uO.jsx)(U_,{})]}),children:[{path:mk.path,element:(0,uO.jsx)(Uh,{})},{path:mS.path,element:(0,uO.jsx)(Uh,{})}]})])})])}),{path:"*",element:(0,uO.jsx)(mh,{})}])}],{basename:e})},[e,t,a,l,n,i]);return(0,uO.jsx)(uQ.pG,{router:s})}),ein=(0,uq.memo)(function({basename:e,children:t=null}){return(0,uO.jsx)(f2,{children:(0,uO.jsx)(eia,{basename:e,children:t})})}),eil=({children:e,environment:t})=>{eis();let{colorScheme:r}=(0,uz.Fg)();return(0,uO.jsxs)(uO.Fragment,{children:[(0,uO.jsx)(eit,{$colorScheme:r}),(0,uO.jsx)("div",{role:"region",id:"__primerPortalRoot__",style:{zIndex:10,position:"absolute",width:"100%"}}),(0,uO.jsx)(eie,{environment:t,children:(0,uO.jsx)(m6,{children:(0,uO.jsx)(TJ,{children:(0,uO.jsx)(Cy,{children:(0,uO.jsx)(jJ,{children:(0,uO.jsx)(vf,{children:(0,uO.jsx)(I5,{children:(0,uO.jsx)(Iz,{children:(0,uO.jsx)(mu,{children:(0,uO.jsx)(kG,{children:(0,uO.jsx)(Vn,{children:(0,uO.jsx)(wQ,{children:(0,uO.jsx)(el4,{children:(0,uO.jsx)(II,{children:(0,uO.jsx)(G3,{children:(0,uO.jsx)(G1,{children:(0,uO.jsx)(TP,{children:(0,uO.jsx)(La,{children:(0,uO.jsx)(Tl,{children:e})})})})})})})})})})})})})})})})})})})]})},eii=(0,uq.memo)(function(){let e=yq(),{isReadonly:t}=yI(),{isInsightsEnabled:r}=LN(),{returnToViewLinkTo:a}=bP(),{projectViewRoutesMatch:n}=kd(),l=(0,uQ.bS)(mw.pathWithChildPaths),i=(0,uQ.bS)(mb.pathWithChildPaths),s=(0,uQ.bS)(mk.pathWithChildPaths),o=(0,uQ.bS)(mI.pathWithChildPaths),{memex_automation_enabled:d}=ho();return mm(()=>{let c=[];return(n||c.push(["p","Navigate to project views","navigate",()=>e(a)]),t||l||c.push(["s","Navigate to settings","navigate",()=>e(mw.generatePath())]),t||i||!d||c.push(["w","Navigate to workflows","navigate",()=>e(mb.generatePath())]),t||!r||s||c.push(["i","Navigate to insights","navigate",()=>e(mk.generatePath())]),t||o||c.push(["a","Navigate to archive","navigate",()=>e(mI.generatePath())]),0===c.length)?null:["n","Navigate to...",c]},[n,t,l,i,d,r,s,o,e,a]),null}),eis=()=>{let{resolvedColorScheme:e}=(0,uz.Fg)(),t=Ru();(0,uq.useEffect)(()=>{t&&(t.dataset.currentThemeColorScheme=e)},[e,t])};try{(uP=eir).displayName||(uP.displayName="RootBoundary")}catch{}try{(uA=eia).displayName||(uA.displayName="AppRoutes")}catch{}try{(uM=ein).displayName||(uM.displayName="App")}catch{}try{(uL=eil).displayName||(uL.displayName="AppContainer")}catch{}try{(uF=eii).displayName||(uF.displayName="NavigationCommands")}catch{}var eio=r(17689);function eid(e){switch(e){case"light":return"day";case"dark":return"night";default:return e}}let eic={colorMode:"auto",dayScheme:"light",nightScheme:"dark"};function eiu(e){let t,r;return e?(e.light&&(e.light in eio.Z.colorSchemes?t=e.light:e.light.startsWith("light")&&(t="light")),e.dark&&(e.dark in eio.Z.colorSchemes?r=e.dark:e.dark.startsWith("dark")&&(r="dark")),{colorMode:eid(e.mode),dayScheme:t,nightScheme:r}):eic}function eim(){let e=je(eih);return(0,uq.useSyncExternalStore)(eip,()=>{let t=eih();return(0,CR.Z)(e.current,t)?e.current:(e.current=t,t)})}function eip(e){let t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-color-mode","data-light-theme","data-dark-theme"]}),()=>{t.disconnect()}}function eif(){let{dataset:e}=document.documentElement;return{mode:e.colorMode,light:e.lightTheme,dark:e.darkTheme}}function eih(){let e=eif(),{themePreferences:{markdown_fixed_width_font:t,...r}}=yk();return{mode:e.mode??r?.mode,light:e.light??r.light,dark:e.dark??r?.dark}}var eig=r(4312);let eix=new eig.S({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}}),eiy=({basename:e,children:t,rootElement:r})=>{let a=(0,uO.jsx)(Ix,{});return(0,uO.jsx)(Rc.Provider,{value:r,children:(0,uO.jsxs)(uW.aH,{client:eix,children:[(0,uO.jsx)(eib,{children:(0,uO.jsx)(ErrorBoundary,{fallback:a,children:(0,uO.jsx)(ein,{basename:e,children:t})})}),(0,uO.jsx)(uH.t,{position:"bottom-right"})]})})},eib=({children:e})=>{let t=eim();return(0,uO.jsx)(uz.ZP,{...eiu(t),children:(0,uO.jsx)(uU.Z,{display:"contents",children:e})})};try{(uZ=eib).displayName||(uZ.displayName="MemexThemeProvider")}catch{}async function eiv(e,t,r){let a=t?.parentElement;if(!document.getElementById("portal-root")){let e=document.createElement("div");e.setAttribute("id","portal-root"),a?.appendChild(e)}r.render((0,uO.jsx)(uq.StrictMode,{children:e})),t.style.overflow="hidden",t.parentElement?.parentElement&&(t.parentElement.parentElement.style.overflow="hidden")}function eiw(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function eij(e,t,r){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return r}function eiC(e,t){eiw(e,t),t.add(e)}var eik=new WeakSet;let eiS=class ProjectsV2 extends HTMLElement{async connectedCallback(){let e=uB.Z.isEnabled()?(await eij(this,eik,eiI).call(this)).createRoot:uV.s,t=e(this);this.reactRoot=t;let r=mx.matchFullPathOrChildPaths(window.location.pathname);r&&eiv((0,uO.jsx)(eiy,{basename:r.pathnameBase,rootElement:this}),this,t)}disconnectedCallback(){this.reactRoot?.unmount()}constructor(...e){super(...e),eiC(this,eik)}};function eiI(){return r.e("react-profiling").then(r.t.bind(r,62518,19))}"undefined"!=typeof window&&(window.customElements.get("projects-v2")||window.customElements.define("projects-v2",eiS))},15345:(e,t,r)=>{r.d(t,{N:()=>n,x:()=>l});var a=r(86283);function n(e){l(s(e))}function l(e){i(e)}function i(e){let t=a.n4?.querySelector("#js-global-screen-reader-notice");t&&(t.textContent===e?t.textContent=`${e}\u00A0`:t.textContent=e)}function s(e){return(e.getAttribute("aria-label")||e.innerText||"").trim()}},31053:(e,t,r)=>{let a;function n(){return a}function l(){if("undefined"!=typeof document){let e=document.getElementById("client-config");if(e)try{a=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-config",e)}}}r.d(t,{iE:()=>n}),l()},93345:(e,t,r)=>{r.d(t,{BX:()=>ProviderBase,Z4:()=>StaticItemsPage,ck:()=>Item});var a=r(47142),n=r(80425);let StaticItemsPage=class StaticItemsPage{constructor(e,t,r){this.providers=[],this.scopeType="static_items_page",this.title=e,this.scopeId=t,this.providers=[new StaticItemsProvider(r)]}};let StaticItemsProvider=class StaticItemsProvider{async fetch(e){let t=this.fuzzyFilter(this.items,e);return{results:t}}enabledFor(){return!0}clearCache(){}fuzzyFilter(e,t,r=0){if(t.isBlank())return e;let a=[];for(let n of e){let e=n.calculateScore(t.text);e>r&&a.push(n)}return a}constructor(e){this.hasCommands=!0,this.debounce=0;let t=e.length;this.items=e.map((e,r)=>(e.priority=t-r,e))}};let Item=class Item{get matchingFields(){return this.matchFields?this.matchFields:[this.title]}get key(){return`${this.title}-${this.group}-${this.subtitle}-${this.matchFields?.join("-")}`}get id(){return this._id||(this._id=(0,n.k)(this.key).toString()),this._id}calculateScore(e){let t=this.matchingFields.map(t=>this.calculateScoreForField({field:t,queryText:e}));return Math.max(...t)}calculateScoreForField({field:e,queryText:t}){return(0,a.CD)(t,e)?(0,a.Gs)(t,e):-1/0}constructor(e){this.score=0,this.position="",this.title=e.title,this.priority=e.priority,this.group=e.group,this.subtitle=e.subtitle,this.matchFields=e.matchFields,this.typeahead=e.typeahead,this.hint=e.hint,this.icon=e.icon}};let ProviderBase=class ProviderBase{fuzzyFilter(e,t,r=0){if(t.isBlank())return e;let a=[];for(let n of e){let e=n.calculateScore(t.text);e>r&&a.push(n)}return a}}},16730:(e,t,r)=>{r.d(t,{T:()=>l});var a=r(15345),n=r(86283);function l(e){if(!n.n4)return;let t=n.n4.createElement("title");t.textContent=e;let r=n.n4.querySelector("title");r?r.replaceWith(t):n.n4.head.appendChild(t),(0,a.x)(e)}},4412:(e,t,r)=>{r.d(t,{C:()=>l,x:()=>n});var a=r(86283);let n=a.n4?.readyState==="interactive"||a.n4?.readyState==="complete"?Promise.resolve():new Promise(e=>{a.n4?.addEventListener("DOMContentLoaded",()=>{e()})}),l=a.n4?.readyState==="complete"?Promise.resolve():new Promise(e=>{a.iG?.addEventListener("load",e)})},46426:(e,t,r)=>{r.d(t,{$:()=>u,c:()=>c});var a=r(15205),n=r(31053),l=r(86283);function i(){let e=l.n4?.head?.querySelector('meta[name="enabled-features"]')?.content||"";return e.split(",")}function s(){let e=(0,n.iE)();if(e?.featureFlags)return e.featureFlags}function o(){let e=s()||i(),t=e.map(e=>e.toUpperCase());return new Set(t)}let d=l.W6?o:(0,a.Z)(o);function c(e){return d().has(e.toUpperCase())}let u={isFeatureEnabled:c}},10846:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=["labels"],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:r(77097),identifierField:"id"}},name:"searchInputLabelSuggestionsPaginated",selections:[{alias:"labels",args:null,concreteType:"LabelConnection",kind:"LinkedField",name:"__Repository_labels_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"searchInputLabel",selections:[t,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},t],type:"Repository",abstractKey:null}}();a.hash="7b63f86539c0fac47a54ef3bde3c41e8";let n=a},77097:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputLabelSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"searchInputLabelSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputLabelSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r,a,{kind:"InlineFragment",selections:[{alias:null,args:n,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:n,filters:null,handle:"connection",key:"Repository_labels",kind:"LinkedHandle",name:"labels"}],type:"Repository",abstractKey:null}],storageKey:null}]},params:{id:"a070d1f6d4a1baeb814107011a04e7ff",metadata:{},name:"searchInputLabelSuggestionsPaginationQuery",operationKind:"query",text:null}}}();a.hash="7b63f86539c0fac47a54ef3bde3c41e8";let n=a},13303:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],r=[{kind:"Literal",name:"first",value:100}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputLabelSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"searchInputLabelSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputLabelSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:r,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"labels(first:100)"},{alias:null,args:r,filters:null,handle:"connection",key:"Repository_labels",kind:"LinkedHandle",name:"labels"},a],storageKey:null}]},params:{id:"0afc284c83cca58f2326e10aab586ccf",metadata:{},name:"searchInputLabelSuggestionsQuery",operationKind:"query",text:null}}}();a.hash="a97cc6ad8f70cca9b8f704109d9f0319";let n=a},18972:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=["milestones"],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:r(66911),identifierField:"id"}},name:"searchInputMilestoneSuggestionsPaginated",selections:[{alias:"milestones",args:null,concreteType:"MilestoneConnection",kind:"LinkedField",name:"__Repository_milestones_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"MilestoneEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"searchInputMilestone",selections:[t,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed",storageKey:null}]},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},t],type:"Repository",abstractKey:null}}();a.hash="6a182a85da1b4aaa57c5958db49d2080";let n=a},66911:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputMilestoneSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"searchInputMilestoneSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputMilestoneSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r,a,{kind:"InlineFragment",selections:[{alias:null,args:n,concreteType:"MilestoneConnection",kind:"LinkedField",name:"milestones",plural:!1,selections:[{alias:null,args:null,concreteType:"MilestoneEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed",storageKey:null},r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:n,filters:null,handle:"connection",key:"Repository_milestones",kind:"LinkedHandle",name:"milestones"}],type:"Repository",abstractKey:null}],storageKey:null}]},params:{id:"3c21c80d26e4d260a8591b064eebf9fe",metadata:{},name:"searchInputMilestoneSuggestionsPaginationQuery",operationKind:"query",text:null}}}();a.hash="6a182a85da1b4aaa57c5958db49d2080";let n=a},88213:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],r=[{kind:"Literal",name:"first",value:100}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputMilestoneSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"searchInputMilestoneSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputMilestoneSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:r,concreteType:"MilestoneConnection",kind:"LinkedField",name:"milestones",plural:!1,selections:[{alias:null,args:null,concreteType:"MilestoneEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"milestones(first:100)"},{alias:null,args:r,filters:null,handle:"connection",key:"Repository_milestones",kind:"LinkedHandle",name:"milestones"},a],storageKey:null}]},params:{id:"2ae90bb1622608a706e5a01daaf35d30",metadata:{},name:"searchInputMilestoneSuggestionsQuery",operationKind:"query",text:null}}}();a.hash="2b30d6dbe062dd2d42ee7353b2f5ca0b";let n=a},91683:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a={kind:"InlineDataFragment",name:"searchInputLabel"};a.hash="52a949cfd65641f7e70925d735bf135d";let n=a},83792:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a={kind:"InlineDataFragment",name:"searchInputMilestone"};a.hash="25725c8585936addfbf60c431dd10621";let n=a},50022:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"projectId"},t={defaultValue:null,kind:"LocalArgument",name:"workflowNumber"},r=[{alias:null,args:[{fields:[{kind:"Variable",name:"number",variableName:"workflowNumber"},{kind:"Variable",name:"projectId",variableName:"projectId"}],kind:"ObjectValue",name:"input"}],concreteType:"DeleteProjectV2WorkflowByNumberPayload",kind:"LinkedField",name:"deleteProjectV2WorkflowByNumber",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedWorkflowId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"deleteProjectV2WorkflowByNumberMutation",selections:r,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"deleteProjectV2WorkflowByNumberMutation",selections:r},params:{id:"2450a4a64f1dc63de57eacac2fcd3f9f",metadata:{},name:"deleteProjectV2WorkflowByNumberMutation",operationKind:"mutation",text:null}}}();a.hash="5ccdf246729b2e483d88018a9460db8b";let n=a},65722:(e,t,r)=>{r.d(t,{Z:()=>a});let a=()=>void 0},7691:(e,t,r)=>{r.d(t,{Eg:()=>f,Z6:()=>h,ey:()=>p,mB:()=>m});var a=r(47614),n=r(90113),l=r(41141),i=r(65382),s=r(38860);function o(e,t){return t===QUERY_DATE_TOKENS.today?e.getTime():void 0}function d(e,t,r,a){let n=new Date(e.getTime()),l="-"===a?-1:1;switch(r){case QUERY_DATE_UNITS.day:n.setDate(e.getDate()+l*t);break;case QUERY_DATE_UNITS.week:n.setDate(e.getDate()+l*t*7);break;case QUERY_DATE_UNITS.month:n.setMonth(e.getMonth()+l*t);break;case QUERY_DATE_UNITS.year:n.setFullYear(e.getFullYear()+l*t);break;default:return null}return n}function c(e,t,r,a){if(!e)return null;let n=parseInt(e[1],10),l=e[2];a+=r.length+e[0].length;let i=d(t,n,l,r);return i?{newValue:i.toISOString().substring(0,10),length:a}:null}function u(e,t,r){let a=t.token.length,n=e.substring(t.pos+a,t.pos+a+1);if(""===n||" "===n)return{newValue:r.toISOString().substring(0,10),length:a};if("-"===n||"+"===n){let l=e.substring(t.pos+t.token.length+n.length),i=QUERY_DATE_OFFSET_REGEX.exec(l);return c(i,r,n,a)}return null}function m(e){let t=new Map;t.set("searchTerms",[]);let r=e.trim().split(/((?:[^\s"]+|"[^"]*")+)/g).filter(e=>""!==e.trim());for(let e of r){let[r,a]=e.split(":");if(r&&a){if(!t.has(r)){t.set(r,[a]);continue}t.set(r,[...t.get(r),a]);continue}t.set("searchTerms",[...t.get("searchTerms"),e])}return t}function p(e){if(!e)return!1;let t=m(e),r=t.get("sort");return r&&1===r.length&&r[0].startsWith("reactions")||!1}function f(e,t,r){if(e.value in a.G$){let l=e.value;new s.f_(t,{...e,name:a.G$[l],icon:n.Octicon.Not,value:`-${e.value}`,valuesKey:e.value,priority:a.C0},r)}new s.f_(t,e,r)}function h(e,t,r,n,i){if(e.value in a.G$){let s=e.value;new l.r(t,{...e,name:a.G$[s],value:`-${e.value}`,priority:a.C0},r,n,i)}new l.r(t,e,r,n,i)}},45055:(e,t,r)=>{r.d(t,{I:()=>n});var a=r(67294);let n=(0,a.createContext)(null)},17891:(e,t,r)=>{r.d(t,{E:()=>n,M:()=>l});var a=r(67294);let n=(0,a.createContext)(void 0);function l(){let e=(0,a.useContext)(n);return e}},51145:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(44544);let{getItem:n,setItem:l,removeItem:i}=(0,a.Z)("localStorage"),s="REACT_PROFILING_ENABLED",o={enable:()=>l(s,"true"),disable:()=>i(s),isEnabled:()=>!!n(s)},d=o},53729:(e,t,r)=>{r.d(t,{A7:()=>u,ko:()=>d,q1:()=>s});var a=r(15205),n=r(86283);let l=(0,a.Z)(i);function i(){return n.n4?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}let s=(0,a.Z)(o);function o(){return n.n4?.head?.querySelector('meta[name="is-private-instance"]')?.content==="true"}let d=(0,a.Z)(c);function c(){return"enterprise"===l()}let u="webpack"},44544:(e,t,r)=>{r.d(t,{Z:()=>i,_:()=>s});var a=r(86283),n=r(71643);let l=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function i(e,t={throwQuotaErrorsOnSet:!1},r=a.iG,i=e=>e,s=e=>e){let o;try{if(!r)throw Error();o=r[e]||new l}catch{o=new l}let{throwQuotaErrorsOnSet:d}=t;function c(e){t.sendCacheStats&&(0,n.b)({incrementKey:e})}function u(e){try{if(o.removeItem(e),t.ttl){let t=`${e}:expiry`;o.removeItem(t)}}catch(e){}}return{getItem:function(e,t=new Date().getTime()){try{let r=o.getItem(e);if(!r)return null;let a=`${e}:expiry`,n=Number(o.getItem(a));if(n&&t>n)return u(e),u(a),c("SAFE_STORAGE_VALUE_EXPIRED"),null;return c("SAFE_STORAGE_VALUE_WITHIN_TTL"),i(r)}catch(e){return null}},setItem:function(e,r,a=new Date().getTime()){try{if(o.setItem(e,s(r)),t.ttl){let r=`${e}:expiry`,n=a+t.ttl;o.setItem(r,n.toString())}}catch(e){if(d&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:u,clear:o.clear,key:o.key,get length(){return o.length}}}function s(e){return i(e,{throwQuotaErrorsOnSet:!1},window,JSON.parse,JSON.stringify)}},39629:(e,t,r)=>{r.d(t,{LS:()=>l,cl:()=>i,rV:()=>n});var a=r(44544);let{getItem:n,setItem:l,removeItem:i}=(0,a.Z)("sessionStorage")},68202:(e,t,r)=>{r.d(t,{CF:()=>s,QE:()=>m,QW:()=>SoftNavErrorEvent,$g:()=>SoftNavSuccessEvent,FP:()=>b,r_:()=>y,Nb:()=>$,Gj:()=>A,wP:()=>O,OE:()=>M,sj:()=>P,Yl:()=>h,RN:()=>G,TL:()=>v,Ak:()=>F,U6:()=>E,cY:()=>H,LD:()=>g,BT:()=>x,u5:()=>w});var a=r(39629);let n=class SoftNavEvent extends Event{constructor(e,t){super(t),this.mechanism=e}};let SoftNavStartEvent=class SoftNavStartEvent extends n{constructor(e){super(e,m.START)}};let SoftNavSuccessEvent=class SoftNavSuccessEvent extends n{constructor(e,t){super(e,m.SUCCESS),this.visitCount=t}};let SoftNavErrorEvent=class SoftNavErrorEvent extends n{constructor(e,t){super(e,m.ERROR),this.error=t}};let SoftNavEndEvent=class SoftNavEndEvent extends n{constructor(e){super(e,m.END)}};var l=r(71643);let i="stats:soft-nav-duration",s={turbo:"TURBO",react:"REACT","turbo.frame":"FRAME",ui:"UI",hard:"HARD"};function o(){performance.mark(i)}function d(){if(0===performance.getEntriesByName(i).length)return null;performance.measure(i,i);let e=performance.getEntriesByName(i),t=e.pop();return t?t.duration:null}function c(e){(0,l.b)({turboFailureReason:e,turboStartUrl:O(),turboEndUrl:window.location.href})}function u(){let e=d();if(!e)return;let t=s[A()],r=Math.round(e);t===s.react&&document.dispatchEvent(new CustomEvent("staffbar-update",{detail:{duration:r}})),(0,l.b)({requestUrl:window.location.href,softNavigationTiming:{mechanism:t,destination:$()||"rails",duration:r,initiator:V()||"rails"}})}let m=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}}),p="reload",f=0;function h(){f=0,document.dispatchEvent(new Event(m.INITIAL)),R()}function g(e){P()||(j(),document.dispatchEvent(new SoftNavStartEvent(e)),E(e),B(),Z(),o())}function x(e={}){k(e)&&(f+=1,document.dispatchEvent(new SoftNavSuccessEvent(A(),f)),b(e))}function y(e={}){if(!k(e))return;f=0;let t=L()||p;document.dispatchEvent(new SoftNavErrorEvent(A(),t)),C(),c(t),R()}function b(e={}){k(e)&&(C(),document.dispatchEvent(new SoftNavEndEvent(A())),D())}function v(e={}){k(e)&&(u(),document.dispatchEvent(new Event(m.RENDER)))}function w(){document.dispatchEvent(new Event(m.FRAME_UPDATE))}function j(){document.dispatchEvent(new Event(m.PROGRESS_BAR.START))}function C(){document.dispatchEvent(new Event(m.PROGRESS_BAR.END))}function k({skipIfGoingToReactApp:e,allowedMechanisms:t=[]}={}){return P()&&(0===t.length||t.includes(A()))&&(!e||!$())}let S="soft-nav:fail",I="soft-nav:fail-referrer",N="soft-nav:referrer",_="soft-nav:marker",T="soft-nav:react-app-name";function R(){(0,a.LS)(_,"0"),(0,a.cl)(N),(0,a.cl)(S),(0,a.cl)(I),(0,a.cl)(T)}function E(e){(0,a.LS)(_,e)}function D(){(0,a.LS)(_,"0")}function P(){let e=(0,a.rV)(_);return e&&"0"!==e}function A(){return(0,a.rV)(_)}function M(){return Boolean(L())}function L(){return(0,a.rV)(S)}function F(e){(0,a.LS)(S,e||p),(0,a.LS)(I,window.location.href)}function Z(){(0,a.LS)(N,window.location.href)}function O(){return(0,a.rV)(N)||document.referrer}function B(){let e=$();e?(0,a.LS)(T,e):(0,a.cl)(T)}function V(){return(0,a.rV)(T)}function $(){return document.querySelector('meta[name="ui"]')?"ui":document.querySelector("react-app")?.getAttribute("app-name")}var z=r(15345),U=r(86283);let W=Object.freeze({INITIAL:"soft-nav:external:initial",START:"soft-nav:external:start",SUCCESS:"soft-nav:external:success",ERROR:"soft-nav:external:error",RENDER:"soft-nav:external:render"});function H(){U.n4?.addEventListener(m.SUCCESS,function(e){"turbo"===e.mechanism&&(0,z.x)(`${document.title}`)}),U.n4?.addEventListener(W.INITIAL,h),U.n4?.addEventListener(W.START,e=>{g(e.detail.mechanism)}),U.n4?.addEventListener(W.SUCCESS,()=>x()),U.n4?.addEventListener(W.ERROR,()=>y()),U.n4?.addEventListener(W.RENDER,()=>v())}function G(){"undefined"!=typeof navigation&&"undefined"!=typeof NavigateEvent&&"function"==typeof NavigateEvent.prototype?.intercept&&document.addEventListener(m.PROGRESS_BAR.START,()=>{let e=new Promise(e=>{document.addEventListener(m.PROGRESS_BAR.END,e,{once:!0})});navigation.addEventListener("navigate",t=>{t.canIntercept&&t.intercept({scroll:"manual",handler:()=>(history.replaceState(navigation.currentEntry.getState(),"",location.href),e)})},{once:!0}),navigation.navigate(location.href,{history:"replace",state:history.state})})}},86283:(e,t,r)=>{r.d(t,{Qg:()=>a.Qg,W6:()=>a.W6,cF:()=>a.cF,iG:()=>n.iG,jX:()=>n.jX,n4:()=>n.n4,zu:()=>n.zu});var a=r(35647),n=r(73614)},73614:(e,t,r)=>{r.d(t,{iG:()=>n,jX:()=>i,n4:()=>a,zu:()=>l});let a="undefined"==typeof document?void 0:document,n="undefined"==typeof window?void 0:window,l="undefined"==typeof history?void 0:history,i="undefined"==typeof location?{pathname:"",origin:"",search:"",hash:""}:location},35647:(e,t,r)=>{r.d(t,{Qg:()=>l,W6:()=>n,cF:()=>i});var a=r(73614);let n=void 0===a.n4,l=!n;function i(){return!!n||Boolean(a.n4.querySelector('react-app[data-ssr="true"]'))}},71643:(e,t,r)=>{r.d(t,{B:()=>g,b:()=>o});var a=r(86283),n=r(4412),l=r(53729),i=r(46426);let s=[];function o(e,t=!1){!0!==(0,i.c)("BROWSER_STATS_DISABLED")&&(void 0===e.timestamp&&(e.timestamp=new Date().getTime()),e.loggedIn=h(),e.staff=g(),e.bundler=l.A7,s.push(e),t?u():c())}let d=null;async function c(){await n.C,null==d&&(d=window.requestIdleCallback(u))}function u(){if(d=null,!s.length)return;let e=a.n4?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(!e)return;let t=m(s);for(let r of t)f(e,`{"stats": [${r.join(",")}] }`);s=[]}function m(e){let t=[],r=e.map(e=>JSON.stringify(e));for(;r.length>0;)t.push(p(r));return t}function p(e){let t=e.shift(),r=[t],a=t.length;for(;e.length>0&&a<=65536;){let t=e[0].length;if(a+t<=65536){let n=e.shift();r.push(n),a+=t}else break}return r}function f(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}function h(){return!!a.n4?.head?.querySelector('meta[name="user-login"]')?.content}function g(){return!!a.n4?.head?.querySelector('meta[name="user-staff"]')?.content}a.n4?.addEventListener("pagehide",u),a.n4?.addEventListener("visibilitychange",u)},8135:(e,t,r)=>{r.d(t,{I:()=>s,t:()=>o});let a="\\s*(\\[[xX]\\]|\\[[\\s]\\])(?=\\s)",n="^(?:\\s*[-+*]|(?:\\s*\\d+\\.))",l="\\s*(.*?)\\s*$",i=`${n}${a}${l}`;function s(e){let t=RegExp("#{1,6}\\s+.*");return t.test(e)}function o(e){let t=RegExp(i),r=e.split("\n"),o=r.map(e=>e.trim()).map(e=>{if(s(e)||t.test(e))return e;let r=RegExp(n).test(e),i=RegExp(a).test(e),o=e&&RegExp(l).test(e);if(!r&&!i&&!o||!o)return e;let d=e;return r||(d=`- ${e}`),i||(d=`${d.slice(0,2)}[ ] ${d.slice(2)}`),d});return o.join("\n")}},95325:(e,t,r)=>{r.d(t,{JP:()=>x,sS:()=>w,F1:()=>C,V6:()=>j});var a,n,l,i,s,o,d=r(85893),c=r(85529),u=r(70697),m=r(41905),p=r(67294);let f={info:"",success:"Toast--success",error:"Toast--error"},h={info:(0,d.jsx)(c.szr,{}),success:(0,d.jsx)(c.nQG,{}),error:(0,d.jsx)(c.wNq,{})},g=({message:e,timeToLive:t,icon:r,type:a="info",role:n="alert"})=>{let[l,i]=p.useState(!0),{safeSetTimeout:s}=(0,u.Z)();return(0,p.useEffect)(()=>{t&&s(()=>i(!1),t-300)},[s,t]),(0,d.jsx)(m.h,{children:(0,d.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,d.jsxs)("div",{className:`Toast ${f[a]} ${l?"Toast--animateIn":"Toast--animateOut"}`,id:"issue-app-toast","data-testid":`issue-app-toast-${a}`,role:n,children:[(0,d.jsx)("span",{className:"Toast-icon",children:r||h[a]}),(0,d.jsx)("span",{className:"Toast-content",children:e})]})})})};try{(a=g).displayName||(a.displayName="Toast")}catch{}function x({progress:e,radius:t=11,isSuccess:r=!1}){return(0,d.jsxs)("svg",{width:2*t+2,height:2*t+2,"data-target":"tracked-issues-progress.progress","data-circumference":"38",style:{transform:"rotate(-90deg)"},"aria-hidden":"true",focusable:"false",children:[(0,d.jsx)("circle",{stroke:"var(--color-border-default)",strokeWidth:"2",fill:"transparent",cx:"50%",cy:"50%",r:t}),(0,d.jsx)("circle",{style:{transition:"stroke-dashoffset 0.35s"},stroke:r?"var(--color-done-fg)":"var(--color-fg-default)",strokeWidth:"2",strokeDasharray:2*Math.PI*t,strokeDashoffset:2*Math.PI*t*(1-e),strokeLinecap:"round",fill:"transparent",cx:"50%",cy:"50%",r:t})]})}try{(n=x).displayName||(n.displayName="PercentageCircle")}catch{}var y=r(65722);let b=(0,p.createContext)({addToast:y.Z,addPersistedToast:y.Z,clearPersistedToast:y.Z}),v=(0,p.createContext)({toasts:[],persistedToast:null});function w({children:e}){let[t,r]=(0,p.useState)([]),[a,n]=(0,p.useState)(null),{safeSetTimeout:l}=(0,u.Z)(),i=(0,p.useCallback)(function(e){r([...t,e]),l(()=>r(t.slice(1)),5e3)},[t,l]),s=(0,p.useCallback)(function(e){n(e)},[n]),o=(0,p.useCallback)(function(){n(null)},[n]),c=(0,p.useMemo)(()=>({addToast:i,addPersistedToast:s,clearPersistedToast:o}),[s,i,o]),m=(0,p.useMemo)(()=>({toasts:t,persistedToast:a}),[t,a]);return(0,d.jsx)(b.Provider,{value:c,children:(0,d.jsx)(v.Provider,{value:m,children:e})})}function j(){return(0,p.useContext)(b)}try{(l=b).displayName||(l.displayName="ToastContext")}catch{}try{(i=v).displayName||(i.displayName="InternalToastsContext")}catch{}try{(s=w).displayName||(s.displayName="ToastContextProvider")}catch{}function C(){let{toasts:e,persistedToast:t}=(0,p.useContext)(v);return(0,d.jsxs)(d.Fragment,{children:[e.map((e,t)=>(0,d.jsx)(g,{message:e.message,icon:e.icon,timeToLive:5e3,type:e.type,role:e.role},t)),t&&(0,d.jsx)(g,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{(o=C).displayName||(o.displayName="Toasts")}catch{}},78249:(e,t,r)=>{r.d(t,{g:()=>l});var a=r(67294),n=r(86283);function l(e,t){n.Qg&&(0,a.useLayoutEffect)(e,t)}},45222:(e,t,r)=>{r.d(t,{h:()=>p});var a,n=r(85893),l=r(42379),i=r(15173),s=r(41905),o=r(94184),d=r.n(o),c=r(67294),u=r(15388);let m=u.ZP.span`
  &::before {
    position: absolute;
    z-index: 1000001;
    display: none;
    width: 0px;
    height: 0px;
    color: ${(0,l.U2)("colors.neutral.emphasisPlus")};
    pointer-events: none;
    content: '';
    border: 6px solid transparent;
    opacity: 0;
  }
  &::after {
    position: absolute;
    z-index: 1000000;
    display: none;
    padding: 0.5em 0.75em;
    font: normal normal 11px/1.5 ${(0,l.U2)("fonts.normal")};
    -webkit-font-smoothing: subpixel-antialiased;
    color: ${(0,l.U2)("colors.fg.onEmphasis")};
    text-align: center;
    text-decoration: none;
    text-shadow: none;
    text-transform: none;
    letter-spacing: normal;
    word-wrap: break-word;
    white-space: pre;
    pointer-events: none;
    content: attr(aria-label);
    background: ${(0,l.U2)("colors.neutral.emphasisPlus")};
    border-radius: ${(0,l.U2)("radii.1")};
    opacity: 0;
  }
  /* delay animation for tooltip */
  @keyframes tooltip-appear {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  &.tooltipped-open,
  &:hover,
  &:active,
  &:focus {
    &::before,
    &::after {
      display: inline-block;
      text-decoration: none;
      animation-name: tooltip-appear;
      animation-duration: 0.1s;
      animation-fill-mode: forwards;
      animation-timing-function: ease-in;
      animation-delay: 0.4s;
    }
  }

  &.tooltipped-no-delay.tooltipped-open,
  &.tooltipped-no-delay:hover,
  &.tooltipped-no-delay:active,
  &.tooltipped-no-delay:focus {
    &::before,
    &::after {
      animation-delay: 0s;
    }
  }

  /* Tooltipped south */
  &.tooltipped-s,
  &.tooltipped-se,
  &.tooltipped-sw {
    &::after {
      top: 100%;
      right: 50%;
      margin-top: 6px;
    }
    &::before {
      top: auto;
      right: 50%;
      bottom: -7px;
      margin-right: -6px;
      border-bottom-color: ${(0,l.U2)("colors.neutral.emphasisPlus")};
    }
  }
  &.tooltipped-se {
    &::after {
      right: auto;
      left: 50%;
      margin-left: -${(0,l.U2)("space.3")};
    }
  }
  &.tooltipped-sw::after {
    margin-right: -${(0,l.U2)("space.3")};
  }
  /* Tooltips above the object */
  &.tooltipped-n,
  &.tooltipped-ne,
  &.tooltipped-nw {
    &::after {
      right: 50%;
      bottom: 100%;
      margin-bottom: 6px;
    }
    &::before {
      top: -7px;
      right: 50%;
      bottom: auto;
      margin-right: -6px;
      border-top-color: ${(0,l.U2)("colors.neutral.emphasisPlus")};
    }
  }
  &.tooltipped-ne {
    &::after {
      right: auto;
      left: 50%;
      margin-left: -${(0,l.U2)("space.3")};
    }
  }
  &.tooltipped-nw::after {
    margin-right: -${(0,l.U2)("space.3")};
  }
  /* Move the tooltip body to the center of the object. */
  &.tooltipped-s::after,
  &.tooltipped-n::after {
    transform: translateX(50%);
  }
  /* Tooltipped to the left */
  &.tooltipped-w {
    &::after {
      right: 100%;
      bottom: 50%;
      margin-right: 6px;
      transform: translateY(50%);
    }
    &::before {
      top: 50%;
      bottom: 50%;
      left: -7px;
      margin-top: -6px;
      border-left-color: ${(0,l.U2)("colors.neutral.emphasisPlus")};
    }
  }
  /* tooltipped to the right */
  &.tooltipped-e {
    &::after {
      bottom: 50%;
      left: 100%;
      margin-left: 6px;
      transform: translateY(50%);
    }
    &::before {
      top: 50%;
      right: -7px;
      bottom: 50%;
      margin-top: -6px;
      border-right-color: ${(0,l.U2)("colors.neutral.emphasisPlus")};
    }
  }
  &.tooltipped-align-right-2::after {
    right: 0;
    margin-right: 0;
  }
  &.tooltipped-align-right-2::before {
    right: 15px;
  }
  &.tooltipped-align-left-2::after {
    left: 0;
    margin-left: 0;
  }
  &.tooltipped-align-left-2::before {
    left: 10px;
  }
  ${i.Z};
`,p=(0,c.forwardRef)(function({direction:e="n",className:t,text:r,noDelay:a,align:l,wrap:i,open:o=!1,portalProps:c={},...u},p){let f=d()(t,`tooltipped-${e}`,l&&`tooltipped-align-${l}-2`,a&&"tooltipped-no-delay",i&&"tooltipped-multiline",o&&"tooltipped-open");return(0,n.jsx)(s.h,{...c,children:(0,n.jsx)(m,{ref:p,role:"tooltip","aria-label":r,...u,sx:{position:"fixed",zIndex:1,...u.sx},className:f})})});try{(a=p).displayName||(a.displayName="ControlledTooltip")}catch{}},22011:(e,t,r)=>{r.d(t,{u:()=>u});var a,n=r(85893),l=r(48030),i=r(67294),s=r(45222);let o=e=>{let t=getComputedStyle(e,null);return["overflow","overflow-y","overflow-x"].some(e=>{let r=t.getPropertyValue(e);return"auto"===r||"scroll"===r})},d=(e,t)=>e&&null!==e.parentNode?d(e.parentNode,t.concat([e])):t;function c(e){if(!(e instanceof HTMLElement||e instanceof SVGElement))return;let t=d(e.parentNode,[]);for(let e of t)if((e instanceof HTMLElement||e instanceof SVGElement)&&o(e))return e;return document.scrollingElement||document.documentElement}let u=(0,i.forwardRef)(function({contentRef:e,open:t,anchoredPositionAlignment:r,anchorSide:a,anchorOffset:o,alignmentOffset:d,allowOutOfBounds:u,...m},p){let f=(0,i.useRef)(null);(0,i.useImperativeHandle)(p,()=>f.current);let h=(0,i.useRef)({left:0,top:0}),g=(0,i.useSyncExternalStore)((0,i.useCallback)(r=>{if(!f.current||!e.current||!t)return()=>void 0;let a=c(e.current);return a?.addEventListener("scroll",r),()=>{a?.removeEventListener("scroll",r)}},[e,t]),(0,i.useCallback)(()=>{if(!f.current||!e.current)return h.current;let t=(0,l.N)(f.current,e.current,{align:r??"center",side:a??"outside-top",alignmentOffset:d??0,anchorOffset:o??0,allowOutOfBounds:u});return(t.left!==h.current.left||t.top!==h.current.top)&&(h.current=t),h.current},[e,d,o,r,a,u]));return(0,n.jsx)(s.h,{...m,ref:f,open:t,style:{position:"absolute",...g,...m.style}})});try{(a=u).displayName||(a.displayName="PortalTooltip")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","vendors-node_modules_stacktrace-parser_dist_stack-trace-parser_esm_js-node_modules_github_bro-a4c183","vendors-node_modules_primer_octicons-react_dist_index_esm_js-node_modules_primer_react_lib-es-ca6dae","vendors-node_modules_primer_react_lib-esm_Button_index_js-node_modules_primer_react_lib-esm_L-5634ab","vendors-node_modules_primer_behaviors_dist_esm_focus-zone_js","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_Overlay_Overlay_js-node_modules_primer_react_lib-es-fa1130","vendors-node_modules_primer_react_lib-esm_TextInput_TextInput_js","vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_primer_behaviors_dist_esm_scroll-into-view_js-node_modules_primer_react_-04bb1b","vendors-node_modules_primer_react_lib-esm_FormControl_FormControl_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_js","vendors-node_modules_date-fns_esm_addDays_index_js-node_modules_date-fns_esm_addMonths_index_-c2644a","vendors-node_modules_date-fns_esm_addWeeks_index_js-node_modules_date-fns_esm_addYears_index_-979617","vendors-node_modules_primer_react_lib-esm_Heading_Heading_js-node_modules_primer_react_lib-es-20c766","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_primer_react_lib-esm_Dialog_ConfirmationDialog_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_alive-client_dist-bf5aa2","vendors-node_modules_chartjs-adapter-date-fns_dist_chartjs-adapter-date-fns_esm_js","vendors-node_modules_primer_react_lib-esm_TreeView_TreeView_js","vendors-node_modules_date-fns_esm_eachDayOfInterval_index_js-node_modules_date-fns_esm_isSame-86aef2","vendors-node_modules_react-relay_index_js","vendors-node_modules_primer_react_lib-esm_SelectPanel_SelectPanel_js-node_modules_react-route-fa6f3c","vendors-node_modules_primer_react_lib-esm_Label_Label_js-node_modules_primer_react_lib-esm_Po-ba82d9","vendors-node_modules_fzy_js_index_js-node_modules_github_markdown-toolbar-element_dist_index_js","vendors-node_modules_primer_react_lib-esm_Avatar_Avatar_js-node_modules_primer_react_lib-esm_-7ceb5a","vendors-node_modules_primer_react_lib-esm_AvatarStack_AvatarStack_js-node_modules_primer_reac-0b4173","vendors-node_modules_dnd-kit_sortable_dist_sortable_esm_js-node_modules_primer_react_lib-esm_-c90148","vendors-node_modules_lodash-es_isEqual_js-node_modules_lodash-es_pickBy_js","vendors-node_modules_allex_crc32_lib_crc32_esm_js-node_modules_dnd-kit_modifiers_dist_modifie-2a9efb","ui_packages_insights-charts_src_index_ts","ui_packages_query-builder-element_query-builder-element_ts","ui_packages_relay-environment_relay-environment_ts","ui_packages_issue-viewer_index_ts","ui_packages_query-builder_providers_index_ts-ui_packages_query-builder_QueryBuilder_tsx","ui_packages_list-view_list-view_ts-ui_packages_paths_path_ts-ui_packages_query-builder_consta-1f8527"],()=>t(58755));var r=e.O()}]);
//# sourceMappingURL=memex-65f8adf7c09e.js.map